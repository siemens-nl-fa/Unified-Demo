/* SIMATIC WINCC UA/WebUX 3.1.8 File version:  WinCC Unified PC Runtime {%version%}, Copyright (C) Siemens AG 2023. All Rights Reserved. */
{{var PWC=PWC||{},PWC=(PWC.Components=PWC.Components||{},PWC.Components.Grid=PWC.Components.Grid||{},PWC.Components.Grid.ColumnHeader=function(w){"use strict";function W(e,t){w.columns.push({x:e.rectX,width:e.width,dx:e.dx,textAnchor:e.textAnchor,columnName:e.textContent,contentMode:t,splitRatio:e.splitRatio,horizontalAlignment:e.horizontalAlignment,verticalAlignment:e.verticalAlignment,textPosition:e.textPosition,spacing:e.spacing,graphicStretchMode:e.graphicStretchMode,sortDirection:e.sortDirection,sortOrder:e.sortOrder,id:e.id,useColoumnBackgroundColor:e.useColoumnBackgroundColor,useColumnForeColor:e.useColumnForeColor,actualColumnIndex:e.actualColumnIndex,flashingType:e.flashingType,allowSort:e.allowSort,isMaxResizeLimited:e.isMaxResizeLimited,isMinResizeLimited:e.isMinResizeLimited,textTrimming:e.textTrimming,backColor:e.backColor,foreColor:e.foreColor,alternateBackColor:e.alternateBackColor,alternateForeColor:e.alternateForeColor})}function n(){for(;o.firstChild;)o.removeChild(o.firstChild)}var G=null,D=null,o=null,c=null,H=12,I=[],i=[],A={path:null,child:null},u=null;return{init:function(){G||(G=w.utils.createSVG("g",null,null,null),w.utils.setSVGAttribute(G,"clip-path","url(#"+w.clipPath.id+")"),w.parentGroup.appendChild(G))},clearGroup:function(){G&&(D=null,w.utils.clearElement(G)),A.path&&(w.svgDef.removeChild(A.path),A.path=null,A.child=null);for(var e=0;e<I.length;e++)null!==I[e].path&&I[e].path.parentNode===w.svgDef&&w.svgDef.removeChild(I[e].path);for(var t=I.length=0;t<i.length;t++)null!==i[t].path&&i[t].path.parentNode===w.svgDef&&w.svgDef.removeChild(i[t].path);i.length=0,n()},createColumns:function(e){var t,n,i,o,l,r,a,s,d,c,u,m=w.model.gridColumns,p=0,C=w.utils.getCellConfig(),h=w.utils.getCellConfig(),g=0,f=w.tableProps.x,y=null;for(w.headerSettings.columnHeaderType!==PWC.Components.Grid.HmiDataGridHeaderType.None&&(A.path=w.utils.createSVG("clipPath",{id:w.id+"_columnHeader"}),w.svgDef.appendChild(A.path),A.child=w.utils.createSVG("rect",{x:w.tableProps.x,y:w.tableProps.y+w.model.cellPadding.top,width:w.model.width,height:w.getHeaderHeight()-(w.model.cellPadding.top+w.model.cellPadding.bottom+w.model.gridLineWidth)}),A.path.appendChild(A.child),u=w.utils.getTitleFontPropeties(w.model),D?w.utils.setSVGStyles(D,u):(D=w.utils.createSVG("g",{id:w.id+"_HeaderGroup"},null,u),G.appendChild(D)),u={vLines:null,hLines:null,offsetVLines:null,dShadowLines:null,lShadowLines:null},c={stroke:w.headerSettings.headerGridLineColor,strokeWidth:w.model.gridLineWidth,"pointer-events":"none"},l={stroke:"transparent",strokeWidth:H},w.model.gridLineWidth>l.strokeWidth&&(l.strokeWidth=w.model.gridLineWidth),u.vLines=w.utils.createSVG("g",{id:w.id+"_VLinesHeaderGroup"},null,c),G.appendChild(u.vLines),u.offsetVLines=w.utils.createSVG("g",{id:w.id+"_OffSetVLinesHeaderGroup"},null,l),G.appendChild(u.offsetVLines),u.hLines=w.utils.createSVG("g",{id:w.id+"_HLinesHeaderGroup"},null,c),G.appendChild(u.hLines),y=u),C.height=h.height=w.tableProps.cellHeight,C.rectY=h.rectY=w.tableProps.y,C.fill=w.headerSettings.headerBackColor,C.forecolor=w.headerSettings.headerForeColor,C.dx=h.dx=0,C.contentHeight=w.tableProps.contentHeight,h.contentHeight=w.tableProps.contentHeight,g=w.getRowHeaderWidth(),null!==e&&(p=e);p<m.length;p++)h.actualColumnIndex=p,C.id=h.id=w.id+"_column"+p,i=m[p].width+w.model.gridLineWidth,(n=f+g)<w.tableProps.x+w.tableProps.width&&(o=m[p].headerSettings,C.width=h.width=i,C.rectX=h.rectX=n,C.textX=h.textX=n,C.imgX=h.imgX=n,C.textY=h.textY=w.tableProps.y,C.imgY=h.imgY=w.tableProps.y,C.splitRatio=o.content.splitRatio,h.splitRatio=m[p].content.splitRatio,C.textPosition=o.content.textPosition,h.textPosition=m[p].content.textPosition,C.spacing=o.content.spacing,h.spacing=m[p].content.spacing,C.graphicStretchMode=o.content.graphicStretchMode,h.graphicStretchMode=m[p].content.graphicStretchMode,C.imageSize=w.getImageSize(PWC.Components.Grid.CellType.ColumnHeader),C.dy=h.dy=0,h.horizontalAlignment=m[p].content.horizontalAlignment,h.verticalAlignment=m[p].content.verticalAlignment,C.horizontalAlignment=o.content.horizontalAlignment,C.verticalAlignment=o.content.verticalAlignment,C.textTrimming=o.content.textTrimming,h.sortDirection=m[p].sortDirection,h.sortOrder=m[p].sortOrder,h.useColoumnBackgroundColor=m[p].useColoumnBackgroundColor,h.useColumnForeColor=m[p].useColumnForeColor,h.flashingType=m[p].flashingType,h.allowSort=m[p].allowSort,h.textTrimming=m[p].content.textTrimming,r=m[p],a=h,d=s=!(d=s=void 0),0===r.minimumWidth&&(s=!1),0===r.maximumWidth&&(d=!1),s&&d?r.minimumWidth<r.maximumWidth?(a.isMaxResizeLimited=!0,a.isMinResizeLimited=!0):(a.isMaxResizeLimited=!1,a.isMinResizeLimited=!1):!s&&d?(a.isMaxResizeLimited=!0,a.isMinResizeLimited=!1):s&&!d?(a.isMaxResizeLimited=!1,a.isMinResizeLimited=!0):(a.isMaxResizeLimited=!1,a.isMinResizeLimited=!1),h.backColor=m[p].backColor,h.foreColor=m[p].foreColor,h.alternateBackColor=m[p].alternateBackColor,h.alternateForeColor=m[p].alternateForeColor,w.setContentAlignment(C,C.horizontalAlignment),w.setContentAlignment(h,m[p].content.horizontalAlignment),C.textContent=null,C.imageUrl=null,C.imageXOffset=0,C.graphicScaleX=1,C.graphicScaleY=1,C.textScaleX=1,C.textScaleY=1,C.imageYOffset=0,C.textYOffset=0,C.textXOffset=0,C.fillOpacity=1,C.imageFilter="none",C.rotationAngle=0,C.textWidth=null,C.textHeight=null,C.tiledContentHeight=0,C.tiledContentWidth=0,C.tiledContentId=w.id+"_columnHeader_"+p,r=C,s=h.id,d=void 0,(a={path:null,child:null}).path=w.utils.createSVG("clipPath",{id:s}),w.svgDef.appendChild(a.path),s=w.model.cellPadding.left,d=w.model.cellPadding.left+w.model.cellPadding.right+w.model.gridLineWidth,a.child=w.utils.createSVG("rect",{x:r.rectX+s,y:w.tableProps.y,width:0<r.width-d?r.width-d:0,height:w.tableProps.height}),a.path.appendChild(a.child),I.push(a),D&&w.headerSettings.columnHeaderType!==PWC.Components.Grid.HmiDataGridHeaderType.None&&(t=w.createEmptyCell(C,"header-cell",null,w.id+"_columnHeader"),s=w.getColumnHeaderText(p),w.handleCellContent(PWC.Components.Grid.CellType.ColumnHeader,C,s,o.graphic,p),w.modifyCell(t,C,PWC.Components.Grid.CellType.ColumnHeader,w.model.selectEmptyCell),D.appendChild(t),t=null),h.textContent=m[p].headerSettings.text,W(h,m[p].content.contentMode),C.textPosition=null),f=n,g=i;if(l=w.getTotalColumnWidth(),w.model.autoCompleteColumns&&l<w.tableProps.width-w.getRowHeaderWidth()&&(C.width=w.tableProps.width-w.getRowHeaderWidth()-l,C.height=w.getHeaderHeight(),C.id=null,C.rectX=f+g,C.backColor=w.model.backColor,C.alternateBackColor=w.model.alternateBackColor,C.textContent=null,C.actualColumnIndex=null,D&&w.headerSettings.columnHeaderType!==PWC.Components.Grid.HmiDataGridHeaderType.None&&(t=w.createEmptyCell(C,"header-cell"),D.appendChild(t),t=null),W(C,"autocomplete")),w.headerSettings.columnHeaderType!==PWC.Components.Grid.HmiDataGridHeaderType.None){var S=y,b={x1:0,y1:0,x2:0,y2:0},P=w.getHeaderHeight(),v=w.columns.length,x=w.tableProps.defaultCursorStyle;if(S.vLines)for(var T=0;T<v;T++)"autocomplete"!==w.columns[T].contentMode&&(b.x1=w.columns[T].x+w.columns[T].width-w.model.gridLineWidth/2,b.x2=b.x1,b.y1=w.tableProps.y,b.y2=w.tableProps.y+P,w.appMode===PWC.Components.AppMode.RUNTIME&&w.model.enabled&&(x=w.headerSettings.allowColumnResize?"e-resize":"cell"),S.vLines.appendChild(w.utils.createSVG("line",b,null)),S.offsetVLines)&&S.offsetVLines.appendChild(w.utils.createSVG("line",b,null,{cursor:x}));c=y,u={x1:0,y1:w.tableProps.y,x2:0,y2:w.tableProps.y},e=w.tableProps.width-w.getRowHeaderWidth(),y=w.getTotalColumnWidth(),c.hLines&&((w.model.autoCompleteColumns||e<y)&&(y=e),u.x1=w.tableProps.x+w.getRowHeaderWidth(),u.x2=u.x1+y,u.y1+=w.getHeaderHeight()-w.model.gridLineWidth/2,u.y2=u.y1,c.hLines.appendChild(w.utils.createSVG("line",u)))}},getChild:function(e){var t=null;return t=D?D.childNodes[e]:t},displayResizeLine:function(e){var t=null,n={x1:0,y1:0,x2:0,y2:0,opacity:.4},i=w.tableProps.height;n.x1=w.columns[e].x+w.columns[e].width-w.model.gridLineWidth/2,n.x2=n.x1,n.y1=w.tableProps.y,n.y2=w.tableProps.y+i,t=w.utils.createSVG("line",n,null,{stroke:"#8B668B","stroke-width":H,"pointer-events":"none"}),o.appendChild(t)},clearResizeLine:n,displayReorderColumn:function(e,t,n){var i,o=w.utils.getCellConfig(),l=w.utils.getTitleFontPropeties(w.model),e=w.columns[e].actualColumnIndex,t=w.columns[t],r=null,a=null,s=w.getColumnHeaderText(e),d=(i=w.model.gridColumns[e].headerSettings).graphic;o.height=w.tableProps.cellHeight,o.contentHeight=w.tableProps.contentHeight,o.horizontalAlignment=i.content.horizontalAlignment,o.verticalAlignment=i.content.verticalAlignment,o.textPosition=i.content.textPosition,o.spacing=i.content.spacing,o.splitRatio=i.content.splitRatio,o.graphicStretchMode=i.content.graphicStretchMode,o.rectY=o.textY=o.imgY=w.tableProps.y,o.rectX=o.textX=o.imgX=t.x,o.width=t.width,n?(o.fill=w.headerSettings.headerSelectionBackColor,o.forecolor=w.headerSettings.headerSelectionForeColor):(o.fill="#8B668B",o.forecolor=w.headerSettings.headerForeColor),i=w.getTextBBoxInfo(PWC.Components.Grid.CellType.ColumnHeader,o.textContent),w.setContentDims(o,i),o.imageSize=w.getImageSize(PWC.Components.Grid.CellType.ColumnHeader),w.setContentAlignment(o,o.horizontalAlignment),r=w.createEmptyCell(o,null,null),t=o,n=r,u||(i=w.utils.createSVG("clipPath",{id:w.id+"_ReorderColumnClipPath"}),t=w.utils.createSVG("rect",{x:t.rectX,y:t.rectY,width:t.width-w.model.gridLineWidth,height:t.height-w.model.gridLineWidth}),i.appendChild(t),(u=w.utils.createSVG("g",{id:w.id+"_ReorderColumnGroup"})).appendChild(i),w.svgDef.appendChild(u),n&&w.utils.setSVGAttribute(n,"clip-path","url(#"+w.id+"_ReorderColumnClipPath)"),i=null),w.utils.setSVGStyles(r,l),w.handleCellContent(PWC.Components.Grid.CellType.ColumnHeader,o,s,d,e),w.modifyCell(r,o,PWC.Components.Grid.CellType.ColumnHeader,w.model.selectEmptyCell),(a=r.getElementsByTagName("rect")[0])&&(w.utils.setSVGAttribute(a,"fill-opacity","0.8"),w.utils.setSVGStyles(a,{pointerEvents:"none"})),c.appendChild(r),r=null},clearReorderColumn:function(){for(u&&(w.svgDef.removeChild(u),u=null);c.firstChild;)c.removeChild(c.firstChild)},createHighlightLinesGroup:function(){o||(o=w.utils.createSVG("g",null),w.utils.setSVGAttribute(o,"id",w.id+"_highlightLinesGroup"),w.utils.setSVGAttribute(o,"clip-path","url(#"+w.clipPath.id+")"),w.parentGroup.appendChild(o))},createHighlightColHeaderGroup:function(){c||(c=w.utils.createSVG("g",null),w.utils.setSVGAttribute(c,"id",w.id+"_highlightColumnHeadersGroup"),w.utils.setSVGAttribute(c,"clip-path","url(#"+w.clipPath.id+")"),w.parentGroup.appendChild(c))},clearData:function(){c=o=D=G=null,I.length=0,i.length=0,A.path=null,A.child=null,u=null}}},PWC||{}),PWC=(PWC.Components=PWC.Components||{},PWC.Components.Grid=PWC.Components.Grid||{},PWC.Components.Grid.DataRow=function(d){"use strict";function t(e){e<a.hLines.childNodes.length&&a.hLines.removeChild(a.hLines.childNodes[e])}var n=null,c=null,a={vLines:null,hLines:null,offsetVLines:null},s=null,u=null,i=12;return{init:function(){n||(n=d.utils.createSVG("g",null,null,null),d.utils.setSVGAttribute(n,"clip-path","url(#"+d.clipPath.id+")"),d.parentGroup.appendChild(n));var e=d.utils.getTableFontPropeties(d.model),t={id:d.id+"_DataGroup"};c?d.utils.setSVGStyles(c,e):(c=d.utils.createSVG("g",t,null,e),n.appendChild(c));t={stroke:d.model.gridLineColor,strokeWidth:d.model.gridLineWidth,pointerEvents:"none"},e={stroke:"transparent",strokeWidth:i};a.vLines||(a.vLines=d.utils.createSVG("g",{id:d.id+"_VLinesDataGroup"}),n.appendChild(a.vLines));a.hLines||(a.hLines=d.utils.createSVG("g",{id:d.id+"_HLinesDataGroup"}),n.appendChild(a.hLines));d.model.gridLineWidth>e.strokeWidth&&(e.strokeWidth=d.model.gridLineWidth);d.headerSettings.columnHeaderType!==PWC.Components.Grid.HmiDataGridHeaderType.None||a.offsetVLines||(a.offsetVLines=d.utils.createSVG("g",{id:d.id+"_OffSetVLinesDataGroup"}),n.appendChild(a.offsetVLines));d.utils.setSVGStyles(a.vLines,t),d.utils.setSVGStyles(a.hLines,t),a.offsetVLines&&d.utils.setSVGStyles(a.offsetVLines,e);t={id:d.id+"_DataCloneSourceGroup"};s||(s=d.utils.createSVG("g",t,null,{display:"none"}),n.appendChild(s))},createVLines:function(){if(d.model.gridLineVisibility===PWC.Components.Grid.HmiGridLinesSimple.Vertical||d.model.gridLineVisibility===PWC.Components.Grid.HmiGridLinesSimple.HorizontalAndVertical){var e,t={x1:0,y1:d.tableProps.y,x2:0,y2:d.tableProps.y},n=d.columns.length,i=c.childNodes.length,o=a.vLines.childNodes.length,l=null,r=d.tableProps.defaultCursorStyle;for(t.y1+=d.getHeaderHeight(),t.y2=t.y1,a.offsetVLines&&(l=a.offsetVLines.childNodes.length),d.model.autoCompleteRows?t.y2+=d.dataMapper.getViewPortSize()*d.tableProps.cellHeight:t.y2+=i*d.tableProps.cellHeight,e=0;e<n;e++)"autocomplete"!==d.columns[e].contentMode&&(t.x1=d.columns[e].x+d.columns[e].width-d.model.gridLineWidth/2,t.x2=t.x1,e<o?d.utils.setSVGAttribute(a.vLines.childNodes[e],"y2",t.y2):a.vLines.appendChild(d.utils.createSVG("line",t)),d.headerSettings.columnHeaderType===PWC.Components.Grid.HmiDataGridHeaderType.None)&&a.offsetVLines&&(d.appMode===PWC.Components.AppMode.RUNTIME&&d.model.enabled&&(r=d.headerSettings.allowColumnResize?"e-resize":"cell"),e<l?d.utils.setSVGAttribute(a.offsetVLines.childNodes[e],"y2",t.y2):a.offsetVLines.appendChild(d.utils.createSVG("line",t,null,{cursor:r})))}},createHLine:function(e){var t,n,i;d.model.gridLineVisibility!==PWC.Components.Grid.HmiGridLinesSimple.Horizontal&&d.model.gridLineVisibility!==PWC.Components.Grid.HmiGridLinesSimple.HorizontalAndVertical||(t={x1:0,y1:0,x2:0,y2:0},n=d.tableProps.width-d.getRowHeaderWidth(),i=0,d.model.autoCompleteColumns||(i=d.getTotalColumnWidth()),(d.model.autoCompleteColumns||n<i)&&(i=n),t.x1=d.tableProps.x+d.getRowHeaderWidth(),t.x2=t.x1+i,t.y1=d.tableProps.y+d.getHeaderHeight()+(e+1)*d.tableProps.cellHeight-d.model.gridLineWidth/2,t.y2=t.y1,a.hLines.appendChild(d.utils.createSVG("line",t)))},deleteHLine:t,getChildCount:function(){var e=0;return e=c?c.childNodes.length:e},getChild:function(e){return c.childNodes[e]},append:function(e){c.appendChild(e)},deleteRow:function(e){null!==e&&c.childNodes[e]&&(c.removeChild(c.childNodes[e]),t(e))},getEmptyRow:function(e){var t,n,i,o,l,r,a=!0;if(u||(a=!1,u=function(e){for(var t,n={},i=null,o=d.utils.createSVG("g",{class:"row-group"},null,{textDecoration:"inherit"}),t=0;t<d.columns.length;t++){n.width=d.columns[t].width;n.height=d.tableProps.cellHeight;n.rectX=d.columns[t].x;n.rectY=d.tableProps.y;n.fill=d.model.backColor;if(d.columns[t].contentMode!=="autocomplete")n.id=d.id+"_column"+d.columns[t].actualColumnIndex;i=d.createEmptyCell(n,"row-cell",null,e);o.appendChild(i);n.id=null;i=null}return o}(e),s.appendChild(u)),t=d.utils.createSVG("g",{},u),a)for(o=t.childNodes.length,n=0;n<o;n++)for(r=(l=t.childNodes[n]).childNodes.length,i=0;i<r;i++)"g"===l.childNodes[i].tagName&&"content_rowClip"===l.childNodes[i].id&&d.utils.setSVGAttribute(l.childNodes[i],"clip-path","url(#"+e+")");return t},modifyRow:function(e,t,n,i){var o,l,r,a,s=d.utils.getCellConfig();if(null!==e&&null!==t)for(s.contentHeight=d.tableProps.contentHeight,l=d.tableProps.y+d.getHeaderHeight()+t*d.tableProps.cellHeight,o=0;o<e.childNodes.length;o++)"autocomplete"===(a=d.columns[o]).contentMode?(s.fill=d.model.backColor,s.forecolor=d.model.foreColor):d.utils.isIndexEven(t)?(s.fill=a.backColor,s.forecolor=a.foreColor):(s.fill=a.alternateBackColor,s.forecolor=a.alternateForeColor),s.width=a.width,s.height=d.tableProps.cellHeight,s.rectX=s.textX=s.imgX=a.x,s.rectY=s.textY=s.imgY=l,s.dx=a.dx,s.textAnchor=a.textAnchor,s.horizontalAlignment=a.horizontalAlignment,s.verticalAlignment=a.verticalAlignment,s.imageSize=d.getImageSize(PWC.Components.Grid.CellType.DataRow),s.textContent=null,s.imageUrl=null,s.imageXOffset=0,s.textXOffset=0,s.imageYOffset=0,s.rotationAngle=0,s.textWidth=null,s.textHeight=null,s.textYOffset=0,s.graphicScaleX=1,s.graphicScaleY=1,s.textScaleX=1,s.textScaleY=1,s.dy=0,s.textPosition=a.textPosition,s.spacing=a.spacing,s.graphicStretchMode=a.graphicStretchMode,s.fillOpacity=1,s.imageFilter="none",s.id=a.id,s.tiledContentHeight=0,s.tiledContentWidth=0,s.fontStrikeOut="inherit",s.splitRatio=a.splitRatio,s.textTrimming=a.textTrimming,null==n||"autocomplete"===a.contentMode?d.setCellStyleOverrideEnabled(s,t,o,null,null):(a=d.columns[o].actualColumnIndex,s.tiledContentId=d.id+"_row_"+n+"_column_"+a,null!==(r=d.getCellData(n,a)).text&&void 0!==r.text||(s.textContent=null),null!==r.graphic&&void 0!==r.graphic||(s.imageUrl=null),d.handleCellContent(PWC.Components.Grid.CellType.DataRow,s,r.text,r.graphic,a),d.setCellStyleOverrideEnabled(s,t,o,r.style,i)),d.modifyCell(e.childNodes[o],s,PWC.Components.Grid.CellType.DataRow,d.model.selectEmptyCell)},clearRow:function(e){var t,n,i,o,l=0,r=d.dataMapper.getDataIndex(e),a=d.model.backColor;if(null!==e&&c.childNodes[e])for(n=c.childNodes[e],t=0;t<n.childNodes.length;t++)for(l=(i=n.childNodes[t]).childNodes.length-1;0<=l;l--)if(a=d.model.coloringMode===PWC.Components.Grid.ColoringMode.Rows?d.utils.isIndexEven(r)?d.columns[t].backColor:d.columns[t].alternateBackColor:d.model.coloringMode!==PWC.Components.Grid.ColoringMode.Columns||d.utils.isIndexEven(d.columns[t].actualColumnIndex)?d.columns[t].backColor:d.columns[t].alternateBackColor,"rect"===i.childNodes[l].tagName)d.utils.setSVGAttribute(i.childNodes[l],"fill",a);else if("g"===i.childNodes[l].tagName&&(o=i.childNodes[l].childNodes[0])&&"g"===o.tagName)for(var s=o;s.lastChild;)s.removeChild(s.lastChild)},clearGroup:function(){c&&d.utils.clearElement(c),a.vLines&&d.utils.clearElement(a.vLines),a.hLines&&d.utils.clearElement(a.hLines),a.offsetVLines&&d.utils.clearElement(a.offsetVLines),s&&d.utils.clearElement(s);u=null},clearData:function(){c=n=null,a.vLines=null,a.hLines=null,a.offsetVLines=null,s=u=null}}},PWC||{}),PWC=(PWC.Components=PWC.Components||{},PWC.Components.Grid=PWC.Components.Grid||{},PWC.Components.Grid.EditHandler=function(r,e,a){"use strict";function s(e){var t=e.keyCode||e.which;c.restrictExponential&&c.elementDataType===PWC.Components.Grid.EditDataType.Number&&(48<=t&&t<=57||45===t||46===t||e.preventDefault(),null!==c.maxRange&&c.restrictDecimal&&48<=t&&t<=57&&parseInt(this.value+e.key)>c.maxRange&&e.preventDefault(),!c.restrictDecimal||48<=t&&t<=57||e.preventDefault()),13===t&&p()}var d=e,c={rowIndex:null,columnIndex:null,editElementType:null,elementDataType:null,restrictExponential:null,restrictDecimal:null,maxRange:null,selectMultiple:null},u=r.id+"_editBox",m=null,p=function(){var e,t,n,i=null,o=null,l=[];if(m&&0<(e=m.childNodes).length&&d&&r.tableProps.isEditStarted&&!document.getElementById("DTPBlock")){if(//!document.getElementById( 'DTPBlock' )         
i=e[0],c.selectMultiple&&i.firstElementChild){for(n=i.firstElementChild.selectedOptions,t=0;t<n.length;t++)l.push(i.firstElementChild.selectedOptions[t].value);o=l.join()}else o=(i.firstElementChild?i.firstElementChild.selectedOptions?i.firstElementChild.selectedOptions[0]:i.firstElementChild:i).value;i.removeEventListener("blur",p),r.iGridRef.onCellEditEnd(c.rowIndex,r.columns[c.columnIndex].actualColumnIndex,o),r.utils.clearElement(m),d.removeChild(m),r.tableProps.isEditStarted=!1,c.rowIndex=null,c.columnIndex=null,c.selectMultiple=null,c.restrictExponential=null,c.restrictDecimal=null,c.maxRange=null}};return{handleCellEdit:function(e,t,n){var n=r.iGridRef.onCellEditBegin(e,r.columns[t].actualColumnIndex,n),i=r.dataMapper.getRowIndex(e),o=a(PWC.Components.Grid.GetInstance.Scroll),l=null;n.authorize&&d&&(m||((m=document.createElement("div")).setAttribute("id",u),m.style.position="absolute"),m.style.width=r.getCellWidth(t,o)+"px",m.style.height=r.tableProps.contentHeight+"px",m.style.boxSizing="border-box",m.style.border="none",m.style.left=n.offsetX+r.columns[t].x+"px",m.style.top=n.offsetY+r.tableProps.y+r.getHeaderHeight()+i*r.tableProps.cellHeight+"px",0===m.childNodes.length?n.editElementType===PWC.Components.Grid.EditElementType.Custom?m.appendChild(n.customDom):((l=document.createElement("input")).setAttribute("id",u+"_input"),l.style.outline="none",l.style.border="none",l.style.width="99%",l.style.height="95%",l.style.textIndent="8px",l.style.verticalAlign="top",n.elementDataType===PWC.Components.Grid.EditDataType.Number&&l.setAttribute("maxlength","15"),l.addEventListener("blur",p),l.addEventListener("keypress",s),l.style.fontSize=r.model.font.fontSize+"px",l.style.fontFamily=r.model.font.fontName,o=r.getCellData(e,r.columns[t].actualColumnIndex).text,l.value=o,m.appendChild(l)):l=m.childNodes[0],d.appendChild(m),l&&n.editElementType===PWC.Components.Grid.EditElementType.Standard?l.focus():n.editElementType===PWC.Components.Grid.EditElementType.Custom&&(l=m.childNodes[0])&&(l.addEventListener("blur",p),l.focus()),r.tableProps.isEditStarted=!0,c.rowIndex=e,c.columnIndex=t,c.editElementType=n.editElementType,c.elementDataType=n.elementDataType,n.selectMultiple&&(c.selectMultiple=n.selectMultiple),n.restrictExponential&&(c.restrictExponential=n.restrictExponential),n.restrictDecimal&&(c.restrictDecimal=n.restrictDecimal),void 0!==n.maxRange)&&(c.maxRange=n.maxRange)},endEdit:function(){r.tableProps.isEditStarted&&p()},clearData:function(){d=null,c.editElementType=null,c.rowIndex=null,c.columnIndex=null,c.elementDataType=null,c.restrictExponential=null,c.restrictDecimal=null,c.maxRange=null,c.selectMultiple=null,m=null}}},PWC||{}),PWC=(PWC.Components=PWC.Components||{},PWC.Components.Grid=PWC.Components.Grid||{},PWC.Components.Grid.EventManager=function(d,l,n){"use strict";function i(e){return e.preventDefault(),!1}function o(e){"touchstart"===e.type||"touchend"===e.type?(f=f||!0,t(e)):"mousedown"!==e.type&&"mouseup"!==e.type||f||t(e),e.preventDefault()}function a(e){var t,n=null;return null===d.eventReference.targetGroup&&(t=d.utils.getMousePoint(e,d.parentSvg,d.isAdoptToScreen,d.zoomFactorCB),n=w(b=t,e)),n}function r(e){var t,n,i=null,o=null,l=null,r=d.eventReference.targetGroup;switch("mouseup"!==e.type||3!==e.which&&1!==e.button||m.tooltip.clearTooltip(),r){case C.RowTitles:case C.ColumnTitles:case C.Data:r===C.ColumnTitles&&d.headerSettings.allowColumnReorder&&(H(),d.isSubscribedEvent(PWC.Components.Grid.ControlEvents.OnColumnReorder))&&null!==d.eventReference.index&&d.eventReference.startIndex!==d.eventReference.index&&(t=d.columns[d.eventReference.startIndex].actualColumnIndex,n=d.columns[d.eventReference.index].actualColumnIndex,m.selection.setSelection(null,n,null,!1),d.iGridRef.onColumnReorder(t,n)),!d.eventReference.isAutoCompleteArea&&d.eventReference.target&&(i=d.getCellPosition(e,b),b=null,d.headerSettings.columnHeaderType!==PWC.Components.Grid.HmiDataGridHeaderType.None&&(i.cellRowIndex=i.cellRowIndex-1),null!==i.cellRowIndex&&(o=d.dataMapper.getDataIndex(i.cellRowIndex)),null!==i.cellColumnIndex)&&(l=d.columns[i.cellColumnIndex].actualColumnIndex),P(o,l),m.selection.fireSelection();break;case C.ColumnVlines:d.eventReference.target&&d.parentSvg.removeChild(d.eventReference.target),D(),d.isSubscribedEvent(PWC.Components.Grid.ControlEvents.OnColumnResize)&&(t=d.columns[d.eventReference.index].actualColumnIndex,d.iGridRef.onColumnResize(t,d.model.gridColumns[t].width));break;case C.ScrollBar:"panend"===e.type?m.scrollBar.onScrollEvent(e):m.scrollBar.onScrollClickEvent(e)}d.clearEventReferences()}function c(e,t,n,i){return t.y>d.tableProps.y+d.dataMapper.getViewPortDisplayedRowCount()*d.tableProps.cellHeight+i||t.x>d.getTotalColumnWidth()+n+d.tableProps.x?(d.eventReference.isAutoCompleteArea=!0,d.tableProps.isPauseMode&&!e.ctrlKey&&(m.selection.clearPrevSelection(),m.selection.clearSelectionInfo(),m.selection.clearSelectionRects(),m.sortHandler.setSortKeyOnSelection()),!1):!(d.eventReference.isAutoCompleteArea=!1)}function s(e,t){var n={cellRowIndex:null,cellColumnIndex:null},i=d.dataMapper.getTotalRecords(),o=d.dataMapper.getViewPortEndIndex(),l=d.dataMapper.getViewPortStartIndex();n.cellColumnIndex=d.getCellPosition(t).cellColumnIndex,null!==d.eventReference.targetGroup&&("down"===e.direction&&o<i-1?(m.scrollBar.scrollVertical(l+1),n.cellRowIndex=d.dataMapper.getViewPortDisplayedRowCount(),d.headerSettings.columnHeaderType===PWC.Components.Grid.HmiDataGridHeaderType.None&&n.cellRowIndex--):"up"===e.direction&&0<l&&(m.scrollBar.scrollVertical(l-1),n.cellRowIndex=1,d.headerSettings.columnHeaderType===PWC.Components.Grid.HmiDataGridHeaderType.None)&&n.cellRowIndex--,m.selection.dragAutoSelection(n))}var u,m=null,p=null,C=PWC.Components.Grid.EventSource,h=null,g=!0,f=null,y=null,S=!1,b=null,t=function(e){switch(e.type){case"mousedown":case"touchstart":if(m&&m.editHandler&&m.editHandler.endEdit(),d.clearEventReferences(),a(e))if(d.eventReference.target=e.target||e.srcElement,"mousedown"!==e.type||3!==e.which&&1!==e.button){var t=e,n=d.eventReference.targetGroup;switch(n){case C.RowTitles:case C.ColumnTitles:case C.Data:if(d.tableProps.isPauseMode){if(m&&m.editHandler)m.editHandler.endEdit();m.selection.selectionClickHandler(t,n);m.sortHandler.setSortKeyOnSelection()}break;case C.ScrollBar:m.scrollBar.onScrollClickEvent(t);break;case C.ColumnVlines:if(d.headerSettings.allowColumnResize)G(t);break;default:break}}else{var i=e,o=d.eventReference.targetGroup;if(o===C.Data||o===C.ColumnTitles){o=d.getCellPosition(i);m.tooltip.createRightClickGroup(o.cellRowIndex,o.cellColumnIndex);i.preventDefault()}d.clearEventReferences()}break;case"mouseup":case"touchend":y||r(e)}},P=function(e,t){switch(d.eventReference.targetGroup){case C.RowTitles:d.isSubscribedEvent(PWC.Components.Grid.ControlEvents.OnRowHeaderClick)&&d.iGridRef.onRowHeaderClick(e);break;case C.ColumnTitles:d.isSubscribedEvent(PWC.Components.Grid.ControlEvents.OnColumnHeaderClick)&&d.iGridRef.onColumnHeaderClick(t);break;case C.Data:d.isSubscribedEvent(PWC.Components.Grid.ControlEvents.OnCellClick)&&d.iGridRef.onCellClick(e,t)}},v=function(e){var t,n,i;d.clearEventReferences(),a(e)&&d.tableProps.isPauseMode&&(f&&(m&&m.editHandler&&m.editHandler.endEdit(),n=d.eventReference.targetGroup,m.selection.selectionClickHandler(e,n),m.sortHandler.setSortKeyOnSelection()),d.tableProps.isEditEnabled&&d.tableProps.editRecognizeEventType===PWC.Components.Grid.EditEnable.OnSingleClick&&d.eventReference.targetGroup===C.Data&&m.editHandler&&(n=d.getCellPosition(e),d.headerSettings.columnHeaderType!==PWC.Components.Grid.HmiDataGridHeaderType.None&&(n.cellRowIndex=n.cellRowIndex-1),t=d.dataMapper.getDataIndex(n.cellRowIndex),i=d.columns[n.cellColumnIndex].actualColumnIndex,d.model.gridColumns[i].enabled)&&d.model.enableEditing&&m.editHandler.handleCellEdit(t,n.cellColumnIndex,e),d.eventReference.targetGroup===C.ColumnTitles)&&d.model.sortMode===PWC.Components.Grid.TableSortMode.ByClick&&m.sortHandler.onsortHandler(e),e.preventDefault()},x=function(e){var t=a(e);if(t&&(m&&m.editHandler&&m.editHandler.endEdit(),d.tableProps.isPauseMode&&d.eventReference.targetGroup===C.ColumnTitles&&d.model.sortMode===PWC.Components.Grid.TableSortMode.ByDoubleClick&&m.sortHandler&&m.sortHandler.onsortHandler(e),d.tableProps.isPauseMode)&&(n=d.eventReference.targetGroup,m.selection.selectionClickHandler(e,n),m.sortHandler.setSortKeyOnSelection()),d.eventReference.targetGroup===C.Data||d.eventReference.targetGroup===C.RowTitles||d.eventReference.targetGroup===C.ColumnTitles){var n=e,i=null,o=null,l=d.eventReference.isAutoCompleteArea,r=d.getCellPosition(n);if(d.headerSettings.columnHeaderType!==PWC.Components.Grid.HmiDataGridHeaderType.None)r.cellRowIndex=r.cellRowIndex-1;if(i=d.dataMapper.getDataIndex(r.cellRowIndex),r.cellColumnIndex!==null)o=d.columns[r.cellColumnIndex].actualColumnIndex;if(l)if(d.eventReference.targetGroup===C.Data&&i<d.dataMapper.getTotalRecords())o=null;else i=o=null;if(d.eventReference.targetGroup===C.RowTitles){if(d.isSubscribedEvent(PWC.Components.Grid.ControlEvents.OnRowHeaderDoubleClick))d.iGridRef.onRowHeaderDoubleClick(i)}else if(d.eventReference.targetGroup===C.ColumnTitles){if(d.isSubscribedEvent(PWC.Components.Grid.ControlEvents.OnColumnHeaderDoubleClick))d.iGridRef.onColumnHeaderDoubleClick(o)}else if(d.eventReference.targetGroup===C.Data){if(d.isSubscribedEvent(PWC.Components.Grid.ControlEvents.OnCellDoubleClick))d.iGridRef.onCellDoubleClick(i,o);if(t&&d.tableProps.isEditEnabled&&d.tableProps.editRecognizeEventType===PWC.Components.Grid.EditEnable.OnDoubleClick&&d.tableProps.isPauseMode&&d.model.gridColumns[o].enabled&&m.editHandler&&d.model.enableEditing)m.editHandler.handleCellEdit(i,r.cellColumnIndex)}n.preventDefault()}d.clearEventReferences(),e.preventDefault()},T=function(e){var t,n=null;if(e.preventDefault(),(t=Math.abs(e.overallVelocity))<=.4){if("panstart"===e.type&&(d.eventReference.targetGroup===PWC.Components.Grid.EventSource.ScrollBar&&d.clearEventReferences(),d.eventReference.targetGroup===C.ColumnTitles&&d.headerSettings.allowColumnReorder&&(i=d.getCellPosition(e),d.eventReference.startIndex=i.cellColumnIndex),!a(e)))return;if(n=e.pointers[0].target||e.srcElement,"panstart"===e.type||"pan"===e.type)if(y=!0,d.eventReference.targetGroup===C.ScrollBar)"panstart"===e.type&&(d.eventReference.target=n),m.scrollBar.onScrollEvent(e);else if(d.eventReference.targetGroup===C.ColumnVlines&&d.headerSettings.allowColumnResize)G(e);else if(d.eventReference.targetGroup!==C.Data&&d.eventReference.targetGroup!==C.RowTitles||!function(e){var t=true;if(e.additionalEvent&&(e.additionalEvent==="panleft"||e.additionalEvent==="panright"))t=false;return t}(e)){if(d.eventReference.targetGroup===C.ColumnTitles&&d.headerSettings.allowColumnReorder){var i=e,o=d.getCellPosition(i);if(d.eventReference.startIndex!==null&&o.cellColumnIndex!==null&&!d.isAutoCompleteCell(o.cellColumnIndex,null))if(o.cellColumnIndex!==d.eventReference.index){H();d.eventReference.index=o.cellColumnIndex;H(true)}}}else if((o=function(e){var t=d.utils.getMousePoint(e,d.parentSvg,d.isAdoptToScreen,d.zoomFactorCB),n=null,i={required:false,direction:null},n=t.y;if(t.y>d.tableProps.height){i.required=true;i.direction="down"}else if(t.y<d.getHeaderHeight()+d.tableProps.y){i.required=true;i.direction="up"}return i}(e)).required)p=p||setInterval(s,100,o,e);else{if(p&&(clearInterval(p),p=null),-1!==n.id.indexOf("OuterBorder")||-1!==n.id.indexOf("ParentSvg"))return;m.selection.selectionDragHandler(e),m.sortHandler.setSortKeyOnSelection()}}else!S&&f&&(m.scrollBar.swipe(e,Math.round(t)),S=!0);"panend"===e.type&&(p&&(clearInterval(p),p=null),r(e),y=S=!1)},w=function(e,t){var n=!1,i=t.target||t.srcElement,o=d.tableProps.y,l=d.tableProps.x,r=d.getRowHeaderWidth(),a=d.getHeaderHeight(),s=m.scrollBar.getVScrollBarWidth();return i&&"line"===i.tagName&&i.parentNode.id&&-1!==i.parentNode.id.indexOf("OffSetVLinesHeaderGroup")&&d.headerSettings.allowColumnResize||i&&"line"===i.tagName&&i.parentNode.id&&-1!==i.parentNode.id.indexOf("OffSetVLinesDataGroup")&&d.headerSettings.allowColumnResize?(d.eventReference.targetGroup=PWC.Components.Grid.EventSource.ColumnVlines,n=!0):e&&null!==e.x&&null!==e.y&&e.x>l&&e.y>o&&(e.x<l+r?e.y<o+a?(d.eventReference.targetGroup=PWC.Components.Grid.EventSource.RowTitles,n=d.eventReference.isAutoCompleteArea=!0):e.y>o+a&&e.y<=o+d.tableProps.height?"rect"===t.target.tagName&&(d.eventReference.targetGroup=PWC.Components.Grid.EventSource.RowTitles,n=c(t,e,r,a)):e.y>o+d.tableProps.height&&(d.eventReference.targetGroup=PWC.Components.Grid.EventSource.ScrollBar,n=!0):e.x>l+r&&e.x<=l+d.tableProps.width-s?e.y<o+a?"rect"===t.target.tagName&&(d.eventReference.targetGroup=PWC.Components.Grid.EventSource.ColumnTitles,n=c(t,e,r,a)):e.y>o+a&&e.y<=o+d.tableProps.height?"rect"===t.target.tagName&&(d.eventReference.targetGroup=PWC.Components.Grid.EventSource.Data,n=c(t,e,r,a)):e.y>o+d.tableProps.height&&(d.eventReference.targetGroup=PWC.Components.Grid.EventSource.ScrollBar,n=!0):e.x>l+d.tableProps.width-s&&(e.y<o+a?d.model.useSortKey?m.sortHandler.sortKeyGroupEventListner(t):(d.eventReference.targetGroup=PWC.Components.Grid.EventSource.ScrollBar,n=!0):(e.y>o+a&&e.y<=o+d.tableProps.height||e.y>o+d.tableProps.height)&&(d.eventReference.targetGroup=PWC.Components.Grid.EventSource.ScrollBar,n=!0))),n},W=function(){var e=m.scrollBar,t=d.tableProps.width;return t-=d.getRowHeaderWidth(),e&&(t-=e.getVScrollBarWidth()),t},G=function(e){var t,n,i,o=null,l=null,r=null;null!==d.eventReference.target&&null!==d.eventReference.index?o=d.eventReference.index:(o=I(e.target||e.srcElement),d.eventReference.index=o,e.target.style.display="none",d.parentSvg.appendChild(e.target)),e=d.utils.getMousePoint(e,d.parentSvg,d.isAdoptToScreen,d.zoomFactorCB).x-(d.columns[o].x+d.columns[o].width),t=d.columns[o].actualColumnIndex,e=parseInt(e,10),l=(r=d.model.gridColumns)[t].width+e,r[t].isUserChangedWidth=!0,0<e?(d.columns[o].isMaxResizeLimited&&r[t].width+e>r[t].maximumWidth&&(l=r[t].maximumWidth),n=d.getTotalColumnWidth(),i=W(),t===r.length-1&&i<=n+e?r[t].width=i-(n-r[t].width):r[t].width=l):(d.columns[o].isMinResizeLimited&&r[t].width+e<r[t].minimumWidth&&(l=r[t].minimumWidth),r[t].width=0<l?l:0),d.actionHandler(PWC.Components.Grid.GridActions.Reload),D(d.eventReference.index,!0)},D=function(e,t){var n=l(PWC.Components.Grid.GetInstance.Column);n&&(t&&null!==e?n.displayResizeLine(e):n.clearResizeLine())},H=function(e){var t,n=l(PWC.Components.Grid.GetInstance.Column),i=!1,o=d.eventReference.index;n&&(e&&null!==o?(e=d.columns[o].actualColumnIndex,(t=l(PWC.Components.Grid.GetInstance.Selection))&&e===t.getSelection().selectedCellColumnIndex&&(i=!0),n.displayReorderColumn(d.eventReference.startIndex,o,i),n.displayResizeLine(o)):(n.clearReorderColumn(),n.clearResizeLine()))},I=function(e){var t=0;for(e=e.previousSibling;null!=e;)t++,e=e.previousSibling;return t},A=function(){h&&(h.destroy(),h=null)};return{addListeners:function(e){function t(){A(),d.parentSvg&&g&&((h=new u.Manager(d.parentSvg,{domEvents:!0})).add(new u.Tap({event:"doubletap",taps:2})),h.add(new u.Tap({event:"singletap",taps:1})),h.get("doubletap").recognizeWith("singletap"),h.get("singletap").requireFailure("doubletap"),h.on("doubletap",x),h.on("singletap",v),h.add(new u.Pan({event:"pan",pointers:1,direction:u.DIRECTION_ALL,threshold:1})),h.on("panstart",T),h.on("pan",T),h.on("panend",T))}(m=e,d.parentSvg.addEventListener("mousedown",o),d.parentSvg.addEventListener("mouseup",o),d.parentSvg.addEventListener("contextmenu",i),d.parentSvg.addEventListener("touchstart",o),d.parentSvg.addEventListener("touchend",o),u=window.Hammer)?t():(requirejs.config({baseUrl:n,paths:{Hammer:"hammer"}}),require(["Hammer"],function(e){u=e,t()}))},removeListeners:function(){d.parentSvg.removeEventListener("mousedown",o),d.parentSvg.removeEventListener("mouseup",o),d.parentSvg.removeEventListener("contextmenu",i),d.parentSvg.removeEventListener("touchstart",o),d.parentSvg.removeEventListener("touchend",o),h?(h.off("doubletap"),h.off("singletap"),h.remove("doubletap"),h.remove("singletap"),h.off("panstart"),h.off("pan"),h.off("panend"),h.remove("pan"),h.destroy(),h=null):g=!1},addMouseWheelEventListener:function(){m&&m.scrollBar&&m.scrollBar.attachMouseWheelEvent(d.parentSvg)},removeMouseWheelEventListener:function(){m&&m.scrollBar&&m.scrollBar.removeMouseWheelEvent(d.parentSvg)},setEditHandler:function(e){m&&(m.editHandler=e)},clearData:function(){m=null,u&&A(),y=f=p=u=null}}},PWC||{}),PWC=(PWC.Components=PWC.Components||{},PWC.Components.Grid=PWC.Components.Grid||{},PWC.Components.Grid.FilterColumn=function(p,C,h){"use strict";function i(e){var t=null,n={actualColumnIndex:null,textValue:null},i=(e.target||e.srcElement).id.split("_");if(13===(e.keyCode||e.which))e.target.blur();else{i=parseInt(i[0],10),n.actualColumnIndex=p.columns[i].actualColumnIndex,n.textValue=e.target.value;var o=n,l=null;if(g.length===0)g.push(o);else{l=r(o.actualColumnIndex);if(l!==null)if(o.textValue===""||o.textValue==="*")g.splice(l,1);else g[l].textValue=o.textValue;else g.push(o)}i===p.columns.length-1&&p.columns[i].width+p.columns[i].x>=p.model.left+p.tableProps.width&&(t=h(PWC.Components.Grid.GetInstance.Scroll))&&t.scrollHorizontal(PWC.Components.Grid.ArrowKeySelection.MoveColumnToLeft,n.actualColumnIndex),p.isSubscribedEvent(PWC.Components.Grid.ControlEvents.OnFilterEditEnd)&&p.iGridRef.onFilterTextChange(n.actualColumnIndex,e.target.value)}}var g=[],f=null,y=1,S=function(){return{id:null,top:0,left:0,height:0,width:0,position:"absolute",border:"none",background:"none"}},r=function(e){for(var t=null,n=0;n<g.length;n++)if(g[n].actualColumnIndex===e){t=n;break}return t},b=function(e){var t=null;return(t=document.createElement("div")).setAttribute("id",e.id),t.style.position=e.position,t.style.width=e.width+"px",t.style.height=e.height+"px",t.style.background=e.background,t.style.left=e.left+"px",t.style.top=e.top+"px",t.style.pointerEvents="inherit",t},P=function(e){var t=null,n=p.filterColumnProps.height;return(t=document.createElement("input")).setAttribute("type","text"),t.setAttribute("id",e+"_input"),t.style.width="100px",t.style.height=n+"px",t.style.border="none",t.value="*",t.style.verticalAlign="top",t.style.verticalAlign="left",t.style.pointerEvents="inherit",t.style.boxSizing="border-box",p.appMode===PWC.Components.AppMode.RUNTIME&&p.model.enabled||(t.readOnly=!0),t.addEventListener("keyup",i),t},v=function(){var e=null;return(e=document.createElement("img")).style.marginRight=0,e.style.marginTop="4px",e.src=p.model.filterImagURL,e.style.width=p.filterColumnProps.imageWidth+"px",e.style.height=p.filterColumnProps.imageHeight+"px",e.style.pointerEvents="none",e.style.boxSizing="border-box",e};return{createFilterBoxes:function(){var e=0,t=null,n=p.getRowHeaderWidth(),i=p.getTotalColumnWidth(),o=p.tableProps.width-n;if((t=h(PWC.Components.Grid.GetInstance.Scroll))&&(e=(o=t.getVScrollBarConfig().visible?(o-=t.getVScrollBarWidth())-p.model.borderWidth:o)<i?o:i),t=e+=n,(o=S()).id="filterDiv_"+p.id,o.width=t,o.height=p.filterColumnProps.height,o.top=p.tableProps.y+p.tableProps.contentHeight,o.left=p.tableProps.x,o.background="transparent",o.position="absolute",(f=b(o)).style.borderTop=p.model.gridLineWidth+"px solid "+p.headerSettings.headerGridLineColor,p.headerSettings.rowHeaderType!==PWC.Components.Grid.HmiDataGridHeaderType.None){i=S(),n=p.getRowHeaderWidth();if(i.width=n-p.model.gridLineWidth,i.height=p.filterColumnProps.height,i.id="rowHeaderDiv"+p.id,i.background=p.headerSettings.headerBackColor,i.position="absolute",i.top=0,i.left=0,t=b(i),p.headerSettings.rowHeaderType!==PWC.Components.Grid.HmiDataGridHeaderType.None)f.appendChild(t)}for(var l=e,r=null,a=null,s=0,d=0,c=S(),u=p.columns.length,m=p.getRowHeaderWidth(),s=0;s<u;s++){for(a=r=null,c.id="innerDiv_"+s,c.width=p.columns[s].width-p.model.gridLineWidth,c.left=m,c.height=p.filterColumnProps.height,c.background=p.headerSettings.headerBackColor,r=b(c),a=P(s),d=0;d<g.length;d++)g[d].actualColumnIndex===p.columns[s].actualColumnIndex&&(a.value=g[d].textValue);m<l&&(m+c.width>=l?(c.width=l-m-y,r.style.width=c.width+"px",a.style.width=c.width+"px",r.appendChild(a)):(a.style.width=c.width-p.filterColumnProps.imageWidth+"px",r.appendChild(a),r.appendChild(v())),f.appendChild(r),m+=p.columns[s].width)}C.appendChild(f)},clearFilterBoxes:function(){f&&(C.removeChild(f),f=null)},clearData:function(){g.length=null,f=null}}},PWC||{}),PWC=(PWC.Components=PWC.Components||{},PWC.Components.Grid=PWC.Components.Grid||{},PWC.Components.Grid.GridControl=function(d,i,o){"use strict";function l(){for(var e,t,n,i,o=0,l=f.model.headerSettings,r=PWC.Components.Grid.HmiDataGridHeaderType,a=f.model.gridColumns.length,s=0;s<a;s++){if(t=(n=f.model.gridColumns[s]).headerSettings,0===n.width&&!n.isUserChangedWidth){if(l.columnHeaderType===r.Index)null!=(e=n.index)&&(e=String(e)),i=f.getTextBBoxInfo(PWC.Components.Grid.CellType.ColumnHeader,e),n.width=i.contentWidth;else if(l.columnHeaderType===r.None)o=(i=f.getTextBBoxInfo(PWC.Components.Grid.CellType.ColumnHeader,e)).contentWidth,w(t,o,i,0,n);else switch(e=t.text,t.content.contentMode){case PWC.Components.Grid.ContentMode.Text:i=f.getTextBBoxInfo(PWC.Components.Grid.CellType.ColumnHeader,e),n.width=i.contentWidth;break;case PWC.Components.Grid.ContentMode.Graphic:i=f.getTextBBoxInfo(PWC.Components.Grid.CellType.ColumnHeader,null),n.width=i.contentHeight;break;case PWC.Components.Grid.ContentMode.TextAndGraphic:o=(i=f.getTextBBoxInfo(PWC.Components.Grid.CellType.ColumnHeader,e)).contentWidth,w(t,o,i,0,n)}n.width+=f.model.cellPadding.left+f.model.cellPadding.right}R(n)}}function c(e){var t=f.getHeaderHeight(),n=2*f.tableProps.borderWidth,n=f.getTableHeight()-n;"number"==typeof e&&(n-=e),f.headerSettings.columnHeaderType!==PWC.Components.Grid.HmiDataGridHeaderType.None&&(n-=t),e=Math.ceil(n/f.tableProps.cellHeight),f.dataMapper.setViewPortSize(e),n%f.tableProps.cellHeight!=0&&n%f.tableProps.cellHeight<f.tableProps.contentHeight?f.dataMapper.setSkipLastRow(!0):f.dataMapper.setSkipLastRow(!1)}function r(e){var t=null;switch(e){case PWC.Components.Grid.GetInstance.Column:t=s;break;case PWC.Components.Grid.GetInstance.DataRow:t=h;break;case PWC.Components.Grid.GetInstance.RowHeader:t=C;break;case PWC.Components.Grid.GetInstance.Scroll:t=y;break;case PWC.Components.Grid.GetInstance.Selection:t=P;break;case PWC.Components.Grid.GetInstance.Sort:t=v;break;case PWC.Components.Grid.GetInstance.Edit:t=b}return t}function a(e,t){switch(e){case PWC.Components.Grid.GridActions.Partial_Load:X(t);break;case PWC.Components.Grid.GridActions.Load:A(f.dataMapper.getTotalRecords());break;case PWC.Components.Grid.GridActions.Reload:N()}}function u(e){var t=null;y&&(t=y.getVScrollBarConfig().visible),f.model.horizontalScrollbarVisibility===PWC.Components.Grid.HmiScrollBarVisibility.Automatic&&t&&e<=f.dataMapper.getViewPortSize()||!t&&e>f.dataMapper.getMaxRowsToDisplay()?N():y.handleVerticalScrollbar()}function m(e){var t,n,i,o,l;null!=e&&p&&f.tableProps.isPauseMode&&(l=f.dataMapper.getViewPortStartIndex(),t=f.dataMapper.getViewPortEndIndex(),n=f.dataMapper.getMaxRowsToDisplay(),i=f.dataMapper.getTotalRecords(),e===PWC.Components.Grid.ChangeView.Next&&null!==t&&t!==i-1?o=t+n<i?t+1:i-n:e===PWC.Components.Grid.ChangeView.Prev&&null!==l&&0!==l?o=n<=l?l-n:0:e===PWC.Components.Grid.ChangeView.First&&null!==l&&0!==l?o=0:e===PWC.Components.Grid.ChangeView.Last&&null!==t&&t!==i-1&&(o=i-n),void 0!==o)&&(l=o,y)&&(y.scrollVertical(l),e=f.dataMapper.getViewPortDisplayedRowCount(),f.isSubscribedEvent(PWC.Components.Grid.ControlEvents.OnVScrollChange))&&f.iGridRef.onVScrollChange(l,e)}var B=d,t=null,p=!1,s=null,C=null,h=null,L=.9,g="9999",f=new PWC.Components.Grid.GridHelper,y=null,S=null,b=null,P=null,v=null,x=null,T=null,w=function(e,t,n,i,o){e.content.graphicStretchMode!==PWC.Components.Grid.HmiGraphicStretchMode.None||e.content.textPosition!==PWC.Components.Grid.HmiTextPosition.Left&&e.content.textPosition!==PWC.Components.Grid.HmiTextPosition.Right||(i=n.contentHeight),e.content.horizontalAlignment===PWC.Components.Grid.HorizontalAlignment.Center?o.width=t+2*i:o.width=t+i},R=function(e){var t=!0,n=!0;0===e.minimumWidth&&(n=!1),0===e.maximumWidth&&(t=!1),n&&t&&e.minimumWidth<e.maximumWidth?e.width<e.minimumWidth?e.width=e.minimumWidth:e.width>e.maximumWidth&&(e.width=e.maximumWidth):!n&&t?e.width>e.maximumWidth&&(e.width=e.maximumWidth):n&&!t&&e.width<e.minimumWidth&&(e.width=e.minimumWidth)},W=function(e){var t;e&&(y.getHScrollBarConfig().columnStartIndex=0),t=y.getHScrollBarConfig().columnStartIndex,f.utils.validateColumnModel(f.model),O(),z(),n(t),y.handleScrollBars(e)},n=function(e){s.createColumns(e),v&&v.handleColumnSortGroup(),f.headerSettings.columnHeaderType!==PWC.Components.Grid.HmiDataGridHeaderType.None&&C.add("header",null),f.model.autoCompleteRows&&H(f.dataMapper.getViewPortSize()),T&&(T.clearFilterBoxes(),f.headerSettings.columnHeaderType!==PWC.Components.Grid.HmiDataGridHeaderType.None)&&T.createFilterBoxes()},O=function(){var e=null,t=(y&&(y.setScrollBarProps(),e=y.getHScrollBarHeight()),null),n=f.dataMapper.getTotalRecords(),i=f.dataMapper.getViewPortSize(),o=n,l=null,r=null,a=g.length,s=false;f.model.autoCompleteRows&&(o=n<i?i:n);"number"==typeof o&&(l=o.toString().length);a<=l?(r=o.toString(),f.tableProps.rowHeaderLength=l,s=!0):(r=g,f.tableProps.rowHeaderLength=a);-1===f.tableProps.rowheaderOffset&&(f.tableProps.rowheaderOffset=f.getTextBBoxInfo(PWC.Components.Grid.CellType.ColumnHeader,f.model.rowHeaderOffsetbyChar,!0).contentWidth);t=f.getTextBBoxInfo(PWC.Components.Grid.CellType.ColumnHeader,r,!0),f.tableProps.rowHeaderContentWidth=t.contentWidth,f.tableProps.rowHeaderContentWidth+=f.tableProps.rowheaderOffset,s&&l>=f.tableProps.rowHeaderLength&&(i=f.getTextBBoxInfo(PWC.Components.Grid.CellType.ColumnHeader,"99",!0).contentWidth,f.tableProps.rowHeaderContentWidth+=i,f.tableProps.rowHeaderLength+=2);n=null,o=null,a=null,r=y.getHScrollBarHeight(),t=0,s=null;(f.tableProps.borderWidth=f.model.borderWidth,s=2*f.tableProps.borderWidth,f.tableProps.x=f.tableProps.y=f.tableProps.borderWidth,n=f.getTextBBoxInfo(PWC.Components.Grid.CellType.DataRow,null,!0),o=f.getTextBBoxInfo(PWC.Components.Grid.CellType.ColumnHeader,null,!0),f.dataHeight.table=n.contentHeight,f.dataHeight.title=o.contentHeight,f.model.rowHeight<=0)?(a=(n.contentHeight>o.contentHeight?n:o).contentHeight,F(a)):f.tableProps.contentHeight=f.model.rowHeight+f.model.cellPadding.top;f.tableProps.cellHeight=f.tableProps.contentHeight+f.model.gridLineWidth+f.model.cellPadding.bottom,f.headerSettings.rowHeaderType!==PWC.Components.Grid.HmiDataGridHeaderType.None&&(t=f.tableProps.rowHeaderContentWidth+f.model.gridLineWidth);f.model.width<t+s&&(f.model.width=t+s);f.tableProps.width=f.model.width-s,f.model.height<r+s&&(f.model.height=r+s);f.tableProps.height=f.getTableHeight()-s-r,f.utils.setSVGAttribute(d,"height",f.getTableHeight()),c(e)},F=function(e){var t,n=0,i=null,o=f.model.gridColumns,l=0;if(f.tableProps.contentHeight=e+f.model.cellPadding.top,o){for(t=o.length,n=0;n<t;n++)o[n].content.textPosition!==PWC.Components.Grid.HmiTextPosition.Top&&o[n].content.textPosition!==PWC.Components.Grid.HmiTextPosition.Bottom||o[n].content.contentMode===PWC.Components.Grid.ContentMode.Text||(l=l>o[n].content.spacing?l:o[n].content.spacing);for(n=0;n<t;n++)if((o[n].content.textPosition===PWC.Components.Grid.HmiTextPosition.Top||o[n].content.textPosition===PWC.Components.Grid.HmiTextPosition.Bottom)&&o[n].content.contentMode!==PWC.Components.Grid.ContentMode.Text){i=f.getImageSize()+l;break}null!==i&&(f.tableProps.contentHeight+=i)}},G=function(){var e=f.dataMapper.getTotalRecords(),t=f.dataMapper.getViewPortSize(),n=e,i=null,o=g.length;((i="number"==typeof(n=f.model.autoCompleteRows?e<t?t:e:n)?n.toString().length:i)<o&&o!==f.tableProps.rowHeaderLength||f.tableProps.rowHeaderLength>o&&i<f.tableProps.rowHeaderLength&&i+2!==f.tableProps.rowHeaderLength||i>=f.tableProps.rowHeaderLength)&&N()},z=function(){t?(f.utils.setSVGAttribute(t,"x",f.tableProps.borderWidth/2),f.utils.setSVGAttribute(t,"y",f.tableProps.borderWidth/2),f.utils.setSVGAttribute(t,"width",f.model.width-f.tableProps.borderWidth),f.utils.setSVGAttribute(t,"height",f.getTableHeight()-f.tableProps.borderWidth),f.utils.setSVGAttribute(t,"stroke-width",f.tableProps.borderWidth),f.utils.setSVGAttribute(t,"stroke",f.model.borderColor),f.utils.setSVGAttribute(t,"fill",f.model.backgroundColor)):(t=f.utils.createSVG("rect",{id:f.id+"_OuterBorder",x:f.tableProps.borderWidth/2,y:f.tableProps.borderWidth/2,width:f.model.width-f.tableProps.borderWidth,height:f.getTableHeight()-f.tableProps.borderWidth,fill:f.model.backgroundColor,"stroke-width":f.tableProps.borderWidth,stroke:f.model.borderColor},null),f.parentGroup.appendChild(t));var e=null;f.svgDef||(f.svgDef=f.utils.createSVG("defs",{id:f.id+"_SvgDef"}),f.parentGroup.appendChild(f.svgDef));f.svgTextDef||(f.svgTextDef=f.utils.createSVG("g",{id:f.id+"_SvgTextDef"}),f.svgDef.appendChild(f.svgTextDef));f.clipPath.path||(f.clipPath.path=f.utils.createSVG("clipPath",{id:f.clipPath.id}),f.svgDef.appendChild(f.clipPath.path));for(;f.clipPath.path.firstChild;)f.clipPath.path.removeChild(f.clipPath.path.firstChild);e=f.utils.createSVG("rect",{x:f.tableProps.x,y:f.tableProps.y,width:f.tableProps.width,height:f.tableProps.height}),f.clipPath.path.appendChild(e),f.clipPathRowHeader.path||(f.clipPathRowHeader.path=f.utils.createSVG("clipPath",{id:f.clipPathRowHeader.id}),f.svgDef.appendChild(f.clipPathRowHeader.path));for(;f.clipPathRowHeader.path.firstChild;)f.clipPathRowHeader.path.removeChild(f.clipPathRowHeader.path.firstChild);e=f.utils.createSVG("rect",{x:f.tableProps.x,y:f.tableProps.y,width:f.getRowHeaderWidth(),height:f.tableProps.height}),f.clipPathRowHeader.path.appendChild(e),f.imageFilter.filter||(f.imageFilter.filter=f.utils.createSVG("filter",{id:f.imageFilter.id}),f.svgDef.appendChild(f.imageFilter.filter));f.imageFilter.feGaussianBlur||(f.imageFilter.feGaussianBlur=f.utils.createSVG("feGaussianBlur",{stdDeviation:L}),f.imageFilter.filter.appendChild(f.imageFilter.feGaussianBlur));s.init(),h.init(),C.init(),P.createSelectionRectGroup(),y.createScrollBarGroup(),s.createHighlightColHeaderGroup(),s.createHighlightLinesGroup()},D=function(){return f.tableProps.autoScrollToLatest},H=function(e){for(var t=h.getChildCount(),n=t;n<t+e;n++){o=void 0;var i=n,o=h.getChild(i);if(i!=null&&!o){h.createHLine(i);o=h.getEmptyRow(f.id+"_row_"+i);Y(i);h.modifyRow(o,i,null,null);h.append(o);C.add("data",i)}}C.createVLine(),h.createVLines()},I=function(e,t){for(var n,i,o,l=e,r=e+t;l<r;l++)n=f.dataMapper.getRowIndex(l),o=f.iGridRef.getRowFlashInfo(l),i=h.getChild(n),null!==n&&i&&h.modifyRow(i,n,l,o);f.model.font.fontStrikeOut===PWC.Components.Grid.FontStrikeOut.Double&&C.clearStrikeOutLines();C.update()},_=function(e,t){for(var n=e,i=e+t;n<i;n++)h.clearRow(n)},U=function(e,t){for(var n=e+t-1;e<=n;n--){var i=n;if(j(i),h.deleteRow(i),f.headerSettings.columnHeaderType!==PWC.Components.Grid.HmiDataGridHeaderType.None)i++;C.remove(i)}C.createVLine(),h.createVLines()},Y=function(e){var t={path:null,child:null},n={x:f.tableProps.x,y:null,width:f.model.width,height:f.tableProps.cellHeight};t.path=f.utils.createSVG("clipPath",{id:f.id+"_row_"+e}),f.svgTextDef.appendChild(t.path),n.y=f.tableProps.y+f.getHeaderHeight()+e*f.tableProps.cellHeight,n.height-=f.model.cellPadding.top+f.model.cellPadding.bottom,n.y+=f.model.cellPadding.top,t.child=f.utils.createSVG("rect",n),t.path.appendChild(t.child)},e=function(){f.svgTextDef&&f.utils.clearElement(f.svgTextDef)},j=function(e){null!==e&&f.svgTextDef.childNodes[e]&&f.svgTextDef.removeChild(f.svgTextDef.childNodes[e])},X=function(e){M(),f.columns.length=0,f.dataMapper.setViewPortStartIndex(null),f.dataMapper.setViewPortEndIndex(null),f.utils.validateColumnModel(f.model),n(e),A(f.dataMapper.getTotalRecords())},A=function(e){var t,n=!1,i=null,o=0;return"number"==typeof e&&(f.dataMapper.setTotalRecords(e),G(),t=E(e),0<=(i=y?y.getVScrollBarConfig().scrolledValue:i)&&f.tableProps.isPauseMode?(o=e-1<i+t-1?e-t:i)<i&&y.setVScrollBarScrolledValue(o):t<e&&D()&&(o=e-t),k(o,t),n=!0),n},E=function(e){var t=f.dataMapper.getMaxRowsToDisplay();return t=e<t?e:t},k=function(e,t){var n=f.dataMapper.getViewPortSize(),i=f.dataMapper.getViewPortDisplayedRowCount();f.dataMapper.setViewPortStartIndex(e),f.dataMapper.setViewPortEndIndex(e+t-1),0<=t&&(P&&P.clearSelectionRects(),f.model.autoCompleteRows?(I(e,t),t<n&&_(t,n-t)):(i<t?H(t-i):t<i&&U(t,i-t),I(e,t)),P)&&P.applySelection()},M=function(){e(),h.clearGroup(),s.clearGroup(),C.clearGroup(),v&&v.clearGroup()},N=function(e){b&&b.endEdit(),M(),f.columns.length=0,W(e),f.dataMapper.setViewPortStartIndex(null),f.dataMapper.setViewPortEndIndex(null),A(f.dataMapper.getTotalRecords())},V=function(e){for(var t=[],n=0,i=null,o=null,n=0;n<e;n++)i=(o=f.model.gridColumns[n]).headerSettings&&void 0!==o.headerSettings.text&&null!==o.headerSettings.text?o.headerSettings.text.split("").join(" "):"",t.push(i);return t};return{init:function(e,t,n){if(e&&"object"==typeof e&&t&&"object"==typeof t&&!p){if(f.id=i,!f.id)return;if(f.iGridRef=t,f.model=e,f.headerSettings=e.headerSettings,null!=n&&(f.appMode=n),f.actionHandler=a,f.dataMapper=new PWC.Components.Grid.DataMapper,f.clipPath.id=f.id+"_svgHClipPath",f.clipPathRowHeader.id=f.id+"_svgRowHeaderClipPath",f.imageFilter.id=f.id+"_imageBlur",f.utils.clearData(),f.utils.validateGridModel(f.model)){if(l(),f.setDefaultCursorStyle(),!f.parentSvg){f.parentSvg=f.utils.createSVG("svg",{id:f.id+"_ParentSvg","data-tif-type":"WSI:SvgGrid","data-tif-id":"Tif"+f.id+"_ParentSvg"},null,{userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none"});B.appendChild(f.parentSvg)}if(!f.parentGroup)f.parentGroup=f.utils.createSVG("g",{id:f.id+"_ParentGroup"},null,{userSelect:"none",WebkitUserSelect:"none",cursor:f.tableProps.defaultCursorStyle});(s=new PWC.Components.Grid.ColumnHeader(f))&&(v=new PWC.Components.Grid.SortHandler(f,r)),C=new PWC.Components.Grid.RowHeader(f),h=new PWC.Components.Grid.DataRow(f),y=new PWC.Components.Grid.ScrollHandler(f,r),S=new PWC.Components.Grid.ToolTip(f,r),P=new PWC.Components.Grid.SelectionHandler(f,r),x=new PWC.Components.Grid.EventManager(f,r,o),f.tableProps.isRecordLevelSelection||P.enableRowLevelSelection(),W(),f.parentSvg.appendChild(f.parentGroup),f.appMode===PWC.Components.AppMode.RUNTIME&&f.model.enabled&&(t={selection:P,tooltip:S,scrollBar:y,sortHandler:v,editHandler:b},x.addListeners(t)),p=!0}}return p},load:function(e){var t,n=!1;return p&&(t=f.dataMapper.getTotalRecords(),n=A(e),f.tableProps.isPauseMode)&&t!==e&&u(e),n},unLoad:function(){var e=!1;return p&&(f.dataMapper.setViewPortStartIndex(null),f.dataMapper.setViewPortEndIndex(null),f.dataMapper.setTotalRecords(0),P.clearSelectionInfo(),y.resetHorizontalScroll(),y.resetVerticalScroll(),P.clearSelectionRects(),N(),e=!0),e},reloadData:function(){p&&k(f.dataMapper.getViewPortStartIndex(),f.dataMapper.getViewPortDisplayedRowCount())},unInit:function(){p&&(p=!1,f.dataMapper.setViewPortStartIndex(null),f.dataMapper.setViewPortEndIndex(null),f.dataMapper.setTotalRecords(0),P.clearSelectionInfo(),f.appMode===PWC.Components.AppMode.RUNTIME&&f.model.enabled&&x&&x.removeListeners(),b&&f.tableProps.isEditStarted&&b.endEdit(),f.parentSvg.parentNode===d&&d.removeChild(f.parentSvg),T&&f.tableProps.isFilterEnabled&&T.clearFilterBoxes(),f&&f.clearData(),h&&h.clearData(),C&&C.clearData(),s&&s.clearData(),b&&b.clearData(),x&&x.clearData(),T&&T.clearData(),y&&y.clearData(),P&&P.clearData(),v&&v.clearData(),S&&S.clearData(),t=S=v=P=y=T=x=b=s=C=h=null)},invalidateView:function(e,t){var n=!1,i=!1;if(p&&"object"==typeof e&&"number"==typeof t&&0<e.length){if(f.tableProps.isPauseMode&&t!==f.dataMapper.getTotalRecords()&&(i=!0),f.dataMapper.setTotalRecords(t),G(),1===e.length){if("number"==typeof e[0].value&&"number"==typeof e[0].type)if(e[0].type===PWC.Components.Grid.DataOperationType.Add){if(e[0].value<=t){var n=!0,o=e[0].value,l=t,r=f.dataMapper.getViewPortStartIndex(),a=f.dataMapper.getViewPortEndIndex(),s=0;if(f.dataMapper.getViewPortDisplayedRowCount()===0)A(l);else{s=E(l);if(D()){if(o>=a)a=o;else a+=1;r=a-s+1;k(r,s)}else k(r,s)}}}else if(e[0].type===PWC.Components.Grid.DataOperationType.Delete){n=!0;l=e[0].value,o=t;if(l<=f.dataMapper.getViewPortEndIndex()&&l>=0)A(o)}else if(e[0].type===PWC.Components.Grid.DataOperationType.Update){n=!0;a=e[0].value,r=t,s=f.dataMapper.getViewPortStartIndex(),e=f.dataMapper.getViewPortEndIndex();if(a>=s&&a<=e){if(f.model.font.fontStrikeOut===PWC.Components.Grid.FontStrikeOut.Double)A(r);else I(a,1);if(P)P.applySelection()}}}else A(t),n=!0;i&&u(t)}return n},subscribeEvent:function(e){var t=!1;return"number"==typeof e&&(f.subscribedEvents.push(e),t=!0),t},unSubscribeEvent:function(e){var t=!1;return"number"==typeof e&&-1!==(e=f.subscribedEvents.indexOf(e))&&(f.subscribedEvents.splice(e,1),t=!0),t},setAutoScrollToLatest:function(e){var t=!1;return"boolean"==typeof e&&(f.tableProps.autoScrollToLatest=e,t=!0),t},onPropertyChange:function(e,t){var n=null,i=!1;if(p){if(null!=e&&"object"==typeof e)for(n in e)n&&f.model.hasOwnProperty(n)&&(f.model[n]=e[n],"gridSelectionMode"===n&&P&&P.resetSelectionInfo(),i=!0);else P.resetSelectionInfo(),i=!0;f.utils.validateGridModel(f.model)?(l(),f.model.gridColumns&&0===f.model.gridColumns.length&&y&&y.resetHorizontalScroll(),c(),N(t),P&&P.fireSelection()):i=!1}return i},pause:function(){f.appMode===PWC.Components.AppMode.RUNTIME&&f.model.enabled&&p&&(f.tableProps.isPauseMode||(f.tableProps.isPauseMode=!0,f.tableProps.autoSelection=!1,N(),x.addMouseWheelEventListener(),y.setScrollPosition()),P.fireSelection())},resume:function(){f.appMode===PWC.Components.AppMode.RUNTIME&&f.model.enabled&&p&&(f.tableProps.isPauseMode&&(f.tableProps.isPauseMode=!1,f.tableProps.autoSelection=!0,x.removeMouseWheelEventListener(),P.clearPrevSelection(),y.resetVerticalScroll(),N(),P.clearSelectionInfo(),P.applySelection()),P.fireSelection())},handleFlashing:function(){var e,t,n=0,i=f.dataMapper.getViewPortStartIndex(),o=f.dataMapper.getViewPortDisplayedRowCount(),l=null;if(p){for(f.isFlashingOn=!f.isFlashingOn,l=i,n=0;n<o;n++)e=f.dataMapper.getRowIndex(l),(t=f.iGridRef.getRowFlashInfo(l))&&null!==e&&h.modifyRow(h.getChild(e),e,l,t),l++;P.clearSelectionRects(),P.applySelection(),S&&S.updateToolTip()}},setRecordLevelSelection:function(e,t){p&&"boolean"==typeof e&&(!0===(f.tableProps.isRecordLevelSelection=e)?P&&"object"==typeof t&&P.enableRecordLevelSelection(t):!1===e&&P&&P.enableRowLevelSelection())},getSelection:function(){var e=null;return e=P?P.getSelection():e},getDisplayedRowInfo:function(){var e=f.dataMapper.getViewPortStartIndex(),t=f.dataMapper.getViewPortEndIndex(),n=f.dataMapper.getViewPortDisplayedRowCount(),i=f.dataMapper.getMaxRowsToDisplay(),o={startIndex:null,endIndex:null,size:null};return 0<n&&(o.startIndex=e,o.endIndex=t),i&&(o.size=i),o},setSelection:function(e,t,n,i){p&&P&&P.setSelection(e,t,n,i)},setCellEditEnabled:function(e,t,n){var i=!1;return p&&(e?(f.tableProps.isEditEnabled=!0,f.tableProps.editRecognizeEventType=n,b||(b=new PWC.Components.Grid.EditHandler(f,t,r),i=!0,x.setEditHandler(b))):(f.tableProps.isEditEnabled=!1,f.tableProps.editRecognizeEventType=null,b&&b.endEdit(),b=null)),i},getScrollInfo:function(){return y.getScrollInfo()},setScrollInfo:function(e){y.setScrollInfo(e)},setAutoSelection:function(e){"boolean"==typeof e&&(f.tableProps.isAutoSelectionEnabled=e)},setFilterColumnEnabled:function(e,t){var n=!1;return p&&(e?(f.tableProps.isFilterEnabled=!0,T||(n=!0,T=new PWC.Components.Grid.FilterColumn(f,t,r))):(f.tableProps.isFilterEnabled=!1,T&&T.clearFilterBoxes(),T=null),N()),n},setCustomSortingEnabled:function(e){var t=!1;return e&&(f.tableProps.isCustomSortingEnabled=e,t=!0),t},getTableProps:function(){var e,t={height:null,width:null,vScrollBarWidth:null,hScrollBarHeight:null,columnHeaderHeight:null,rowHeight:null,rowHeaderWidth:null};return t.height=f.getTableHeight(),t.width=f.model.width,t.columnHeaderHeight=f.getHeaderHeight(),t.rowHeight=f.tableProps.cellHeight,t.rowHeaderWidth=f.tableProps.rowHeaderContentWidth+f.model.gridLineWidth,y&&(e=y.getVScrollBarConfig(),t.vScrollBarWidth=e.width,e=y.getHScrollBarConfig(),t.hScrollBarHeight=e.height),t},setFlashStatus:function(e){"boolean"==typeof e&&(f.isFlashingOn=e)},clearSelection:function(){null!==P&&p&&P.clearSelectionInfo()},setAdoptGridToScreen:function(e,t){f.zoomFactorCB=e?t:null,f.isAdoptToScreen=e},exportData:function(e,t,n,i,o){var l=null;if(p){if(t===PWC.Components.Grid.ScopeOfDataExport.All?l=function(){var e,t=0,n=0,i=[],o=null,l=null,r=f.dataMapper.getTotalRecords(),a=f.model.gridColumns.length;for(i.push(V(a)),t=0;t<r;t++){for(e=[],n=0;n<a;n++)(o=f.getCellData(t,n))&&void 0!==o.text&&null!==o.text?-1<(l=o.text.split("").join(" ")).search(",")&&(l='"'+l+'"'):l="",e.push(l),l=o=null;i.push(e)}return i}():t===PWC.Components.Grid.ScopeOfDataExport.Selection&&(l=function(){var e,t,n,i,o=0,l=null,r=0,a=[],s=null,d=null,c=f.model.gridColumns.length;if(P&&f.model.selectFullRow&&(e=P.getSelection())&&e.rowSelection)for((l=e.rowSelection).sort(function(e,t){return e-t}),t=l.length,a.push(V(c)),o=0;o<t;o++){for(i=[],n=l[o],r=0;r<c;r++)d=(s=f.getCellData(n,r))&&void 0!==s.text&&null!==s.text?s.text.split("").join(" "):"",i.push(d),d=s=null;a.push(i)}return a}()),o)return l;f.utils.exportData(e,l,i,n)}},getRequiredDims:function(){var e={requiredHeight:0,requiredWidth:0},t=f.dataMapper.getTotalRecords(),n=0,i=f.model.gridColumns.length,o=0,l=!1,r=f.tableProps.rowHeaderContentWidth+f.model.gridLineWidth,a=f.tableProps.cellHeight,s=f.getHeaderHeight(),d=2*f.tableProps.borderWidth;for(0===t&&(t=1),n=0;n<i;n++)o+=f.model.gridColumns[n].width+f.model.gridLineWidth;return P&&-1!==P.getSelection().rowSelection.indexOf(t-1)&&(l=!0),e.requiredHeight=t*a+d,l&&(e.requiredHeight+=f.model.selectionBorderWidth),f.headerSettings.columnHeaderType!==PWC.Components.Grid.HmiDataGridHeaderType.None&&(e.requiredHeight+=s),e.requiredWidth=o+d,f.headerSettings.rowHeaderType!==PWC.Components.Grid.HmiDataGridHeaderType.None&&(e.requiredWidth+=r),e},changeView:m,endCellEdit:function(){b&&b.endEdit()},onKeyDown:function(e,t){var n,i,o,l,r=!1,a=!1,s=!1,d=0,c=PWC.Components.Grid.KeyCodes;if(f.tableProps.isPauseMode)switch(1!==t&&3!==t||(r=!0),2!==t&&3!==t||(a=!0),e!==c.PageUp&&e!==c.PageDown||(l=f.tableProps.width-f.getRowHeaderWidth(),y.getVScrollBarConfig().visible&&(l=(l-=y.getVScrollBarWidth())-f.model.borderWidth)),e){case c.CursorLeft:case c.CursorRight:case c.CursorUp:case c.CursorDown:P.selectionKeyNavigation(e,r),s=!0;break;case c.PageUp:a?(n=f.columns[f.columns.length-1])&&"autocomplete"!==n.contentMode?(i=n.actualColumnIndex,(1===f.columns.length&&n.width>l||f.getCellWidth(f.columns.length-1,y)===n.width-f.model.gridLineWidth)&&(i+=1),y.scrollHorizontal(PWC.Components.Grid.ArrowKeySelection.MoveColumnToLeft,i)):y.scrollHorizontal(PWC.Components.Grid.ArrowKeySelection.MoveColumnToLeft):m(PWC.Components.Grid.ChangeView.Prev),s=!0;break;case c.PageDown:if(a){if((n=f.columns[0])&&0<n.actualColumnIndex){for(i=0,o=n.actualColumnIndex-1;0<=o;o--)if(l<(d+=f.model.gridColumns[o].width+f.model.gridLineWidth)){i=f.model.gridColumns[o].width+f.model.gridLineWidth>l?o:o+1;break}y.scrollHorizontal(PWC.Components.Grid.ArrowKeySelection.MoveColumnToRight,i)}}else m(PWC.Components.Grid.ChangeView.Next);s=!0}return s}}},PWC||{}),PWC=(PWC.Components=PWC.Components||{},PWC.Components.Grid=PWC.Components.Grid||{},PWC.Components.Grid.GridHelper=function(){"use strict";function e(){return{y:0,x:0,width:0,height:0,contentHeight:0,cellHeight:0,minColumnChars:4,rowHeaderContentWidth:30,rowHeaderLength:null,textOffsetY:.8,autoScrollToLatest:!0,autoSelection:!0,isPauseMode:!1,isEditEnabled:!1,editRecognizeEventType:null,isEditStarted:!1,isRecordLevelSelection:!1,borderWidth:null,isAutoSelectionEnabled:!0,isFilterEnabled:!1,isCustomSortingEnabled:!1,defaultCursorStyle:null,rowheaderOffset:-1}}function h(e){for(var t,n=0,i=null,n=t=e.lastIndexOf(""),i=t;0<=n&&""===e[n];n--)i=n;return e.substring(0,i)}function p(e,t,n,i){var o,l=e.graphicStretchMode,r=e.imageSize,a=PWC.Components.Grid.HmiGraphicStretchMode;null!==l&&l!==a.None&&(e.imgX=e.rectX+f.model.cellPadding.left,e.imgY=e.rectY+f.model.cellPadding.top,l===a.Tiled?(0<=i&&(e.tiledContentWidth=i),0<=n&&(e.tiledContentHeight=n)):l===a.Fill?(e.graphicScaleX=i/r,e.graphicScaleY=n/r):l===a.Uniform?(e.graphicScaleX=(o=n<i?n:i)/r,e.graphicScaleY=o/r):l===a.UniformToFill&&(e.graphicScaleX=(o=n<i?i:n)/r,e.graphicScaleY=o/r))}function g(e,t,n,i){e.horizontalAlignment===PWC.Components.Grid.HorizontalAlignment.Stretch&&i>t.contentWidth&&(e.textScaleX=i/t.contentWidth),e.verticalAlignment===PWC.Components.Grid.VerticalAlignment.Stretch&&n>t.contentHeight&&(e.textScaleY=n/t.contentHeight),f.setContentDims(e,t)}var f=this;this.isFlashingOn=!1,this.parentGroup=null,this.actionHandler=null,this.id=null,this.parentSvg=null,this.tableProps=e(),this.filterColumnProps={height:20,imageWidth:16,imageHeight:16},this.iGridRef=null,this.appMode=PWC.Components.AppMode.RUNTIME,this.model=null,this.headerSettings=null,this.columns=[],this.utils=PWC.Components.Grid.GridUtils,this.dataMapper=null,this.svgDef=null,this.svgTextDef=null,this.clipPathRowHeader={path:null,id:null},this.clipPath={path:null,id:null},this.dataHeight={table:null,title:null},this.imageFilter={filter:null,id:null,feGaussianBlur:null},this.eventReference={target:null,index:null,targetGroup:null,startIndex:null,endIndex:null,columnStartIndex:null,columnEndIndex:null,isAutoCompleteArea:null},this.isAdoptToScreen=!1,this.zoomFactorCB=null,this.subscribedEvents=[],this.isAlternateRowColor=function(e){return this.model.coloringMode===PWC.Components.Grid.ColoringMode.Rows&&!this.utils.isIndexEven(e)},this.isAlternateColumnColor=function(e){return this.model.coloringMode===PWC.Components.Grid.ColoringMode.Columns&&!this.utils.isIndexEven(e)},this.getTextOffsetdy=function(e,t,n,i){var o,l=null,r=!1,a=!1,s=!1;return null!=n&&(a=!0),null!=t&&(s=!0),null==e?l=this.tableProps.contentHeight*this.tableProps.textOffsetY:(l=this.model.cellPadding.top,"number"==typeof i?(o=i,r=!0):o=this.tableProps.contentHeight-this.model.cellPadding.top,s&&!a?e===PWC.Components.Grid.VerticalAlignment.Top||e===PWC.Components.Grid.VerticalAlignment.Stretch?l+=.8*t:e===PWC.Components.Grid.VerticalAlignment.Center?l+=o/2+.3*t:e===PWC.Components.Grid.VerticalAlignment.Bottom&&(r?l+=o-.2*t:l=this.tableProps.contentHeight-.2*t):a&&!s?e===PWC.Components.Grid.VerticalAlignment.Center?l+=o/2-n/2:e===PWC.Components.Grid.VerticalAlignment.Bottom&&(l=this.tableProps.contentHeight-n):a&&s&&(e===PWC.Components.Grid.VerticalAlignment.Top||e===PWC.Components.Grid.VerticalAlignment.Stretch?l+=.8*t+n:e===PWC.Components.Grid.VerticalAlignment.Center?l+=o/2+.3*t:e===PWC.Components.Grid.VerticalAlignment.Bottom&&(l=this.tableProps.contentHeight-.2*t))),l},this.getRowHeaderWidth=function(){var e=0;return e=this.headerSettings.rowHeaderType!==PWC.Components.Grid.HmiDataGridHeaderType.None?this.tableProps.rowHeaderContentWidth+this.model.gridLineWidth:e},this.getTableHeight=function(){return this.model.height},this.getHeaderHeight=function(){var e=0;return this.headerSettings.columnHeaderType!==PWC.Components.Grid.HmiDataGridHeaderType.None&&(e=this.tableProps.cellHeight,this.tableProps.isFilterEnabled)&&(e+=this.filterColumnProps.height+this.model.gridLineWidth),e},this.setDefaultCursorStyle=function(){this.appMode===PWC.Components.AppMode.RUNTIME?this.tableProps.defaultCursorStyle="default":this.tableProps.defaultCursorStyle="move"},this.getTextBBoxInfo=function(e,t,n){var i,o={};return t=t||"d",e=e===PWC.Components.Grid.CellType.DataRow?(i=f.model,f.dataHeight.table):(i=f.headerSettings,f.dataHeight.title),!0===n?o=f.utils.calculateFontDimensions(t,i):(o.contentHeight=e,o.contentWidth=f.utils.calculateFontWidth(t,i)),o},this.setContentDims=function(e,t){var n=1,i=1;e.horizontalAlignment===PWC.Components.Grid.HorizontalAlignment.Stretch&&(n=e.textScaleX),e.verticalAlignment===PWC.Components.Grid.VerticalAlignment.Stretch&&(i=e.textScaleY),e.textWidth=t.contentWidth*n,e.textHeight=t.contentHeight*i},this.handleCellContent=function(e,t,n,i,o,l){var r=null,a=!1,o=this.model.gridColumns[o],s=t.textTrimming;if(e===PWC.Components.Grid.CellType.DataRow?(r=o.content.contentMode,a=!0):e===PWC.Components.Grid.CellType.ColumnHeader&&(this.headerSettings.columnHeaderType===PWC.Components.Grid.HmiDataGridHeaderType.Index?this.handleTextContent(n,t,s,l,e):this.headerSettings.columnHeaderType===PWC.Components.Grid.HmiDataGridHeaderType.Content&&(r=o.headerSettings.content.contentMode,a=!0)),a)switch(r){case PWC.Components.Grid.ContentMode.Text:this.handleTextContent(n,t,s,l,e);break;case PWC.Components.Grid.ContentMode.Graphic:t.imageUrl=i,this.handleImageContent(t,l);break;case PWC.Components.Grid.ContentMode.GraphicOrText:i?(t.imageUrl=i,this.handleImageContent(t,l)):this.handleTextContent(n,t,s,l,e);break;case PWC.Components.Grid.ContentMode.GraphicAndText:null===(t.imageUrl=i)||""===i?this.handleTextContent(n,t,s,l,e):t.textPosition===PWC.Components.Grid.HmiTextPosition.Behind||t.textPosition===PWC.Components.Grid.HmiTextPosition.Infront?t.graphicStretchMode!==PWC.Components.Grid.HmiGraphicStretchMode.None?(this.handleImageContent(t,l),this.handleTextContent(n,t,s,l,e)):(t.textContent=n,this.handleImageTextContent(t,s,l,e)):(t.textContent=n,this.handleImageTextContentSplitRatio(t,s,l,e))}},this.handleTextContent=function(e,t,n,i,o){var l,r,a,s,d,c,u,m,p,C;null!=e&&(a=t.horizontalAlignment,s=t.verticalAlignment,c=d=r=l=null,m=u=!1,p=this.model.font,C=this.dataHeight.table,o===PWC.Components.Grid.CellType.ColumnHeader&&(m=!0,C=this.dataHeight.title,p=this.headerSettings.font),(u=n!==PWC.Components.Grid.HmiTextTrimming.None||m&&p.fontStrikeOut===PWC.Components.Grid.FontStrikeOut.Double||!m&&p.fontStrikeOut===PWC.Components.Grid.FontStrikeOut.Double||a===PWC.Components.Grid.HorizontalAlignment.Stretch||s===PWC.Components.Grid.VerticalAlignment.Stretch?!0:u)&&(c=this.getTextBBoxInfo(o,e))&&(l=t.width-(f.model.cellPadding.left+f.model.cellPadding.right+f.model.gridLineWidth),i&&(l-=i),r=t.height-(f.model.gridLineWidth+f.model.cellPadding.top+f.model.cellPadding.bottom),g(t,c,r,l=l<0?0:l),n!==PWC.Components.Grid.HmiTextTrimming.None&&l<t.textWidth&&(d=PWC.Components.Grid.GridUtils.getVisibleStringInfo(e,l,a,n,p),n!==PWC.Components.Grid.HmiTextTrimming.None?(e=e.substring(0,d.charLength),n===PWC.Components.Grid.HmiTextTrimming.WordEllipsis&&(e=h(e)),e+="..."):e=e.substring(d.startIndex,d.endIndex),c=this.getTextBBoxInfo(o,e),this.setContentDims(t,c)),C=t.textHeight),t.textContent=e,t.dy=this.getTextOffsetdy(s,C))},this.handleImageContent=function(e,t){var n,i;if(e.dy=this.getTextOffsetdy(e.verticalAlignment,null,e.imageSize),null!==e.graphicStretchMode&&e.graphicStretchMode!==PWC.Components.Grid.HmiGraphicStretchMode.None)n=e.height-(f.model.cellPadding.top+f.model.cellPadding.bottom+f.model.gridLineWidth),i=e.width-(f.model.cellPadding.left+f.model.cellPadding.right+f.model.gridLineWidth),t&&(i-=t),p(e,0,n,i);else if(null===e.textContent){switch(e.textXOffset=0,e.horizontalAlignment){case PWC.Components.Grid.HorizontalAlignment.Left:case PWC.Components.Grid.HorizontalAlignment.Stretch:e.imageXOffset=e.dx;break;case PWC.Components.Grid.HorizontalAlignment.Center:e.imageXOffset=e.dx-e.imageSize/2;break;case PWC.Components.Grid.HorizontalAlignment.Right:e.imageXOffset=e.dx-e.imageSize}(t=e).graphicStretchMode===PWC.Components.Grid.HmiGraphicStretchMode.None&&(void 0!==t.imgX&&null!==t.imgX&&(t.imgX+=t.imageXOffset||0),void 0!==t.imgY)&&null!==t.imgY&&(t.imgY+=t.dy)}},this.txtContent=function(e,t,n,i,o,l,r){e=t.charLength,n!==PWC.Components.Grid.HmiTextTrimming.None?(i.textContent=i.textContent.substring(0,e),n===PWC.Components.Grid.HmiTextTrimming.WordEllipsis&&(i.textContent=h(i.textContent)),i.textContent+=o):i.textContent=i.textContent.substring(0,e),l=this.getTextBBoxInfo(r,i.textContent),this.setContentDims(i,l)},this.handleImageTextContentSplitRatio=function(e,t,n,i){var o,l={xOffset:0,yOffset:0,height:0,width:0},r={xOffset:0,yOffset:0,height:0,width:0},a=e.height-(f.model.cellPadding.top+f.model.cellPadding.bottom+f.model.gridLineWidth),s=e.width-(f.model.cellPadding.left+f.model.cellPadding.right+f.model.gridLineWidth),d=e.splitRatio,c=!1,u=this.model.font,m=this.getTextBBoxInfo(i,e.textContent);m&&(i===PWC.Components.Grid.CellType.ColumnHeader&&(u=this.headerSettings.font),n&&(s-=n),e.textPosition===PWC.Components.Grid.HmiTextPosition.Left||e.textPosition===PWC.Components.Grid.HmiTextPosition.Right?(o=0<s-e.spacing?s-e.spacing:0,l.width=o*(1-d),r.width=o*d,l.height=r.height=a,e.textPosition===PWC.Components.Grid.HmiTextPosition.Left?(r.xOffset=l.width+e.spacing+f.model.cellPadding.left,l.xOffset=f.model.cellPadding.left):(l.xOffset=r.width+e.spacing+f.model.cellPadding.left,r.xOffset=f.model.cellPadding.left),r.yOffset=f.model.cellPadding.top):e.textPosition!==PWC.Components.Grid.HmiTextPosition.Top&&e.textPosition!==PWC.Components.Grid.HmiTextPosition.Bottom||(o=0<a-e.spacing?a-e.spacing:0,c=!0,l.height=o*(1-d),r.height=o*d,l.width=r.width=s,l.xOffset=f.model.cellPadding.left,r.xOffset=f.model.cellPadding.left,e.textPosition===PWC.Components.Grid.HmiTextPosition.Top?r.yOffset=l.height+f.model.cellPadding.top+e.spacing:(l.yOffset=r.height+e.spacing,r.yOffset=f.model.cellPadding.top)),g(e,m,l.height,l.width),n=Math.round(100*e.textWidth)/100,l.width<n&&(a=PWC.Components.Grid.GridUtils.getVisibleStringInfo(e.textContent,l.width,PWC.Components.Grid.HorizontalAlignment.Left,t,u),this.txtContent(0,a,t,e,"...",m,i)),e.dx=l.xOffset,e.horizontalAlignment===PWC.Components.Grid.HorizontalAlignment.Left||e.horizontalAlignment===PWC.Components.Grid.HorizontalAlignment.Stretch?(e.textAnchor="start",e.textPosition===PWC.Components.Grid.HmiTextPosition.Left&&e.textX+e.dx+e.textWidth>e.imgX+(r.xOffset-e.spacing)&&(e.dx=r.xOffset-e.spacing-e.textWidth)):e.horizontalAlignment===PWC.Components.Grid.HorizontalAlignment.Right?(e.dx+=l.width,e.textAnchor="end",e.textPosition===PWC.Components.Grid.HmiTextPosition.Right&&e.textX+e.dx-e.textWidth<e.textX+l.xOffset&&(e.dx=l.xOffset+e.textWidth)):(e.dx+=l.width/2,e.textAnchor="middle",e.textPosition===PWC.Components.Grid.HmiTextPosition.Left&&e.textX+e.dx+e.textWidth/2>e.imgX+(r.xOffset-e.spacing)?e.dx=r.xOffset-e.spacing-e.textWidth/2:e.textPosition===PWC.Components.Grid.HmiTextPosition.Right&&e.textX+e.dx-e.textWidth/2<e.textX+l.xOffset&&(e.dx=l.xOffset+e.textWidth/2)),e.dy=c?l.yOffset+this.getTextOffsetdy(e.verticalAlignment,e.textHeight,null,l.height):l.yOffset+this.getTextOffsetdy(e.verticalAlignment,e.textHeight),e.imgX+=r.xOffset,e.imgY+=r.yOffset,e.graphicStretchMode!==PWC.Components.Grid.HmiGraphicStretchMode.None?p(e,0,r.height,r.width):(e.horizontalAlignment===PWC.Components.Grid.HorizontalAlignment.Right?e.imgX+=r.width-e.imageSize:e.horizontalAlignment===PWC.Components.Grid.HorizontalAlignment.Center&&(e.imgX+=r.width/2-e.imageSize/2),e.verticalAlignment===PWC.Components.Grid.VerticalAlignment.Bottom?e.imgY+=r.height-e.imageSize:e.verticalAlignment!==PWC.Components.Grid.VerticalAlignment.Center&&e.verticalAlignment!==PWC.Components.Grid.VerticalAlignment.Stretch||(e.imgY+=r.height/2-e.imageSize/2)),e.textPosition===PWC.Components.Grid.HmiTextPosition.Top?(e.imgY<e.rectY+r.yOffset&&(e.imgY=e.rectY+r.yOffset),e.textY+e.dy+.2*e.textHeight>e.rectY+(r.yOffset-e.spacing)&&(e.dy=r.yOffset-(.2*e.textHeight+e.spacing))):e.textPosition===PWC.Components.Grid.HmiTextPosition.Bottom?(e.imgY+e.imageSize>e.rectY+r.yOffset+r.height&&(e.imgY=e.rectY+r.yOffset+r.height-e.imageSize),e.textY+e.dy-.8*e.textHeight<e.rectY+l.yOffset+f.model.cellPadding.top&&(e.dy=f.model.cellPadding.top+l.yOffset+.8*e.textHeight)):e.textPosition===PWC.Components.Grid.HmiTextPosition.Left?e.imgX<e.rectX+r.xOffset&&(e.imgX=e.rectX+r.xOffset):e.textPosition===PWC.Components.Grid.HmiTextPosition.Right&&e.imgX+e.imageSize>e.rectX+r.xOffset+r.width&&(e.imgX=e.rectX+r.xOffset+r.width-e.imageSize))},this.handleImageTextContent=function(e,t,n,i){var o=0,l=(e.textPosition,0),r=this.model.font,a=this.getTextBBoxInfo(i,e.textContent);if(a){i===PWC.Components.Grid.CellType.ColumnHeader&&(r=this.headerSettings.font),o=e.width-(f.model.cellPadding.left+f.model.cellPadding.right+f.model.gridLineWidth),n&&(o-=n),n=e.height-(f.model.gridLineWidth+f.model.cellPadding.top+f.model.cellPadding.bottom),g(e,a,n,o=o<0?0:o),l=Math.round(e.textWidth),null!==e.imageUrl&&(e.dy=this.getTextOffsetdy(e.verticalAlignment,e.textHeight),e.imgY+=.2*a.contentHeight),o<l&&(n=PWC.Components.Grid.GridUtils.getVisibleStringInfo(e.textContent,o,PWC.Components.Grid.HorizontalAlignment.Left,t,r),this.txtContent(0,n,t,e,"...",a,i),a=this.getTextBBoxInfo(i,e.textContent),this.setContentDims(e,a),l=Math.round(e.textWidth));var s=e,d=l,c=e.imageSize;switch(s.horizontalAlignment){case PWC.Components.Grid.HorizontalAlignment.Left:case PWC.Components.Grid.HorizontalAlignment.Stretch:s.imageXOffset=s.dx+d/2-c/2;break;case PWC.Components.Grid.HorizontalAlignment.Center:s.imageXOffset=s.dx-c/2;break;case PWC.Components.Grid.HorizontalAlignment.Right:s.imageXOffset=s.dx-d/2-c/2}}(o=e).graphicStretchMode===PWC.Components.Grid.HmiGraphicStretchMode.None&&(void 0!==o.imgX&&null!==o.imgX&&(o.imgX+=o.imageXOffset||0),void 0!==o.imgY)&&null!==o.imgY&&(o.imgY=(n=(r=o).imgY||0,r.imageSize&&r.dy&&(n+=r.dy-r.imageSize),r.imageYOffset&&(n-=r.imageYOffset),n)),void 0!==o.dx&&null!==o.dx&&(o.dx=(o.dx||0)+(o.textXOffset||0)),void 0!==o.dy&&null!==o.dy&&(o.dy=(o.dy||0)-(o.textYOffset||0))},this.setContentAlignment=function(e,t,n){var i=e.width-this.model.gridLineWidth;if(void 0!==t)switch(null==n&&(n=0),t){case PWC.Components.Grid.HorizontalAlignment.Left:case PWC.Components.Grid.HorizontalAlignment.Stretch:e.dx=this.model.cellPadding.left,e.textAnchor="start";break;case PWC.Components.Grid.HorizontalAlignment.Center:e.dx=(i-n)/2,e.textAnchor="middle";break;case PWC.Components.Grid.HorizontalAlignment.Right:e.dx=i-this.model.cellPadding.right-n,e.textAnchor="end"}},this.isCellFlashEnabled=function(e){var t=!1,e=this.dataMapper.getDataIndex(e),e=this.iGridRef.getRowFlashInfo(e);return t=this.isFlashingOn&&e?!0:t},this.getTotalColumnWidth=function(){for(var e=0,t=this.columns.length,n=0;n<t;n++)"autocomplete"!==this.columns[n].contentMode&&(e+=this.columns[n].width);return e},this.getViewportColumnIndex=function(e){var t,n=null,i=this.columns.length;if(null!==e)for(t=0;t<i;t++)if(this.columns[t].actualColumnIndex===e){n=t;break}return n},this.setCellStyleOverrideEnabled=function(e,t,n,i,o){var t=this.dataMapper.getDataIndex(t),l=!1,r=null,a=null,s=null;null!=n&&(r=this.columns[n]),o&&r&&r.flashingType===PWC.Components.Grid.FlashingTypes.ChangeMessageColor_TableColor&&(a=!0),this.model.coloringMode!==PWC.Components.Grid.ColoringMode.None&&(this.model.coloringMode===PWC.Components.Grid.ColoringMode.Rows?s=this.utils.isIndexEven(t):r&&(s=this.utils.isIndexEven(r.actualColumnIndex)),!s)&&r?(e.fill=r.alternateBackColor,e.forecolor=r.alternateForeColor):r&&(e.fill=r.backColor,e.forecolor=r.foreColor),i&&r&&(r.useColoumnBackgroundColor&&(this.model.useColumnColors||a)&&i.hasOwnProperty("fill")&&i.fill&&(e.fill=i.fill,l=!0),r.useColumnForeColor&&(this.model.useColumnColors||a)&&i.hasOwnProperty("forecolor")&&i.forecolor&&(e.forecolor=i.forecolor,l=!0),i.fontStrikeOut)&&(e.fontStrikeOut="line-through",this.model.font.fontUnderline)&&(e.fontStrikeOut+=" underline"),this.isFlashingOn&&o&&r&&(s=function(e,t,n,i,o){var l=i,r=n,a=null,s=null;switch(f.columns[t].flashingType){case PWC.Components.Grid.FlashingTypes.Standard:a=.3,s="url(#"+f.imageFilter.id+")";break;case PWC.Components.Grid.FlashingTypes.ChangeBackgroundColor_TextColor:r=i,l=n;break;case PWC.Components.Grid.FlashingTypes.ChangeMessageColor_TableColor:o&&(l=f.isAlternateRowColor(e)?(r=f.model.alternateBackColor,f.model.alternateForeColor):(r=f.model.backColor,f.model.foreColor))}return{fill:r,forecolor:l,fillOpacity:a,imageFilter:s}}(t,n,e.fill,e.forecolor,l),e.fill=s.fill,e.forecolor=s.forecolor,"number"==typeof s.fillOpacity&&(e.fillOpacity=s.fillOpacity),"string"==typeof s.imageFilter)&&(e.imageFilter=s.imageFilter)},this.createEmptyCell=function(e,t,n,i){var o=null,l=null,r={},a={};return t&&(r.class=t),n&&(r.id=n),a.textDecoration="inherit",a.cursor=this.tableProps.defaultCursorStyle,this.appMode===PWC.Components.AppMode.RUNTIME&&this.model.enabled&&(this.headerSettings.allowColumnReorder&&t&&"header-cell"===t&&e.id?a.cursor="move":a.cursor="cell"),o=this.utils.createSVG("g",r,null,a),n=this.utils.createSVG("rect",{x:e.rectX,y:e.rectY,width:e.width,height:e.height,fill:e.fill}),o.appendChild(n),l=this.utils.createSVG("g",{id:"content_rowClip"}),i&&this.utils.setSVGAttribute(l,"clip-path","url(#"+i+")"),t=this.utils.createSVG("g",{id:"content_columnClip"}),null!==e.id&&void 0!==e.id&&this.utils.setSVGAttribute(t,"clip-path","url(#"+e.id+")"),l.appendChild(t),o.appendChild(l),o},this.modifyCell=function(e,t,n,i){for(var o,l,r=0,a=null,s=!1,d=!1,c=!1,u=!1,m=!1,p=!1,C=!1,h=e.childNodes.length,g=0,r=0;r<h;r++)"rect"===(o=e.childNodes[r]).tagName?m=!0:"g"===o.tagName&&"content_rowClip"===o.id&&o.childNodes[0]&&"g"===o.childNodes[0].tagName&&(l=o.childNodes[0],g=o.childNodes[0].childNodes.length);if(e&&l)if(null!==t.textContent&&void 0!==t.textContent&&""!==t.textContent&&(s=!0),null!==t.imageUrl&&void 0!==t.imageUrl&&""!==t.imageUrl&&(d=!0),(n===PWC.Components.Grid.CellType.ColumnHeader&&this.headerSettings.font.fontStrikeOut===PWC.Components.Grid.FontStrikeOut.Double||n===PWC.Components.Grid.CellType.DataRow&&this.model.font.fontStrikeOut===PWC.Components.Grid.FontStrikeOut.Double)&&s&&(c=!0),!m||0!==g||d||s)if(s&&!c&&!d&&1===g||d&&!s&&!c&&1===g||d&&s&&!c&&1<g)this.utils.updateCell(e,t,i);else if(s&&c&&!d&&2===g||d&&s&&c&&2<g)this.utils.updateCell(e,t,i),this.utils.updateStrikeOutLines(l,t,!0);else{for(r=g-1;0<=r;r--)"text"===l.childNodes[r].tagName?s?p=!0:l.removeChild(l.childNodes[r]):"image"===l.childNodes[r].tagName||"g"===l.childNodes[r].tagName&&-1!==l.childNodes[r].id.indexOf("_TiledGroup")?d?C=!0:l.removeChild(l.childNodes[r]):"g"===l.childNodes[r].tagName&&-1!==l.childNodes[r].id.indexOf("_doubleStrikeOutLines")&&(c?u=!0:l.removeChild(l.childNodes[r]));t.textPosition===PWC.Components.Grid.HmiTextPosition.Infront&&s&&d?(C||(this.utils.renderImage(l,t),C=!0),p||(this.utils.renderText(l,t,this.model.gridLineWidth),c&&!u&&(a=this.utils.createSrikeOutLines(t,this.id),l.appendChild(a)),p=!0)):(s&&!p&&(this.utils.renderText(l,t,this.model.gridLineWidth),c&&!u&&(a=this.utils.createSrikeOutLines(t,this.id),l.appendChild(a)),p=!0),d&&!C&&(this.utils.renderImage(l,t),C=!0)),this.utils.updateCell(e,t,i)}else t.rectY&&""!==t.rectY&&this.utils.setSVGAttribute(e.childNodes[0],"y",t.rectY),this.utils.setSVGAttribute(e.childNodes[0],"fill",t.fill)},this.getCellPosition=function(e,t){var n=null,n=t&&"mouseup"!==e.type&&"mousedown"!==e.type?t:this.utils.getMousePoint(e,this.parentSvg,this.isAdoptToScreen,this.zoomFactorCB);return{cellColumnIndex:this.getColumnIndexOnPos(n.x),cellRowIndex:this.headerSettings.columnHeaderType!==PWC.Components.Grid.HmiDataGridHeaderType.None?(t=this.getHeaderHeight(),n.y<t?0:1+Math.floor((n.y-this.tableProps.y-t)/this.tableProps.cellHeight)):Math.floor((n.y-this.tableProps.y)/this.tableProps.cellHeight)}},this.getColumnIndexOnPos=function(e){var t=f.columns.length-1,n=null;for(e=Math.ceil(e);0<=t;t--)if(e>=f.columns[t].x){n=t;break}return n},this.isAutoCompleteCell=function(e,t){var n=!1,i=this.dataMapper.getViewPortStartIndex(),o=this.dataMapper.getViewPortEndIndex();return null!==e&&e<this.columns.length&&"autocomplete"===this.columns[e].contentMode&&(n=!0),n=null!=t&&(null===i||null===o||t<i||o<t)?!0:n},this.isSubscribedEvent=function(e){var t=!1;return t=-1!==this.subscribedEvents.indexOf(e)?!0:t},this.clearEventReferences=function(){this.eventReference.startIndex=null,this.eventReference.endIndex=null,this.eventReference.targetGroup=null,this.eventReference.target=null,this.eventReference.index=null,this.eventReference.columnStartIndex=null,this.eventReference.columnEndIndex=null,this.isAutoCompleteArea=null},this.getImageSize=function(e){return e===PWC.Components.Grid.CellType.DataRow||e!==PWC.Components.Grid.CellType.RowHeader&&e!==PWC.Components.Grid.CellType.ColumnHeader&&this.dataHeight.table>this.dataHeight.title?this.dataHeight.table:this.dataHeight.title},this.clearData=function(){this.isFlashingOn=!1,this.parentGroup=null,this.actionHandler=null,this.id=null,this.parentSvg=null,this.iGridRef=null,this.appMode=PWC.Components.AppMode.RUNTIME,this.model=null,this.headerSettings=null,this.columns.length=0,this.dataMapper=null,this.svgDef=null,this.svgTextDef=null,this.clipPathRowHeader.path=null,this.clipPathRowHeader.id=null,this.clipPath.path=null,this.clipPath.id=null,this.imageFilter.filter=null,this.imageFilter.feGaussianBlur=null,this.imageFilter.id=null,this.clearEventReferences(),this.utils.clearData(),this.tableProps=e(),this.isAdoptToScreen=!1,this.zoomFactorCB=null},this.getCellData=function(e,t){var n=null;return null!==e&&null!==t&&(""===(n=this.iGridRef.getCellData(e,t)).text&&(n.text=null),""===n.graphic&&(n.graphic=null),void 0!==n.text)&&null!==n.text&&("string"!=typeof n.text&&(n.text=String(n.text)),n.text=n.text.split(" ").join("")),n},this.getColumnHeaderText=function(e){var t=null,e=this.model.gridColumns[e];return e&&(this.headerSettings.columnHeaderType===PWC.Components.Grid.HmiDataGridHeaderType.Index?null!=(t=e.index)&&(t=String(t)):this.headerSettings.columnHeaderType===PWC.Components.Grid.HmiDataGridHeaderType.Content&&e.headerSettings.content.contentMode!==PWC.Components.Grid.ContentMode.Graphic&&(t=e.headerSettings.text)),t},this.getCellWidth=function(e,t){var n=0,i=null,o=null,l=null,r=this.getRowHeaderWidth(),r=this.tableProps.width-r;for(t&&t.getVScrollBarConfig().visible&&(r=(r-=t.getVScrollBarWidth())-this.model.borderWidth),n=0;n<=e;n++)i+=this.columns[n].width;if(i<=r)l=this.columns[e].width-this.model.gridLineWidth;else{for(n=0;n<e;n++)o+=this.columns[n].width;l=r-o}return l}},PWC||{}),PWC=(PWC.Components=PWC.Components||{},PWC.Components.Grid=PWC.Components.Grid||{},PWC.Components.Grid.RowHeader=function(r){"use strict";function t(e){o.removeChild(o.childNodes[e])}function l(e){var t={x1:0,y1:0,x2:0,y2:0};t.x1=r.tableProps.x,t.x2=t.x1+r.getRowHeaderWidth(),t.y1=r.tableProps.y+r.getHeaderHeight()+e*r.tableProps.cellHeight-r.model.gridLineWidth/2,t.y2=t.y1,o.appendChild(r.utils.createSVG("line",t))}function a(){var e,t,n;r.headerSettings.rowHeaderType===PWC.Components.Grid.HmiDataGridHeaderType.None||r.model.autoCompleteRows&&0<i.childNodes.length||(e={x1:0,y1:0,x2:0,y2:0},t=0,n=r.tableProps.y,r.model.autoCompleteRows?n+=r.tableProps.height:(t=s.childNodes.length,r.headerSettings.columnHeaderType!==PWC.Components.Grid.HmiDataGridHeaderType.None&&(--t,n+=r.getHeaderHeight()),n+=t*r.tableProps.cellHeight),0===i.childNodes.length?(e.x1=r.tableProps.x+r.getRowHeaderWidth()-r.model.gridLineWidth/2,e.x2=e.x1,e.y1=r.tableProps.y,e.y2=n,i.appendChild(r.utils.createSVG("line",e))):r.utils.setSVGAttribute(i.childNodes[0],"y2",n))}function e(){d&&r.utils.clearElement(d)}var n=null,s=null,i=null,o=null,d=null;return{init:function(){n||(n=r.utils.createSVG("g",null,null,null),r.utils.setSVGAttribute(n,"clip-path","url(#"+r.clipPathRowHeader.id+")"),r.parentGroup.appendChild(n));if(r.headerSettings.rowHeaderType!==PWC.Components.Grid.HmiDataGridHeaderType.None){var e=r.utils.getTitleFontPropeties(r.model);if(!s){s=r.utils.createSVG("g",{id:r.id+"_RowHeaderGroup"},null,e);n.appendChild(s)}else r.utils.setSVGStyles(s,e);e={stroke:r.headerSettings.headerGridLineColor,strokeWidth:r.model.gridLineWidth,pointerEvents:"none"};if(!i){i=r.utils.createSVG("g",{id:r.id+"_VLinesRowHeaderGroup"});n.appendChild(i)}if(!o){o=r.utils.createSVG("g",{id:r.id+"_HLinesRowHeaderGroup"});n.appendChild(o)}r.utils.setSVGStyles(i,e),r.utils.setSVGStyles(o,e);e=null;if(r.headerSettings.font.fontStrikeOut===PWC.Components.Grid.FontStrikeOut.Double&&!d){e={stroke:"#000000",strokeWidth:1,"pointer-events":"none"};d=r.utils.createSVG("g",{id:r.id+"_StrikeLinesRowHeaderGroup"},null,e);n.appendChild(d)}}},add:function(e,t){var n,i,o;s&&r.headerSettings.rowHeaderType!==PWC.Components.Grid.HmiDataGridHeaderType.None&&(o=i=null,(n=r.utils.getCellConfig()).rectX=n.textX=r.tableProps.x,n.rectY=n.textY=r.tableProps.y,n.dy=r.getTextOffsetdy(),n.width=r.getRowHeaderWidth(),n.height=r.tableProps.cellHeight,n.fill=r.headerSettings.headerBackColor,n.forecolor=r.headerSettings.headerForeColor,n.graphicStretchMode=PWC.Components.Grid.HmiGraphicStretchMode.None,n.imageSize=r.getImageSize(PWC.Components.Grid.CellType.RowHeader),n.contentHeight=r.tableProps.contentHeight,"data"===e?(r.setContentAlignment(n,r.model.rowTitleAlignment,r.tableProps.rowheaderOffset),n.textContent=r.dataMapper.getDataIndex(t)+1,n.rectY=n.textY=n.rectY+r.getHeaderHeight()+t*n.height,l(t+1),r.headerSettings.font.fontStrikeOut===PWC.Components.Grid.FontStrikeOut.Double&&r.headerSettings.rowHeaderType===PWC.Components.Grid.HmiDataGridHeaderType.Index&&d&&(i=r.getTextBBoxInfo(PWC.Components.Grid.CellType.ColumnHeader,n.textContent),r.setContentDims(n,i),d.appendChild(r.utils.createSrikeOutLines(n,r.id)))):l(0),o=r.createEmptyCell(n,"row-header-cell",null,"url(#"+r.id+"_row_"+t+")"),r.headerSettings.rowHeaderType===PWC.Components.Grid.HmiDataGridHeaderType.Index&&(e=r.utils.getCellContentParent(o).contentChildsParent)&&r.utils.renderText(e,n,r.model.gridLineWidth),s.appendChild(o),a())},update:function(){if(r.headerSettings.rowHeaderType!==PWC.Components.Grid.HmiDataGridHeaderType.None){var e=0,t={fill:r.headerSettings.headerBackColor,forecolor:r.headerSettings.headerForeColor,textContent:null};for(t.textContent=r.dataMapper.getViewPortStartIndex()+1,r.headerSettings.columnHeaderType!==PWC.Components.Grid.HmiDataGridHeaderType.None&&(e=1);e<s.childNodes.length;e++){if(r.utils.updateCell(s.childNodes[e],t,r.model.selectEmptyCell),r.headerSettings.font.fontStrikeOut===PWC.Components.Grid.FontStrikeOut.Double&&r.headerSettings.rowHeaderType===PWC.Components.Grid.HmiDataGridHeaderType.Index){l=o=void 0;var n=t.textContent,i=e,o=r.utils.getCellConfig(),l=null;if(o.width=r.getRowHeaderWidth(),o.height=r.tableProps.cellHeight,o.rectX=o.textX=r.tableProps.x,o.rectY=o.textY=r.tableProps.y+r.getHeaderHeight()+(i-1)*o.height,o.textContent=n,o.dy=r.getTextOffsetdy(),r.setContentAlignment(o,r.model.rowTitleAlignment,r.tableProps.rowheaderOffset),d){l=r.getTextBBoxInfo(PWC.Components.Grid.CellType.ColumnHeader,o.textContent);r.setContentDims(o,l);d.appendChild(r.utils.createSrikeOutLines(o,r.id))}}t.textContent++}}},remove:function(e){r.headerSettings.rowHeaderType!==PWC.Components.Grid.HmiDataGridHeaderType.None&&s.childNodes[e]&&(s.removeChild(s.childNodes[e]),t(e))},deleteHGridLine:t,createHLine:l,createVLine:a,clearGroup:function(){s&&r.utils.clearElement(s),i&&r.utils.clearElement(i),o&&r.utils.clearElement(o),e()},getChild:function(e){return s.childNodes[e]},clearData:function(){d=o=i=s=n=null},clearStrikeOutLines:e}},PWC||{}),PWC=(PWC.Components=PWC.Components||{},PWC.Components.Grid=PWC.Components.Grid||{},PWC.Components.Grid.ScrollHandler=function(a,o){"use strict";function t(){var e=w();!0===C.visible?a.tableProps.isPauseMode?(null!==C.instance&&(!1!==m&&C.instance.onPointerUp(0,0),C.instance.remove(),C.instance=null),W(e.startValue,e.endValue,e.buttonHeight,e.initialOffset,e.scrollStep),C.instance&&C.instance.show()):(null===C.instance?(W(e.startValue,e.endValue,e.buttonHeight,e.initialOffset,e.scrollStep),C.instance&&C.instance.show()):(C.height=a.tableProps.height,C.y=a.tableProps.y,a.model.useSortKey&&C.visible&&a.headerSettings.columnHeaderType!==PWC.Components.Grid.HmiDataGridHeaderType.None&&(C.y=a.tableProps.y+a.getHeaderHeight(),C.height=a.tableProps.height-a.getHeaderHeight()),h.visible&&(C.height=C.height-a.model.borderWidth),C.x=a.tableProps.x+a.tableProps.width-C.width,C.instance.hide(),C.height>2*p&&(C.instance.updateScrollbar(C.x,C.y,C.width,C.height),C.instance.show())),C.instance&&C.instance.disable()):null!==C.instance&&(C.instance.remove(),C.instance=null)}function l(){var e=a.eventReference.target,t=null;if(e&&(e=e.id)){if(-1!==e.indexOf(h.id))t=h;else if(-1!==e.indexOf(C.id)&&(t=C,!a.tableProps.isPauseMode))return;return t}}function r(e,t,n){if("number"==typeof n&&!isNaN(n)){var i=C.scrolledValue;if(C.scrolledValue=Math.round(n),i!==Math.round(n)||"scrolledStep"===t){var n=t,t=i,i=C.scrolledValue,o=a.dataMapper.getViewPortDisplayedRowCount(),l=null;if(n==="scrolledStep"&&t!==i||n==="scrollChange"||n==="scrollEnd"){if(t>i)l="Up";else l="Down";if(n==="scrolledStep"){if(l==="Up"&&a.isSubscribedEvent(PWC.Components.Grid.ControlEvents.OnVScrollUpButtonClick))a.iGridRef.onVScrollUpButtonClick(i,o);else if(l==="Down"&&a.isSubscribedEvent(PWC.Components.Grid.ControlEvents.OnVScrollDownButtonClick))a.iGridRef.onVScrollDownButtonClick(i,o)}else if(n==="scrollChange"){if(a.isSubscribedEvent(PWC.Components.Grid.ControlEvents.OnVScrollChange))a.iGridRef.onVScrollChange(i,o)}else if(n==="scrollEnd")if(a.isSubscribedEvent(PWC.Components.Grid.ControlEvents.OnVScrollDragEnd))a.iGridRef.onVScrollDragEnd(i,o)}a.actionHandler(PWC.Components.Grid.GridActions.Load,null)}}}function s(e,t,n){var i,o=0,l=h.scrollEnd,n=Math.round(n);!g&&n<=l&&0<=n&&(o=h.columnStartIndex,"scrolledStep"!==t||h.isScrollMove?"scrollEnd"===t?(h.isScrollMove=!1,a.actionHandler(PWC.Components.Grid.GridActions.Reload,null)):"scrollStart"===t?(h.isScrollMove=!0,o=h.columnStartIndex):h.isScrollMove&&1!==a.model.gridColumns.length&&h.scrolledValue!==n&&(a.columns[0]&&n>=h.scrolledValue+a.columns[0].width&&h.scrolledValue<l?1===a.columns.length&&a.columns[0].actualColumnIndex===a.model.gridColumns.length-1||(h.scrolledValue+=a.columns[0].width,h.columnStartIndex++,x()):a.columns[0]&&0<a.columns[0].actualColumnIndex&&(i=a.model.gridColumns[a.columns[0].actualColumnIndex-1].width+a.model.gridLineWidth,0!==a.columns[0].actualColumnIndex)&&n<=h.scrolledValue-i&&(h.scrolledValue-=i,h.columnStartIndex--,x())):n>h.scrolledValue&&h.scrolledValue<l?b():n<h.scrolledValue&&v(),T(t,o,h.columnStartIndex))}function n(){h.instance&&(h.scrolledValue=0,h.columnStartIndex=0,x(),h.instance)&&(g=!0,h.instance.scrollToValue(h.scrolledValue),g=!1)}function i(e){var t,n=null,i=e.shiftKey;a.tableProps.isEditEnabled&&a.tableProps.isEditStarted&&(n=o(PWC.Components.Grid.GetInstance.Edit))&&n.endEdit(),void 0===e.wheelDelta&&void 0===e.detail||(n=e.wheelDelta,t=e.detail,n<0||0<t?i?h.scrolledValue<h.scrollEnd&&(P(),e.preventDefault()):C.scrolledValue<C.scrollEnd&&(C.scrolledValue++,D(),H(),e.preventDefault()):(0<n||t<0)&&(i?0<h.scrolledValue&&(v(),e.preventDefault()):0<C.scrolledValue&&(C.scrolledValue--,D(),H(),e.preventDefault())))}function e(){h.scrolledValue=0,h.scrollEnd=0,h.columnStartIndex=0,h.isScrollMove=!1,g=!1}function d(){C.scrolledValue=0}function c(e){C.scrolledValue!==e&&(C.scrolledValue=e,D(),H())}var u=null,m=null,p=17,C={id:null,width:17,height:0,x:0,y:0,instance:null,visible:!1,borderLine:null,scrolledValue:0,scrollEnd:0},h={id:null,width:0,height:17,x:0,y:0,instance:null,visible:!1,columnStartIndex:0,borderLine:null,scrolledValue:0,scrollEnd:0,isScrollMove:!1},g=!1,f=function(){var e,t=0,n=a.model.gridColumns,i=null;for(n&&(i=n.length),e=0;e<i;e++)t+=a.model.gridColumns[e].width+a.model.gridLineWidth;return t},y=function(){var e,t=0,n=a.model.gridColumns,i=null;for(n&&(i=n.length),e=0;e<i;e++)if((t+=n[e].width+a.model.gridLineWidth)===h.scrollEnd)return n[e+1]?e+1:e},S=function(e){var t=0,n=0,i=f();h.scrollEnd=function(){for(var e=0,t=0,n=a.tableProps.width-a.getRowHeaderWidth()-G(),i,i=a.model.gridColumns.length-1;i>=0;i--){e+=a.model.gridColumns[i].width+a.model.gridLineWidth;if(e>n){e=e-(a.model.gridColumns[i].width+a.model.gridLineWidth);t=f()-e;break}}return t}(),e&&(h.scrolledValue=0),0<h.scrollEnd?(t=(a.tableProps.width-a.getRowHeaderWidth()-G())/i,0<h.scrolledValue&&(n=h.scrolledValue/h.scrollEnd)):0<h.scrolledValue&&(h.scrollEnd=h.scrolledValue,t=a.getTotalColumnWidth()/i,n=1),h.width=a.tableProps.width-G(),C.visible&&(h.width=a.tableProps.width-G()-a.tableProps.borderWidth),h.x=a.tableProps.x,h.y=a.tableProps.y+a.tableProps.height,h.width>2*p&&(h.instance=new PWC.Lib.Canvas.ScrollBar(h.id,u,h.x,h.y,h.width,h.height,0,h.scrollEnd,t,n,.01,"top_bottom",s,a.model.borderColor),0<h.scrollEnd?h.instance.enable():h.instance.disable(),h.instance.show())},b=function(e){var t,n,i;if("number"==typeof e){for(t=0;t<e;t++)if(n=a.columns[t]){if(h.scrolledValue+=n.width,h.scrolledValue>h.scrollEnd){h.scrolledValue=h.scrollEnd;break}h.columnStartIndex++,i=!0}}else!a.columns[0]||1===a.columns.length&&a.columns[0].actualColumnIndex===a.model.gridColumns.length-1||(h.scrolledValue+=a.columns[0].width,h.columnStartIndex++,i=!0);i&&x(),h.instance&&(g=!0,h.instance.scrollToValue(h.scrolledValue),g=!1)},P=function(e){var t,n,i=null,o=!1;if("number"==typeof e){if(0<=e&&e<a.model.gridColumns.length){for(t=0;t<e;t++)i+=a.model.gridColumns[t].width+a.model.gridLineWidth;if(i>h.scrollEnd){if(n=y(),h.columnStartIndex===n)return;h.scrolledValue=h.scrollEnd,h.columnStartIndex=n}else{if(h.columnStartIndex===e)return;h.scrolledValue=i,h.columnStartIndex=e}o=!0}}else if(n=y(),h.columnStartIndex<n){for(h.columnStartIndex++,t=0;t<h.columnStartIndex;t++)i+=a.model.gridColumns[t].width+a.model.gridLineWidth;h.scrolledValue=i,o=!0}o&&(x(),h.instance)&&(g=!0,h.instance.scrollToValue(h.scrolledValue),g=!1)},v=function(e,t){var n,i,o,l=!1,r=null;if(t){for(i=a.model.gridColumns,o=a.model.gridLineWidth,t=a.columns,e=Math.min(e,t[0].actualColumnIndex-1),n=t[0].actualColumnIndex-1;e<=n&&!(n<0);n--)r+=i[n].width+o,l=!0,h.columnStartIndex--;h.scrolledValue-=r}else if("number"==typeof e){if(0<=e&&e<a.model.gridColumns.length&&h.columnStartIndex>e){for(h.columnStartIndex=e,n=0;n<h.columnStartIndex;n++)r+=a.model.gridColumns[n].width+a.model.gridLineWidth;h.scrolledValue=r,l=!0}}else a.columns[0]&&0!==a.columns[0].actualColumnIndex&&(h.scrolledValue-=a.model.gridColumns[a.columns[0].actualColumnIndex-1].width+a.model.gridLineWidth,h.columnStartIndex--,l=!0);l&&(x(),h.instance)&&(g=!0,h.instance.scrollToValue(h.scrolledValue),g=!1)},x=function(){a.actionHandler(PWC.Components.Grid.GridActions.Partial_Load,h.columnStartIndex)},T=function(e,t,n){var i=h.columnStartIndex,o=a.columns.length,l=null;("scrolledStep"!==e&&"scrollChange"!==e||t===n)&&"scrollEnd"!==e||(l=n<t?"Left":"Right","scrolledStep"===e?"Left"===l&&a.isSubscribedEvent(PWC.Components.Grid.ControlEvents.OnHScrollLeftButtonClick)?a.iGridRef.onHScrollLeftButtonClick(i):"Right"===l&&a.isSubscribedEvent(PWC.Components.Grid.ControlEvents.OnHScrollRightButtonClick)&&a.iGridRef.onHScrollRightButtonClick(i):"scrollChange"===e?a.isSubscribedEvent(PWC.Components.Grid.ControlEvents.OnHScrollChange)&&a.iGridRef.onHScrollChange(i):a.isSubscribedEvent(PWC.Components.Grid.ControlEvents.OnHScrollDragEnd)&&a.iGridRef.onHScrollDragEnd(i,o))},w=function(){var e=0,t=0,n=a.dataMapper.getTotalRecords(),i=a.dataMapper.getMaxRowsToDisplay(),o=0,l=0,r=0;return i<n&&(e=0,o=i/n,r=1/(t=n-i)),0<t&&(l=C.scrolledValue/t),C.scrollEnd=t,C.height=a.tableProps.height,C.x=a.tableProps.x+a.tableProps.width-C.width,C.y=a.tableProps.y,a.model.useSortKey&&C.visible&&a.headerSettings.columnHeaderType!==PWC.Components.Grid.HmiDataGridHeaderType.None&&(C.y=a.tableProps.y+a.getHeaderHeight(),C.height=a.tableProps.height-a.getHeaderHeight()),h.visible&&(C.height=C.height-a.model.borderWidth),{startValue:e,endValue:t,buttonHeight:o,initialOffset:l,scrollStep:r}},W=function(e,t,n,i,o){C.height>2*p&&(C.instance=new PWC.Lib.Canvas.ScrollBar(C.id,u,C.x,C.y,C.width,C.height,e,t,n,i,o,"top_bottom",r,a.model.borderColor),0<t?C.instance.enable():C.instance.disable())},G=function(){return C.visible?C.width:0},D=function(){var e=C.scrolledValue,t=a.dataMapper.getViewPortDisplayedRowCount();a.isSubscribedEvent(PWC.Components.Grid.ControlEvents.OnMouseWheelScroll)&&a.iGridRef.onMouseWheelScroll(e,t)},H=function(){void 0!==C.instance&&null!==C.instance?C.instance.scrollToValue(C.scrolledValue):a.actionHandler(PWC.Components.Grid.GridActions.Load,null)};return{createScrollBarGroup:function(){u||(u=a.utils.createSVG("g",{id:a.id+"_ScrollGroup"}),a.parentGroup.appendChild(u))},setScrollBarProps:function(){(C.id=a.id+"_VScrollBar",h.id=a.id+"_HScrollBar",C.visible=!1,a.model.verticalScrollbarVisibility===PWC.Components.Grid.HmiScrollBarVisibility.Automatic&&a.tableProps.isPauseMode&&0<a.model.gridColumns.length)?a.dataMapper.getTotalRecords()>a.dataMapper.getMaxRowsToDisplay()&&(C.visible=!0):a.model.verticalScrollbarVisibility===PWC.Components.Grid.HmiScrollBarVisibility.Visible&&(C.visible=!0);(h.visible=!1,a.model.horizontalScrollbarVisibility===PWC.Components.Grid.HmiScrollBarVisibility.Automatic)?(f()>a.model.width-2*a.model.borderWidth-a.getRowHeaderWidth()-G()||0!==h.columnStartIndex)&&(h.visible=!0):a.model.horizontalScrollbarVisibility===PWC.Components.Grid.HmiScrollBarVisibility.Visible&&(h.visible=!0)},handleScrollBars:function(e){h.visible?(null!==h.instance&&(h.instance.remove(),h.instance=null),S(e)):null!==h.instance&&(h.instance.remove(),h.instance=null);t()},onScrollEvent:function(e){var t,n,i=a.eventReference.target,o=l();!o||"pan"!==e.type&&"panstart"!==e.type&&"panend"!==e.type||(n=a.utils.getMousePoint(e,a.parentSvg,a.isAdoptToScreen,a.zoomFactorCB),t=o.x+n.x,n=o.y+n.y,"panstart"===e.type?(m=!0,o.instance.onPointerDown(t,n,i)):"pan"===e.type?(m=!0,o.instance.onPointerMove(t,n,i)):"panend"===e.type&&(o.instance.onPointerUp(t,n),m=!1))},onScrollClickEvent:function(e){var t,n,i=a.eventReference.target,o=l();!o||"mousedown"!==e.type&&"mouseup"!==e.type&&"touchstart"!==e.type&&"touchend"!==e.type||(n=a.utils.getMousePoint(e,a.parentSvg,a.isAdoptToScreen,a.zoomFactorCB),t=o.x+n.x,n=o.y+n.y,"mousedown"===e.type||"touchstart"===e.type?(m=!0,o.instance.onPointerDown(t,n,i)):"mouseup"!==e.type&&"touchend"!==e.type||(o.instance.onPointerUp(t,n),a.clearEventReferences(),m=!1))},handleVerticalScrollbar:t,getScrollInfo:function(){return{hColStartIndex:h.columnStartIndex,vScrolledValue:C.scrolledValue}},setScrollInfo:function(e){0===e.hColStartIndex?n():b(e.hColStartIndex),c(e.vScrolledValue)},getVScrollBarWidth:G,getHScrollBarHeight:function(){return h.visible?h.height:0},getVScrollBarConfig:function(){return C},getHScrollBarConfig:function(){return h},attachMouseWheelEvent:function(e){e.addEventListener("mousewheel",i),e.addEventListener("DOMMouseScroll",i)},removeMouseWheelEvent:function(e){e.removeEventListener("mousewheel",i),e.removeEventListener("DOMMouseScroll",i)},resetHorizontalScroll:e,resetVerticalScroll:d,setScrollPosition:function(){a.tableProps.autoScrollToLatest?C.scrolledValue=C.scrollEnd:C.scrolledValue=C.scrolledValue,H()},scrollVertical:c,scrollHorizontal:function(e,t){switch(e){case PWC.Components.Grid.ArrowKeySelection.MoveColumnToFirst:n();break;case PWC.Components.Grid.ArrowKeySelection.MoveColumnToLeft:P(t);break;case PWC.Components.Grid.ArrowKeySelection.MoveColumnToRight:v(t);break;case PWC.Components.Grid.ArrowKeySelection.MoveColumnToLast:h.instance&&h.scrolledValue!==h.scrollEnd&&(h.scrolledValue=h.scrollEnd,h.columnStartIndex=y(),x(),h.instance)&&(g=!0,h.instance.scrollToValue(h.scrolledValue),g=!1)}},clearData:function(){e(),d(),m=u=null,g=!1},setVScrollBarScrolledValue:function(e){C.scrolledValue=e},swipe:function(e,t){var e=e.additionalEvent,n=!1;t*=3,"panleft"===e?0<h.scrolledValue&&v(t,!0):"panright"===e?h.scrolledValue<h.scrollEnd&&b(t):("pandown"===e?n=function(e){var t;if(C.scrolledValue>0){C.scrolledValue-=e;if(C.scrolledValue<0)C.scrolledValue=0;t=true}return t}(t):"panup"===e&&(n=function(e){var t;if(C.scrolledValue!==C.scrollEnd){C.scrolledValue+=e;if(C.scrolledValue>C.scrollEnd)C.scrolledValue=C.scrollEnd;t=true}return t}(t)),n&&(D(),H()))}}},PWC||{}),PWC=(PWC.Components=PWC.Components||{},PWC.Components.Grid=PWC.Components.Grid||{},PWC.Components.Grid.SelectionHandler=function(S,p){"use strict";function m(){return{forecolor:S.model.selectionForeColor,fill:S.model.selectionBackColor,fontStrikeOut:"inherit"}}function c(e,t,n,i){var o,l,r,a,s,d,c,u,m;S.tableProps.isPauseMode&&(o=null,l=S.dataMapper.getViewPortStartIndex(),r=S.dataMapper.getViewPortEndIndex(),a=S.dataMapper.getMaxRowsToDisplay(),s=S.dataMapper.getTotalRecords(),c=d=null,m=u=!1,G(),null!==e&&e instanceof Array&&(f.setSelection(e),u=!0),null!=t&&t<S.model.gridColumns.length&&(f.setCellColumnSelection(t),h.colStartIndex=t,m=!(h.colEndIndex=null)),u&&m&&0<e.length&&f.setSelectedCells([{rowIndex:e[0],selectedCells:[t]}]),null!=n&&n<s&&(f.setCellRowSelection(n),(h.startIndex=n)<l?o=n:r<n&&(o=n-a+1),(h.endIndex=null)!==o&&i&&(d=p(PWC.Components.Grid.GetInstance.Scroll))&&d.scrollVertical(o),x(),B()),c=p(PWC.Components.Grid.GetInstance.Sort))&&c.setSortKeyOnSelection()}function r(e){var t,n=0,i=S.utils.getCellContentParent(e).contentChildsParent;if(i)for(n=i.childNodes.length-1;0<=n;n--)"g"===i.childNodes[n].tagName&&-1!==i.childNodes[n].id.indexOf("sortGroup")&&(t=i.childNodes[n]);return t}function C(e,t,n){var t=S.columns[t].flashingType,i={fill:null,forecolor:null,fontStrikeOut:n.fontStrikeOut};t===PWC.Components.Grid.FlashingTypes.Standard?(i.fill=n.fill,i.forecolor=n.forecolor):t===PWC.Components.Grid.FlashingTypes.ChangeBackgroundColor_TextColor&&(i.forecolor=n.fill,i.fill=n.forecolor),S.utils.updateCell(e,i,S.model.selectEmptyCell)}function b(e,t,n,i){for(var o,l=0,l=e;l<t;l++)(o={}).x1=S.columns[i].x,o.x2=o.x1+n,o.y1=S.tableProps.y+S.getHeaderHeight()+(l+1)*S.tableProps.cellHeight-S.model.gridLineWidth/2,o.y2=o.y1,v.appendChild(S.utils.createSVG("line",o,null,{stroke:S.model.selectionBackColor,"stroke-width":S.model.gridLineWidth}))}function P(e,t,n,i){var o={},i=S.columns[i].x+n-S.model.gridLineWidth/2,n=e*S.tableProps.cellHeight+S.tableProps.y+S.getHeaderHeight();o.x1=i,o.x2=i,o.y1=n,o.y2=n+S.tableProps.cellHeight*(t-e+1)-S.model.gridLineWidth,v.appendChild(S.utils.createSVG("line",o,null,{stroke:S.model.selectionBackColor,"stroke-width":S.model.gridLineWidth}))}function t(e){var t,n,i,o,l,r,a,s=0,d=0,c=null,u=null,m={rowIndex:null,selectedCells:[]},p=f.getCellColumnSelection(),C=null,h=g().rowSelection[0];if(void 0!==h&&(S.eventReference.startIndex=h),null!==e.cellColumnIndex&&(C=S.columns[e.cellColumnIndex].actualColumnIndex),c=S.dataMapper.getDataIndex(e.cellRowIndex),S.headerSettings.columnHeaderType!==PWC.Components.Grid.HmiDataGridHeaderType.None&&(c-=1),!(S.isAutoCompleteCell(e.cellColumnIndex,c)||S.eventReference.endIndex===c&&p===C)){if(G(),S.model.gridSelectionMode!==PWC.Components.Grid.SelectionMode.Multi)null!==e.cellColumnIndex&&f.setCellColumnSelection(S.columns[e.cellColumnIndex].actualColumnIndex),f.setCellRowSelection(c),S.model.gridSelectionMode===PWC.Components.Grid.SelectionMode.Single&&(S.model.selectFullRow?(f.clearSelection(),f.setSelection([c])):null!==e.cellColumnIndex&&(f.clearSelection(),u=S.columns[e.cellColumnIndex].actualColumnIndex,m.rowIndex=c,m.selectedCells.push(u),f.addToSelectedCells(m))),S.eventReference.endIndex=c,S.eventReference.startIndex=c,S.eventReference.columnStartIndex=u,S.eventReference.columnEndIndex=u;else if(null!==c&&null!==S.eventReference.startIndex)if(n=Math.min(S.eventReference.startIndex,c),i=Math.max(S.eventReference.startIndex,c),h=Math.min(n,S.eventReference.endIndex),t=Math.max(i,S.eventReference.endIndex),S.model.selectFullRow){for(s=h;s<=t;s++)n<=s&&s<=i?f.isSelected(s)||f.addToSelection(s):f.removeFromSelection(s);S.eventReference.endIndex=c,S.eventReference.columnEndIndex=u}else if(null!==e.cellColumnIndex){for(u=S.columns[e.cellColumnIndex].actualColumnIndex,o=Math.min(S.eventReference.columnStartIndex,u),l=Math.max(S.eventReference.columnStartIndex,u),r=Math.min(o,S.eventReference.columnEndIndex),a=Math.max(l,S.eventReference.columnEndIndex),s=h;s<=t;s++)if(n<=s&&s<=i)for(d=r;d<=a;d++)o<=d&&d<=l?f.isCellSelected(s,d)||f.updateCellSelection(s,d):f.removeCellSelection(s,d);else for(d=r;d<=a;d++)f.removeCellSelection(s,d);S.eventReference.endIndex=c,S.eventReference.columnEndIndex=u}x(),B()}}var v=null,f=null,h={startIndex:null,endIndex:null,colStartIndex:null,colEndIndex:null},y=!1,a=function(){return{fill:S.headerSettings.headerSelectionBackColor,forecolor:S.headerSettings.headerSelectionForeColor}},g=function(){var e={rowSelection:[],selectedCellRowIndex:null,selectedCellColumnIndex:null},t=f.getSelection(),n=f.getCellColumnSelection(),i=f.getCellRowSelection();return 0<t.length&&(e.rowSelection=t.slice(0)),e.selectedCellColumnIndex=n,e.selectedCellRowIndex=i,e},x=function(){var e=f.getCellRowSelection(),t=f.getCellColumnSelection(),n=w().columnIndex,i=[],o=!0;return S.model.enabled&&(S.tableProps.isPauseMode?(h.startIndex=e,h.colStartIndex=t,S.model.selectFullRow?(i=T(),E(i)):(i=(e=W()).viewportSelectedRows,o=k(e)),o&&(I(i),A(n),M())):S.model.selectFullRow&&S.tableProps.isAutoSelectionEnabled&&S.tableProps.autoSelection&&S.model.gridSelectionMode!==PWC.Components.Grid.SelectionMode.None&&(s(),l())),o},l=function(){var e=S.dataMapper.getTotalRecords(),t=null;0<e&&(t=S.tableProps.autoScrollToLatest?e-1:0,f.addToSelection(t),f.setCellRowSelection(t),h.startIndex=t,h.endIndex=null,e=T(),I(e))},s=function(){var e=T();null!==e&&0<e.length&&f.clearSelection()},T=function(){for(var e,t=f.getSelection(),n=t.length,i=S.dataMapper.getViewPortStartIndex(),o=[],l=S.dataMapper.getMaxRowsToDisplay(),r=0;r<n;r++)i<=(e=t[r])&&e<i+l&&o.push(e-i),0;return o},w=function(){var e,t=f.getCellColumnSelection(),n=f.getCellRowSelection(),i=S.dataMapper.getViewPortStartIndex(),o=S.dataMapper.getMaxRowsToDisplay(),l=null,r=null;if(null!==n&&i<=n&&n<i+o&&(l=n-i),null!=t)for(e=0;e<S.columns.length;e++)if(null!==S.columns[e].actualColumnIndex&&S.columns[e].actualColumnIndex===t){r=e;break}return{columnIndex:r,rowIndex:l}},W=function(){for(var e,t,n,i,o=0,l=0,r=0,a=f.getSelectedCells(),s=a.length,d=null,c=[],u=[],m=S.dataMapper.getViewPortStartIndex(),p=S.dataMapper.getMaxRowsToDisplay(),C=S.columns.length,o=0;o<s;o++)if(e=a[o],d={rowIndex:null,selectedCells:[]},m<=(n=e.rowIndex)&&n<m+p){for(d.rowIndex=n-m,u.push(n-m),i=e.selectedCells.length,l=0;l<i;l++)if(null!=(t=e.selectedCells[l]))for(r=0;r<C;r++)if(null!==S.columns[r].actualColumnIndex&&S.columns[r].actualColumnIndex===t){d.selectedCells.push(r);break}c.push(d)}return{viewportSelectedCells:c,viewportSelectedRows:u}},G=function(){var e,t=null,n=null,i=w().columnIndex;S.model.selectFullRow?(t=n=T(),null!==n&&0<n.length&&u(n)):(t=(e=W()).viewportSelectedRows,null!==(n=e.viewportSelectedCells)&&0<n.length&&D(n)),null!==t&&0<t.length&&o(t),null!==i&&d(i),H()},o=function(e){if(S.headerSettings.rowHeaderType!==PWC.Components.Grid.HmiDataGridHeaderType.None){var t,n,i=null,o=null,l={fill:S.headerSettings.headerBackColor,forecolor:S.headerSettings.headerForeColor};if(i=p(PWC.Components.Grid.GetInstance.RowHeader,null))for(t=0;t<e.length;t++)o=e[t],S.headerSettings.columnHeaderType!==PWC.Components.Grid.HmiDataGridHeaderType.None&&o++,n=i.getChild(o),S.utils.updateCell(n,l,S.model.selectEmptyCell)}},d=function(e){var t,n,i={fill:S.headerSettings.headerBackColor,forecolor:S.headerSettings.headerForeColor},o=0,l=null;if(S.headerSettings.columnHeaderType!==PWC.Components.Grid.HmiDataGridHeaderType.None&&null!==e&&(l=p(PWC.Components.Grid.GetInstance.Column,null))&&(l=l.getChild(e))&&(S.utils.updateCell(l,i,S.model.selectEmptyCell),S.columns[e].sortDirection!==PWC.Components.Grid.HmiSortDirection.None)&&(t=r(l)))for(n=t.childNodes.length,o=0;o<n;o++)if("rect"===t.childNodes[o].tagName&&t.childNodes[o].id===S.id+"_sortGroup_rect"){S.utils.setSVGAttribute(t.childNodes[o],"fill",i.fill);break}},u=function(e){for(var t,n,i,o=0,l=0,r=null,a={fill:S.model.backColor,forecolor:S.model.foreColor,fillOpacity:1,imageFilter:"none",fontStrikeOut:"inherit"},s=null,d=null,s=p(PWC.Components.Grid.GetInstance.DataRow,null),o=0;o<e.length;o++){if(r=e[o],t=s.getChild(r))for(l=0;l<t.childNodes.length;l++)"autocomplete"!==S.columns[l].contentMode&&(d=S.dataMapper.getDataIndex(r),n=S.iGridRef.getCellStyle(d,S.columns[l].actualColumnIndex),i=S.iGridRef.getRowFlashInfo(d),S.setCellStyleOverrideEnabled(a,r,l,n,i),S.utils.updateCell(t.childNodes[l],a,S.model.selectEmptyCell),a.fillOpacity=1,a.imageFilter="none",a.fontStrikeOut="inherit");t=d=r=null}},D=function(e){for(var t,n,i,o,l,r,a=0,s=0,d=null,c={fill:S.model.backColor,forecolor:S.model.foreColor,fillOpacity:1,imageFilter:"none",fontStrikeOut:"inherit"},u=null,m=null,u=p(PWC.Components.Grid.GetInstance.DataRow,null),a=0;a<e.length;a++){if(d=(r=e[a]).rowIndex,t=u.getChild(d))for(i=(n=r.selectedCells).length,s=0;s<i;s++)"autocomplete"!==S.columns[n[s]].contentMode&&(m=S.dataMapper.getDataIndex(d),o=S.iGridRef.getCellStyle(m,S.columns[n[s]].actualColumnIndex),l=S.iGridRef.getRowFlashInfo(m),S.setCellStyleOverrideEnabled(c,d,n[s],o,l),S.utils.updateCell(t.childNodes[n[s]],c,S.model.selectEmptyCell),c.fillOpacity=1,c.imageFilter="none",c.fontStrikeOut="inherit");t=m=d=null}},H=function(){for(;v.firstChild;)v.removeChild(v.firstChild)},I=function(e){var t,n,i,o,l=null,r=null;if(null!==e&&0<e.length&&(n=e.length,r=p(PWC.Components.Grid.GetInstance.RowHeader,null),S.headerSettings.rowHeaderType!==PWC.Components.Grid.HmiDataGridHeaderType.None)&&0<n)for(o=a(),t=0;t<n;t++)l=e[t],S.headerSettings.columnHeaderType!==PWC.Components.Grid.HmiDataGridHeaderType.None&&(l+=1),(i=r.getChild(l))&&S.utils.updateCell(i,o,S.model.selectEmptyCell)},A=function(e){var t,n,i=null,o=0,i=p(PWC.Components.Grid.GetInstance.Column,null);if(S.headerSettings.columnHeaderType!==PWC.Components.Grid.HmiDataGridHeaderType.None&&null!==e){var l=a();if(i&&(i=i.getChild(e),S.utils.updateCell(i,l,S.model.selectEmptyCell),S.columns[e].sortDirection!==PWC.Components.Grid.HmiSortDirection.None)&&(t=r(i)))for(n=t.childNodes.length,o=0;o<n;o++)if("rect"===t.childNodes[o].tagName&&t.childNodes[o].id===S.id+"_sortGroup_rect"){S.utils.setSVGAttribute(t.childNodes[o],"fill",l.fill);break}}},E=function(e){var t,n,i,o,l=0,r={},a=null,a=p(PWC.Components.Grid.GetInstance.DataRow,null),r=m();if(null!==e&&0<e.length)for(t=e.length,n=0;n<t;n++)if(i=a.getChild(e[n]))for(l=0;l<i.childNodes.length;l++)"autocomplete"!==S.columns[l].contentMode&&(o=S.dataMapper.getDataIndex(e[n]),(o=S.iGridRef.getCellStyle(o,S.columns[l].actualColumnIndex))&&o.fontStrikeOut&&(r.fontStrikeOut="line-through",S.model.font.fontUnderline)&&(r.fontStrikeOut+=" underline"),S.isCellFlashEnabled(e[n],l)?C(i.childNodes[l],l,r):S.utils.updateCell(i.childNodes[l],r,S.model.selectEmptyCell),r.fontStrikeOut="inherit")},k=function(e){var t,n,i,o,l,r=null,a=!0,s=0,d=0,c={},u=null,u=p(PWC.Components.Grid.GetInstance.DataRow,null),c=m();if(e&&0<(r=null!==(t=e.viewportSelectedCells)?t.length:r))for(s=0;s<r;s++)if(n=t[s],o=u.getChild(n.rowIndex))for(d=0;d<n.selectedCells.length;d++)i=n.selectedCells[d],"autocomplete"!==S.columns[i].contentMode&&o.childNodes[i]&&(l=S.dataMapper.getDataIndex(n.rowIndex),(l=S.iGridRef.getCellStyle(l,S.columns[i].actualColumnIndex))&&l.fontStrikeOut&&(c.fontStrikeOut="line-through",S.model.font.fontUnderline)&&(c.fontStrikeOut+=" underline"),S.isCellFlashEnabled(n.rowIndex,i)?C(o.childNodes[i],i,c):a=S.utils.updateCell(o.childNodes[i],c,S.model.selectEmptyCell),c.fontStrikeOut="inherit");return a},M=function(){var e={strokeWidth:null,stroke:null,fill:"none","pointer-events":"none"};if(!(S.model.gridColumns.length<=0))if(e.strokeWidth=S.model.selectionBorderWidth,e.stroke=S.model.selectionBorderColor,S.model.selectFullRow){if(S.model.selectFullRow){var t=e,n=T(),i=null,o=null,l=0;if(n.length>0){n=n.sort(function(e,t){return e-t});i=n[0];o=n[0];for(l=1;l<n.length;l++)if(n[l]===o+1)o=n[l];else{N(t,i,o);i=n[l];o=n[l]}N(t,i,o)}}}else if(y){var r=e;if(f.isCellSelected(f.getCellRowSelection(),f.getCellColumnSelection())){d=w();if(d.rowIndex!==null&&d.columnIndex!==null)V(r,d.rowIndex,d.columnIndex)}}else{var a,s,r=e,d=W(),e=d.viewportSelectedRows.sort(function(e,t){return e-t}),c=d.viewportSelectedCells,u=null,m=null,p=null,C=null,h=0,g=e.length;if(g>0){u=e[0];m=e[e.length-1]}for(h=0;h<g;h++){s=c[h].selectedCells;if(s.length>0){if(c[h].rowIndex===u){a=s.sort(function(e,t){return e-t});p=a[0]}if(c[h].rowIndex===m){a=s.sort(function(e,t){return e-t});C=a[a.length-1]}}}if(u!==null&&m!==null&&p!==null&&C!==null)R(r,u,m,p,C)}},N=function(e,t,n){var i,o,l,r,a,s,d,c,u,m={x:0,y:0,width:0,height:0},p=n-t+1;if(m.x=S.tableProps.x+e.strokeWidth/2,m.y=t*S.tableProps.cellHeight+S.tableProps.y+S.getHeaderHeight()-e.strokeWidth/2,m.height=p*S.tableProps.cellHeight-S.model.gridLineWidth+e.strokeWidth,m.width=S.getTotalColumnWidth()+S.getRowHeaderWidth()-S.model.gridLineWidth,m.x+e.strokeWidth/2>S.tableProps.x+S.getRowHeaderWidth()&&(i=m.x+e.strokeWidth/2-(S.tableProps.x+S.getRowHeaderWidth()),m.x-=i,m.width+=i),S.model.gridLineVisibility===PWC.Components.Grid.HmiGridLinesSimple.Vertical||S.model.gridLineVisibility===PWC.Components.Grid.HmiGridLinesSimple.HorizontalAndVertical)for(l=(o=S.columns).length-1,S.columns[l]&&"autocomplete"===S.columns[l].contentMode&&(l-=1),r=0;r<l;r++)P(t,n,o[r].width,r);if(S.model.gridLineVisibility!==PWC.Components.Grid.HmiGridLinesSimple.Horizontal&&S.model.gridLineVisibility!==PWC.Components.Grid.HmiGridLinesSimple.HorizontalAndVertical||b(t,n,m.width-S.getRowHeaderWidth(),0),0<S.model.selectionBorderWidth){p=S.utils.colorShadeChange(S.utils.rgbaToHex(S.model.selectionBackColor),-.2),s=n,d=p,c={},u=(a=t)*S.tableProps.cellHeight+S.tableProps.y+S.getHeaderHeight(),c.x1=S.tableProps.x+S.getRowHeaderWidth()-S.model.gridLineWidth/2,c.x2=c.x1,c.y1=u,c.y2=u+S.tableProps.cellHeight*(s-a+1)-S.model.gridLineWidth,v.appendChild(S.utils.createSVG("line",c,null,{stroke:d,"stroke-width":S.model.gridLineWidth}));var C,h=n,g=p,f=i,y=0;for(f=i||0,y=t;y<h;y++){C={};C.x1=S.tableProps.x+S.model.selectionBorderWidth-f;C.x2=C.x1+S.getRowHeaderWidth()-S.model.selectionBorderWidth;C.y1=S.tableProps.y+S.getHeaderHeight()+(y+1)*S.tableProps.cellHeight-S.model.gridLineWidth/2;C.y2=C.y1;v.appendChild(S.utils.createSVG("line",C,null,{stroke:g,"stroke-width":S.model.gridLineWidth}))}}v.appendChild(S.utils.createSVG("rect",m,null,e))},V=function(e,t,n){var i={x:0,y:0,width:0,height:0};i.x=S.columns[n].x,i.x=i.x-e.strokeWidth/2,i.y=S.tableProps.y+S.getHeaderHeight()+S.tableProps.cellHeight*t-e.strokeWidth/2,i.height=S.tableProps.cellHeight+e.strokeWidth-S.model.gridLineWidth,i.width=S.columns[n].width+e.strokeWidth-S.model.gridLineWidth,v.appendChild(S.utils.createSVG("rect",i,null,e))},R=function(e,t,n,i,o){for(var l={x:0,y:0,width:0,height:0},r=0,a=0,a=i;a<=o;a++)r+=S.columns[a].width,a<o&&(S.model.gridLineVisibility===PWC.Components.Grid.HmiGridLinesSimple.Vertical||S.model.gridLineVisibility===PWC.Components.Grid.HmiGridLinesSimple.HorizontalAndVertical)&&P(t,n,r,i);l.x=S.columns[i].x,l.x=l.x-e.strokeWidth/2,l.y=S.tableProps.y+S.getHeaderHeight()+S.tableProps.cellHeight*t-e.strokeWidth/2,l.height=S.tableProps.cellHeight*(n-t+1)+e.strokeWidth-S.model.gridLineWidth,l.width=r+e.strokeWidth-S.model.gridLineWidth,S.model.gridLineVisibility!==PWC.Components.Grid.HmiGridLinesSimple.Horizontal&&!PWC.Components.Grid.HmiGridLinesSimple.HorizontalAndVertical||b(t,n,r,i),v.appendChild(S.utils.createSVG("rect",l,null,e))},B=function(){var e;0<S.dataMapper.getViewPortDisplayedRowCount()&&(e=g(),S.iGridRef.onSelection(e))},L=function(e,t){var n,i,o,l,r=null,a=null,s=null,d=0,c=null,u=null,m=null,p=0;if(null!==h.endIndex&&h.endIndex!==e&&(s=h.endIndex),h.endIndex=e,n=Math.min(h.startIndex,h.endIndex),i=Math.max(h.startIndex,h.endIndex),a=null!==s?(r=Math.min(n,s),Math.max(i,s)):(r=n,i),S.model.selectFullRow)for(d=r;d<=a;d++)n<=d&&d<=i?f.isSelected(d)||f.addToSelection(d):f.removeFromSelection(d);else for(null!==h.colEndIndex&&h.colEndIndex!==t&&(m=h.colEndIndex),h.colEndIndex=t,o=Math.min(h.colStartIndex,h.colEndIndex),l=Math.max(h.colStartIndex,h.colEndIndex),u=null!==m?(c=Math.min(o,m),Math.max(l,m)):(c=o,l),d=r;d<=a;d++)if(n<=d&&d<=i)for(p=c;p<=u;p++)o<=p&&p<=l?f.isCellSelected(d,p)||f.updateCellSelection(d,p):f.removeCellSelection(d,p);else for(p=c;p<=u;p++)f.removeCellSelection(d,p)};return{createSelectionRectGroup:function(){v||(v=S.utils.createSVG("g",{id:S.id+"_SelectionRectGroup"}),S.utils.setSVGAttribute(v,"clip-path","url(#"+S.clipPath.id+")"),S.parentGroup.appendChild(v))},resetSelectionInfo:function(){var e,t,n,i,o=f.getCellRowSelection();if(S.model.gridSelectionMode===PWC.Components.Grid.SelectionMode.None)f.clearAll();else if(null!==o)if(f.clearSelection(),S.model.selectFullRow&&S.model.gridSelectionMode===PWC.Components.Grid.SelectionMode.Single)if(i=(t=f.getSelection()).length,t&&0<i)for(e=0;e<i;e++)t[e]===o&&f.addToSelection(o);else null!==o&&f.addToSelection(o);else null!==(n=f.getCellColumnSelection())&&f.addToSelectedCells({rowIndex:o,selectedCells:[n]});B()},getSelection:g,setSelection:c,applySelection:x,clearPrevSelection:G,clearSelectionRects:H,selectionKeyNavigation:function(e,t){if(S.tableProps.isPauseMode&&!S.tableProps.isEditStarted){var n,i=null,o=S.dataMapper.getTotalRecords(),l=null,r=null,a=PWC.Components.Grid.KeyCodes,s=null,d=!1;if(f&&(i=f.getCellRowSelection(),l=f.getCellColumnSelection()),e===a.CursorUp||e===a.CursorDown)0<o&&(t?i=e===a.CursorUp?0:o-1:null!==i?0<i&&e===a.CursorUp?i--:i<o-1&&e===a.CursorDown&&i++:i=0,c([i],l,i,!0));else if(e===a.CursorRight||e===a.CursorLeft){if((s=p(PWC.Components.Grid.GetInstance.Scroll))&&(d=s.getHScrollBarConfig().visible),null!==l&&e===a.CursorRight&&l<=S.model.gridColumns.length-1)if(t)l=S.model.gridColumns.length-1,d&&s.scrollHorizontal(PWC.Components.Grid.ArrowKeySelection.MoveColumnToLast);else{if(l<S.model.gridColumns.length-1)if(S.columns[S.columns.length-1].actualColumnIndex===++l-1)r=S.columns.length-1;else for(n=0;n<S.columns.length;n++)if(S.columns[n].actualColumnIndex===l){r=n;break}d&&(null!==r?(o=S.columns[r].x+S.columns[r].width,S.tableProps.x+S.tableProps.width<=o&&s.scrollHorizontal(PWC.Components.Grid.ArrowKeySelection.MoveColumnToLeft,l)):l>S.columns[0].actualColumnIndex?s.scrollHorizontal(PWC.Components.Grid.ArrowKeySelection.MoveColumnToLeft,l):s.scrollHorizontal(PWC.Components.Grid.ArrowKeySelection.MoveColumnToRight,l))}else if(null===l&&e===a.CursorRight)l=0,d&&s.scrollHorizontal(PWC.Components.Grid.ArrowKeySelection.MoveColumnToFirst);else if(null!==l&&e===a.CursorLeft&&0<=l)if(t)l=0,d&&s.scrollHorizontal(PWC.Components.Grid.ArrowKeySelection.MoveColumnToFirst);else{if(0<l){for(n=0;n<S.columns.length;n++)if("autocomplete"!==S.columns[n].contentMode&&S.columns[n].actualColumnIndex===l){r=n;break}l--}d&&(null!==r?0===r&&s&&s.scrollHorizontal(PWC.Components.Grid.ArrowKeySelection.MoveColumnToRight):l>S.columns[0].actualColumnIndex?s.scrollHorizontal(PWC.Components.Grid.ArrowKeySelection.MoveColumnToLeft,l):s.scrollHorizontal(PWC.Components.Grid.ArrowKeySelection.MoveColumnToRight,l))}c([i],l,i,!1)}}},selectionClickHandler:function(e){var t=null,n=null,i=S.eventReference.targetGroup,o=S.getCellPosition(e),t=S.dataMapper.getDataIndex(o.cellRowIndex);if(S.headerSettings.columnHeaderType!==PWC.Components.Grid.HmiDataGridHeaderType.None&&0<t&&(t-=1),S.tableProps.isRecordLevelSelection&&i!==PWC.Components.Grid.EventSource.ColumnTitles&&S.model.gridSelectionMode!==PWC.Components.Grid.SelectionMode.None&&S.iGridRef.onSelectionBegin(t,e.ctrlKey,e.shiftKey),S.headerSettings.columnHeaderType!==PWC.Components.Grid.HmiDataGridHeaderType.None&&i===PWC.Components.Grid.EventSource.RowTitles&&0===o.cellRowIndex){if(S.model.gridSelectionMode===PWC.Components.Grid.SelectionMode.Multi){var l,r=S.dataMapper.getTotalRecords();for(G(),l=0;l<r;l++)if(!f.isSelected(l))f.addToSelection(l);x()}}else i===PWC.Components.Grid.EventSource.ColumnTitles&&S.isAutoCompleteCell(o.cellColumnIndex,null)||i!==PWC.Components.Grid.EventSource.ColumnTitles&&S.isAutoCompleteCell(o.cellColumnIndex,t)||(G(),y=!1,null!==o.cellColumnIndex&&(n=S.columns[o.cellColumnIndex].actualColumnIndex,S.model.gridSelectionMode===PWC.Components.Grid.SelectionMode.Multi&&e.shiftKey||(f.setCellColumnSelection(n),h.colStartIndex=n,h.colEndIndex=null)),i!==PWC.Components.Grid.EventSource.ColumnTitles&&(S.model.gridSelectionMode===PWC.Components.Grid.SelectionMode.Multi&&e.shiftKey||(f.setCellRowSelection(t),h.startIndex=t,h.endIndex=null),S.model.selectFullRow?function(e,t){if(S.model.gridSelectionMode!==PWC.Components.Grid.SelectionMode.None)if(e.ctrlKey||e.shiftKey){if(S.model.gridSelectionMode===PWC.Components.Grid.SelectionMode.Multi)if(e.ctrlKey)if(!f.isSelected(t))f.addToSelection(t);else f.removeFromSelection(t);else if(e.shiftKey){if(h.startIndex===null){x();B();return}L(t)}if(S.model.gridSelectionMode===PWC.Components.Grid.SelectionMode.Single){f.clearSelection();f.setSelection([t])}}else{f.clearSelection();f.setSelection([t])}}(e,t):function(e,t,n){var i=null;if(S.model.gridSelectionMode!==PWC.Components.Grid.SelectionMode.None){i={rowIndex:t,selectedCells:[n]};if(e.ctrlKey||e.shiftKey){if(S.model.gridSelectionMode===PWC.Components.Grid.SelectionMode.Multi){if(e.ctrlKey)if(!f.isCellSelected(t,n))f.updateCellSelection(t,n);else f.removeCellSelection(t,n);else if(e.shiftKey){if(h.startIndex===null||h.colStartIndex===null){x();B();return}L(t,n)}y=true}if(S.model.gridSelectionMode===PWC.Components.Grid.SelectionMode.Single){f.clearSelection();f.addToSelectedCells(i)}}else{f.clearSelection();f.addToSelectedCells(i)}}}(e,t,n)),x()&&B(),i!==PWC.Components.Grid.EventSource.ColumnTitles&&(S.eventReference.startIndex=t,S.eventReference.endIndex=t,S.eventReference.columnStartIndex=n,S.eventReference.columnEndIndex=n))},selectionDragHandler:function(e){e=S.getCellPosition(e);t(e)},fireSelection:B,clearSelectionInfo:function(){f.clearAll(),h.startIndex=null,h.endIndex=null,h.colStartIndex=null,h.colEndIndex=null},enableRowLevelSelection:function(){f=new PWC.Components.Grid.SelectionInfo},enableRecordLevelSelection:function(e){f=e},dragAutoSelection:t,clearData:function(){f=v=null,h.startIndex=null,h.endIndex=null,h.colStartIndex=null,h.colEndIndex=null,y=!1}}},PWC||{}),PWC=(PWC.Components=PWC.Components||{},PWC.Components.Grid=PWC.Components.Grid||{},PWC.Components.Grid.SortHandler=function(c,u){"use strict";function i(e){var t,n=null,i=null;null!==e&&c.model.allowSort&&c.columns[e].allowSort&&c.isSubscribedEvent(PWC.Components.Grid.ControlEvents.OnSortButtonClicked)&&(t=c.columns[e].actualColumnIndex,c.tableProps.isCustomSortingEnabled||(n=c.columns[e].sortOrder,i=c.columns[e].sortDirection),c.iGridRef.onSortButtonClicked(t,n,i))}function o(e){c.model.allowSort&&c.columns[e].allowSort&&(t(e),h(e))}function l(e,t,n){f(),a.push({sortOrder:null,actualColumnIndex:e}),c.model.gridColumns[e].sortOrder=c.columns[t].sortOrder=a.length,a[a.length-1].sortOrder=c.columns[t].sortOrder,null!==n?(n===PWC.Components.Grid.HmiSortDirection.Descending?c.model.gridColumns[e].sortDirection=c.columns[t].sortDirection=PWC.Components.Grid.HmiSortDirection.Ascending:c.model.gridColumns[e].sortDirection=c.columns[t].sortDirection=PWC.Components.Grid.HmiSortDirection.Descending,b(c.columns[t].sortDirection)):c.model.gridColumns[e].sortDirection=c.columns[t].sortDirection=PWC.Components.Grid.HmiSortDirection.Ascending,C(t)}function r(e,t){for(var n,i,o,l=0;l<a.length;l++)if(a[l].actualColumnIndex===t){n=l;break}for(l=0;l<a.length;l++)a[l].sortOrder>a[n].sortOrder&&"number"==typeof(i=a[l].actualColumnIndex)&&(null!==(o=c.getViewportColumnIndex(i))?(c.model.gridColumns[i].sortOrder=c.columns[o].sortOrder=c.columns[o].sortOrder-1,y(o,null,c.columns[o].sortOrder)):c.model.gridColumns[i]&&(c.model.gridColumns[i].sortOrder=c.model.gridColumns[i].sortOrder-1),a[l].sortOrder=a[l].sortOrder-1);a.splice(n,1),null!==t&&(c.model.gridColumns[t].sortOrder=0,c.model.gridColumns[t].sortDirection=PWC.Components.Grid.HmiSortDirection.None),null!==e&&(c.columns[e].sortOrder=0,c.columns[e].sortDirection=PWC.Components.Grid.HmiSortDirection.None,S(e))}var a=[],s=null,d=null,m=null,p=2,C=function(e){var t,n,i,o,l,r,a=c.utils.getCellConfig(),s=0,d=null;(c.model.showSortIndex||c.model.showSortIcon)&&(r=c.columns[e].actualColumnIndex,o=c.columns[e].sortOrder.toString(),r=c.model.gridColumns[r].headerSettings.content.verticalAlignment,l=c.columns[e].sortDirection,l=b(l),t=c.utils.createSVG("g",{id:c.id+"_sortGroup_"+e}),i=c.utils.createSVG("rect",{height:c.tableProps.contentHeight,y:c.tableProps.y}),n=c.utils.createSVG("rect",{height:c.tableProps.contentHeight,y:c.tableProps.y,id:c.id+"_sortGroup_rect"}),t.appendChild(i),t.appendChild(n),a.textY=a.imgY=c.tableProps.y,a.width=p,null!==(o=c.getTextBBoxInfo(PWC.Components.Grid.CellType.ColumnHeader,o)).contentWidth&&(a.width+=o.contentWidth),a.height=c.tableProps.contentHeight,a.dx=p,a.textContent=c.columns[e].sortOrder,a.forecolor="black",a.imageSize=c.getImageSize(PWC.Components.Grid.CellType.ColumnHeader),a.contentHeight=c.tableProps.contentHeight,a.textX=a.imgX=c.columns[e].x+c.columns[e].width-(c.model.cellPadding.right+c.model.gridLineWidth),c.model.showSortIndex&&(s=s+a.width+p,a.textX=a.imgX=a.rectX=a.textX-a.width-p,a.dy=c.getTextOffsetdy(r,o.contentHeight,null),c.utils.renderText(t,a,c.model.gridLineWidth)),c.model.showSortIcon&&"string"==typeof l&&(a.imageUrl=l,a.rectX=a.imgX=a.imgX-a.imageSize,a.dy=c.getTextOffsetdy(r,null,a.imageSize),a.imgY+=a.dy,s+=a.imageSize,c.utils.renderImage(t,a)),a.fill=c.headerSettings.headerBackColor,(d=u(PWC.Components.Grid.GetInstance.Selection))&&null!==(o=d.getSelection().selectedCellColumnIndex)&&o===c.columns[e].actualColumnIndex&&(a.fill=c.headerSettings.headerSelectionBackColor),c.utils.setSVGAttribute(i,"fill",c.model.backgroundColor),c.utils.setSVGAttribute(i,"width",s),c.utils.setSVGAttribute(i,"x",a.rectX),c.utils.setSVGAttribute(n,"fill",a.fill),c.utils.setSVGAttribute(n,"width",s),c.utils.setSVGAttribute(n,"x",a.rectX),l=g(e))&&(r=c.utils.getCellContentParent(l).contentChildsParent)&&(r.appendChild(t),x(l,e,s))},n=function(){if(d){var e,t=d.childNodes.length;if(1<t)for(e=t-1;0<=e;e--)if("image"===d.childNodes[e].tagName){d.removeChild(d.childNodes[e]);break}}},h=function(e){var t=c.utils.getCellConfig();d&&(n(),null!==e)&&(e=c.columns[e].sortDirection,null!==(e=b(e)))&&(t.imageUrl=e,t.imgX=c.tableProps.x+c.tableProps.width-m+p,t.imgY=c.tableProps.y,t.imageSize=c.getImageSize(PWC.Components.Grid.CellType.ColumnHeader),t.contentHeight=c.tableProps.contentHeight,c.utils.renderImage(d,t))},g=function(e){var t=null,n=u(PWC.Components.Grid.GetInstance.Column,null);return t=n?n.getChild(e):t},t=function(e){var t,n=null,i=null;if(c.headerSettings.columnHeaderType!==PWC.Components.Grid.HmiDataGridHeaderType.None&&e<c.columns.length&&"autocomplete"!==c.columns[e].contentMode)if(t=(i=c.columns[e]).actualColumnIndex,c.model.sortSequence===PWC.Components.Grid.TableSortSequence.AscDescNone)switch(i.sortDirection){case PWC.Components.Grid.HmiSortDirection.None:a.push({sortOrder:null,actualColumnIndex:t}),c.model.gridColumns[t].sortOrder=i.sortOrder=a.length,a[a.length-1].sortOrder=i.sortOrder,c.model.gridColumns[t].sortDirection=i.sortDirection=PWC.Components.Grid.HmiSortDirection.Ascending,C(e);break;case PWC.Components.Grid.HmiSortDirection.Ascending:c.model.gridColumns[t].sortDirection=i.sortDirection=PWC.Components.Grid.HmiSortDirection.Descending,n=b(i.sortDirection),y(e,n,null);break;case PWC.Components.Grid.HmiSortDirection.Descending:c.model.gridColumns[t].sortDirection=i.sortDirection=PWC.Components.Grid.HmiSortDirection.None,r(e,t)}else if(c.model.sortSequence===PWC.Components.Grid.TableSortSequence.AscDesc)switch(i.sortDirection){case PWC.Components.Grid.HmiSortDirection.None:l(t,e,null);break;case PWC.Components.Grid.HmiSortDirection.Ascending:1<a.length?l(t,e,i.sortDirection):(c.model.gridColumns[t].sortDirection=i.sortDirection=PWC.Components.Grid.HmiSortDirection.Descending,n=b(i.sortDirection)),y(e,n,null);break;case PWC.Components.Grid.HmiSortDirection.Descending:1<a.length?l(t,e,i.sortDirection):(c.model.gridColumns[t].sortDirection=i.sortDirection=PWC.Components.Grid.HmiSortDirection.Ascending,n=b(i.sortDirection)),y(e,n,null)}},f=function(){for(var e,t,n=a.length;0<n;)e=a[n-1].actualColumnIndex,t=c.getViewportColumnIndex(e),r(t,e),n--;a.length=0},y=function(e,t,n){var i,o,l,r=null;if((c.model.showSortIcon||c.model.showSortIndex)&&(e=g(e))&&(e=c.utils.getCellContentParent(e).contentChildsParent))for(l=e.querySelectorAll("g"),i=0;i<l.length;i++)if(-1!==(r=l[i]).id.indexOf("sortGroup"))for(o=0;o<r.childNodes.length;o++)"image"===r.childNodes[o].tagName&&null!==t&&c.utils.setSVGAttribute(r.childNodes[o],"href",t),"text"===r.childNodes[o].tagName&&null!==n&&(r.childNodes[o].textContent=n)},S=function(e){var t,n,i=0,o=null,l=g(e);if(l&&(n=c.utils.getCellContentParent(l).contentChildsParent))for(t=n.querySelectorAll("g"),i=0;i<t.length;i++)null!==(o=t[i])&&-1!==o.id.indexOf("sortGroup")&&n.removeChild(o),x(l,e,0)},b=function(e){var t=null;return e!==PWC.Components.Grid.HmiSortDirection.None&&(e===PWC.Components.Grid.HmiSortDirection.Ascending?t=c.model.sortUpImageURL:e===PWC.Components.Grid.HmiSortDirection.Descending&&(t=c.model.sortDownImageURL)),t},P=function(){var e=c.tableProps.contentHeight;return c.headerSettings.columnHeaderType!==PWC.Components.Grid.HmiDataGridHeaderType.None&&c.tableProps.isFilterEnabled&&(e+=c.filterColumnProps.height+c.model.gridLineWidth),e},v=function(){var e,t={x1:0,x2:0,y1:0,y2:0,stroke:"#000000","stroke-width":.4};t.x1=c.tableProps.x+c.tableProps.width-m,t.x2=t.x1,t.y1=c.tableProps.y,t.y2=t.y1+P(),e=c.utils.createSVG("line",t,null,{pointerEvents:"none"}),s.appendChild(e),t.x1=c.tableProps.x+c.tableProps.width-m,t.x2=t.x1+m,t.y1=t.y1+P(),t.y2=t.y1,e=c.utils.createSVG("line",t,null,{pointerEvents:"none"}),s.appendChild(e)},x=function(e,t,n){var i=c.columns[t],o=c.utils.getCellConfig(),l=c.columns[t].actualColumnIndex,r=c.model.gridColumns[l].headerSettings;o.imgX=o.textX=o.rectX=i.x,o.textY=o.imgY=o.rectY=c.tableProps.y,o.width=c.columns[t].width,o.horizontalAlignment=r.content.horizontalAlignment,o.verticalAlignment=r.content.verticalAlignment,o.height=c.tableProps.cellHeight,o.contentHeight=c.tableProps.contentHeight,o.textPosition=r.content.textPosition,o.spacing=r.content.spacing,o.splitRatio=r.content.splitRatio,o.graphicStretchMode=r.content.graphicStretchMode,o.imageSize=c.getImageSize(PWC.Components.Grid.CellType.ColumnHeader),o.textContent=null,o.imageUrl=null,"number"==typeof l&&c.model.gridColumns[l],c.setContentAlignment(o,o.horizontalAlignment,n),i=r.graphic,t=c.getColumnHeaderText(l),c.handleCellContent(PWC.Components.Grid.CellType.ColumnHeader,o,t,i,l,n),c.utils.updateCell(e,o,c.model.selectEmptyCell),c.headerSettings.font.fontStrikeOut===PWC.Components.Grid.FontStrikeOut.Double&&c.utils.updateStrikeOutLines(e,o,!1)};return{handleColumnSortGroup:function(){var e,t=u(PWC.Components.Grid.GetInstance.Scroll,null),n=0,i=null,o=null;s||(s=c.utils.createSVG("g"),c.parentGroup.appendChild(s));if(t&&(t=t.getVScrollBarConfig())&&t.visible&&c.headerSettings.columnHeaderType!==PWC.Components.Grid.HmiDataGridHeaderType.None&&c.model.useSortKey&&(m=t.width,(t=c.utils.getCellConfig()).rectY=c.tableProps.y,t.rectX=c.tableProps.x+c.tableProps.width-m,t.width=m,t.height=P(),t.fill=c.headerSettings.headerBackColor,t.contentHeight=c.tableProps.contentHeight,d=c.createEmptyCell(t),s.appendChild(d),v()),c.tableProps.isPauseMode){for(a.length=0,e=c.model.gridColumns.length,n=0;n<e;n++)c.model.gridColumns[n].sortDirection!==PWC.Components.Grid.HmiSortDirection.None&&(o=c.getViewportColumnIndex(n),a.push({sortOrder:c.model.gridColumns[n].sortOrder,actualColumnIndex:n}),null!==o)&&C(o);(i=u(PWC.Components.Grid.GetInstance.Selection,o=null))&&(t=i.getSelection().selectedCellColumnIndex,null!==(o=c.getViewportColumnIndex(t)))&&h(o)}},onsortHandler:function(e){e=c.getCellPosition(e).cellColumnIndex;c.tableProps.isCustomSortingEnabled||c.model.sortMode!==PWC.Components.Grid.TableSortMode.ByClick&&c.model.sortMode!==PWC.Components.Grid.TableSortMode.ByDoubleClick||o(e),i(e)},clearGroup:function(){s&&c.utils.clearElement(s)},setSortKeyOnSelection:function(){var e=null;d&&(e=u(PWC.Components.Grid.GetInstance.Selection,null))&&(e=e.getSelection().selectedCellColumnIndex,e=c.getViewportColumnIndex(e),h(e))},sortKeyGroupEventListner:function(e){var t=u(PWC.Components.Grid.GetInstance.Selection,null),n=null;c.eventReference.targetGroup=PWC.Components.Grid.EventSource.SortKey,t&&(t=t.getSelection().selectedCellColumnIndex,null===(n=c.getViewportColumnIndex(t))||c.tableProps.isCustomSortingEnabled||o(n)),"singletap"!==e.type&&"doubletap"!==e.type||c.clearEventReferences(),i(n)},clearData:function(){a.length=0,m=d=s=null}}},PWC||{}),PWC=(PWC.Components=PWC.Components||{},PWC.Components.Grid=PWC.Components.Grid||{},PWC.Components.Grid.ToolTip=function(y,S){"use strict";function b(){P&&(y.parentGroup.removeChild(P),y.parentGroup.removeChild(x),y.svgDef.removeChild(v),v=x=P=null,T.cellColumnIndex=null,T.cellRowIndex=null)}function i(e,t){var n,i,o,l,r,a,s,d,c,u,m,p=e,C=null,h=0,g=y.utils.getCellConfig(),f=null;if(g.contentHeight=y.tableProps.contentHeight,C=y.headerSettings.columnHeaderType!==PWC.Components.Grid.HmiDataGridHeaderType.None&&0===p?(f=y.utils.getTitleFontPropeties(y.model),r=t,a=g,s=null,d=y.columns[r],!y.isAutoCompleteCell(r,null)&&d&&(s=d.actualColumnIndex,r=y.model.gridColumns[s].headerSettings,a.textContent=y.getColumnHeaderText(s),a.imageUrl=r.graphic,a.horizontalAlignment=r.content.horizontalAlignment,a.verticalAlignment=r.content.verticalAlignment,a.textPosition=r.content.textPosition,a.spacing=r.content.spacing,a.splitRatio=r.content.splitRatio,a.graphicStretchMode=r.content.graphicStretchMode,a.rectY=a.textY=a.imgY=y.tableProps.y,a.tiledContentId=y.id+"_columnHeader_"+s+"_toolTip"),null===a.textContent&&null===a.imageUrl||(a.fill=y.headerSettings.headerBackColor,a.forecolor=y.headerSettings.headerForeColor,d=y.getTextBBoxInfo(PWC.Components.Grid.CellType.ColumnHeader,a.textContent),y.setContentDims(a,d),a.imageSize=y.getImageSize(PWC.Components.Grid.CellType.ColumnHeader),y.tableProps.isPauseMode&&W(null,s,a,PWC.Components.Grid.CellType.ColumnHeader)),PWC.Components.Grid.CellType.ColumnHeader):(f=y.utils.getTableFontPropeties(y.model),y.headerSettings.columnHeaderType!==PWC.Components.Grid.HmiDataGridHeaderType.None&&0<p&&(p-=1),r=p,d=t,s=g,a=y.columns[d],l=y.dataMapper.getDataIndex(r),!y.isAutoCompleteCell(d,l)&&a&&(i=a.actualColumnIndex,o=y.getCellData(l,i),s.textContent=o.text,s.imageUrl=o.graphic,s.horizontalAlignment=a.horizontalAlignment,s.verticalAlignment=a.verticalAlignment,s.textPosition=a.textPosition,s.spacing=a.spacing,s.splitRatio=a.splitRatio,s.graphicStretchMode=a.graphicStretchMode,s.tiledContentId=y.id+"_row_"+l+"_column"+i+"_toolTip",s.fill=y.model.backColor,s.forecolor=y.model.foreColor,a=o.style,null===s.textContent&&null===s.imageUrl||(s.rectY=s.textY=s.imgY=y.tableProps.y+y.getHeaderHeight()+y.tableProps.cellHeight*r,o=y.iGridRef.getRowFlashInfo(l),y.setCellStyleOverrideEnabled(s,r,d,a,o),r=y.getTextBBoxInfo(PWC.Components.Grid.CellType.DataRow,s.textContent),y.setContentDims(s,r),s.imageSize=y.getImageSize(PWC.Components.Grid.CellType.DataRow),y.tableProps.isPauseMode&&W(l,i,s,PWC.Components.Grid.CellType.DataRow,o))),PWC.Components.Grid.CellType.DataRow),(null!==g.textContent&&void 0!==g.textContent||null!==g.imageUrl&&void 0!==g.imageUrl)&&(P&&b(),l=y.columns[t].actualColumnIndex,null!==(i=function(e,t,n){var i={requiredWidth:null,requiredHeight:null},o=null,l=!1,r=y.headerSettings.columnHeaderType;if(t){if(n===PWC.Components.Grid.CellType.DataRow?(o=t.content.contentMode,l=!0):n===PWC.Components.Grid.CellType.ColumnHeader&&(r===PWC.Components.Grid.HmiDataGridHeaderType.Index?(i.requiredWidth=e.textWidth,i.requiredHeight=e.textHeight,e.imageUrl=null):r===PWC.Components.Grid.HmiDataGridHeaderType.Content&&(o=t.headerSettings.content.contentMode,l=!0)),l)switch(o){case PWC.Components.Grid.ContentMode.Text:case PWC.Components.Grid.ContentMode.GraphicOrText:case PWC.Components.Grid.ContentMode.GraphicAndText:o===PWC.Components.Grid.ContentMode.GraphicOrText&&null!==e.imageUrl?i.requiredWidth=i.requiredHeight=y.getImageSize(n):(i.requiredWidth=e.textWidth,i.requiredHeight=e.textHeight,o===PWC.Components.Grid.ContentMode.GraphicAndText&&null!==e.imageUrl?(y.getImageSize(n),w(e,i)):e.imageUrl=null);break;case PWC.Components.Grid.ContentMode.Graphic:e.textContent=null,i.requiredWidth=i.requiredHeight=y.getImageSize(n)}i.requiredHeight+=y.model.cellPadding.top+y.model.cellPadding.bottom+y.model.gridLineWidth,i.requiredWidth+=y.model.cellPadding.left+y.model.cellPadding.right}return i}(g,y.model.gridColumns[l],C)).requiredHeight)&&null!==i.requiredWidth&&(c=i.requiredHeight,n=i.requiredWidth,g.rectX=g.textX=g.imgX=y.columns[t].x,o=S(PWC.Components.Grid.GetInstance.Scroll),n>y.getCellWidth(t,o)||c>y.tableProps.cellHeight)){for(h=t;h<y.columns.length&&(g.width+=y.columns[h].width,!(g.width-y.model.gridLineWidth>=n));h++);g.width-y.model.gridLineWidth<n&&(g.width=n+y.model.gridLineWidth),c<=y.tableProps.cellHeight?g.height=y.tableProps.cellHeight:(m=y.dataMapper.getViewPortSize(),u=Math.floor(c/y.tableProps.cellHeight),g.height=u*y.tableProps.cellHeight,c%y.tableProps.cellHeight!=0&&(g.height+=p+u<m?y.tableProps.cellHeight:c%y.tableProps.cellHeight)),y.setContentAlignment(g,g.horizontalAlignment),P=y.createEmptyCell(g,null,null),x=y.utils.createSVG("g",{id:y.id+"_toolTipBorder"}),y.utils.setSVGStyles(P,f),u=g,m=y.utils.createSVG("clipPath",{id:y.id+"_TooltipClipPath"}),u=y.utils.createSVG("rect",{x:u.rectX,y:u.rectY,width:u.width-y.model.gridLineWidth,height:u.height-y.model.gridLineWidth}),m.appendChild(u),(v=y.utils.createSVG("g",{id:y.id+"_TooltipGroup"})).appendChild(m),y.svgDef.appendChild(v),P&&y.utils.setSVGAttribute(P,"clip-path","url(#"+y.id+"_TooltipClipPath)"),c=g,f=p,p=t,(C=C)===PWC.Components.Grid.CellType.ColumnHeader?(y.handleCellContent(C,c,c.textContent,c.imageUrl,y.columns[p].actualColumnIndex),y.modifyCell(P,c,C,y.model.selectEmptyCell),G(null,p,c.width,c.height,y.headerSettings.headerGridLineColor)):C===PWC.Components.Grid.CellType.DataRow&&(y.handleCellContent(C,c,c.textContent,c.imageUrl,y.columns[p].actualColumnIndex),y.modifyCell(P,c,C,y.model.selectEmptyCell),G(f,p,c.width,c.height,y.model.gridLineColor)),y.parentGroup.appendChild(P),y.parentGroup.appendChild(x),null===T.cellColumnIndex&&null===T.cellRowIndex&&(T.cellColumnIndex=t,T.cellRowIndex=e)}}var P=null,v=null,x=null,T={cellColumnIndex:null,cellRowIndex:null},w=function(e,t){e.textPosition===PWC.Components.Grid.HmiTextPosition.Left||e.textPosition===PWC.Components.Grid.HmiTextPosition.Right?(t.requiredWidth=e.textWidth/(1-e.splitRatio),t.requiredWidth+=e.imageSize+e.spacing):e.textPosition!==PWC.Components.Grid.HmiTextPosition.Top&&e.textPosition!==PWC.Components.Grid.HmiTextPosition.Bottom||(t.requiredHeight=e.textHeight/(1-e.splitRatio),t.requiredHeight+=e.imageSize+e.spacing)},W=function(e,t,n,i,o){var l=!1,r=null,a=null;if(r=S(PWC.Components.Grid.GetInstance.Selection))if(a=r.getSelection(),i===PWC.Components.Grid.CellType.ColumnHeader)t===a.selectedCellColumnIndex&&(n.fill=y.headerSettings.headerSelectionBackColor,n.forecolor=y.headerSettings.headerSelectionForeColor);else if(i===PWC.Components.Grid.CellType.DataRow&&(l=-1!==a.rowSelection.indexOf(e)||l))if(r=y.model.gridColumns[t],y.isFlashingOn&&o){i=n,a=r;if(a.flashingType===PWC.Components.Grid.FlashingTypes.Standard){i.fill=y.model.selectionBackColor;i.forecolor=y.model.selectionForeColor}else if(a.flashingType===PWC.Components.Grid.FlashingTypes.ChangeBackgroundColor_TextColor){i.forecolor=y.model.selectionBackColor;i.fill=y.model.selectionForeColor}}else n.fill=y.model.selectionBackColor,n.forecolor=y.model.selectionForeColor},G=function(e,t,n,i,o){var l={x:0,y:0,width:0,height:0},r={strokeWidth:null,stroke:null,fill:"none","pointer-events":"none"};r.strokeWidth=y.model.gridLineWidth,r.stroke=o,l.y=y.tableProps.y,null!==e&&(l.y=e*y.tableProps.cellHeight+y.getHeaderHeight()+y.model.borderWidth),null!==t&&(l.x=y.columns[t].x,l.height=i,l.width=n,l.x=l.x-y.model.gridLineWidth/2,l.y=l.y-y.model.gridLineWidth/2,x.appendChild(y.utils.createSVG("rect",l,null,r)))};return{clearTooltip:b,createRightClickGroup:i,clearData:function(){v=x=P=null},updateToolTip:function(){var e=T.cellRowIndex,t=T.cellColumnIndex,n=e;null===e||null===t||y.headerSettings.columnHeaderType!==PWC.Components.Grid.HmiDataGridHeaderType.None&&0===e||(y.headerSettings.columnHeaderType!==PWC.Components.Grid.HmiDataGridHeaderType.None&&0<e&&(n=e-1),n=y.dataMapper.getDataIndex(n),!y.iGridRef.getRowFlashInfo(n))||(b(),i(e,t))}}},PWC||{}),PWC=(PWC.Components=PWC.Components||{},PWC.Components.Grid=PWC.Components.Grid||{},PWC.Components.Grid.CellData=function(){"use strict";this.text=null,this.graphic=null,this.style={fill:null,forecolor:null,fontStrikeOut:!1}},PWC||{}),PWC=(PWC.Components=PWC.Components||{},PWC.Components.Grid=PWC.Components.Grid||{},PWC.Components.Grid.DataMapper=function(){"use strict";function t(){e=null!==n&&null!==i?i-n+1:0}var n=null,i=null,e=0,o=0,l=!1,r=0;return{setViewPortSize:function(e){o=e},getViewPortSize:function(){return o},setViewPortStartIndex:function(e){n=e,t()},getViewPortStartIndex:function(){return n},setViewPortEndIndex:function(e){i=e,t()},getViewPortEndIndex:function(){return i},getViewPortDisplayedRowCount:function(){return e},isRowDisplayed:function(e){return null!==n&&null!==i&&n<=e&&e<=i?!0:!1},getRowIndex:function(e){return null!==e?e-(null===n?0:n):null},getDataIndex:function(e){return null!==e?e+(null===n?0:n):null},setTotalRecords:function(e){r=e},getTotalRecords:function(){return r},getMaxRowsToDisplay:function(){return 0<o?l?o-1:o:0},setSkipLastRow:function(e){l=e}}},PWC||{}),PWC=(PWC.Components=PWC.Components||{},PWC.Components.Grid=PWC.Components.Grid||{},PWC.Components.Grid.EditAuthorization=function(){"use strict";this.authorize=!1,this.customDom=null,this.editElementType=null,this.elementDataType=null,this.offsetY=0,this.offsetX=0},PWC||{}),PWC=(PWC.Components=PWC.Components||{},PWC.Components.Grid=PWC.Components.Grid||{},PWC.Components.Grid.HorizontalAlignment={Left:0,Center:1,Right:2,Stretch:3},PWC.Components.Grid.VerticalAlignment={Top:0,Center:1,Bottom:2,Stretch:3},PWC.Components.Grid.SelectionMode={None:0,Single:1,Multi:2},PWC.Components.Grid.ControlEvents={OnSortButtonClicked:0,OnRowHeaderClick:1,OnColumnHeaderClick:2,OnCellClick:3,OnColumnHeaderDoubleClick:4,OnVScrollDownButtonClick:5,OnVScrollUpButtonClick:6,OnVScrollDragEnd:7,OnHScrollLeftButtonClick:8,OnHScrollRightButtonClick:9,OnHScrollDragEnd:10,OnCellEditBegin:11,OnCellEditEnd:12,OnColumnResize:13,OnCellDoubleClick:14,OnRowHeaderDoubleClick:15,OnFilterEditEnd:16,OnVScrollChange:17,OnMouseWheelScroll:18,OnHScrollChange:19,OnColumnReorder:20},PWC.Components.Grid.ContentMode={GraphicOrText:0,GraphicAndText:1,Text:2,Graphic:3},PWC.Components.Grid.TableSortMode={None:0,ByClick:1,ByDoubleClick:2},PWC.Components.Grid.HmiSortDirection={None:0,Ascending:1,Descending:2},PWC.Components.Grid.TableSortSequence={AscDescNone:0,AscDesc:1},PWC.Components.Grid.DataOperationType={Add:0,Update:1,Delete:2},PWC.Components.Grid.HmiScrollBarVisibility={Automatic:0,Visible:1,Collapsed:2},PWC.Components.Grid.FlashingTypes={Standard:0,ChangeBackgroundColor_TextColor:1,ChangeMessageColor_TableColor:2},PWC.Components.Grid.EventSource={RowTitles:0,ColumnTitles:1,Data:2,ColumnVlines:3,ScrollBar:4,SortKey:5},PWC.Components.Grid.GridActions={Partial_Load:0,Load:1,Reload:2},PWC.Components.Grid.GetInstance={Column:0,DataRow:1,RowHeader:2,Scroll:3,Selection:4,Sort:5,Edit:6},PWC.Components.Grid.ArrowKeySelection={MoveColumnToFirst:0,MoveColumnToLeft:1,MoveColumnToRight:2,MoveColumnToLast:3},PWC.Components.AppMode={UNKNOWN:0,RUNTIME:1,EDIT:2},PWC.Components.Grid.EditElementType={Standard:0,Custom:1},PWC.Components.Grid.CellType={ColumnHeader:0,RowHeader:1,DataRow:2},PWC.Components.Grid.ColoringMode={None:0,Columns:1,Rows:2},PWC.Components.Grid.FontWeight={Thin:100,ExtraLight:200,Light:300,Normal:400,Medium:500,SemiBold:600,Bold:700,ExtraBold:800,Heavy:900,None:100},PWC.Components.Grid.FontStrikeOut={None:0,Single:1,Double:2},PWC.Components.Grid.HmiTextTrimming={None:0,CharacterEllipsis:1},PWC.Components.Grid.HmiTextPosition={Left:0,Right:1,Top:2,Bottom:3,Behind:4,Infront:5},PWC.Components.Grid.HmiGraphicStretchMode={None:0,Fill:1,Uniform:2,UniformToFill:3,Tiled:4},PWC.Components.Grid.HmiGraphicDistance={Near:0,Center:1,Far:2},PWC.Components.Grid.HmiDataGridHeaderType={None:0,Index:1,Content:2},PWC.Components.Grid.ScopeOfDataExport={All:0,Selection:1},PWC.Components.Grid.ChangeView={Next:0,Prev:1,First:2,Last:3},PWC.Components.Grid.DoubleStrikeOutLine={Create:0,Update:1},PWC.Components.Grid.HmiGridLinesSimple={None:0,Vertical:1,Horizontal:2,HorizontalAndVertical:3},PWC.Components.Grid.EditEnable={OnSingleClick:0,OnDoubleClick:1},PWC.Components.Grid.EditDataType={Text:"text",Number:"number",Date:"dtp",CPM:"cpm"},PWC.Components.Grid.KeyCodes={PageUp:33,PageDown:34,CursorLeft:37,CursorUp:38,CursorRight:39,CursorDown:40},PWC||{}),PWC=(PWC.Components=PWC.Components||{},PWC.Components.Grid=PWC.Components.Grid||{},PWC.Components.Grid.SelectionInfo=function(){function t(e){var t=!1;return t=-1!==n.indexOf(e)?!0:t}var n=[],r=[],i=null,o=null;return{clearSelection:function(){n.length=0,r.length=0},clearAll:function(){n.length=0,r.length=0,i=o=null},isSelected:t,addToSelection:function(e){t(e)||n.push(e)},removeFromSelection:function(e){e=n.indexOf(e);-1!==e&&n.splice(e,1)},getSelection:function(){return n.slice()},setSelection:function(e){e.constructor===Array&&(n=e)},setCellColumnSelection:function(e){i=e},getCellColumnSelection:function(){return i},setCellRowSelection:function(e){o=e},getCellRowSelection:function(){return o},addToSelectedCells:function(e){r.push(e)},getSelectedCells:function(){return r.slice()},isCellSelected:function(e,t){var n=0,i=!1,o=r.length;if(null!==e&&null!==t)for(n=0;n<o;n++)if(r[n].rowIndex===e){-1!==r[n].selectedCells.indexOf(t)&&(i=!0);break}return i},updateCellSelection:function(e,t){var n=0,i=!1,o=r.length;if(null!==e&&null!==t){for(n=0;n<o;n++)r[n].rowIndex===e&&(i=!0,r[n].selectedCells.push(t));i||r.push({rowIndex:e,selectedCells:[t]})}},removeCellSelection:function(e,t){var n,i=0,o=null,l=r.length;if(null!==e&&null!==t)for(i=0;i<l;i++)if(r[i].rowIndex===e&&-1!==(n=(o=r[i].selectedCells).indexOf(t))){o.splice(n,1),o.length<1&&r.splice(i,1);break}},setSelectedCells:function(e){e.constructor===Array&&(r=e)}}},PWC||{}),PWC=(PWC.Components=PWC.Components||{},PWC.Components.Grid=PWC.Components.Grid||{},PWC.Components.Grid.GridUtils=function(){"use strict";function n(e){for(var t,n=e.gridColumns.length,i=0;i<n;i++)void 0!==(t=e.gridColumns[i]).text&&null!==t.text&&(t.text=t.text.split(" ").join("")),t.width=Math.round(t.width),t.minimumWidth=Math.round(t.minimumWidth),t.maximumWidth=Math.round(t.maximumWidth)}function i(e,t){var n="",t=t?" underline":"";return(n=e===PWC.Components.Grid.FontStrikeOut.Single?"line-through":n)+t}function U(e){for(var t,n,i,o=e.childNodes.length,l=0;l<o;l++)"rect"===(t=e.childNodes[l]).tagName?n=t:"g"===t.tagName&&"content_rowClip"===t.id&&t.childNodes[0]&&"g"===t.childNodes[0].tagName&&(i=t.childNodes[0]);return{rectRef:n,contentChildsParent:i}}function s(e,t,n){var i={x1:0,x2:0,y1:0,y2:0},o=0,l=e.textWidth,r=e.textHeight;if("middle"===e.textAnchor?i.x1=e.textX+e.dx-l/2:"start"===e.textAnchor?i.x1=e.textX+e.dx:"end"===e.textAnchor&&(i.x1=e.textX+e.dx-l),i.x2=i.x1+l,n===PWC.Components.Grid.DoubleStrikeOutLine.Create)i.y1=e.textY+e.dy-.3*r,i.y2=i.y1,l=c("line",i),t.appendChild(l),i.y1=e.textY+e.dy-.1*r,i.y2=i.y1,l=c("line",i),t.appendChild(l);else if(n===PWC.Components.Grid.DoubleStrikeOutLine.Update&&t)for(o=0;o<t.childNodes.length;o++)0===o?i.y2=i.y1=e.textY+e.dy-.3*r:1===o&&(i.y2=i.y1=e.textY+e.dy-.1*r),j(t.childNodes[o],"x1",i.x1),j(t.childNodes[o],"x2",i.x2),j(t.childNodes[o],"y1",i.y1),j(t.childNodes[o],"y2",i.y2)}var P=null,c=function(e,t,n,i){var o,l=n?n.cloneNode(!0):document.createElementNS(PWC.Lib.Canvas.Svg.svgNS,e);if(t)for(o in t)null!==t[o]&&j(l,o,t[o]);return i&&Y(l,i),l},Y=function(e,t){var n=null;if(t)for(n in t)e.style[n]=t[n]},j=function(e,t,n){var i=null;"href"===t&&(i=PWC.Lib.Canvas.Svg.xlinkNS),e.setAttributeNS(i,t,n)};return{createSVG:c,setSVGStyles:Y,setSVGAttribute:j,getSVGAttribute:function(e,t){var n=null;return"href"===t&&(n=PWC.Lib.Canvas.Svg.xlinkNS),e.getAttributeNS(n,t)},getVisibleStringInfo:function(e,t,n,i,o){var l,r,a=0,s=0,d=e.length,c=null,u=null,m=null,p=null,e=e||"XY",C=null,h=null,g=null,f=null,y=null,S=PWC.Lib.Canvas.Svg.setTextSpanContent,b=PWC.Lib.Canvas.Svg.getSubStringLength,o={Size:o.fontSize,Name:o.fontName,Weight:o.fontWeight,Italic:o.fontItalic,Underline:o.fontUnderline,StrikeOut:o.fontStrikeOut===PWC.Components.Grid.FontStrikeOut.Single};if(i===PWC.Components.Grid.HmiTextTrimming.CharacterEllipsis&&(null===P&&(S("...",o),P=b(0,"...".length)),t-=P),S(e,o),n===PWC.Components.Grid.HorizontalAlignment.Left||n===PWC.Components.Grid.HorizontalAlignment.Stretch||i!==PWC.Components.Grid.HmiTextTrimming.None){for(a=y=t>=b(0,Math.floor(.5*d))?t>=b(0,Math.floor(.75*d))?Math.floor(.75*d):Math.floor(.5*d):t>=b(0,Math.floor(.25*d))?Math.floor(.25*d):1;a<=d;a++){if((p=b(0,a))===t){c=a;break}if(t<p){c=a-1;break}}C=0,h=c}else if(n===PWC.Components.Grid.HorizontalAlignment.Right){for(t>=b(Math.floor(.5*d),d-Math.floor(.5*d))?C=t>=b(Math.floor(.25*d),d-Math.floor(.25*d))?(y=d-Math.floor(.25*d),Math.floor(.25*d)):(y=d-Math.floor(.5*d),Math.floor(.5*d)):t>=b(Math.floor(.75*d),d-Math.floor(.75*d))?(y=d-Math.floor(.75*d),C=Math.floor(.75*d)):(C=d-1,y=1),a=C,s=y;0<=a;a--,s++){if((p=b(a,s))===t){c=s;break}if(t<p){c=s-1;break}}C=d-c,h=d}else if(n===PWC.Components.Grid.HorizontalAlignment.Center){for(l=t/2,b(0,(r=Math.round(d/2))-1)<l&&(g=l-b(0,r-1)),b(r,d-r-1)<l&&(f=l-b(r,d-r)),a=r-1,s=1;0<=a;a--,s++){if((p=b(a,s))===l+f){u=s;break}if(l+f<p){u=s-1;break}}for(C=r-1-u+1,null===u&&(u=s-1,C=0),a=r,s=1;a<d;a++,s++){if((p=b(r,s))===l+g){m=s;break}if(l+g<p){m=s-1;break}}h=r+m-1,null===m&&(m=s-1,h=d-1),c=u+m}return{charLength:c,startIndex:C,endIndex:h}},getCellConfig:function(){return{width:null,height:null,textX:null,textY:null,rectX:null,rectY:null,imgX:null,imgY:null,dx:null,dy:null,fill:null,fillOpacity:1,forecolor:null,textAnchor:"start",horizontalAlignment:null,verticalAlignment:null,textContent:null,textWidth:null,textHeight:null,imageUrl:null,imageXOffset:null,imageFilter:"none",textXOffset:null,imageSize:null,contentHeight:null,textPosition:null,spacing:0,graphicStretchMode:null,graphicScaleX:1,graphicScaleY:1,textScaleX:1,textScaleY:1,rotationAngle:0,imageYOffset:null,textYOffset:null,id:null,tiledContentHeight:0,tiledContentWidth:0,tiledContentId:null,fontStrikeOut:"inherit",splitRatio:.5,textTrimming:0,backColor:null,foreColor:null,alternateBackColor:null,alternateForeColor:null}},getTitleFontPropeties:function(e){var t={textDecoration:"none",fontStyle:"normal",fontSize:"12px",fontFamily:"Arial",fontWeight:"normal"};return e.headerSettings&&(e=e.headerSettings.font,t.textDecoration=i(e.fontStrikeOut,e.fontUnderline),e.fontItalic&&(t.fontStyle="italic"),e.fontSize&&(t.fontSize=e.fontSize+"px"),e.fontName&&(t.fontFamily=e.fontName),t.fontWeight=e.fontWeight),t},getTableFontPropeties:function(e){var t={textDecoration:"none",fontStyle:"normal",fontSize:"12px",fontFamily:"Arial",fontWeight:"normal"},e=e.font;return t.textDecoration=i(e.fontStrikeOut,e.fontUnderline),e.fontItalic&&(t.fontStyle="italic"),e.fontSize&&(t.fontSize=e.fontSize+"px"),e.fontName&&(t.fontFamily=e.fontName),t.fontWeight=e.fontWeight,t},getMousePoint:function(e,t,n,i){var o=t.getScreenCTM(),l=t.createSVGPoint(),r=navigator.appName,a=null,s=1;return n&&-1===r.indexOf("Microsoft")&&(t=t.getBoundingClientRect(),o.e=t.left,o.f=t.top),"function"==typeof i&&(s=i()),void 0!==e.clientX&&null!==e.clientX&&void 0!==e.clientY&&null!==e.clientY?a=e:e.changedPointers&&0<e.changedPointers.length?a=e.changedPointers[0]:e.touches&&0<e.touches.length&&(a=e.touches[0]),a&&(l.x=a.clientX,l.y=a.clientY,(l=l.matrixTransform(o.inverse())).x=parseInt(l.x,10),l.y=parseInt(l.y,10),n)&&-1===r.indexOf("Microsoft")&&0!==s&&(l.x=l.x/s,l.y=l.y/s),l},validateGridModel:function(e){var t=!1;return void 0!==e.gridColumns&&null!==e.gridColumns||(e.gridColumns=[]),e.gridColumns&&"object"==typeof e.gridColumns&&(t=!0,n(e)),t},validateColumnModel:n,isIndexEven:function(e){return e%2==0},calculateFontDimensions:function(e,t){var n={contentHeight:null,contentWidth:null},i={Size:10,Name:"Arial",Weight:100,Italic:!1,Underline:!1,StrikeOut:!1},t=t.font;return i.Size=t.fontSize,i.Name=t.fontName,i.Weight=t.fontWeight,i.Italic=t.fontItalic,i.Underline=t.fontUnderline,t.fontStrikeOut===PWC.Components.Grid.FontStrikeOut.Single&&(i.StrikeOut=!0),t=function(e,t){t=PWC.Lib.Canvas.Svg.getTextBBox(t,e),e={width:0,height:0};return null!==t&&(e.width=t.width,e.height=t.height),e}(e,i),n.contentHeight=Math.round(t.height),n.contentWidth=Math.round(t.width),n},calculateFontWidth:function(e,t){var n={Size:10,Name:"Arial",Weight:100,Italic:!1,Underline:!1,StrikeOut:!1},t=t.font;return n.Size=t.fontSize,n.Name=t.fontName,n.Weight=t.fontWeight,n.Italic=t.fontItalic,n.Underline=t.fontUnderline,t.fontStrikeOut===PWC.Components.Grid.FontStrikeOut.Single&&(n.StrikeOut=!0),Math.round(PWC.Lib.Canvas.Svg.getTextWidth(n,e))},renderText:function(e,t,n){var i=null,o=t.dx||0,l=t.dy||0,o="translate("+(t.textX+o)+","+(t.textY+l)+")";t.rotationAngle&&(o+=" rotate("+t.rotationAngle+")"),void 0!==t.textScaleX&&null!==t.textScaleX&&void 0!==t.textScaleY&&null!==t.textScaleY&&(o+=" scale("+t.textScaleX+","+t.textScaleY+")"),(i=c("text",{transform:o,width:t.width-n,height:t.contentHeight,fill:t.forecolor,"text-anchor":t.textAnchor,"fill-opacity":t.fillOpacity})).textContent=t.textContent,Y(i,{pointerEvents:"none"}),t.fontStrikeOut?Y(i,{"text-decoration":t.fontStrikeOut}):Y(i,{"text-decoration":"inherit"}),e.appendChild(i)},renderImage:function(e,t){var n=null;if(t.graphicStretchMode===PWC.Components.Grid.HmiGraphicStretchMode.Tiled?(i="translate(0,0)",o=!0):i="translate("+t.imgX+","+t.imgY+")",null!==t.graphicScaleX&&null!==t.graphicScaleY&&(i+=" scale("+t.graphicScaleX+","+t.graphicScaleY+")"),n=c("image",{transform:i,width:t.imageSize,height:t.imageSize,filter:t.imageFilter}),j(n,"href",t.imageUrl),Y(n,{pointerEvents:"none"}),o){var i=e,o=t,t=n,l={id:o.tiledContentId+"_pattern",x:o.imageSize,y:o.imageSize,width:o.imageSize,height:o.imageSize,patternUnits:"userSpaceOnUse"},r={transform:"translate("+o.imgX+","+o.imgY+")",width:o.tiledContentWidth,height:o.tiledContentHeight},a=c("g",{id:o.tiledContentId+"_TiledGroup"}),s=c("defs"),d=c("pattern",l);if(t)d.appendChild(t);s.appendChild(d),a.appendChild(s),i.appendChild(a),t=c("rect",r),Y(t,{fill:"url(#"+l.id+")"}),a.appendChild(t)}else e.appendChild(n)},updateCell:function(e,t,V){var n,i,o,l,r,a,s,d,c,u,m,p=null,C=null,h=null,g=null,f=!1,y=!1,S=null,b=!1,P=!1,v=!1,x=!1,T=!1,w=!1,B=!1,L=!1,W=!1,G=!1,R=!1;if(void 0!==t.rectY&&null!==t.rectY&&(b=!0),void 0!==t.textY&&null!==t.textY&&(P=!0),void 0!==t.imageSize&&null!==t.imageSize&&(w=!0),void 0!==t.textX&&null!==t.textX&&(v=!0),void 0!==t.rotationAngle&&null!==t.rotationAngle&&(f=!0),void 0!==t.textScaleX&&null!==t.textScaleX&&void 0!==t.textScaleY&&null!==t.textScaleY&&(y=!0),void 0!==t.dy&&null!==t.dy&&(S=!0),t.fill&&(x=!0),void 0!==t.fillOpacity&&null!==t.fillOpacity&&(L=!0),t.forecolor&&(T=!0),void 0!==t.dx&&null!==t.dx&&(B=!0),void 0!==t.imageFilter&&null!==t.imageFilter&&(W=!0),e){if((i=U(e)).contentChildsParent)for(n=i.contentChildsParent.childNodes.length,G=!0,o=0;o<n;o++){switch((p=i.contentChildsParent.childNodes[o]).tagName){case"text":T&&j(p,"fill",t.forecolor),L&&j(p,"fill-opacity",t.fillOpacity),t.fontStrikeOut?Y(p,{"text-decoration":t.fontStrikeOut}):Y(p,{"text-decoration":"inherit"}),v&&P&&(h=t.textX,g=t.textY,B&&(h+=t.dx),S&&(g+=t.dy),C="translate("+h+","+g+")",f&&(C+=" rotate("+t.rotationAngle+")"),y&&(C+=" scale("+t.textScaleX+","+t.textScaleY+")"),j(p,"transform",C)),void 0!==t.textContent&&null!==t.textContent&&(p.textContent=t.textContent),G=!1;break;case"image":t.imageUrl&&(j(p,"href",t.imageUrl),r=p,a=W,s=w,m=u=c=d=void 0,d=null,m=u=c=!1,void 0!==(l=t).graphicScaleX&&null!==l.graphicScaleX&&void 0!==l.graphicScaleY&&null!==l.graphicScaleY&&(m=!0),null!==l.imgX&&void 0!==l.imgX&&(c=!0),void 0!==l.imgY&&null!==l.imgY&&(u=!0),c&&u&&(d="translate("+l.imgX+","+l.imgY+")",m&&(d+=" scale("+l.graphicScaleX+","+l.graphicScaleY+")"),j(r,"transform",d)),a&&j(r,"filter",l.imageFilter),s)&&(j(r,"height",l.imageSize),j(r,"width",l.imageSize)),G=!1;break;case"g":if(-1!==p.id.indexOf("_TiledGroup")){N=M=k=_=E=A=I=D=void 0;var D,O=p,H=t,F=W,z=w,I=null,A=null,E=null,k=!1,M=!1,N=!1,_=O.childNodes.length;for(void 0!==H.tiledContentId&&null!==H.tiledContentId&&(k=!0),void 0!==H.tiledContentHeight&&null!==H.tiledContentHeight&&(M=!0),void 0!==H.tiledContentWidth&&null!==H.tiledContentWidth&&(N=!0),D=0;D<_;D++)"defs"===(E=O.childNodes[D]).tagName?E.childNodes[0]&&"pattern"===E.childNodes[0].tagName&&(I=E.childNodes[0],k&&j(I,"id",H.tiledContentId+"_pattern"),I.childNodes[0])&&"image"===I.childNodes[0].tagName&&H.imageUrl&&(A=I.childNodes[0],j(A,"href",H.imageUrl),F&&j(A,"filter",H.imageFilter),z)&&(j(A,"height",H.imageSize),j(A,"width",H.imageSize)):"rect"===E.tagName&&(M&&j(E,"height",H.tiledContentHeight),N&&j(E,"width",H.tiledContentWidth),k)&&Y(E,{fill:"url(#"+H.tiledContentId+"_pattern)"});I=E=null}}p=null}!V&&G||i.rectRef&&(x&&j(i.rectRef,"fill",t.fill),b&&j(i.rectRef,"y",t.rectY),R=!0)}return R},clearElement:function(e){if(e)for(;e.firstChild;)e.removeChild(e.firstChild)},clearData:function(){P=null},createSrikeOutLines:function(e,t){t=c("g",{id:t+"_doubleStrikeOutLines"},null,{stroke:"rgb(0, 0, 0)","stroke-width":1,"pointer-events":"none"});return void 0!==e.textWidth&&null!==e.textWidth&&void 0!==e.textHeight&&null!==e.textHeight&&s(e,t,PWC.Components.Grid.DoubleStrikeOutLine.Create),t},updateStrikeOutLines:function(e,t,n){var i,o=0,l=e,r=null,a=PWC.Components.Grid.DoubleStrikeOutLine.Update;if(e)for(i=(l=n?l:U(e).contentChildsParent).childNodes.length,o=0;o<i;o++)if("g"===(r=l.childNodes[o]).tagName&&-1!==r.id.indexOf("_doubleStrikeOutLines")){null!==t.textWidth&&null!==t.textHeight&&null!==t.textContent&&0<t.textContent.length&&s(t,r,a);break}},exportData:function(e,t,n,i){PWC.HmiAC.ExportUtil.downloadFile({data:t,filename:e,fileFormat:n,columnDelimiter:i})},getCellContentParent:U,colorShadeChange:function(e,t){(e=String(e).replace(/[^0-9a-f]/gi,"")).length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),t=t||0;for(var n,i="#",o=0;o<3;o++)n=parseInt(e.substr(2*o,2),16),i+=("00"+(n=Math.round(Math.min(Math.max(0,n+n*t),255)).toString(16))).substr(n.length);return i},rgbaToHex:function(e){return(e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===e.length?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""}}}(),PWC||{}),PWC=(PWC.Components=PWC.Components||{},PWC.Components.Grid=PWC.Components.Grid||{},PWC.Components.Grid.GridColumnModel=function(){"use strict";this.name=null,this.index=1,this.enabled=!0,this.visible=!0,this.sortDirection=PWC.Components.Grid.HmiSortDirection.None,this.sortOrder=0,this.width=100,this.flashingType=PWC.Components.Grid.FlashingTypes.Standard,this.useColoumnBackgroundColor=!0,this.useColumnForeColor=!0,this.allowSort=!0,this.minimumWidth=30,this.maximumWidth=200,this.foreColor="rgba(0,0,0,1)",this.backColor="rgba(255, 255, 255, 1)",this.alternateForeColor="rgba(0,0,0,1)",this.alternateBackColor="rgba(240,240,240,1)",this.content={horizontalAlignment:PWC.Components.Grid.HorizontalAlignment.Center,verticalAlignment:PWC.Components.Grid.VerticalAlignment.Center,contentMode:PWC.Components.Grid.ContentMode.Text,textPosition:PWC.Components.Grid.HmiTextPosition.Left,graphicStretchMode:PWC.Components.Grid.HmiGraphicStretchMode.None,spacing:5,splitRatio:.5,textTrimming:PWC.Components.Grid.HmiTextTrimming.None},this.headerSettings={text:null,graphic:null,content:{horizontalAlignment:PWC.Components.Grid.HorizontalAlignment.Center,verticalAlignment:PWC.Components.Grid.VerticalAlignment.Center,contentMode:PWC.Components.Grid.ContentMode.Text,textPosition:PWC.Components.Grid.HmiTextPosition.Left,graphicStretchMode:PWC.Components.Grid.HmiGraphicStretchMode.None,spacing:5,splitRatio:.5,textTrimming:PWC.Components.Grid.HmiTextTrimming.None}},this.isUserChangedWidth=!1},PWC||{}),PWC=(PWC.Components=PWC.Components||{},PWC.Components.Grid=PWC.Components.Grid||{},PWC.Components.Grid.GridModel=function(){"use strict";this.gridColumns=[],this.gridType="",this.propsObject={},this.headerSettingsPart={},this.headerSettings={columnHeaderType:PWC.Components.Grid.HmiDataGridHeaderType.Content,rowHeaderType:PWC.Components.Grid.HmiDataGridHeaderType.Index,allowColumnReorder:!0,allowColumnResize:!1,headerGridLineColor:"rgba(196,196,201,1)",headerForeColor:"rgba(0,0,0,1)",headerBackColor:"rgba(230,230,235,1)",headerSelectionBackColor:"rgba(125,204,246,1)",headerSelectionForeColor:"rgba(0,0,0,1)",font:{fontWeight:PWC.Components.Grid.FontWeight.Normal,fontName:"Arial",fontItalic:!1,fontSize:22,fontUnderline:!1,fontStrikeOut:PWC.Components.Grid.FontStrikeOut.None}},this.gridLineVisibility=PWC.Components.Grid.HmiGridLinesSimple.HorizontalAndVertical,this.gridLineWidth=1,this.gridLineColor="rgba(230,230,235,1)",this.rowHeight=40,this.cellPaddingPart={},this.cellPadding={top:0,bottom:0,left:0,right:0},this.gridSelectionMode=PWC.Components.Grid.SelectionMode.Multi,this.selectFullRow=!0,this.selectionBackColor="rgba(125,204,246,1)",this.selectionForeColor="rgba(0,0,0,1)",this.selectionBorderColor="rgba(86,141,169,1)",this.selectionBorderWidth=1,this.height=600,this.width=1e3,this.left=0,this.top=0,this.font={fontItalic:!1,fontName:"Calibri",fontSize:20,fontUnderline:!1,fontStrikeOut:PWC.Components.Grid.FontStrikeOut.None,fontWeight:PWC.Components.Grid.FontWeight.Normal},this.backColor="rgba(255,255,255,1)",this.foreColor="rgba(0,0,0,1)",this.alternateBackColor="rgba(242,242,245,1)",this.alternateForeColor="rgba(0,0,0,1)",this.coloringMode=PWC.Components.Grid.ColoringMode.Rows,this.autoCompleteColumns=!0,this.borderWidth=1,this.borderColor="rgba(100,100,106,1)",this.rowTitleAlignment=PWC.Components.Grid.HorizontalAlignment.Right,this.autoCompleteRows=!0,this.horizontalScrollbarVisibility=PWC.Components.Grid.HmiScrollBarVisibility.Automatic,this.verticalScrollbarVisibility=PWC.Components.Grid.HmiScrollBarVisibility.Automatic,this.sortMode=PWC.Components.Grid.TableSortMode.ByClick,this.allowSort=!0,this.sortSequence=PWC.Components.Grid.TableSortSequence.AscDescNone,this.showSortIcon=!0,this.showSortIndex=!0,this.useSortKey=!1,this.backgroundColor="rgba(185,211,238,1)",this.sortUpImageURL="images/sort_up.png",this.sortDownImageURL="images/sort_down.png",this.filterImagURL="images/filter.png",this.enabled=!0,this.useColumnColors=!0,this.rowHeaderOffsetbyChar="9",this.selectEmptyCell=!0,this.enableEditing=!0},PWC||{}),PWC=(PWC.Components=PWC.Components||{},PWC.Components.Grid=PWC.Components.Grid||{},PWC.Components.Grid.IGridHost=function(){return{getCellData:function(){},getCellStyle:function(){},getRowFlashInfo:function(){},onVScrollUpButtonClick:function(){},OnVScrollChange:function(){},OnVScrollDragEnd:function(){},onVScrollDownButtonClick:function(){},onHScrollRightButtonClick:function(){},onHScrollLeftButtonClick:function(){},onHScrollDragEnd:function(){},onHScrollChange:function(){},onRowHeaderClick:function(){},onColumnHeaderClick:function(){},onColumnHeaderDoubleClick:function(){},onCellClick:function(){},onSelection:function(){},onSortButtonClicked:function(){},onCellEditEnd:function(){},onCellEditBegin:function(){},onCellDoubleClick:function(){},onViewportChange:function(){},onColumnResize:function(){},onRowHeaderDoubleClick:function(){},onSelectionBegin:function(){},onFilterTextChange:function(){},onMouseWheelScroll:function(){},onColumnReorder:function(){}}},PWC||{}),PWC=(PWC.Components=PWC.Components||{},PWC.Components.TagBrowser=PWC.Components.TagBrowser||{},PWC.Components.TagBrowser.TagBrowserView=function(B){"use strict";function L(e,t,n,i){switch(e){case x.EventTypes.TreeViewImgClick:y!==x.DisplayViewType.Cpm&&y!==x.DisplayViewType.CpmLogging&&y!==x.DisplayViewType.StrutureTag||(C=n,p=i,b===PWC.HmiAC.TargetObjectTypes.NodeBrowser||y===x.DisplayViewType.Cpm||y===x.DisplayViewType.CpmLogging?V(t,p.getNodeItemId()):V(t,n));break;case x.EventTypes.TreeViewSpanClick:if(C=n,p=i,b===PWC.HmiAC.TargetObjectTypes.NodeBrowser)g&&g.removeAttribute("disabled");else if(b===PWC.HmiAC.TargetObjectTypes.TagBrowser)switch(g&&g.setAttribute("disabled","true"),y){case x.DisplayViewType.Cpm:V(T.ListView,p.getNodePath());break;case x.DisplayViewType.CpmLogging:V(T.ListView,p.getNodeRtId());break;default:V(t,n)}break;case x.EventTypes.TreeNodeDoubleClick:V(T.TreeView,n),V(T.ListView,n),p=i,C=n}}function e(e,t,n,i){var o="",l=v;switch(e){case x.EventTypes.DoubleClick:n&&(n===x.NodeTypes.TagGroup?y!==x.DisplayViewType.Cpm&&y!==x.DisplayViewType.CpmLogging?(a.setDoubleClickSelectedNode(t),t=C+Y+t,V(T.TreeView,C),C=t):(D=!0,V(T.ListView,t)):n===x.NodeTypes.SimpleTag&&N.isPopUpTagBrowser&&(y!==x.DisplayViewType.Cpm&&y!==x.DisplayViewType.CpmLogging||(o=a.getSelectedNode()),v.gfxWebLib.connection.sendDomainLogicEvent(v.rtoid,4,[0],[{tagName:t,cpmPath:o,chromId:i}]),setTimeout(function(){l.gfxWebLib.connection.sendScreenItemDelete(l.rtoid),l=null},100)));break;case x.EventTypes.SingleClick:g&&(n===x.NodeTypes.TagGroup?g.setAttribute("disabled","true"):n===x.NodeTypes.SimpleTag&&g.removeAttribute("disabled"));break;case x.EventTypes.ScrollChange:N.requestDisplayData(n,T.ListView,t);break;case x.EventTypes.Sort:U=t,M=n}}function R(e,t,n){var i=null;return(i=document.createElement("input")).setAttribute("type","button"),i.setAttribute("value",e),i.setAttribute("id",e+"Button"),i.setAttribute("class","btnClass "+n),t&&i.setAttribute("disabled","true"),i}function o(e){k=H=!1,y=e,p=null,h.unLoadGrid(),h.setScrollStatus(),(e=document.getElementById("filterTextBox"))&&(y===x.DisplayViewType.Logging?(e.value="",e.removeAttribute("disabled")):y===x.DisplayViewType.Online?(e.value="*",e.removeAttribute("disabled")):(e.value="*",e.setAttribute("disabled","true"))),y===x.DisplayViewType.Cpm||y===x.DisplayViewType.CpmLogging?a&&a.clearTreeView():V(T.ListView,ee())}function O(e){var t,n,i=e.wheelDelta,o=e.shiftKey,l=e.detail;(void 0!==i||void 0!==l)&&(o?(t=this.scrollLeft,i?this.scrollLeft+=(i<0?1:-1)*X:l&&(this.scrollLeft+=(0<l?1:-1)*X)):(n=this.scrollTop,i?this.scrollTop+=(i<0?1:-1)*X:l&&(this.scrollTop+=(0<l?1:-1)*X)),t&&t!==this.scrollLeft||n&&n!==this.scrollTop)&&e.preventDefault()}function F(e){(e=e||window.event).preventDefault?e.preventDefault():e.returnValue=!1}var a,t,l,r,n,s,d,c,u,i,m,p,C,h,g,f,y,S,b,P,v=B,x=PWC.Components.TagBrowser,T=x.RequestType,w=x.ServerRequestParamIds,W=[],G=[],D=!1,H=!1,I=!1,A=v.gfxWebLib.textbib,z=PWC.Components.Grid.ContentMode,E={},_="*",k=!1,U=0,M=x.SortingMode.Asc,N=this,Y="\\",j=90,X=30,q=function(e){t.style.width=n+"px",c&&c.setAttribute("width",m+"px"),l&&l.setAttribute("y2",u),I&&h.setGridDims(u,m,e),h&&(e=h.resizeCalculations(e))&&N.requestDisplayData(e.NoOfRecords,T.ListView,e.CurrentStartIndex)},K=function(e){var t;return!(0===n&&e<0||0===m&&0<e||(t=e-N.panDeltaCoords.x,N.panDeltaCoords.x=e,m-=t,(n+=t)<0?(m+=n,n=0):m<0&&(n+=m,m=0),q(),0))},Z=function(e){e.preventDefault(),e.eventType===P.INPUT_MOVE?K(e.deltaX)||r.stop():e.eventType===P.INPUT_END&&(N.panDeltaCoords={x:0})},J=function(){N.panDeltaCoords.x=0},$=function(e){var t,n,i="",o=[],l=v;switch(t=void 0!==e?(e.target||e.srcElement).value:t){case A.getText("TBID_AlgCtrl_Ok"):b===PWC.HmiAC.TargetObjectTypes.NodeBrowser?(n=a.getSelectedNode())?(v.gfxWebLib.connection.sendDomainLogicEvent(v.rtoid,15,[0],o=[n]),setTimeout(function(){l.gfxWebLib.connection.sendScreenItemDelete(l.rtoid),l=null},100),a.clearTreeView()):Q():(n=h.getSelectedRecord(),y!==x.DisplayViewType.Cpm&&y!==x.DisplayViewType.CpmLogging||(i=a.getSelectedNode()),n?(o=[{tagName:n.tagName,cpmPath:i,chromId:n.chromId}],v.gfxWebLib.connection.sendDomainLogicEvent(v.rtoid,4,[0],o),setTimeout(function(){l.gfxWebLib.connection.sendScreenItemDelete(l.rtoid),l=null},100),a.clearTreeView()):Q());break;case A.getText("TBID_AlgCtrl_Cancel"):v.gfxWebLib.connection.sendScreenItemDelete(v.rtoid),a&&a.clearTreeView()}},Q=function(){var e=v.gfxWebLib.topLevelScreenWindow.getTopLevelScreenWindowDiv(),t=document.createElement("div"),n=Number(v.domNode.firstElementChild.style.zIndex);t.setAttribute("id","ObjectExplorer_WarningDialog"),t.style.position="absolute",t.style.zIndex=n+10,e.appendChild(t),n=A.getText("TBID_TagBrowser_Warning_Msg"),e=A.getText("TBID_TagBrowser_Warning_Caption"),PWC.Components.GenericDialog.ShowWarning(n,t,e,function(){return!1})},V=function(e,t){var n,i,o,l,r,a,s=x.BrowsingRequestIds.ServerData;for(a in M=x.SortingMode.Asc,E)if(E[a]){switch(r=p?p.getNodeTarget():t,e===T.ListView?i=y===x.DisplayViewType.Cpm||y===x.DisplayViewType.StrutureTag?x.BrowsingMode.BrowseNodeMembers:y===x.DisplayViewType.Logging||y===x.DisplayViewType.CpmLogging?x.BrowsingMode.BrowseLoggingTags:x.BrowsingMode.BrowseBoth:y===x.DisplayViewType.Cpm||y===x.DisplayViewType.CpmLogging?p?(i=x.BrowsingMode.BrowseNodeChildren,M=x.SortingMode.Created):i=x.BrowsingMode.BrowseNodeRoot:i=p&&p.getNodeType()===x.TreeNodeTypes.StructNode?x.BrowsingMode.BrowseNodeMembers:x.BrowsingMode.BrowseNode,k||(_=y===x.DisplayViewType.Logging||y===x.DisplayViewType.CpmLogging?"":"*"),y){case x.DisplayViewType.Online:l=x.ObjectType.SimpleTag;break;case x.DisplayViewType.Logging:l=x.ObjectType.LoggingTag;break;case x.DisplayViewType.StrutureTag:l=x.ObjectType.UDT,p&&p.getNodeType()===x.TreeNodeTypes.StructNode&&(o=p.getNodeItemId(),l=p.getObjectType()===x.GfxObjectType.ArrayTag?x.ObjectType.ArrayTag:x.ObjectType.StrutureTag,o)&&(t=o);break;case x.DisplayViewType.Cpm:case x.DisplayViewType.CpmLogging:l=x.ObjectType.CpmNode;break;default:l=x.ObjectType.SimpleTag}n=[w.GetObject,w.SystemID,w.ObjectType,w.SelectedNode,w.NameFilter,w.PropertyFilter,w.LanguageID,w.BrowsingMode,w.SortingMode,w.SortByAttribute],r=[s,r,l,t,_,0,v.gfxWebLib.getLocale(),i,M,U],v.gfxWebLib.connection.sendDomainLogicEvent(v.rtoid,e,n,r);break}},ee=function(){for(var e=Object.keys(E),t=e.length-1;0<=t;t--)if(E[e[t]])return e[t];return W[0]},te=[{Index:"0",Name:A.getText("TBID_TagBrowser_Column_Name"),Width:520,ContentMode:z.GraphicAndText,ShowIcon:!0,Mapping:x.TagGridColumnNames.Name},{Index:"1",Name:A.getText("TBID_TagBrowser_Column_Type"),Width:130,ContentMode:z.Text,ShowIcon:!1,Mapping:x.TagGridColumnNames.Type}],ne=function(e){e&&e.destroy()};this.createTreeView=function(e){H||(H=!0,t.onclick=F,a&&a.clearTreeView(),(a=e?(G=e.DisplayNameArray[0],new x.TagBrowseTreeView(G,L,v.gfxWebLib,v.props.TargetObjectType)):new x.TagBrowseTreeView(W,L,v.gfxWebLib,v.props.TargetObjectType)).initializeTreeView(t,E,e))},this.createWidthSeperator=function(){var e,t,n;function i(){ne(r),(r=new P.Manager(l)).add(new P.Pan({event:n.PAN,pointers:1,direction:P.DIRECTION_ALL,threshold:5})),PWC.HmiAC.svgShape.AddSvgEvents(l,{mousedown:J,mouseup:J,touchstart:J,touchend:J}),r.on(n.PAN,Z)}(t=(e=PWC.HmiAC.svgShape.CreateSvgElement)("svg",{id:"widthSVGParent_"+this.id})).setAttribute("class","widthSVGParent"),t.setAttribute("style","float:left;"),l=e("line",{id:"widthSeperatorLine_"+this.id,stroke:"grey","stroke-width":"5px",appendTo:t}),PWC.HmiAC.svgShape.SetAttributes(l,{x1:"0",x2:"0",y1:"0",y2:u,cursor:"ew-resize"}),d.insertBefore(t,c),n=PWC.HmiAC.HammerEvents,P?i():(requirejs.config({baseUrl:v.gfxWebLib.connection.getAppDir()+"libs",paths:{Hammer:"hammer"}}),require(["Hammer"],function(e){P=e,i()}))},this.panDeltaCoords={x:0},this.createOuterDivs=function(){(d=document.createElement("div")).setAttribute("id","body_Div_"+this.id),d.setAttribute("class","body_Div"),u=b===PWC.HmiAC.TargetObjectTypes.NodeBrowser?N.height-70:N.height-j,i=N.width-22,b===PWC.HmiAC.TargetObjectTypes.NodeBrowser&&d.style.setProperty("margin-top","10px"),n=b===PWC.HmiAC.TargetObjectTypes.NodeBrowser?i:.35*(i-5),(t=document.createElement("div")).setAttribute("id","treeViewDiv_"+this.id),t.setAttribute("class","treeViewDiv"),t.style.setProperty("height","inherit"),t.style.setProperty("width",n+"px"),t.addEventListener("mousewheel",O),t.addEventListener("DOMMouseScroll",O),d.appendChild(t),b!==PWC.HmiAC.TargetObjectTypes.NodeBrowser&&(m=.64*(i-5),(c=document.createElementNS(PWC.Lib.Canvas.Svg.svgNS,"svg")).setAttributeNS(null,"id","svgContainer_"+this.id),c.setAttribute("height",u+"px"),c.setAttribute("width",m+"px"),c.setAttribute("background-color",N.backColor),d.appendChild(c)),s.appendChild(d),this.isPopUpTagBrowser&&(g=R(A.getText("TBID_AlgCtrl_Ok"),!0,"forOkTagBtn "),s.appendChild(R(A.getText("TBID_AlgCtrl_Cancel"),!1,"forCancelTagBtn")),s.appendChild(g),j=125),u=b===PWC.HmiAC.TargetObjectTypes.NodeBrowser?N.height-70:N.height-j,i=N.width-22,d.style.setProperty("height",u+"px"),d.style.setProperty("width",i+"px"),b===PWC.HmiAC.TargetObjectTypes.NodeBrowser&&d.style.setProperty("margin-top","10px")},this.Hammer=null,this.renderTagGridData=function(e){y!==x.DisplayViewType.Cpm&&y!==x.DisplayViewType.CpmLogging||!D?h.renderTagGridData(e,k):(h.renderTagGridData(e,k,D),D=!1),k=!1},this.requestHierarchyData=function(){S=PWC.Components.TagBrowser.TreeNodeTypes.HierarchyNode,v.gfxWebLib.connection.sendDomainLogicEvent(v.rtoid,T.GetHierarchyList,[w.GetObject],[x.BrowsingRequestIds.ServerData])},this.eventsHandler=function(e,t,n,i){var o,l,r=!1;switch(t&&(o=t.target||t.srcElement),e){case x.EventTypes.DataSourceChange:if(o&&o.checked){for(l in C=i,E)E[l]&&a.removeNodeByName(l);E[i]=!0,y===x.DisplayViewType.Cpm||y===x.DisplayViewType.CpmLogging?N.requestHierarchyData():(a.addNewNode(E),p=a.selectFirstNode(i),H=!0,V(T.ListView,i)),I=!0}else{for(l in E[i]=!1,E)if(E[l]){r=!0;break}H=r,y===x.DisplayViewType.Cpm||y===x.DisplayViewType.CpmLogging?(p=null,a.removeNodeByName(G)):a.removeNodeByName(i),r?(p=a.selectFirstNode(l),V(T.ListView,l)):(h.resetGridCount(),h.unLoadGrid(),h.setScrollStatus(),I=!1,C=void 0)}break;case x.EventTypes.DataSourceLoad:E[i]=!0,V(T.ListView,i);break;case x.EventTypes.FilterChange:_=t.target.value,k=!0,V(T.ListView,C)}},this.initialize=function(){var e,t,n,i,o=PWC.Lib.HmiTypes.Advanced.ToolBarApi,l=PWC.Lib.Config.Properties;if(P=window.Hammer,this.backColor=l.getProp(v,"BackColor",PWC.Lib.Canvas.Converters.enumConverter.Color),this.height=v.control.height,this.left=v.control.left,this.name=l.getProp(v,"Name"),this.width=v.control.width,this.timeBase=PWC.HmiAC.TimeBase.LocalTimeZone,this.customFormat=PWC.HmiAC.CustomDateFormat.prototype.getCustomTimeFormat(this.timeBase),this.displayViewType=l.getProp(v,"DisplayViewType"),this.id=v.rtoid+"_ObjectExplorer",this.targetObjectType=l.getProp(B,"TargetObjectType"),void 0===v.parent&&(this.isPopUpTagBrowser=!0),PWC.HmiAC.Common.HelperUtil.getWindowFlags.call(this,l.getProp(v,"WindowFlags")),(s=document.createElement("div")).setAttribute("id","resizableTagDialog_Div_"+this.id),s.setAttribute("class","resizableTagDialog"),s.setAttribute("style","height:"+this.height+"px ; width:"+this.width+"px ;"),v.control.domParent.appendChild(s),(e=v.props.ToolBar?v.props.ToolBar.Elements:void 0)&&0<e.length){if(y=x.DisplayViewType.Online,!v.props.ToolBar.Height)for(v.props.Caption.Font.Size=14,v.handler.onChanged(v,{Font:v.props.Caption.Font},"Caption:"+v.props.Caption.ElementID),v.handler.onChanged(v,{BackColor:4294967295},"ToolBar."+v.props.ToolBar.ElementID),n=0;n<e.length;n++)t=e[n],(i=l.getPropPart(t,t.Type,"Padding")).Top=2,i.Left=2,i.Bottom=2,i.Right=2,v.handler.onChanged(v,{Padding:i},"ToolBar:Elements."+t.ElementID),(i=l.getPropPart(t,t.Type,"Margin")).Top=16,i.Left=4,i.Bottom=16,i.Right=4,v.handler.onChanged(v,{Margin:i},"ToolBar:Elements."+t.ElementID),v.handler.onChanged(v,{Width:42},"ToolBar:Elements."+t.ElementID),v.handler.onChanged(v,{Height:38},"ToolBar:Elements."+t.ElementID),v.handler.onChanged(v,{BackColor:4294112511},"ToolBar:Elements."+t.ElementID)}else y=x.DisplayViewType.Cpm;function r(){ne(f),(f=new P.Manager(s,{domEvents:!0})).add(new P.Tap({event:"singletap"})),f.on("singletap",$)}o.check(v,this.displayViewType,!0),o.check(v,x.DisplayViewType.Online,!0),b=this.targetObjectType,P?r():(requirejs.config({baseUrl:v.gfxWebLib.connection.getAppDir()+"libs",paths:{Hammer:"hammer"}}),require(["Hammer"],function(e){P=e,r()}))},this.calculateViewPort=function(e){var t,n=this.displayViewType;void 0!==(t=h?h.calculateViewPort(e,n,D):t)&&N.requestDisplayData(t.NoOfRecords,T.ListView,t.CurrentStartIndex)},this.requestDisplayData=function(e,t,n){var i,o,l;for(l in E)if(E[l]){i=[w.RequestType,w.StartIndex,w.Count],void 0===n&&(n=0),o=[T.GetData,n,e],v.gfxWebLib.connection.sendDomainLogicEvent(v.rtoid,t,i,o);break}},this.modifyTreeView=function(e){y!==x.DisplayViewType.Cpm&&y!==x.DisplayViewType.CpmLogging||S!==PWC.Components.TagBrowser.TreeNodeTypes.HierarchyNode?y!==x.DisplayViewType.Cpm&&y!==x.DisplayViewType.CpmLogging||S!==PWC.Components.TagBrowser.TreeNodeTypes.CpmRootNode?b===PWC.HmiAC.TargetObjectTypes.NodeBrowser?a.modifyTreeView(e,p,b):a.modifyTreeView(e,p,y):(S=PWC.Components.TagBrowser.TreeNodeTypes.CpmNode,this.createTreeView(e),p=a.selectFirstNode(e.DisplayNameArray[0]),a.setLastSelectedNode(p),b===PWC.HmiAC.TargetObjectTypes.NodeBrowser?g&&g.removeAttribute("disabled"):y===x.DisplayViewType.Cpm?V(T.ListView,p.getNodePath()):y===x.DisplayViewType.CpmLogging&&V(T.ListView,p.getNodeRtId())):(S=PWC.Components.TagBrowser.TreeNodeTypes.CpmRootNode,V(T.TreeView,e.ItemIdArray[0]))},this.assignInitialTreeData=function(e){var t,n=e.length;for(C=e[0],W=e,t=0;t<n;t++)E[e[t]]=!1;E[e[0]]=!0},this.onToolbarButton=function(e,t){var n,i=PWC.Lib.HmiTypes.Advanced.ToolBarApi;if(h){switch(t){case x.DisplayViewType.Details:this.displayViewType=t,h.setViewChangedBool(!0),h.detailViewLayoutChange(),i.check(v,x.DisplayViewType.SmallIcons,!1),i.check(v,x.DisplayViewType.List,!1),i.check(v,x.DisplayViewType.Details,!0);break;case x.DisplayViewType.SmallIcons:this.displayViewType=t,h.setViewChangedBool(!0),h.smallIconGridLayoutChange(),i.check(v,x.DisplayViewType.SmallIcons,!0),i.check(v,x.DisplayViewType.List,!1),i.check(v,x.DisplayViewType.Details,!1);break;case x.DisplayViewType.List:this.displayViewType=t,h.setViewChangedBool(!0),h.listViewGridLayoutChange(),i.check(v,x.DisplayViewType.SmallIcons,!1),i.check(v,x.DisplayViewType.List,!0),i.check(v,x.DisplayViewType.Details,!1);break;case x.DisplayViewType.Online:h.resetGridCount(),o(t),i.check(v,x.DisplayViewType.Online,!0),i.check(v,x.DisplayViewType.Logging,!1),i.check(v,x.DisplayViewType.StrutureTag,!1),i.check(v,x.DisplayViewType.Cpm,!1),i.check(v,x.DisplayViewType.CpmLogging,!1);break;case x.DisplayViewType.Logging:h.resetGridCount(),o(t),i.check(v,x.DisplayViewType.Online,!1),i.check(v,x.DisplayViewType.Logging,!0),i.check(v,x.DisplayViewType.StrutureTag,!1),i.check(v,x.DisplayViewType.Cpm,!1),i.check(v,x.DisplayViewType.CpmLogging,!1);break;case x.DisplayViewType.StrutureTag:h.resetGridCount(),o(t),i.check(v,x.DisplayViewType.Online,!1),i.check(v,x.DisplayViewType.Logging,!1),i.check(v,x.DisplayViewType.StrutureTag,!0),i.check(v,x.DisplayViewType.Cpm,!1),i.check(v,x.DisplayViewType.CpmLogging,!1);break;case x.DisplayViewType.Cpm:h.resetGridCount(),o(t),this.requestHierarchyData(),i.check(v,x.DisplayViewType.Online,!1),i.check(v,x.DisplayViewType.Logging,!1),i.check(v,x.DisplayViewType.StrutureTag,!1),i.check(v,x.DisplayViewType.Cpm,!0),i.check(v,x.DisplayViewType.CpmLogging,!1);break;case x.DisplayViewType.CpmLogging:h.resetGridCount(),o(t),this.requestHierarchyData(),i.check(v,x.DisplayViewType.Online,!1),i.check(v,x.DisplayViewType.Logging,!1),i.check(v,x.DisplayViewType.StrutureTag,!1),i.check(v,x.DisplayViewType.Cpm,!1),i.check(v,x.DisplayViewType.CpmLogging,!0)}g&&g.setAttribute("disabled","true"),t!==x.DisplayViewType.Cpm&&t!==x.DisplayViewType.CpmLogging&&(n=h.requestRequiredData(),N.requestDisplayData(n.NoOfRecords,T.ListView,n.CurrentStartIndex))}},this.createTagGridLayout=function(){h=new x.TagBrowserGridView(e,A,c,v.gfxWebLib.connection.getAppDir(),this.id,g),I=h.createTagGridLayout(u,m,te)},this.resize=function(e){(10<Math.abs(e.height-N.height)||10<Math.abs(e.width-N.width))&&(N.height=e.height,N.width=e.width,s.setAttribute("style","height:"+N.height+"px ; width:"+N.width+"px ;"),u=b===PWC.HmiAC.TargetObjectTypes.NodeBrowser?N.height-70:N.height-j,i=N.width-22,d.style.setProperty("height",u+"px"),d.style.setProperty("width",i+"px"),b===PWC.HmiAC.TargetObjectTypes.NodeBrowser&&d.style.setProperty("margin-top","10px"),n=b===PWC.HmiAC.TargetObjectTypes.NodeBrowser?i:.35*(i-5),m=.64*(i-5),q(!0),N.setDataSourceDims())},this.onCleanUp=function(){P&&(ne(r),ne(f)),h.unInit(),a=t=l=s=d=c=h=E=W=G=null,x=p=g=A=N=P=v=null},this.getDivElements=function(){return{mainOuterDiv:s,bodyDiv:d}}},PWC||{}),PWC=(PWC.HmiAC=PWC.HmiAC||{},PWC.HmiAC.Design=PWC.HmiAC.Design||{},PWC.HmiAC.Design.Inheritance={Extend:function(e,t){for(var n in t.prototype)!n||e.prototype[n]||(e.prototype[n]=t.prototype[n]);(e.prototype.constructor=e).baseCtor=t,e.basePrototype=t.prototype}},PWC||{});PWC.Components=PWC.Components||{},PWC.Components.TagBrowser=PWC.Components.TagBrowser||{},PWC.Components.TagBrowser.BrowsingMode={BrowseBoth:0,BrowseNode:1,BrowseLeave:2,BrowseNodeMembers:9,BrowseNodeRoot:4,BrowseNodeChildren:5,BrowseLoggingTags:11},PWC.Components.TagBrowser.SortingMode={Created:0,Asc:1,Dsc:2},PWC.Components.TagBrowser.ObjectType={None:0,AnyTag:1,SimpleTag:2,StrutureTag:3,Group:4,Connection:5,ArrayTag:6,Job:7,All:8,LoggingTag:11,CpmNode:9,UDT:15},PWC.Components.TagBrowser.RequestType={TreeView:0,ListView:1,GetCount:0,GetData:1,GetHierarchyList:2},PWC.Components.TagBrowser.BrowsingRequestIds={ServerData:0,TreeViewGetEnum:1,ListViewGetEnum:2,TreeViewGetObject:3,ListViewGetObject:4},PWC.Components.TagBrowser.LanguageId={English:1033},PWC.Components.TagBrowser.ServerRequestParamIds={GetObject:0,SystemID:1,ObjectType:2,SelectedNode:3,NameFilter:4,PropertyFilter:5,LanguageID:6,BrowsingMode:7,SortingMode:8,SortByAttribute:9,RequestType:0,StartIndex:1,Count:2},PWC.Components.TagBrowser.NodeTypes={TagGroup:16,SimpleTag:32},PWC.Components.TagBrowser.NodeSubTypes={ChannelUnit:"Channel Unit",Directory:"Directory",ConnectionType:"Connection Type",TagGroup:30,UDTGroup:31,LogicalConnection:"Logical Connection",ArrayGroup:64},PWC.Components.TagBrowser.DLDataReceivedTypes={DataSourceArray:1e3,TreeViewCount:1001,ListViewCount:1002,TreeViewData:1003,ListViewData:1004,CpmHierarchyData:1005},PWC.Components.TagBrowser.TagGridColumnNames={Name:1,Type:2},PWC.Components.TagBrowser.EventTypes={DataSourceLoad:"dataSrcLoad",DataSourceChange:"dataSourceChange",SingleClick:"singleClick",DoubleClick:"doubleClick",FilterChange:"filterChange",TreeViewImgClick:"imgClick",TreeViewSpanClick:"spanClick",TreeNodeDoubleClick:"treeDoubleClick",ScrollChange:"scrollChange",Sort:"sort"},PWC.Components.TagBrowser.DisplayViewType={SmallIcons:1,List:2,Details:3,Online:4,Logging:5,Cpm:6,StrutureTag:7,CpmLogging:8},PWC.Components.TagBrowser.TreeNodeTypes={SystemNode:1,StructNode:2,HierarchyNode:2,CpmRootNode:3,CpmNode:4},PWC.Components.TagBrowser.GfxObjectType={StructureTag:23,ArrayTag:24};var PWC,PWC,PWC,PWC,PWC,PWC,PWC,PWC,PWC,PWC,PWC}(PWC=PWC||{}).HmiAC=PWC.HmiAC||{},PWC.HmiAC.PropertyRowReadOnly=function(i,o){var t=null,l=null,n=i;this.name=o,this.initialize=function(){var e,t,n;(l=document.createElement("Div")).setAttribute("class","LeafRow"),e=document.createElement("table"),t=document.createElement("tr"),(n=document.createElement("td")).setAttribute("id",i),n.innerHTML=o,n.setAttribute("class","LeafName"),t.appendChild(n),e.appendChild(t),n.addEventListener("click",this.onClick),l.appendChild(e)},this.getValue=function(){return null.innerHTML},this.setValue=function(e){null.innerHTML=e},this.setPropChangeCallback=function(e){t=e},this.setParent=function(e){e.appendChild(l)},this.isLeaf=function(){return!0},this.destroyLeaf=function(){return l.parentNode.removeChild(l),!0},this.onClick=function(e){t(e,n)},this.initialize()},(PWC=PWC||{}).Components=PWC.Components||{},PWC.Components.TagBrowser=PWC.Components.TagBrowser||{},PWC.Components.TagBrowser.TagBrowserArchiveView=function(e){"use strict";PWC.Components.TagBrowser.TagBrowserArchiveView.baseCtor.call(this,e)},PWC.HmiAC.Design.Inheritance.Extend(PWC.Components.TagBrowser.TagBrowserArchiveView,PWC.Components.TagBrowser.TagBrowserView),(PWC=PWC||{}).Components=PWC.Components||{},PWC.Components.TagBrowser=PWC.Components.TagBrowser||{},PWC.Components.TagBrowser.TagBrowserGridView=function(e,B,L,R,O,F){"use strict";function z(e,t){var n,i,o={},l=t;return o.style=null,T?G[n=(i=e-E)*p+l]&&(o.text=G[n][0],o.graphic=G[n][1]):w?G[n=(i=e)+(l=t-E)*y]&&(o.text=G[n][0],o.graphic=G[n][1]):(i=e-E,(t=C.AttributeValuesArray[i])&&t[l]&&(v.gridColumns[l].mapping===x.TagGridColumnNames.Type?o.text=Q[t[l]]:(o.text=t[l][0],o.graphic=t[l][1]))),o}function _(e,t){null!==e&&null!==t&&ie(x.EventTypes.SingleClick,e,t)}function U(e,t){null!==e&&null!==t&&ie(x.EventTypes.DoubleClick,e,t)}function Y(e,t){n(e,t)}function j(e,t){n(e,t)}function X(e,t){n(e,t)}function q(e,t){n(e,t)}function K(e){t(e)}function Z(e){t(e)}function J(e){t(e)}function $(e,t,n){M=!0,D(x.EventTypes.Sort,e,n)}function i(e,t){for(var n,i,o,l=A+"content/advanced/BrowsingView/",r=e.AttributeValuesArray.length,a=0;a<r;a++)if(n=e.NodeTypeArray[a],i=e.AttributeValuesArray[a][0],n===x.NodeTypes.TagGroup){if(o=e.AttributeValuesArray[a][1])switch(o){case x.NodeSubTypes.TagGroup:case x.NodeSubTypes.UDTGroup:e.AttributeValuesArray[a][0]=[i,l+"TagGroup.svg"];break;case x.NodeSubTypes.ChannelUnit:e.AttributeValuesArray[a][0]=[i,l+"ChannelUnit.svg"];break;case x.NodeSubTypes.LogicalConnection:e.AttributeValuesArray[a][0]=[i,l+"LogicalConnection.svg"];break;case x.NodeSubTypes.Directory:case x.NodeSubTypes.ConnectionType:e.AttributeValuesArray[a][0]=[i,l+"Directory.svg"];break;default:x.NodeSubTypes.ArrayGroup===(o&x.NodeSubTypes.ArrayGroup)&&(e.AttributeValuesArray[a][0]=[i,l+"TagGroup.svg"])}}else n===x.NodeTypes.SimpleTag&&(e.AttributeValuesArray[a][0]=[i,l+"variable.svg"]);t?(C.AttributeIDArray=C.AttributeIDArray.concat(e.AttributeIDArray),C.AttributeValuesArray=C.AttributeValuesArray.concat(e.AttributeValuesArray),C.DisplayNameArray=C.DisplayNameArray.concat(e.DisplayNameArray),C.IdentifierArray=C.IdentifierArray.concat(e.IdentifierArray),C.LanguageIDArray=C.LanguageIDArray.concat(e.LanguageIDArray),C.NodePathArray=C.NodePathArray.concat(e.NodePathArray),C.NodeTypeArray=C.NodeTypeArray.concat(e.NodeTypeArray),C.ObjectTypeArray=C.ObjectTypeArray.concat(e.ObjectTypeArray),C.RuntimeObjectIdArray&&(C.RuntimeObjectIdArray=C.RuntimeObjectIdArray.concat(e.RuntimeObjectIdArray)),C.TotalLeavesArray=C.TotalLeavesArray.concat(e.TotalLeavesArray)):C=e}function o(){(k||N)&&(E=0),u.clearSelection(),v.verticalScrollbarVisibility=PWC.Components.Grid.HmiScrollBarVisibility.Automatic,u.load(h)}function l(){W||(W=!0,re(),v.gridColumns=b),(k||N)&&u.unLoad(),u.onPropertyChange(v)}function r(){var e;G.length=0,oe(),e=Math.ceil(h/p),(k||N)&&(E=0),u.load(e)}function a(){T||(W=w=!(T=!0),H||(ne(),H=!0),v.gridColumns=I,le()),ae(),(k||N)&&u.unLoad(),u.onPropertyChange(v)}function s(){G.length=0,oe(),(k||N)&&(E=0),u.load(y)}function d(){var e;w||(W=T=!(w=!0),H||(ne(),H=!0),v.gridColumns=I,le()),y=u.getDisplayedRowInfo().size,e=Math.ceil(h/y),(S=v.width/V)<e?S=Math.ceil(S):e<S&&(S=Math.floor(S)),0<e?(ae(e),v.horizontalScrollbarVisibility=PWC.Components.Grid.HmiScrollBarVisibility.Automatic):v.horizontalScrollbarVisibility=PWC.Components.Grid.HmiScrollBarVisibility.Collapsed,k&&u.unLoad(),u.onPropertyChange(v)}function c(e){k=e}var u,m,p,C,h,g,f,y,S,b=[],P=PWC.Components.Grid,v=new P.GridModel,x=PWC.Components.TagBrowser,Q=x.TagDataType,T=!1,w=!1,W=!1,G=[],D=e,H=!1,I=[],ee=L,A=R,E=0,te=F,k=!1,M=!1,N=!1,V=450,ne=function(){for(var e,t=P.HorizontalAlignment.Left,n=P.ContentMode.GraphicAndText,i=v.width/V,o=P.GridColumnModel,l=I.length=0;l<i;l++)(e=new o).content.horizontalAlignment=t,e.index=l,e.contentMode=n,e.width=V,e.maximumWidth=400,e.sortOrder=P.HmiSortDirection.Ascending,e.headerSettings.content.horizontalAlignment=P.HorizontalAlignment.Left,I.push(e)},ie=function(e,t,n){var i,o,n=T?(t-=E)*p+n:w?t+(n-=E)*y:t-E,t=C.NodeTypeArray[n];t?(-1<(i=C.AttributeValuesArray[n][0][0]).indexOf("|")&&(i=(o=i.split("|"))[o.length-1]),D(e,i,t,C.IdentifierArray[n])):te.setAttribute("disabled","true")},n=function(e,t){E=e,T&&(t*=p,e*=p),D(x.EventTypes.ScrollChange,e,t)},t=function(e){var t;w?(E=e,t=S*y,e*=y):W&&(t=y),D(x.EventTypes.ScrollChange,e,t)},oe=function(){for(var e=C.IdentifierArray.length,t=0;t<e;t++)G.push(C.AttributeValuesArray[t][0])},le=function(){v.headerSettings.columnHeaderType=P.HmiDataGridHeaderType.None,v.selectionBorderWidth=0,v.selectFullRow=!1,v.selectedCellColor="rgba(173,216,230,1)"},re=function(){v.selectFullRow=!0,v.headerSettings.columnHeaderType=P.HmiDataGridHeaderType.Content,v.useSelectedTitleColor=!1,v.selectionBorderWidth=0,T=w=!1},ae=function(e){var t,n,i,o=P.HorizontalAlignment.Left,l=P.ContentMode.GraphicAndText,r=P.GridColumnModel,a=0,s=V;if(T?(y<h&&(a=u.getTableProps().vScrollBarWidth),t=Math.floor((v.width-a)/s)-I.length):w&&(t=e-I.length),0<t)for(n=0;n<t;n++)(i=new r).content.horizontalAlignment=o,i.index=I.length+n,i.contentMode=l,i.width=s,i.maximumWidth=400,i.headerSettings.content.horizontalAlignment=P.HorizontalAlignment.Left,I.push(i);else if(t<0){for(I.length===Math.abs(t)&&(t+=1),n=0;t<n;n--)I.pop();H=!1}p=I.length};return{createTagGridLayout:function(e,t,n){var i,o,l,r,a=P.HorizontalAlignment.Left,s=P.GridColumnModel;for(m=new P.IGridHost,b.length=0,v.width=t,v.height=e,v.left=0,v.top=0,v.headerSettings.rowHeaderType=P.HmiDataGridHeaderType.None,v.gridLineVisibility=P.HmiGridLinesSimple.None,v.cellPadding.left=10,v.gridSelectionMode=P.SelectionMode.Single,v.cellPadding.left=10,v.selectionMode=P.SelectionMode.Single,v.selectFullRow=!0,v.selectionBorderWidth=P.FontStrikeOut.None,v.cellTextTrimming=P.HmiTextTrimming.CharacterEllipsis,v.font.fontStrikeOut=P.FontStrikeOut.None,v.font.fontSize=14,v.font.fontName="Siemens Sans",v.font.fontWeight=P.FontWeight.Thin,v.font.fontUnderline=!1,v.headerSettings.columnHeaderType=P.HmiDataGridHeaderType.Content,v.headerSettings.headerBackColor="rgba(230,230,235,1)",v.borderWidth=0,v.headerSettings.allowColumnReorder=!1,v.headerSettings.allowColumnResize=!0,v.headerSettings.font.fontStrikeOut=P.FontStrikeOut.None,v.headerSettings.font.fontSize=14,v.headerSettings.font.fontName="Siemens Sans",v.headerSettings.font.fontWeight=P.FontWeight.Thin,v.headerSettings.font.fontUnderline=!1,v.selectionBackColor="rgba(173,216,230,1)",v.showSortIndex=!1,v.showSortIcon=!1,v.selectEmptyCell=!1,v.useSortKey=!1,v.verticalScrollbarVisibility=P.HmiScrollBarVisibility.Automatic,v.rowHeight=20,v.backgroundColor="rgba(255,255,255,1)",v.alternateBackColor="rgba(242,242,245,1)",o=n.length,l=0;l<o;l++)r=n[l],(i=new s).content.horizontalAlignment=a,i.index=r.Index,i.headerSettings.text=r.Name,i.contentMode=r.ContentMode,i.width=r.Width,i.mapping=r.Mapping,i.maximumWidth=400,i.sortOrder=P.HmiSortDirection.Ascending,i.headerSettings.content.horizontalAlignment=P.HorizontalAlignment.Center,i.content.textTrimming=P.HmiTextTrimming.CharacterEllipsis,b.push(i);return v.gridColumns=b,m.getCellData=z,m.onCellDoubleClick=U,m.onVScrollChange=Y,m.onVScrollUpButtonClick=j,m.onVScrollDownButtonClick=X,m.onHScrollRightButtonClick=Z,m.onHScrollLeftButtonClick=K,m.onSortButtonClicked=$,m.onMouseWheelScroll=q,m.onHScrollChange=J,m.onCellClick=_,(u=new P.GridControl(ee,O+"_Grid",A+"libs")).subscribeEvent(P.ControlEvents.OnCellDoubleClick),u.subscribeEvent(P.ControlEvents.OnColumnResize),u.subscribeEvent(P.ControlEvents.OnVScrollChange),u.subscribeEvent(P.ControlEvents.OnVScrollUpButtonClick),u.subscribeEvent(P.ControlEvents.OnVScrollDownButtonClick),u.subscribeEvent(P.ControlEvents.OnHScrollRightButtonClick),u.subscribeEvent(P.ControlEvents.OnHScrollLeftButtonClick),u.subscribeEvent(P.ControlEvents.OnSortButtonClicked),u.subscribeEvent(P.ControlEvents.OnMouseWheelScroll),u.subscribeEvent(P.ControlEvents.OnHScrollChange),u.subscribeEvent(P.ControlEvents.OnCellClick),u.setAutoScrollToLatest(!1),u.setAutoSelection(!1),t=u.init(v,m),u.pause(),t},calculateViewPort:function(e,t,n){var i;if(0<e.ObjectCount){if(n?h+=e.ObjectCount:h=e.ObjectCount,!W&&!w&&!T)switch(t){case x.DisplayViewType.List:c(!0),d();break;case x.DisplayViewType.SmallIcons:c(!0),a(),v.gridColumns=I;break;case x.DisplayViewType.Details:case x.DisplayViewType.Standard:W=!0}y=u.getDisplayedRowInfo().size,g=T?y*p:w?(S=Math.ceil(v.width/V),y*S):y,M?(f=E,M=!1):f=0,i={CurrentStartIndex:f,NoOfRecords:g}}else C=null,h=g=0,u.unLoad();return i},renderTagGridData:function(e,t,n){N=t,void 0!==e&&i(e,n),C&&(T?(t&&a(),r):w?(t&&d(),s):(t&&l(),o))(),k=N=!1},detailView:o,listView:s,smallIconView:r,smallIconGridLayoutChange:a,setGridDims:function(e,t,n){v.width=t,v.height=e,u.onPropertyChange(v,n),y=u.getDisplayedRowInfo().size},unLoadGrid:function(){u.unLoad()},unInit:function(){u.unInit()},resetGridCount:function(){h=0,H=T=w=!1,v.horizontalScrollbarVisibility=PWC.Components.Grid.HmiScrollBarVisibility.Collapsed},getSelectedRecord:function(){var e,t=u.getSelection(),n=t.selectedCellColumnIndex,t=t.selectedCellRowIndex;return null!==n&&null!==t&&(n=T?(t-=E)*p+n:w?t+(n-=E)*y:t-E,C.NodeTypeArray[n]!==x.NodeTypes.TagGroup)&&(-1<(t=C.AttributeValuesArray[n][0][0]).indexOf("|")&&(t=(e=t.split("|"))[e.length-1]),(e={}).tagName=t,e.chromId=C.IdentifierArray[n]),e},listViewGridLayoutChange:d,detailViewLayoutChange:l,requestRequiredData:function(){return y=u.getDisplayedRowInfo().size,{CurrentStartIndex:f,NoOfRecords:g=h<(g=W?y:T?y*p:y*S)?h:g}},resizeCalculations:function(e){return y=u.getDisplayedRowInfo().size,g=T?(a(),y*p):w?(d(),y*S):y,{CurrentStartIndex:E=e?0:E,NoOfRecords:g=h<g?h:g}},setViewChangedBool:c,modifyTagDataWithImages:i,setScrollStatus:function(){E=0}}},(PWC=PWC||{}).Components=PWC.Components||{},PWC.Components.TagBrowser=PWC.Components.TagBrowser||{},PWC.Components.TagBrowser.TagBrowserOnlineView=function(g){"use strict";PWC.Components.TagBrowser.TagBrowserOnlineView.baseCtor.call(this,g);var f,y,S,b,P,v,x,T,w,W,G,D=this,H=g.gfxWebLib.textbib,I=g.rtoid,A={Size:16,Name:"serif",Weight:400},n=!1,E=function(e){var t=e.target||e.srcElement,n=null,i=null;t.id&&(i=(t=t.id.split("_sp_"))[1],n=t[2]),b(PWC.Components.TagBrowser.EventTypes.DataSourceChange,e,n,i)},i=function(e){var t=e.target||e.srcElement;b(PWC.Components.TagBrowser.EventTypes.FilterChange,e),t.removeEventListener("blur",i),n=!1},k=function(e){var t=(e=e||window.event).target||e.srcElement;13===e.keyCode?(t.removeEventListener("blur",i),n=!1,b(PWC.Components.TagBrowser.EventTypes.FilterChange,e)):n||(t.addEventListener("blur",i),n=!0)},M=function(e){((e=e||window.event).target||e.srcElement).addEventListener("blur",i),n=!0};this.setDataSourceDims=function(){S&&(T=this.width-180,void 0===W&&(W=PWC.Lib.Canvas.Svg.getTextWidth(A,H.getText("TBID_TagBrowser_Filter"))),x=150+W,S.style.width=T-x+14+"px",void 0===G&&(G=PWC.Lib.Canvas.Svg.getTextWidth(A,H.getText("TBID_TagBrowser_DataSource"))),w=T-x-G,v.style.width=w+"px")},this.createTopLayout=function(e,t,n){var i,o,l,r,a,s,d,c,u,m,p=H.getText("TBID_TagBrowser_Filter"),C=H.getText("TBID_TagBrowser_DataSource"),h=(T=D.width-180,W=PWC.Lib.Canvas.Svg.getTextWidth(A,p),x=150+W,G=PWC.Lib.Canvas.Svg.getTextWidth(A,C),w=T-x-G,b=t,(p=this.getDivElements())&&(P=p.mainOuterDiv,f=p.bodyDiv),g.props.TargetObjectType!==PWC.HmiAC.TargetObjectTypes.NodeBrowser&&(C=n,(y=document.createElement("fieldset")).setAttribute("id","filterFieldSet_"+I),y.setAttribute("class","filterFieldSet"),y.style.width=x+"px",(t=document.createElement("table")).setAttribute("border","0"),t.setAttribute("cellspacing","0"),t.setAttribute("cellpadding","0"),t.setAttribute("style"," height: 100%;width: 100%;border: 0;"),p=document.createElement("tr"),n=document.createElement("td"),m=document.createElement("span"),u=document.createTextNode(H.getText("TBID_TagBrowser_Filter")),m.appendChild(u),n.appendChild(m),u=document.createElement("td"),(m=document.createElement("div")).setAttribute("class","filterItems"),(i=document.createElement("input")).setAttribute("type","text"),i.setAttribute("id","filterTextBox"),i.setAttribute("class","filterTextBox"),i.setAttribute("value",C),m.appendChild(i),u.appendChild(m),p.appendChild(n),p.appendChild(u),t.appendChild(p),P.insertBefore(y,f),y.appendChild(t),i.addEventListener("mousedown",M),i.addEventListener("keydown",k)),e);if(g.props.TargetObjectType!==PWC.HmiAC.TargetObjectTypes.NodeBrowser){for(s=h.length,(S=document.createElement("fieldset")).setAttribute("id","dataSourceFieldSet_"+I),S.setAttribute("class","dataSourceFieldSet"),S.style.width=T-x+14+"px",(C=document.createElement("table")).setAttribute("border","0"),C.setAttribute("cellspacing","0"),C.setAttribute("cellpadding","0"),C.setAttribute("style"," height: 100%;width: 100%;border: 0;"),m=document.createElement("tr"),n=document.createElement("td"),u=document.createElement("span"),r=document.createTextNode(H.getText("TBID_TagBrowser_DataSource")),u.appendChild(r),n.appendChild(u),u=document.createElement("td"),(v=document.createElement("div")).setAttribute("class","dataSourceItems"),v.style.width=w+"px",u.appendChild(v),m.appendChild(n),m.appendChild(u),C.appendChild(m),d=0;d<s;d++)c=document.createElement("label"),(o=document.createElement("input")).setAttribute("type","checkbox"),o.setAttribute("id","dataSrcCheckboxd_sp_"+h[d]+"_sp_"+d),o.checked=0===d,a=h[d],l=document.createElement("span"),r=document.createTextNode(a),l.appendChild(r),c.appendChild(o),c.appendChild(l),o.onclick=E,v.appendChild(c);P.insertBefore(S,y),S.appendChild(C)}b(PWC.Components.TagBrowser.EventTypes.DataSourceLoad,void 0,0,h[0])}},PWC.HmiAC.Design.Inheritance.Extend(PWC.Components.TagBrowser.TagBrowserOnlineView,PWC.Components.TagBrowser.TagBrowserView),(PWC=PWC||{}).Components=PWC.Components||{},PWC.Components.TagBrowser=PWC.Components.TagBrowser||{},PWC.Components.TagBrowser.TagBrowseTreeView=function(e,t,n,i){"use strict";function o(e,t,n,i,o){var l,r,a,s,d;if(t&&(s=(l=t.target||t.srcElement).parentElement.children[l.parentElement.childElementCount-1].innerHTML),e===PWC.Components.TagBrowser.EventTypes.TreeNodeDoubleClick)m(s,n),a=n.getParentName(),(P=P||y).removeAttributes(),P=n,g=l,f=void 0===a?s:a+u+s,x(e,PWC.Components.TagBrowser.RequestType.ListView,f,n);else if(e===PWC.Components.TagBrowser.EventTypes.TreeViewSpanClick)g&&g.removeAttribute("class"),a=n.getParentName(),f=void 0===a?s:a+u+s,(g=l)&&l.setAttribute("class","nodeBackColor"),P=n,x(e,PWC.Components.TagBrowser.RequestType.ListView,f,n);else if(e===PWC.Components.TagBrowser.EventTypes.TreeViewImgClick)if(i){if(r=n.getChildren(),w===PWC.HmiAC.TargetObjectTypes.NodeBrowser){for(W=0<r.length?n.destroyTreeNode(r[0],W):W;W<G&&9!==G;)n.removeBgDiv(c.lastChild),G--;(W<0||!n.getParentName())&&(W=1)}else for(d=0;d<r.length;d++)n.destroyNode(r[d]);n.setChildren(),t=P.getParentName(),b=void 0,i=n.getParentName()?n.getParentName()+u+s:s,t&&(-1<t.indexOf(i)||o)&&(o&&g.removeAttribute("class"),l&&((t=l.parentNode.children[l.parentNode.childElementCount-1]).removeAttribute("class"),t.setAttribute("class","nodeBackColor"),g=t),P=n,h?x(PWC.Components.TagBrowser.EventTypes.TreeViewSpanClick,PWC.Components.TagBrowser.RequestType.GetHierarchyNodeMembers,i,n):x(e,PWC.Components.TagBrowser.RequestType.ListView,i,n))}else a=n.getParentName(),f=void 0===a?s:a+u+s,P=n,x(e,PWC.Components.TagBrowser.RequestType.TreeView,f,n)}function l(e,t){var n,i=0,o=[],l=a.length;if(t)d(t,r,h=!0);else{for(n=0;n<l;n++)e[a[n]]&&(o[i]="Variables.svg|"+a[n],i++);d(o,r)}}var c,C,r,h,g,f,y,S,b,P,v,x=t,a=e.slice(0),s=n.connection.getAppDir(),u="\\",T=s+"content/advanced/"+n.getStyle()+"/BrowsingView/",w=i,W=0,G=0,d=function(e,t,n){var i,o,l,r,a,s,d,c,u,m,p;for(n?(s=e.DisplayNameArray,d=e.IdentifierArray,c=e.RuntimeObjectArray,u=e.NodeTypeArray,m=e.NodePathArray,p=e.ObjectTypeArray):s=e,i=0;i<s.length;i++)if(a={id:void 0,imagePath:T},!(t instanceof PWC.HmiAC.TreeNode&&u&&u[i]===PWC.Components.TagBrowser.NodeTypes.SimpleTag)){if(o=s[i],d&&(a.nodeId=d[i]),c&&(a.nodeRtId=c[i]),m&&0<m.length&&(a.path=m[i]),-1<o.indexOf("|")&&(o=(r=o.split("|"))[1],a.imageName=r[0]),p&&0<p.length&&(a.objectType=p[i]),t instanceof PWC.HmiAC.TreeView)C=(h?(a.nodeType=PWC.Components.TagBrowser.TreeNodeTypes.CpmRootNode,m&&0<m.length&&(a.nodeTarget=m[0].split(".")[0])):(a.nodeType=PWC.Components.TagBrowser.TreeNodeTypes.SystemNode,a.nodeTarget=o),t);else{switch(t.getNodeType()){case PWC.Components.TagBrowser.TreeNodeTypes.SystemNode:a.nodeType=PWC.Components.TagBrowser.TreeNodeTypes.HierarchyNode;break;case PWC.Components.TagBrowser.TreeNodeTypes.CpmRootNode:case PWC.Components.TagBrowser.TreeNodeTypes.CpmNode:a.nodeType=PWC.Components.TagBrowser.TreeNodeTypes.CpmNode;break;default:a.nodeType=PWC.Components.TagBrowser.TreeNodeTypes.StructNode}a.nodeTarget=t.getNodeTarget()}a.nodeName=o,l=new PWC.HmiAC.TreeNode(a,w),w===PWC.HmiAC.TargetObjectTypes.NodeBrowser&&(t instanceof PWC.HmiAC.TreeView?(t.addBgDiv(),G=9):G<=W&&(C.addParentDiv(W,G),G++),W++),t.addNode(l),t instanceof PWC.HmiAC.TreeView||void 0!==f?t instanceof PWC.HmiAC.TreeView&&(f=void 0):f=S,l.setParentName(f,!1),o===b&&((P=P||y).removeAttributes(),l.setNodeSelectionAttributes(),g=l.getSourceElement(),P=l,v=o,x(PWC.Components.TagBrowser.EventTypes.TreeViewSpanClick,PWC.Components.TagBrowser.RequestType.ListView,v,P))}y=l,S=o},m=function(e,t){b=e,void 0!==t&&0};return{initializeTreeView:function(e,t,n){c=e,r=new PWC.HmiAC.TreeView(c,o,c.id,s),l(t,n),y&&(y.setNodeSelectionAttributes(),g=y.getSourceElement())},clearTreeView:function(){r.clearTreeView()},modifyTreeView:function(e,t,n){var i,o;for((t=void 0===t?P||y:t).setAttributes(),i=t.getChildren(),o=0;o<i.length;o++)t.destroyNode(i[o]);t.setChildren(),!e.DisplayNameArray||n!==PWC.HmiAC.TargetObjectTypes.NodeBrowser&&n!==PWC.Components.TagBrowser.DisplayViewType.Cpm&&n!==PWC.Components.TagBrowser.DisplayViewType.CpmLogging?(n=function(e){for(var t,n,i,o=e.AttributeValuesArray.length,l=0;l<o;l++)if(t=e.NodeTypeArray[l],n=e.DisplayNameArray[l],t===PWC.Components.TagBrowser.NodeTypes.TagGroup){if(e.AttributeValuesArray[l][1])switch(i=e.AttributeValuesArray[l][1]){case PWC.Components.TagBrowser.NodeSubTypes.TagGroup:e.DisplayNameArray[l]="TagGroup.svg|"+n;break;case PWC.Components.TagBrowser.NodeSubTypes.ChannelUnit:e.DisplayNameArray[l]="ChannelUnit.svg|"+n;break;case PWC.Components.TagBrowser.NodeSubTypes.Directory:case PWC.Components.TagBrowser.NodeSubTypes.ConnectionType:e.DisplayNameArray[l]="Directory.svg|"+n;break;default:PWC.Components.TagBrowser.NodeSubTypes.ArrayGroup===(i&PWC.Components.TagBrowser.NodeSubTypes.ArrayGroup)&&(e.DisplayNameArray[l]="TagGroup.svg|"+n)}}else t===PWC.Components.TagBrowser.NodeTypes.SimpleTag&&(e.DisplayNameArray[l]="variable.svg|"+n);return e}(e),d(n,t,!0)):d(e,t,!0)},removeNodeByName:function(e){r.removeNodeByName(e)},selectFirstNode:function(e){return(y=r.getNodeByName(e)).setNodeSelectionAttributes(),g=y.getSourceElement(),y},addNewNode:l,setDoubleClickSelectedNode:m,getSelectedNode:function(){return P.getNodePath()},setLastSelectedNode:function(e){P=e}}},(PWC=PWC||{}).HmiAC=PWC.HmiAC||{},PWC.HmiAC.TreeNode=function(o,e){var l,r,a,i,n,s=o.nodeName,t=o.path,d=null,c=null,u=null,m=!1,p=[],C=o.nodeId,h=o.nodeRtId,g=o.nodeType,f=o.nodeTarget,y=o.objectType,S=this,b=e,P=o.imagePath;this.initialize=function(){var e,t,n,i;void 0===o.id&&(l=s),(r=document.createElement("div")).setAttribute("class","treeNode"),r.setAttribute("id",l),b===PWC.HmiAC.TargetObjectTypes.NodeBrowser&&g===PWC.Components.TagBrowser.TreeNodeTypes.CpmRootNode&&(r.style.setProperty("position","relative"),r.style.setProperty("top","-252px")),(e=document.createElement("div")).setAttribute("class","treeNodeContent"),(t=document.createElement("div")).setAttribute("style","white-space: nowrap"),(d=document.createElement("img")).setAttribute("src",P+"Arrow1.svg"),d.setAttribute("id","expander_"+l),d.setAttribute("class","treeViewImages"),c=document.createElement("img"),void 0===h||"0.0.0.0.0.0"===h?c.setAttribute("src",P+"Folder.svg"):c.setAttribute("src",P+"PlantObject.svg"),c.setAttribute("id","expanderFolder_"+l),c.setAttribute("class","treeViewImages"),b!==PWC.HmiAC.TargetObjectTypes.NodeBrowser&&o.imageName&&((n=document.createElement("img")).setAttribute("src",P+o.imageName),n.setAttribute("id","nodeimg_"+l),n.setAttribute("class","treeViewImages")),i=o.nodeId||l,(u=document.createElement("span")).setAttribute("style","margin:0px;"),u.setAttribute("id","span_"+i),u.innerHTML=s,t.appendChild(d),t.appendChild(c),void 0!==n&&t.appendChild(n),t.appendChild(u),e.appendChild(t),e.addEventListener("click",this.preventSummaryDefault,!1),r.appendChild(e)},this.onImgClick=function(e){var t=this.getNodeRtId();m?(d.setAttribute("src",P+"Arrow1.svg"),void 0===t||"0.0.0.0.0.0"===t?c.setAttribute("src",P+"Folder.svg"):c.setAttribute("src",P+"PlantObject.svg")):(d.setAttribute("src",P+"Arrow2.svg"),void 0===t||"0.0.0.0.0.0"===t?c.setAttribute("src",P+"FolderOpen.svg"):c.setAttribute("src",P+"PlantObject.svg")),i(PWC.Components.TagBrowser.EventTypes.TreeViewImgClick,e,S,m),(e=e||window.event).stopPropagation?e.stopPropagation():e.cancelBubble=!0,m=!m},this.onNodeTextSingleClick=function(e){i(PWC.Components.TagBrowser.EventTypes.TreeViewSpanClick,e,S)},this.onNodeTextDoubleClick=function(e){m?(d.setAttribute("src",P+"Arrow1.svg"),c.setAttribute("src",P+"PlantObject.svg"),i(PWC.Components.TagBrowser.EventTypes.TreeViewImgClick,e,S,m,!0)):(d.setAttribute("src",P+"Arrow2.svg"),c.setAttribute("src",P+"PlantObject.svg"),i(PWC.Components.TagBrowser.EventTypes.TreeNodeDoubleClick,e,S),S.setNodeSelectionAttributes(!0)),m=!m},this.preventSummaryDefault=function(e){(e=e||window.event).preventDefault?e.preventDefault():e.returnValue=!1},this.isExpanded=function(){return m},this.getNodeText=function(){return s},this.getNodeItemId=function(){return C},this.getNodeRtId=function(){return h},this.getNodeType=function(){return g},this.getNodeTarget=function(){return f},this.getNodePath=function(){return t},this.getObjectType=function(){return y},this.setAttributes=function(){m||(d.setAttribute("src",P+"Arrow2.svg"),c.setAttribute("src",P+"PlantObject.svg"),m=!m)},this.setNodeSelectionAttributes=function(e){e?u.setAttribute("class","nodeBackColor"):u.setAttribute("class","nodeDefaultSelectColor")},this.getSourceElement=function(){return u},this.removeAttributes=function(){u.removeAttribute("class")},this.setParent=function(e){(a=e).appendChild(r),"TreeView"===e.getAttribute("class")&&(r.style.margin="0px")},this.setParentName=function(e,t){n=t?null:void 0!==n?n+"//"+e:e},this.getParentName=function(){return n},this.addLeaf=function(e,t){var n=null;return(n=new PWC.HmiAC.PropertyRowReadOnly(e,t)).setPropChangeCallback(i),p.push(n),n.setParent(r),n},this.addNode=function(e){return e.setPropChangeCallback(i),p.push(e),e.setParent(r),e},this.setPropChangeCallback=function(e){i=e},this.isLeaf=function(){return!1},this.destroyNode=function(e){var t,n=!1,i=p.length,o=null;if(this===e)a.removeChild(r),n=!0;else for(t=0;t<i&&!n;t++)(o=p[t])&&!o.isLeaf()&&(n=o.destroyNode(e))&&(p[t]=void 0);return n},this.destroyTreeNode=function(e,t){var n,i=!1,o=p.length,l=null;if(0<o)for(n=0;n<o&&!i;n++)(l=p[n])&&!l.isLeaf()&&(t=l.destroyTreeNode(l,t),p[n]=void 0);return this===e&&(a.removeChild(r),i=!0,t--),t},this.destroyLeaf=function(e){for(var t=!1,n=p.length,i=null,o=0;o<n&&!t;o++)(i=p[o])&&i.isLeaf()?i===e&&(t=i.destroyLeaf())&&(p[o]=void 0):i&&!i.isLeaf()&&(t=i.destroyLeaf(e))&&(p[o]=void 0);return t},this.getChildren=function(){return p},this.setChildren=function(){p.length=0},this.removeBgDiv=function(e){var t=parseInt(e.lastChild.style.top)+28;e.removeChild(e.childNodes[e.childElementCount-2]),e.lastChild.style.setProperty("top",t+"px")},this.initialize()},(PWC=PWC||{}).HmiAC=PWC.HmiAC||{},PWC.HmiAC.TreeView=function(e,t,n,i){function o(e){var t,n,i,o,l,r,a;if((n=e?e.target||e.srcElement:n)&&("IMG"===n.tagName||"SPAN"===n.tagName)&&("IMG"!==n.tagName||0!==n.id.indexOf(C))){for(i=n.parentElement.children[n.parentElement.childElementCount-1].innerHTML,o=n.parentElement.children[n.parentElement.childElementCount-1].id.replace("span_",""),a=s.length,r=0;r<a&&(0===(t=s[r].getChildren()).length||void 0===(l=h(t,i,o)));r++);if(void 0===l)for(r=0;r<a;r++)if(i===s[r].getNodeText()){l=s[r];break}if(void 0!==l)switch(e.type){case"doubletap":break;case"singletap":"IMG"===n.nodeName?l.onImgClick(e):"SPAN"===n.nodeName&&l.onNodeTextSingleClick(e)}}}function l(){r&&(r.destroy(),r=null)}var r,a,s=[],d=e,c=n,u=null,m=t,p=i,C="nodeimg_",h=function(e,t,n){for(var i,o,l,r,a=e.length,s=0;s<a;s++){if(r=(o=e[s]).getNodeText(),i=(i=o.getNodeItemId())||r,t===r&&n===i)return o;if(0<(r=o.getChildren()).length&&void 0!==(l=h(r,t,n)))break}return l};this.initialize=function(){function t(){l(),(r=new a.Manager(u,{domEvents:!0,touchAction:"pan-x pan-y"})).add(new a.Tap({event:"doubletap",taps:2})),r.add(new a.Tap({event:"singletap"})),r.get("doubletap").recognizeWith("singletap"),r.get("singletap").requireFailure("doubletap"),r.on("doubletap",o),r.on("singletap",o),r.add(new a.Pan({event:"pan",pointers:1,direction:a.DIRECTION_ALL,threshold:1}))}a=window.Hammer,(u=document.getElementById("TreeView_"+c))||((u=document.createElement("Div")).setAttribute("id","TreeView_"+c),u.setAttribute("class","TreeView"),u.style.setProperty("max-height","280px"),u.style.setProperty("height","inherit"),u.setAttribute("width","inherit"),d.appendChild(u)),a?t():(requirejs.config({baseUrl:p+"libs",paths:{Hammer:"hammer"}}),require(["Hammer"],function(e){a=e,t()}))},this.addBgDiv=function(){for(var e,t=0;t<9;t++)(e=document.createElement("div")).setAttribute("style","height: 28px; width: 100%;"),e.style.setProperty("background",t%2==0?"#e6e6eb":"white"),u.appendChild(e)},this.addParentDiv=function(e){var t=document.createElement("div");t.setAttribute("style","height: 28px; width: 357px"),t.style.setProperty("background",e%2==0?"#e6e6eb":"white"),e=parseInt(u.lastChild.style.top)-28,u.insertBefore(t,u.lastChild),u.lastChild.style.setProperty("top",e+"px")},this.addNode=function(e){return e.setParent(u),e.setPropChangeCallback(m),s.push(e),e},this.addLeaf=function(e){return e.setParent(u),e.setPropChangeCallback(m),s.push(e),e},this.removeLeaf=function(e){for(var t,n=s.length,i=!1,o=0;o<n&&!i;++o)i=(t=s[o])&&t.isLeaf()?(t===e&&(s[o]=void 0),t.destroyLeaf()):t.destroyLeaf(e);return i},this.removeNode=function(e){for(var t,n=s.length,i=!1,o=0;o<n&&!i;o++)(t=s[o])&&!t.isLeaf()&&(t===this&&(s[o]=void 0),i=t.destroyNode(e));return i},this.clearTreeView=function(){for(var e,t=s.length,n=0;n<t;n++)(e=s[n]).isLeaf()?e.destroyLeaf():e.destroyNode(e);return s=[],a&&l(),!(a=null)},this.removeNodeByName=function(e){for(var t,n=s.length,i=!1,o=0;o<n&&!i;o++)(t=s[o])&&!t.isLeaf()&&t.getNodeText()===e&&(s.splice(s.indexOf(t),1),i=t.destroyNode(t));return i},this.getNodeByName=function(e){for(var t,n=s.length,i=0;i<n;i++)if((t=s[i])&&!t.isLeaf()&&t.getNodeText()===e)return t},this.initialize()},(PWC=PWC||{}).Components=PWC.Components||{},PWC.Components.GenericDialog=PWC.Components.GenericDialog||{},PWC.Components.GenericDialog=function(){"use strict";function p(e,t){var n=null;return(n=document.createElement("input")).setAttribute("type","button"),n.setAttribute("value",e),n.setAttribute("class","msgBoxBtn"+e),n.setAttribute("data-tif-id","msgBoxBtn_"+e+"_tiffId"),n.addEventListener("click",t),n}function s(e,t,n,i,o,l,r,a,s){n={FrameCloseCallBack:o||i,Caption:n||"Message Box",BackColor:l||void 0,Width:e.length*d,MaxWidth:502,ZIndex:s},(c=new PWC.Components.GenericDialog.Frame.HtmlDiv).createFrame(t,n),c.showModal(u(e,i,o,c,r,a))}var d=8,c=null,u=function(e,t,n,i,o,l){var r,a=i.close,s=document.createElement("table"),d=document.createElement("tr"),c=document.createElement("td"),u=document.createElement("div"),m=document.createElement("p");return s.setAttribute("style","width:100%"),s.setAttribute("cellspacing","0"),s.setAttribute("cellpadding","0"),c.setAttribute("colspan","2"),c.setAttribute("align","center"),c.setAttribute("width","100%"),c.setAttribute("class","msgBoxMsgCell"),c.setAttribute("style","height: 70px; width: 0px; padding-bottom: 10px; padding-top: 10px; background: #F8F8F8; vertical-align: middle;"),m.innerHTML=e,u.appendChild(m),c.appendChild(u),d.appendChild(c),s.appendChild(d),d=document.createElement("tr"),(c=document.createElement("td")).setAttribute("colspan","2"),c.setAttribute("align","center"),c.setAttribute("class","msgBoxBtnCell"),c.setAttribute("style","padding-top: 10px;padding-bottom: 10px; background: #E0E0E0;"),n&&((r=p(l||"Cancel",function(){n(),a(),i=null})).setAttribute("style","padding: 3px; width: 82px; background-color: #C8C8C8; float: right; margin-right: 10px;"),c.appendChild(r)),t&&((r=p(o||"OK",function(){t(),a(),i=null})).setAttribute("style"," padding: 3px; height:22px; line-height:15px; font-size:14px; font-family:Siemens Sans !important; width: 82px;border: 1px solid #64646A;background: -webkit-linear-gradient(#F2F4FF,#91939A) !important; float: right; margin-right: 10px;border-radius: 3px !important;"),c.appendChild(r)),d.appendChild(c),s.appendChild(d),s};return{MessageBox:function(e,t,n,i){s(e,t,void 0,n,i)},ShowWarning:function(e,t,n,i,o,l,r,a){s(e,t,n,i,o,"#0A9EBB",l,r,a)},CleanWarnings:function(){c&&c.close&&c.close()}}}(),(PWC=PWC||{}).Components=PWC.Components||{},PWC.Components.GenericDialog=PWC.Components.GenericDialog||{},PWC.Components.GenericDialog.FrameTypes={Hmi:"Hmi",HtmlDiv:"HtmlDiv"},PWC.Components.GenericDialog.ContentTypes={Angular:"Angular",Json:"Json"},PWC.Components.GenericDialog.HtmlControlTypes={Label:"LABEL",Select:"SELECT",Input:"INPUT",Color:"color",Checkbox:"checkbox",Date:"date",Time:"time",Text:"text",File:"file"},(PWC=PWC||{}).Components=PWC.Components||{},PWC.Components.GenericDialog=PWC.Components.GenericDialog||{},PWC.Components.GenericDialog.Content=PWC.Components.GenericDialog.Content||{},PWC.Components.GenericDialog.Content.ControlTypes=function(){"use strict";var o=PWC.Components.GenericDialog.HtmlControlTypes;return{getUpdatedData:function(e){var t=null;switch(e.nodeName){case o.Select:t=""===(t=e.options[e.selectedIndex].textContent)?" ":t;break;case o.Label:t=e.innerText;break;case o.Input:t=function(e){var t=null,n,i=[];switch(e.type){case o.Checkbox:t=e.checked;break;case o.Date:case o.Time:n=e.getAttribute("name");i=document.getElementsByName(n);t={date:i[0].value,time:i[1].value};break;case o.Text:if(e.datePreciseValue===undefined){n=e.getAttribute("name");if(n!==undefined&&n!==""&&n!==null)t=i[0].value;else t=e.value;if(t==="")t=0}else t=e.datePreciseValue;break;case o.File:if(e.files.length>0)t=e.files;break;default:t=e.value;if(t==="")t=0;break}return t}(e);break;default:t=e.value}return t}}}(),(PWC=PWC||{}).Components=PWC.Components||{},PWC.Components.GenericDialog=PWC.Components.GenericDialog||{},PWC.Components.GenericDialog.Content=PWC.Components.GenericDialog.Content||{},PWC.Components.GenericDialog.Content.Angular=function(){"use strict";this.dialog=null;return{createContent:function(e){return this.dialog=PWC.Components.GenericDialog.Content.ObjectTypes.getHandler(e.name),this.dialog.create(e.rtoid,e.sourceItem,e.eventHandler)}}}}(PWC=PWC||{}).Components=PWC.Components||{},PWC.Components.GenericDialog=PWC.Components.GenericDialog||{},PWC.Components.GenericDialog.Content=PWC.Components.GenericDialog.Content||{},PWC.Components.GenericDialog.Content.ObjectTypes=function(){"use strict";var o={};return{addHandler:function(e,t){o[e]=t},getHandler:function(e){return null!=o[e]?o[e]:null},removeHandler:function(e){o[e]=null},cleanHandlers:function(e){for(var t,n=(e=e&&e.length?e:Object.keys(o)).length,i=0;i<n;i++)if((t=o[e[i]])&&t.clean)try{t.clean()}catch(e){}}}}(),(PWC=PWC||{}).Components=PWC.Components||{},PWC.Components.GenericDialog=PWC.Components.GenericDialog||{},PWC.Components.GenericDialog.Content=PWC.Components.GenericDialog.Content||{},PWC.Components.GenericDialog.Content.ContentBase=function(){},PWC.Components.GenericDialog.Content.ContentBase.prototype={createControl:function(e){var t=e.parentDiv,t=angular.element(t).scope().createDialog(e)[0],e=angular.element(t).scope();return e.$root.$$phase||e.safeApply(),t},createDTP:function(e,t,n){var t=new PWC.Components.DTP.Control(t),i=new PWC.HmiAC.DateTimePickerPropertySet(e),o={};o.days=i.DayNamesShort,o.months=i.MonthsShort,o.ok=e.getText("TBID_Submit"),o.cancel=e.getText("TBID_Cancel"),t.setLocale(o),t.setTextBib(e),t.show(n)}},(PWC=PWC||{}).Components=PWC.Components||{},PWC.Components.GenericDialog=PWC.Components.GenericDialog||{},PWC.Components.GenericDialog.Content=PWC.Components.GenericDialog.Content||{},PWC.Components.GenericDialog.Content.TabView=function(e,t){function n(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}this.el=e,this.options=n({},this.options),n(this.options,t),this._init()},PWC.Components.GenericDialog.Content.TabView.prototype={_init:function(){this.parents=[].slice.call(this.el.querySelectorAll("nav > div")),this.tabs=[].slice.call(this.el.querySelectorAll("nav > div > button")),this.items=[].slice.call(this.el.querySelectorAll(".pwcdialogcontent > section")),void 0===this.options.start||null===this.options.start?this.current=4:this.current=this.options.start,this._initEvents()},_initEvents:function(){var t=this,n=document.getElementById("pwcPBTabs"),i=t.parents[0],o=t.parents[1];i.addEventListener("click",function(e){e.preventDefault(),t._show(e,n,i.id,o.id)}),o.addEventListener("click",function(e){e.preventDefault(),t._show(e,n,o.id,i.id)})},_show:function(e,t,n,i){var o,l=e.target||e.srcElement||e.currentTarget,r=this.tabs.length;if(l.id!==n&&l.id!==i){for(void 0!==this.current&&null!==this.current||(this.current=0<=this.options.start&&this.options.start<this.items.length?this.options.start:0),0<=this.current&&(this.tabs[this.current].className="",this.items[this.current].className=""),o=0;o<r&&l.id!==this.tabs[o].id;o++);this.current=void 0!==o?o:0<=this.options.start&&this.options.start<this.items.length?this.options.start:0,this.tabs[this.current].className="pwcPBTabs-current",this.items[this.current].className="pwcdialogcontent-current",this._shiftDivs(n,i)}},_shiftDivs:function(e,t){var n,i=("0px"===this.parents[0].style.top?this.parents[1]:this.parents[0]).style.top;this.parents[0].id===e?n=this.parents[0]:this.parents[1].id===e&&(n=this.parents[1]),n&&(n.style.left="0px",n.style.top=i,n.style.display="block"),this.parents[0].id===t?n=this.parents[0]:this.parents[1].id===t&&(n=this.parents[1]),n&&(n.style.left="0px",n.style.top="0px",n.style.display="block")}},(PWC=PWC||{}).Components=PWC.Components||{},PWC.Components.GenericDialog=PWC.Components.GenericDialog||{},PWC.Components.GenericDialog.Frame=PWC.Components.GenericDialog.Frame||{},PWC.Components.GenericDialog.Frame.Factory={getFrame:function(e,t,n){var i,o=PWC.Components.GenericDialog.FrameTypes;switch(e){case o.Hmi:i=new PWC.Components.GenericDialog.Frame.HmiWindow;break;case o.HtmlDiv:i=new PWC.Components.GenericDialog.Frame.HtmlDiv;break;default:i=null}return i&&i.createFrame(t,n),i}},(PWC=PWC||{}).Components=PWC.Components||{},PWC.Components.GenericDialog=PWC.Components.GenericDialog||{},PWC.Components.GenericDialog.Frame=PWC.Components.GenericDialog.Frame||{},PWC.Components.GenericDialog.Frame.HmiWindow=function(){"use strict";var i,o=null;this.createFrame=function(e,t){var n;n=t.props,i={Left:n&&n.Left?n.Left:-100,Top:n&&n.Top?n.Top:-100,Width:n&&n.Width?n.Width:400,Height:n&&n.Height?n.Height:400,BackColor:n&&n.BackColor?n.BackColor:15460584,ShowCaption:n&&n.ShowCaption?n.ShowCaption:1,Visible:!n||!n.Visible||n.Visible,BorderEnabled:!n||!n.BorderEnabled||n.BorderEnabled,WindowSizingEnabled:!(!n||!n.WindowSizingEnabled)&&n.WindowSizingEnabled,WindowMovingEnabled:!n||!n.WindowMovingEnabled||n.WindowMovingEnabled,WindowMaximizeEnabled:!(!n||!n.WindowMaximizeEnabled)&&n.WindowMaximizeEnabled,ShowScrollBars:!(!n||!n.ShowScrollBars)&&n.ShowScrollBars,WindowCloseEnabled:!n||!n.WindowCloseEnabled||n.WindowCloseEnabled,Caption:n&&n.Caption?n.Caption:{Text:""}},(o=t.item.createHmiObject("HmiWindow",t.rtoid,i)).domParent=e},this.show=function(e){var t=o.domParent;o.domNode.getElementsByClassName("pwcSomeContent")[0].appendChild(e),t.appendChild(o.domNode)},this.showModal=function(e){var t=o.domParent;o.domNode.getElementsByClassName("pwcSomeContent")[0].appendChild(e),t.appendChild(o.domNode),(e=document.createElement("div")).setAttribute("id",t.id+"_divModal"),e.setAttribute("class","divForModal"),t.parentNode.insertBefore(e,t),t.setAttribute("class","hmiWindowModal")}},(PWC=PWC||{}).Components=PWC.Components||{},PWC.Components.GenericDialog=PWC.Components.GenericDialog||{},PWC.Components.GenericDialog.Frame=PWC.Components.GenericDialog.Frame||{},PWC.Components.GenericDialog.Frame.TitlebarStyles={backgroundColor:"rgb(145, 147, 154)",fontfamily:"Siemens Sans !important",fontsize:"14px !important",fontweight:"normal",color:"rgb( 0, 0, 0 )",closeBackColor:"transparent",closeFontColor:"black"},PWC.Components.GenericDialog.Frame.BorderStyles={strokeWidth:"2px ",stroke:"rgb(145,147,154)",variant:"solid",strokeWidthTop:"1.5px",borderColor:"black"},PWC.Components.GenericDialog.Frame.Style={backgroundColor:"#F8F8F9"},(PWC=PWC||{}).Components=PWC.Components||{},PWC.Components.GenericDialog=PWC.Components.GenericDialog||{},PWC.Components.GenericDialog.Frame=PWC.Components.GenericDialog.Frame||{},PWC.Components.GenericDialog.Frame.HtmlDiv=function(){"use strict";function n(e,t,n){var i=E("frameContentCell"),o=c,l=d;window.angular&&angular.element(e)&&(W=angular.element(e).scope()),t||o.setAttribute("style","display:none"),S=n,i.style.height="100%",i.style.width="0px",e.tagName?(i.appendChild(e),l.style.height=0<C?s<C?s+"px":C+"px":"auto",0<p?l.style.width=r<p?r+"px":p+"px":(t=i.clientWidth+2,l.style.width=r&&r<t?r+"px":t+"px")):(i.appendChild(m.createTextNode(e)),l.style.height=""),document.activeElement&&(A=document.activeElement),L(),X()}var a,i,r,s,d,o,c,l,u=new PWC.Components.GenericDialog.Frame.HtmlDiv.Node,m=document,t=this,p=400,C=0,h=window.innerHeight>C?window.innerHeight-C/2:10,g=window.innerWidth>p?window.innerWidth-p/2:10,f=null,y=null,S=null,b=100,P=200,v=!1,x=!0,T=!0,w=!0,W=null,G=3,D={x:0,y:0,mouseX:0,mouseY:0,moving:!1,resizing:!1,resizeTop:!1,resizeLeft:!1,resizeBottom:!1,resizeRight:!1,xyfact:{},topMax:700,leftMax:800,leftMin:30,topMin:30},H=!1,I="x",B="x",A=null,E=function(e,t){var n,i,o,l=a,r=[];if(l.getElementsByClassName)r=l.getElementsByClassName(e);else for(t=t||"*",o=(n=l.all||l.getElementsByTagName(t)).length,i=0;i<o;i++)n[i].className&&-1!==n[i].className.baseVal.indexOf(e)&&r.push(n[i]);return r[0]},e=function(e){27===(e=e||window.event).keyCode&&t.close()},L=function(){E("frameTableTitleCell");T&&(E("frameCloseDiv").addEventListener("click",t.close),o.addEventListener("keydown",e),o.focus()),E("frameTableTitleRow").addEventListener("pointerdown",j),d.addEventListener("mousemove",F),d.addEventListener("mouseout",z),d.addEventListener("mousedown",_),d.addEventListener("click",S),d.setAttribute("tabindex","0"),d.addEventListener("keydown",k),d.addEventListener("keyup",k),u.addEventListeners()},k=function(e){e.stopPropagation()},R=function(e){document.body.style.cursor=e},O=function(e,t){e?(H||(I=B),R(t),H=e):(H=e,R(I))},F=function(e){var t=e.srcElement||e.target,n=e.clientX-t.getBoundingClientRect().left,i=e.clientY-t.getBoundingClientRect().top;t===d&&v&&(k(e),O(!0,n<10?i<10?"se-resize":C-10<i?"sw-resize":"e-resize":p-10<n?i<10?"sw-resize":C-10<i?"se-resize":"e-resize":"s-resize"))},z=function(e){v&&(k(e),O(!0,"default"))},_=function(e){var t=e.target||e.srcElement,n=e.clientX-t.getBoundingClientRect().left,i=e.clientY-t.getBoundingClientRect().top;t===d&&v&&(k(e),n<10?D.resizeLeft=!0:p-10<n&&(D.resizeRight=!0),i<10?D.resizeTop=!0:C-10<i&&(D.resizeBottom=!0),t={left:window.innerWidth-30,top:window.innerHeight-30},D.x=e.clientX,D.y=e.clientY,D.checkMinMax=!0,D.topMin=G,D.topMax=t.top,D.leftMin=G,D.leftMax=t.left,D.resizing=!0,document.addEventListener("mousemove",U,!0),document.addEventListener("mouseup",M,!0))},U=function(e){k(e),D.resizing||M(),D.mouseX=e.clientX,D.mouseY=e.clientY,Y(e)},Y=function(e){var t,n,i=D.mouseY-D.y,o=D.mouseX-D.x,l=n=!1;D.resizeBottom?b<=C+i&&(t=C+i,D.checkMinMax)&&h+t<D.topMax&&(C=t,n=!0,d.style.height=C+"px"):D.resizeTop&&b<=C-i&&(t=h+i,D.checkMinMax)&&t>D.topMin&&(C-=i,h=t,n=!0,d.style.height=C+"px",d.style.top=t+"px"),D.resizeRight?P<=p+o&&(i=p+o,D.checkMinMax)&&g+i<D.leftMax&&(p=i,l=!0,d.style.width=p+"px"):D.resizeLeft&&D.checkMinMax&&P<=p-o&&(t=g+o)>D.leftMin&&(g=t,p-=o,l=!0,d.style.width=p+"px",d.style.left=t+"px"),n&&(D.y=D.mouseY),l&&(D.x=D.mouseX),null!==y&&""!==y&&y(e,p,C)},M=function(e){D.resizing=D.resizeBottom=D.resizeLeft=D.resizeRight=D.resizeTop=!1,document.removeEventListener("mousemove",U,!0),document.removeEventListener("mouseup",M,!0),k(e)},j=function(e){var t=e.target||e.srcElement;k(e),x&&(t.style.cursor="move",t={left:window.innerWidth-30,top:window.innerHeight-30},D.x=e.clientX,D.y=e.clientY,D.topOrg=h,D.topMin=3,D.topMax=t.top,D.leftOrg=g,D.leftMax=t.left,D.leftMin=3,D.moving=!0,document.addEventListener("mousemove",N,{passive:!1,capture:!0}),document.addEventListener("touchmove",N,{passive:!1,capture:!0}),document.addEventListener("pointerup",V,!0))},N=function(e){var t,n="touchmove"===e.type?(t=e.touches[0].clientY-D.y,e.touches[0].clientX-D.x):(t=e.clientY-D.y,e.clientX-D.x);if(D.moving||V(),e.preventDefault(),k(e),n=D.leftOrg+n,t=D.topOrg+t,D.checkMinMax){if(n<=D.leftMin||t<=D.topMin||n>=D.leftMax||t>=D.topMax)return}else if(e.clientX<G||e.clientY<G||e.clientX>D.leftMax||e.clientY>D.topMax)return;d.style.top=t+"px",d.style.left=n+"px",h=t,g=n},V=function(e){D.moving=!1,document.removeEventListener("mousemove",N,{passive:!1,capture:!0}),document.removeEventListener("touchmove",N,{passive:!1,capture:!0}),document.removeEventListener("pointerup",V,!0),e&&k(e),E("frameTableTitleCell").style.cursor="default",E("frameTitle").style.cursor="default"},X=function(){PWC.Components.GenericDialog.Frame.HtmlDiv.numInstances=(PWC.Components.GenericDialog.Frame.HtmlDiv.numInstances||0)+1,1e3<PWC.Components.GenericDialog.Frame.HtmlDiv.numInstances&&(PWC.Components.GenericDialog.Frame.HtmlDiv.numInstances=0)};this.createFrame=function(e,t){var n={};return p=t&&t.Width||0,C=t&&t.Height||0,h=t&&t.Top||(window.innerHeight>C?(window.innerHeight-C)/2:10),g=t&&t.Left||(window.innerWidth>p?(window.innerWidth-p)/2:10),f=t&&t.FrameCloseCallBack?t.FrameCloseCallBack:null,y=t&&t.FrameResizeCallBack?t.FrameResizeCallBack:null,x=!t||void 0===t.WindowMovingEnabled||t.WindowMovingEnabled,v=!(!t||void 0===t.WindowSizingEnabled)&&t.WindowSizingEnabled,T=!t||void 0===t.WindowClosingEnabled||t.WindowClosingEnabled,w=!t||void 0===t.ShowCaption||t.ShowCaption,i=t&&t.Caption?t.Caption:"",r=t&&t.MaxWidth?t.MaxWidth:void 0,s=t&&t.MaxHeight?t.MaxHeight:void 0,P=t&&t.MinWidth?t.MinWidth:P,b=t&&t.MinHeight?t.MinHeight:b,l=t&&t.ZIndex?t.ZIndex:void 0,n.BackColor=t&&t.BackColor?t.BackColor:void 0,n.WindowClosingEnabled=T,n.ZIndex=l,o=u.getDivNode(n),e.appendChild(o),(a=e).style.background=PWC.Components.GenericDialog.Frame.Style.backgroundColor,d=E("frameParentDiv"),c=E("frameOverylayDiv"),w||(E("frameTableTitleRow").style.display="none",d.style.borderTopWidth=PWC.Components.GenericDialog.Frame.BorderStyles.strokeWidth),E("frameTitle").appendChild(m.createTextNode(i)),c.style.top="0px",c.style.left="0px",t=Math.max(m.documentElement.clientHeight,m.body.scrollHeight,m.documentElement.scrollHeight,m.body.offsetHeight,m.documentElement.offsetHeight),n=Math.max(m.documentElement.clientWidth,m.body.scrollWidth,m.documentElement.scrollWidth,m.body.offsetWidth,m.documentElement.offsetWidth),c.style.height=t+"px",c.style.width=n-2+"px",c.style.display="",d.style.display="",d.style.top=h+"px",d.style.left=g+"px",d.style.height=b+"px",d.style.width=P+"px",void 0!==l&&(d.style.zIndex=l),D.checkMinMax=!0,o},this.show=function(e,t){n(e,!1,t)},this.showModal=function(e,t){n(e,!0,t)},this.close=function(){T&&(E("frameCloseDiv").removeEventListener("click",t.close),o.removeEventListener("keydown",e)),E("frameTableTitleRow").removeEventListener("pointerdown",j),d.removeEventListener("mousemove",F),d.removeEventListener("mouseout",z),d.removeEventListener("mousedown",_),d.removeEventListener("click",S),d.removeEventListener("keydown",k),d.removeEventListener("keyup",k),u.removeEventListeners(),c.style.display="none",o.style.display="none",d.style.display="none",null!==f&&""!==f&&f(),D=null,o&&a&&a.contains(o)&&(a.removeChild(o),a.parentElement.removeChild(a)),W&&(W.close(),W=null),u.removeOverlayDiv(),A&&A.focus()}},(PWC=PWC||{}).Components=PWC.Components||{},PWC.Components.GenericDialog=PWC.Components.GenericDialog||{},PWC.Components.GenericDialog.Frame=PWC.Components.GenericDialog.Frame||{},PWC.Components.GenericDialog.Frame.HtmlDiv=PWC.Components.GenericDialog.Frame.HtmlDiv||{},PWC.Components.GenericDialog.Frame.HtmlDiv.Node=function(){function e(){var e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;d.style.height=t+"px",d.style.width=e+"px"}function t(e){var t=e.target||e.sourceElement;"mouseover"===e.type?(t.style.backgroundColor="#C0C0C0",t.style.opacity=.5):"mouseleave"===e.type&&(t.style.backgroundColor="transparent"),e.preventDefault()}var d=null,c=null;this.removeOverlayDiv=function(){window.removeEventListener("resize",e),d=null},this.addEventListeners=function(){c.addEventListener("mouseover",t),c.addEventListener("mouseleave",t),window.addEventListener("resize",e)},this.removeEventListeners=function(){c.removeEventListener("mouseover",t),c.removeEventListener("mouseleave",t),window.removeEventListener("resize",e)},this.getDivNode=function(e){var t,n,i,o=PWC.Components.GenericDialog.Frame.TitlebarStyles,l=PWC.Components.GenericDialog.Frame.BorderStyles,r=PWC.Components.GenericDialog.Frame.HtmlDiv.numInstances,a=PWC.Components.GenericDialog.Frame.TitlebarStyles.backgroundColor,s=document.createElement("div");return s.setAttribute("tabindex","-1"),(t=document.createElement("div")).setAttribute("id","frameOverylayDiv_"+r),t.setAttribute("data-tif-id","frameOverylayDiv_tifId_"),t.setAttribute("class","frameOverylayDiv"),t.setAttribute("style","background: rgba(0, 0, 0, 0.75); position: fixed;top: 0;left: 0;width: 100%;height: 100%;"),e.ZIndex&&(t.style.zIndex=e.ZIndex),d=t,s.appendChild(t),(t=document.createElement("div")).setAttribute("id","frameParentDiv_"+r),t.setAttribute("data-tif-id","frameParentDiv_tifId"),t.setAttribute("style","display:none; position: absolute !important;background-color: white !important;border-left: "+l.strokeWidth+" "+l.variant+"  "+l.stroke+";border-right: "+l.strokeWidth+" "+l.variant+"  "+l.stroke+";border-bottom: "+l.strokeWidth+" "+l.variant+"  "+l.stroke+";border-top: "+l.strokeWidthTop+" "+l.variant+"  "+l.stroke+";-moz-user-select: none; -webkit-user-select: none; -ms-user-select:none; user-select:none;-o-user-select:none;overflow: hidden;border-radius: 5px;outline:0px;"),t.setAttribute("class","frameParentDiv"),(l=document.createElement("table")).setAttribute("border","0"),l.setAttribute("cellspacing","0"),l.setAttribute("cellpadding","0"),l.setAttribute("id","frameTable_"+r),l.setAttribute("data-tif-id","frameTable_tifId"),l.setAttribute("style"," height: 100%;width: 100%;border: 0;"),l.setAttribute("class","frameTable"),(n=document.createElement("tr")).setAttribute("style","background:"+a+";font-family:"+o.fontfamily+" ;font-size: "+o.fontsize),n.setAttribute("id","frameTableTitleRow_"+r),n.setAttribute("data-tif-id","frameTableTitleRow_tifId"),n.setAttribute("class","frameTableTitleRow"),(a=document.createElement("td")).setAttribute("align","left"),a.setAttribute("id","frameTableTitleCell_"+r),a.setAttribute("data-tif-id","frameTableTitleCell_tifId"),a.setAttribute("class","frameTableTitleCell"),a.setAttribute("width","90%"),a.setAttribute("style","width:90%;height: 22px;padding-top: 3px; padding-left: 13px;padding-bottom: 5px;border-bottom:1.4px solid black"),(i=document.createElement("span")).setAttribute("id","frameTitle_"+r),i.setAttribute("data-tif-id","frameTitle_tifId"),i.setAttribute("style","color: "+o.color+"; padding-left: 2px;font-weight:"+o.fontweight+";font-family:"+o.fontfamily+" ;font-size: "+o.fontsize+";"),i.setAttribute("class","frameTitle"),a.appendChild(i),n.appendChild(a),(a=document.createElement("td")).setAttribute("align","right"),a.setAttribute("style","border-bottom:1.4px solid black"),a.setAttribute("width","10%"),e.WindowClosingEnabled&&((c=document.createElement("div")).setAttribute("id","frameCloseDiv"+r),c.setAttribute("data-tif-id","frameCloseDiv_tifId"),c.setAttribute("class","frameCloseDiv"),c.setAttribute("style"," background: "+o.closeBackColor+";height: 21px;width: 49px;cursor: pointer;opacity: 1;color: black;padding-top:5px "),(i=document.createElement("span")).setAttribute("style","pointer-events:none;display:block;width:13px;height:13px;background: -ms-linear-gradient(-45deg, transparent 0%, transparent 46%, black 46%,  black 56%,transparent 56%, transparent 100%), -ms-linear-gradient(45deg, transparent 0%, transparent 46%, black 46%,  black 56%,transparent 56%, transparent 100%);background: -webkit-linear-gradient(-45deg, transparent 0%, transparent 47%, black 51%,  black 43%,transparent 56%, transparent 100%), -webkit-linear-gradient(45deg, transparent 0%, transparent 47%, black 51%,  black 43%,transparent 56%, transparent 100%);float: left;margin-left: 36%;"),c.appendChild(i),a.appendChild(c)),n.appendChild(a),l.appendChild(n),n=document.createElement("tr"),(e=document.createElement("td")).setAttribute("id","frameContentCell"),e.setAttribute("data-tif-id","frameContentCell_tifId"),e.setAttribute("align","center"),e.setAttribute("width","100%"),e.setAttribute("colspan","2"),e.setAttribute("style","cursor: default;"),e.setAttribute("class","frameContentCell"),n.appendChild(e),l.appendChild(n),t.appendChild(l),s.appendChild(t),s}},(PWC=PWC||{}).Components=PWC.Components||{},PWC.Components.DTP=PWC.Components.DTP||{},PWC.Components.DTP.Control=function(c){"use strict";var a,r,o,i,L,R,O,F,z,_,t,U,Y,j,X,l,s,d,u,q,K,m,p,C,h,g,f,y,S,Z,J,b,$,P=this,v=null,x=!1,Q=PWC.Lib.Canvas.Converters.enumHmiFieldDataType,T=c.optionsData,ee=864e5,te=354,w=!1,W=!1,G=null,ne=[],ie=c.callBack,oe=c.type,le=c.timeFormat,re=null,ae=null,D=null,H=null,I=null,e=1,se=2,de=3,ce=4,ue=1,me=2,pe=!1,A="getUTCFullYear",E="getUTCMonth",k="getUTCDate",Ce="getUTCHours",he="getUTCMinutes",ge="getUTCSeconds",fe="getUTCDay",M="setUTCFullYear",N="setUTCMonth",ye="setUTCDate",Se="setUTCHours",be="setUTCMinutes",Pe="setUTCSeconds",ve="",xe=-1,V=null,Te=c.longFormat?c.longFormat.toUpperCase():null,we="",We="OK",Ge="Cancel",n={YYYY:"",YY:"",MMMM:"",MMM:"",MM:"",M:"",DD:"",D:"",HH:"",H:"",MI:"",SS:"",AMPM:"",AMPMC:""},De=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],He={StartsOnJan1ST:0,First4DayWeek:1,FirstFullWeek:2},Ie=0,Ae=["January","February","March","April","May","June","July","August","September","October","November","December"],Ee=!(void 0!==c.isModal&&!c.isModal),ke=c.projectVersion,Me=c.isParentDialogOrPopUp,Ne=c.topLevelScreenWindow,Ve=300,Be="white",Le="white",Re="white",Oe="white",Fe="#ECECEC",ze="rgb(125, 205, 245)",_e="rgba(125, 205, 245, 0.5)",Ue="black",Ye="black",je=10,Xe=1970,qe=function(){this.style.backgroundColor!==ze&&this.style.backgroundColor!==_e&&(this.style.backgroundColor=Fe),this.style.cursor="pointer"},Ke=function(){var e=this.style.backgroundColor;0==this.id%7||6==this.id%7?this.style.backgroundColor=Le:this.style.backgroundColor=Be,e!==ze&&e!==_e||(this.style.backgroundColor=e)},Ze=function(e,t){for(var n,i=v.getElementsByClassName("tabContent"),o=i.length,l=0;l<o;l++)i[l].style.display="none";for(o=(n=v.getElementsByClassName("tabLinks")).length,l=0;l<o;l++)n[l].className=n[l].className.replace(" active","");v.querySelector("#"+t).style.display="block",e.currentTarget.className+=" active"},Je=function(e,t){var n=document.createElement("div");return n.setAttribute("id",e.toLowerCase()+"Link"),n.setAttribute("class","tabLinks"),n.textContent=e,n.addEventListener("click",function(e){Ze(e,t)}),n},$e=function(e){var t=document.createElement("div");return t.setAttribute("id",e),t.setAttribute("class","tabContent"),t},Qe=function(){o?(L.className+=" active",O.style.display="block"):(R.className+=" active",F.style.display="block")},et=function(e){return 0==e%4&&0!=e%100||0==e%400},tt=function(e){var t=[31,28,31,30,31,30,31,31,30,31,30,31];return(isNaN(e)||null===e||e<0||11<e)&&(e=0),et(x?h:C)&&(t[1]=29),t[e]},nt=function(e,t,n,i){var o=document.createElement("div");return xe++,o.setAttribute("id",xe.toString()),t&&(o.style.backgroundColor=t),o.style.color=Ue,i||(o.style.color=Ye),n&&((V=o).style.backgroundColor=ze,V.style.borderColor="#64646A"),o.setAttribute("value",e.toString()),o.innerHTML=e=""===e?"&nbsp;":e,o},it=function(e){var t,n=document.getElementsByClassName("monthsGridElement"),i=document.getElementById("daysDiv"),o=document.getElementById("daysSeparator"),l=document.getElementById("footerOK");if(!w||!W){if(re.innerHTML="",Y.style.visibility="hidden",j.style.visibility="hidden",H.style.display="none",i.style.visibility="hidden",o.style.visibility="hidden",l.disabled=!0,w)W||(i=x?h:C,I.textContent=i=(i-=(i-Xe)%je)+" - "+(i+je-1),I.setAttribute("value",i.toString()),rt(e,x?h:C),W=!0);else{for(I.textContent=C,I.style.marginLeft="15px",I.setAttribute("value",(x?h:C).toString()),re.appendChild(ot()),t=0;t<12;t++)n[t].addEventListener("click",dt,!1);w=!0}re.style.display="block",re.style.pointerEvents=""}},ot=function(){(t=document.createElement("div")).id="yearMonthGridDiv",t.setAttribute("class","ymGrid");for(var e=0;e<14;e+=4)t.appendChild(lt(e));return t},lt=function(e){var t,n,i=document.createElement("ul"),o=(e=parseInt(e))%12;for(i.setAttribute("class","monthsGridLine"),n=0;n<4;n++)(t=document.createElement("li")).setAttribute("value",o+n),t.setAttribute("id","month"+(o+n)),t.setAttribute("class","monthsGridElement"),t.textContent=Ae[o+n].substr(0,3),i.appendChild(t),e<12&&o+n===m&&((z=t).style.backgroundColor=ze),11<e&&t.setAttribute("class","monthsGridElement secondaryDatesID");return i},rt=function(e,t){var n,i=null;for(_&&_.parentNode&&(i=_).parentNode.removeChild(_),re.appendChild(at(t)),i=document.getElementsByClassName("yearsGridElement"),n=3;n<13;n++)i[n].addEventListener("click",ct,!1)},at=function(e){var t,n=parseInt(e);for(n-=(n-Xe)%je,(_=document.createElement("div")).id="yearMonthGridDiv",_.setAttribute("class","ymGrid"),t=n-3;t<n+je+2;t+=4)_.appendChild(st(t,n));return _},st=function(e,t){var n,i,o;for(e=parseInt(e),(i=document.createElement("ul")).setAttribute("class","yearsGridLine"),o=0;o<4;o++)(n=document.createElement("li")).setAttribute("value",e+o),n.setAttribute("id","year"+(e+o)),n.setAttribute("class","yearsGridElement"),n.textContent=e+o,i.appendChild(n),(U=e+o===(x?h:C)?n:U)&&(U.style.backgroundColor=ze),(e+o<t||t+je-1<e+o)&&n.setAttribute("class","yearsGridElement secondaryDatesID");return i},dt=function(e){e=e.target||e.srcElement;z&&(z.style.backgroundColor=Oe),x?p=e.value:m=e.value,(z=e).style.backgroundColor=ze,w=!1,ut(),P.setStyle()},ct=function(e){var t=e.target||e.srcElement;U&&(U.style.backgroundColor=Oe),x?h=t.value:C=t.value,(U=t).style.backgroundColor=ze,w=W=!1,it(e)},ut=function(){var e,t=null;Y.style.visibility="visible",x?(I.value=h.toString(),I.textContent=h,e=Ae[parseInt(p)],H.value=e,H.textContent=e,t=new Date(h,p),K=t.getDay()):(I.value=C.toString(),I.textContent=C,e=Ae[parseInt(m)],H.value=e,H.textContent=e,t=new Date(C,m),q=t.getDay()),t.setDate(1),x?B(h,p):B(C,m)},B=function(e,t){var n,i=0,o=0,l=0,r=0,a=document.getElementById("DTPBlock");xe=-1,!e||!t&&0!==t||isNaN(e)||isNaN(t)?(e=Xe,t=0):(x?(u[M](e),u):(d[M](e),d))[N](t),null!==a&&a.parentNode.removeChild(a),e=mt(),Me?document.body.insertBefore(e,document.body.firstChild):(n=Ne.control.domParent).appendChild(e),Ee&&(null!==(D=document.getElementById("overlayDiv"))&&D.parentNode.removeChild(D),(D=document.createElement("div")).setAttribute("id","overlayDiv"),D.setAttribute("class","overlayDiv"),v.style.visibility="hidden",Me?(l=document.documentElement.clientWidth,r=document.documentElement.clientHeight,document.body.insertBefore(D,v)):(l=document.documentElement.clientWidth>b.width?document.documentElement.clientWidth:b.width,r=document.documentElement.clientHeight>b.height?document.documentElement.clientHeight:b.height,n.insertBefore(D,v),i=Math.abs(Ne.scrollX),o=Math.abs(Ne.scrollY)),D.style.height=r+"px",D.style.width=l+"px",ft(i,o)),Tt()},mt=function(){var e,t=0;return re=document.createElement("div"),ae=document.createElement("div"),x?f>tt(p)&&(f=tt(p)):g>tt(m)&&(g=tt(m)),(v=document.createElement("div")).id="DTPBlock",v.oncontextmenu=function(){return!1},v.style.display="block",v.style.fontSize="14px",v.style.fontFamily="Siemens Sans",c.startEndFlag&&(e=vt(),v.appendChild(e)),re.id="yearMonthGrid",re.style.display="none",ae.id="layer",ae.style.display="none",a=a||new PWC.Lib.GfxWebLib(PWC.Lib.AppMode.RUNTIME,PWC.Lib.AppType.SCADA).textbib,(17<=ke||""===ke?bt:St)(),r&&(t=G.getTimeBlockWidth()),P.isTimeSpan?v.style.width=t+"px":o&&(v.style.width=r&&Ve<t?t+"px":Ve+"px"),v.appendChild(wt()),v},pt=function(e,t,n,i){return i.posY=e.top+e.height,i.posY+t.height+n<b.height+b.offsetTop},Ct=function(e,t,n){return n.posY=e.top-t.height,n.posY>=b.offsetTop},ht=function(e,t,n){var i=0,o={posY:0},i=pt(e,t,n,o)||Ct(e,t,o)?o.posY:b.offsetTop+(b.height-t.height)/2;v.style.top=Math.max(0,i)+"px"},gt=function(e,t,n){var i,o=0,l=e.width;(i=parseInt(ve.getAttribute("width")))&&i<=l&&(l=i),i=Math.abs(t.width-l),(o=e.left)+t.width+n>b.width+b.offsetLeft&&(o-=i),v.style.left=Math.max(0,o)+"px"},ft=function(e,t){var n=$,i=v.getBoundingClientRect();ht(n,i,t),gt(n,i,e),v.style.transform="translate("+e+"px,"+t+"px)",v.style.visibility=""},yt=function(e){var t;e.appendChild(Wt()),e.appendChild(Gt()),e.appendChild(ae),e.appendChild(re),(t=document.createElement("hr")).id="daysSeparator",e.appendChild(t),(t=document.createElement("div")).id="datesWeeksDiv",e.appendChild(t),t.appendChild(Ht()),t.appendChild(Dt())},St=function(){var e;o&&yt(v),r&&(o&&((e=document.createElement("hr")).id="timeSeparator",v.appendChild(e)),e=(G=new PWC.Components.DTP.TimeField).initialize(P,a,x),v.appendChild(e)),Pt(v)},bt=function(){var e,t,n,i=document.createElement("div");i.setAttribute("class","tab"),v.appendChild(i),(e=document.createElement("hr")).id="tabSeparator",v.appendChild(e),o&&(n=a.getText("TBID_Date"),L=Je(n,t="date"),i.appendChild(L),O=$e(t),yt(O),v.appendChild(O)),r&&(n=a.getText("TBID_Time"),R=Je(n,t="time"),i.appendChild(R),F=$e(t),o&&(F.style.height=te+"px"),e=(G=new PWC.Components.DTP.TimeField).initialize(P,a,x),F.appendChild(e),v.appendChild(F)),Pt(F),Qe()},Pt=function(e){var t,n;if(i)for(t=0;t<T.length;t++)(n=document.createElement("hr")).id="optionsSeparator",e.appendChild(n),ne[t]=new PWC.Components.DTP.OptionsField,n=ne[t].initialize(P,T[t]),e.appendChild(n)},vt=function(){var e,t,n,i,o,l=document.createElement("div");return l.id="container",e=document.createElement("div"),t=document.createElement("div"),i=document.createElement("div"),e.id="startTime",t.id="endTime",(n=document.createElement("span")).textContent="Start",e.appendChild(n),(n=document.createElement("span")).textContent="End",t.appendChild(n),t.appendChild(i),i=document.createElement("div"),e.appendChild(i),x?(e.style.backgroundColor="#E6E6EB",t.style.backgroundColor="#7DCDF5",e.lastElementChild.style.display="block",t.lastElementChild.style.display="none"):(e.lastElementChild.style.display="none",t.lastElementChild.style.display="block"),e.addEventListener("click",function(){P.updateDateAndTime(),x=!1,""!==P.selectedOptionIndex&&""!==P.selectedItem.StartTime?P.handleShiftData():B(C,m),p<m?P.highlightBeforOrAfter(!0):P.highlightBeforOrAfter(!1),e=document.getElementById("startTime"),t=document.getElementById("endTime"),e.style.backgroundColor="#7DCDF5",t.style.backgroundColor="#E6E6EB",t.lastElementChild.style.display="block",e.lastElementChild.style.display="none",G.toggleStartEndView(),!r||P.HOUR_12!==P.hourFormat&&P.HOUR_24!==P.hourFormat||G&&(G.setHour(),G.setMinute(),P.isTimeSpan&&(G.setDay(),o=new Date(P.dateTimeObj.days*ee),g=o[k](),m=o[E](),C=o[A]()),P.includeSeconds&&G.setSecond(),P.includeMilliSeconds&&G.setMilliSeconds(),P.includeMicroSeconds&&G.setMicroSeconds(),P.includeNanoSeconds)&&G.setNanoSeconds(),P.setStyle()}),t.addEventListener("click",function(){P.updateDateAndTime(),x=!0,""!==P.selectedOptionIndex&&""!==P.selectedItem.EndTime?P.handleShiftData():B(h,p),p<m?P.highlightBeforOrAfter(!1):P.highlightBeforOrAfter(!0),e=document.getElementById("startTime"),t=document.getElementById("endTime"),e.style.backgroundColor="#E6E6EB",t.style.backgroundColor="#7DCDF5",e.lastElementChild.style.display="block",t.lastElementChild.style.display="none",G.toggleStartEndView(),!r||P.HOUR_12!==P.hourFormat&&P.HOUR_24!==P.hourFormat||G&&(G.setHour(),G.setMinute(),P.isTimeSpan&&(G.setDay(),o=new Date(P.endDateTimeObj.days*ee),f=o[k](),p=o[E](),h=o[A]()),P.includeSeconds&&G.setSecond(),P.includeMilliSeconds&&G.setMilliSeconds(),P.includeMicroSeconds&&G.setMicroSeconds(),P.includeNanoSeconds)&&G.setNanoSeconds(),P.setStyle()}),l.appendChild(e),l.appendChild(t),l},xt=function(e){27===e.keyCode&&(P.closeDialog(e),e.stopPropagation())},Tt=function(){for(var e=document.getElementsByClassName("datesID"),t=0;t<e.length;t++)""!==e[t].getAttribute("value")&&"secondaryDatesID"!==e[t].getAttribute("class").split(" ")[1]&&(e[t].style.backgroundColor!==ze&&e[t].style.backgroundColor!==_e?(e[t].addEventListener("mouseover",qe,!1),e[t].addEventListener("mouseout",Ke,!1)):e[t].style.cursor="pointer",e[t].addEventListener("click",At,!1));document.addEventListener("keyup",xt),D&&window.setTimeout(function(){D.addEventListener("click",P.closeDialog,!1),D.addEventListener("wheel",P.handleWheel,!1)},100)},wt=function(){var e=document.createElement("div");return P.buttonCancel=document.createElement("button"),P.buttonOk=document.createElement("button"),P.buttonOk.setAttribute("value",We),P.buttonOk.setAttribute("class","mainBtns"),P.buttonOk.textContent=We,P.buttonOk.id="footerOK",P.buttonOk.addEventListener("click",Et,!1),P.buttonCancel.setAttribute("value",Ge),P.buttonCancel.setAttribute("class","mainBtns"),P.buttonCancel.textContent=Ge,P.buttonCancel.id="footerCancel",P.buttonCancel.addEventListener("click",P.closeDialog,!1),e.id="mainFooter",e.appendChild(P.buttonOk),e.appendChild(P.buttonCancel),e},Wt=function(){var e,t,n,i,o,l=x?h:C,r=x?p:m,a=x?f:g,s=null,d=null;return a<10&&(a="0"+a.toString()),a=document.createElement("div"),n=document.createElement("div"),a.id="yearMonthDiv",n.id="yearMonthDivInternal",(t=document.createElement("div")).id="navigationDiv",(s=document.createElement("span")).id="leftNav",s.textContent="<",(d=document.createElement("span")).id="rightNav",d.textContent=">",(e=document.createElement("div")).id="circle",(I=document.createElement("span")).id="yearDisplay",I.textContent=l,I.setAttribute("value",l.toString()),(H=document.createElement("span")).id="monthDisplay",H.textContent=Ae[r],H.setAttribute("value",Ae[r]),H.setAttribute("class","yearMonthClass"),I.setAttribute("class","yearMonthClass"),d.setAttribute("class","yearMonthClass"),s.setAttribute("class","yearMonthClass"),n.appendChild(H),n.appendChild(I),a.appendChild(n),t.appendChild(s),t.appendChild(e),t.appendChild(d),a.appendChild(t),C<=Xe&&0===m&&(s.style.opacity=.5),i=x?(o=p,h):(o=m,C),n.addEventListener("click",it,!1),s.addEventListener("click",function(){var e=W?new Date(i-10,o):w?new Date(i-1,o):new Date(i,o-1);e.getFullYear()>=Xe?(i=x?(p=e.getMonth(),h=e.getFullYear(),o=p,h):(m=e.getMonth(),C=e.getFullYear(),o=m,C),e.getFullYear()-je<Xe&&(s.style.opacity=.5),W?(w=!(W=!1),it()):w?x?(I.textContent=h,I.setAttribute("value",h.toString())):(I.textContent=C,I.setAttribute("value",C.toString())):x?B(h,p):B(C,m)):s.style.opacity=.5,c.startEndFlag&&P.highlightPrevMonth()}),d.addEventListener("click",function(){var e=W?new Date(i+10,o):w?new Date(i+1,o):new Date(i,o+1);s.style.opacity=1,i=x?(p=e.getMonth(),h=e.getFullYear(),o=p,h):(m=e.getMonth(),C=e.getFullYear(),o=m,C),W?(w=!(W=!1),it()):w?x?(I.textContent=h,I.setAttribute("value",h.toString())):(I.textContent=C,I.setAttribute("value",C.toString())):x?B(h,p):B(C,m),c.startEndFlag&&P.highlightNextMonth()}),a},Gt=function(){var e,t,n=document.createElement("div");for(n.id="daysDiv",e=-1;e<7;e++)(t=nt(-1===e?"":De[e],Re,!1)).setAttribute("class","daysID"),n.appendChild(t);return n},Dt=function(){var e,t,n=0,i=1,o=!1,l=x?new Date(h,p):new Date(C,m);for((Y=document.createElement("div")).id="datesBlock",l.setDate(1),x?K=l.getDay():q=l.getDay(),n=x?K:q;0<n;n--)(e=x?new Date(h,p):new Date(C,m)).setDate(l.getDate()-n),e=e.getDate(),(t=nt(e,Oe,o,!0)).setAttribute("class","datesID secondaryDatesID"),Y.appendChild(t);for(i=1;i<=tt(x?p:m);i++)t=nt(i,0==n%6?Le:Be,o=i===(x?f:g)?!0:o,!0),o=!1,t.setAttribute("class","datesID"),Y.appendChild(t),7===++n&&(n=0);for(i=1;xe<55;)(t=nt(i,Oe,o,!0)).setAttribute("class","datesID secondaryDatesID"),Y.appendChild(t),i++,7===++n&&(n=0);return Y},Ht=function(){var e,t=0,n=x?new Date(h,p):new Date(C,m),i=n.getDay();for((j=document.createElement("div")).id="weeksBlock",0<i&&n.setDate(n.getDate()-i),t=0;t<6;t++)0<t&&n.setDate(n.getDate()+7),e=It(n),(e=nt(e,Oe,!1,!0)).setAttribute("class","datesID secondaryDatesID"),j.appendChild(e);return j},It=function(e){var t,n,i=new Date(e.getFullYear(),e.getMonth(),e.getDate()+6);return Ie===He.First4DayWeek&&(n=e.getFullYear()!==i.getFullYear()?4<=i.getDate()?(t=new Date(i.getFullYear(),0,1),i):(t=new Date(e.getFullYear(),0,1),e):(t=new Date(i.getFullYear(),0,4),i)),Ie===He.StartsOnJan1ST?(t=new Date(i.getFullYear(),0,1),n=i):Ie===He.FirstFullWeek&&(t=new Date(e.getFullYear(),0,1),n=e),Math.ceil(((n-t)/ee+1)/7)},At=function(e){e=e.target||e.srcElement.sibling;V&&(V.style.backgroundColor=Oe,V.style.borderColor="white"),V=e,x?f=parseInt(e.getAttribute("value")):g=parseInt(e.getAttribute("value")),c.startEndFlag&&(p<m?P.highlightBeforOrAfter(!0):P.highlightBeforOrAfter(!1)),isNaN(g)&&(g=1),isNaN(f)&&(f=1),V&&(V.style.backgroundColor=ze,V.style.borderColor="#64646A")},Et=function(){var e;!r||P.HOUR_12!==P.hourFormat&&P.HOUR_24!==P.hourFormat||G&&(G.setHour(),G.setMinute(),P.isTimeSpan&&(G.setDay(),x?(e=new Date(P.endDatePrecise*ee),f=e[k](),p=e[E](),h=e[A]()):(e=new Date(P.dateTimeObj.days*ee),g=e[k](),m=e[E](),C=e[A]())),P.includeSeconds&&G.setSecond(),P.includeMilliSeconds&&G.setMilliSeconds(),P.includeMicroSeconds&&G.setMicroSeconds(),P.includeNanoSeconds)&&G.setNanoSeconds(),e=P.getValue(),Nt(),ve.value=e.value,e.value,x?(S[N](p),S[M](h),S[ye](f)):(y[N](m),y[M](C),y[ye](g)),Te&&Mt(),ie&&(c.startEndFlag?0===T.length?ie(ve,{startVal:P.datePrecise.getHrTime(),endVal:P.endDatePrecise.getHrTime()},{milliSecs:(x?P.endDateTimeObj:P.dateTimeObj).milliSeconds,microSecs:(x?P.endDateTimeObj:P.dateTimeObj).microSeconds,nanoSecs:(x?P.endDateTimeObj:P.dateTimeObj).nanoSeconds,value:e.value}):ie(ve,T,{milliSecs:(x?P.endDateTimeObj:P.dateTimeObj).milliSeconds,microSecs:(x?P.endDateTimeObj:P.dateTimeObj).microSeconds,nanoSecs:(x?P.endDateTimeObj:P.dateTimeObj).nanoSeconds,value:e.value}):ie(ve,e.hrTime,{milliSecs:(x?P.endDateTimeObj:P.dateTimeObj).milliSeconds,microSecs:(x?P.endDateTimeObj:P.dateTimeObj).microSeconds,nanoSecs:(x?P.endDateTimeObj:P.dateTimeObj).nanoSeconds,value:e.value}),ve.focus()),kt()},kt=function(){v&&v.parentNode&&(v.parentNode.removeChild(v),D)&&D.parentNode.removeChild(D),P.onClose&&P.onClose(P)},Mt=function(){var e,t=Te.split(" ");for(e in we="",t)n[t[e]]&&(we+=n[t[e]]+" ");we.trim()},Nt=function(){n.YYYY=C,n.YY=C,n.MMMM=Ae[m],n.MMM=n.MMMM.substr(0,3),n.M=m+1,n.MM=n.M<10?"0":"",n.MM+=n.M,n.MM+=n.M,n.D=g,n.DD=n.D<10?"0":"",n.DD+=n.D,n.H=P.getHours(),n.HH=n.H<10?"0":"",n.HH+=n.H,n.MI=P.getMinutes(),n.SS=P.getSeconds(),n.AMPM=P.dateTimeObj.amorpm,n.AMPMC=n.AMPM.toUpperCase()};P.datePrecise=window.DatePrecise(c.defaultDate),P.endDatePrecise=window.DatePrecise(c.endDate),P.selectedItem="",P.selectedCategory="",P.selectedOptionIndex="",P.amOrPm="",this.includeSeconds="number"==typeof c.timeMaxValue&&c.timeMaxValue>=e,this.includeMilliSeconds="number"==typeof c.timeMaxValue&&c.timeMaxValue>=se,this.includeMicroSeconds="number"==typeof c.timeMaxValue&&c.timeMaxValue>=de,this.includeNanoSeconds="number"==typeof c.timeMaxValue&&c.timeMaxValue>=ce,c.timeZonePreference===me&&-1<c.timeZoneIndex?(l={},X={timeZone:PWC.Lib.Formatter.Timezone.getTimezoneFromIndex(c.timeZoneIndex)},e=PWC.Lib.Formatter.format(x?P.endDatePrecise:P.datePrecise,"{D,@e/dd/MM/yyyy}/{T,@HH/mm/ss}",X).split("/"),l.day=parseInt(e[0],10),--l.day,l.date=parseInt(e[1],10),l.month=parseInt(e[2],10)-1,l.year=parseInt(e[3],10),l.hour=parseInt(e[4],10),l.minute=parseInt(e[5],10),l.second=parseInt(e[6],10),this.dateTimeObj={hours:l.hour,minutes:l.minute,seconds:l.second,milliSeconds:this.includeMilliSeconds?this.datePrecise.getMilliseconds():0,microSeconds:this.includeMicroSeconds?this.datePrecise.getMicroseconds():0,nanoSeconds:this.includeNanoSeconds?this.datePrecise.getNanoseconds():0,amorpm:11<l.hour?"pm":"am"},q=l.day,m=l.month,C=l.year,g=l.date,d=new Date(C,m,g),y=new Date(C,m,g),c.startEndFlag&&(s.day=parseInt(e[0],10),--s.day,s.date=parseInt(e[1],10),s.month=parseInt(e[2],10)-1,s.year=parseInt(e[3],10),s.hour=parseInt(e[4],10),s.minute=parseInt(e[5],10),s.second=parseInt(e[6],10),this.endDateTimeObj={_hours:s.hour,minutes:s.minute,seconds:s.second,milliSeconds:P.includeMilliSeconds?P.endDatePrecise.getMilliseconds():0,microSeconds:P.includeMicroSeconds?P.endDatePrecise.getMicroseconds():0,nanoSeconds:P.includeNanoSeconds?P.endDatePrecise.getNanoseconds():0,amorpm:11<s.hour?"pm":"am"},K=s.day,p=s.month,h=s.year,f=s.date,u=new Date(h,p,f),S=new Date(h,p,f))):(c.timeZonePreference!==ue&&(pe=!0,A="getFullYear",E="getMonth",k="getDate",Ce="getHours",he="getMinutes",ge="getSeconds",fe="getDay",M="setFullYear",N="setMonth",ye="setDate",Se="setHours",be="setMinutes",Pe="setSeconds"),l=new Date(1e3*this.datePrecise._hrTime[0]),s=new Date(1e3*P.endDatePrecise._hrTime[0]),this.dateTimeObj={days:Math.floor(l.getTime()/ee),hours:l[Ce](),minutes:l[he](),seconds:l[ge](),milliSeconds:this.includeMilliSeconds?this.datePrecise.getMilliseconds():0,microSeconds:this.includeMicroSeconds?this.datePrecise.getMicroseconds():0,nanoSeconds:this.includeNanoSeconds?this.datePrecise.getNanoseconds():0,amorpm:""},this.dateTimeObj.amorpm=11<this.dateTimeObj.hours?"pm":"am",l=this.datePrecise.toDate(),q=l[fe](),m=l[E](),C=l[A](),g=l[k](),d=new Date(C,m,g),y=new Date(C,m,g),c.startEndFlag&&(this.endDateTimeObj={days:Math.floor(s.getTime()/ee),hours:s[Ce](),minutes:s[he](),seconds:s[ge](),milliSeconds:this.includeMilliSeconds?P.endDatePrecise.getMilliseconds():0,microSeconds:this.includeMicroSeconds?P.endDatePrecise.getMicroseconds():0,nanoSeconds:this.includeNanoSeconds?P.endDatePrecise.getNanoseconds():0,amorpm:""},this.endDateTimeObj.amorpm=11<this.endDateTimeObj.hours?"pm":"am",s=P.endDatePrecise.toDate(),K=s[fe](),p=s[E](),h=s[A](),f=s[k](),u=new Date(h,p,f),S=new Date(h,p,f))),this.maxNoOfDays=10675199,this.minNoOfDays=-10675199,this.HOUR_12="12",this.HOUR_24="24",this.getHours=function(){return(x?this.endDateTimeObj:this.dateTimeObj).hours},this.getValue=function(){var e,t,n,i="",o={date:"",month:"",year:""},l={hour:"",min:"",sec:""},r=0;return x?(e=P.endDateTimeObj.amorpm,t=P.endDateTimeObj,(isNaN(f)||f>tt(p)||f<1)&&(f=1),(isNaN(p)||11<p||p<0)&&u[N](0),isNaN(h)&&u[M](Xe),u[ye](f)):(e=P.dateTimeObj.amorpm,t=P.dateTimeObj,(isNaN(g)||g>tt(m)||g<1)&&(g=1),(isNaN(m)||11<m||m<0)&&d[N](0),isNaN(C)&&d[M](Xe),d[ye](g)),P.HOUR_12!==P.hourFormat&&P.HOUR_24!==P.hourFormat||(r=t.hours,P.HOUR_12===P.hourFormat&&("am"===e?12===r?r=0:r<0&&(r-=12):"pm"===t.amorpm?0<r&&r<12&&(r+=12):(t.amorpm="am",12===r&&(r=0)))),x?((n=new Date(0))[M](h),n[N](p,1),n[ye](f),n[Se](r),n[be](t.minutes),n[Pe](t.seconds)):((n=new Date(0))[M](C),n[N](m,1),n[ye](g),n[Se](r),n[be](P.dateTimeObj.minutes),n[Pe](P.dateTimeObj.seconds)),c.timeZonePreference===ue||pe?((x?(P.endDatePrecise.setHrTime([n.getTime()/1e3,0]),P.endDatePrecise.setMilliseconds(t.milliSeconds),P.endDatePrecise.setMicroseconds(t.microSeconds),P.endDatePrecise):(P.datePrecise.setHrTime([n.getTime()/1e3,0]),P.datePrecise.setMilliseconds(t.milliSeconds),P.datePrecise.setMicroseconds(t.microSeconds),P.datePrecise)).setNanoseconds(t.nanoSeconds),a&&(i=pe?a.format(x?P.endDatePrecise:P.datePrecise,c.formatDateTime||"{D} {T}",a.toIANATimeZone(-1)):a.format(x?P.endDatePrecise:P.datePrecise,c.formatDateTime||"{D} {T}"))):((i=n[k]())<10&&(o.date=o.date+"0"),o.date=o.date+i.toString(),(i=n[E]())+1<10&&(o.month=o.month+"0"),o.month=o.month+(i+1).toString(),o.year=n[A]().toString(),(i=n[Ce]())<10&&(l.hour=l.hour+"0"),l.hour=l.hour+i.toString(),(i=n[he]())<10&&(l.min=l.min+"0"),l.min=l.min+i.toString(),P.includeSeconds&&((i=n[ge]())<10&&(l.sec=l.sec+"0"),l.sec=l.sec+i.toString()),i=o.year+"/"+o.month+"/"+o.date+" "+l.hour+":"+l.min+":"+l.sec,a=a||new PWC.Lib.GfxWebLib(PWC.Lib.AppMode.RUNTIME,PWC.Lib.AppType.SCADA).textbib,(x?(P.endDatePrecise.setTime(a.parseDate(i,"@yyyy/MM/dd HH:mm:ss",X.timeZone).getTime()),P.endDatePrecise.setMicroseconds(t.microSeconds),P.endDatePrecise):(P.datePrecise.setTime(a.parseDate(i,"@yyyy/MM/dd HH:mm:ss",X.timeZone).getTime()),P.datePrecise.setMicroseconds(t.microSeconds),P.datePrecise)).setNanoseconds(t.nanoSeconds),i=a.format(x?P.endDatePrecise:P.datePrecise,c.formatDateTime||"{D} {T}",X)),{value:i,hrTime:(x?P.endDatePrecise:P.datePrecise).getHrTime()}},this.handleShiftData=function(){for(var e=T.length,t=document.getElementById("amButton"),n=document.getElementById("pmButton"),i=0;i<e;i++)if(T[i].Name===P.selectedCategory){P.selectedItem=T[i].Items[P.selectedOptionIndex];break}""===P.selectedItem.StartTime||x||(P.datePrecise=window.DatePrecise(P.selectedItem.StartTime),l=new Date(1e3*P.datePrecise._hrTime[0]),P.dateTimeObj={days:Math.floor(l.getTime()/ee),hours:l[Ce](),minutes:l[he](),seconds:l[ge](),milliSeconds:this.includeMilliSeconds?P.datePrecise.getMilliseconds():0,microSeconds:this.includeMicroSeconds?P.datePrecise.getMicroseconds():0,nanoSeconds:this.includeNanoSeconds?P.datePrecise.getNanoseconds():0,amorpm:11<l.hour?"pm":"am"},("am"===P.dateTimeObj.amorpm?(t.setAttribute("class","ampmBtns ampmBtnsPressed"),n):(n.setAttribute("class","ampmBtns ampmBtnsPressed"),t)).setAttribute("class","ampmBtns"),q=l[fe](),l=P.datePrecise.toDate(),m=l[E](),C=l[A](),g=l[k](),d=new Date(C,m,g),y=new Date(C,m,g),B(C,m)),""!==P.selectedItem.EndTime&&x&&(P.endDatePrecise=window.DatePrecise(P.selectedItem.EndTime),s=new Date(1e3*P.endDatePrecise._hrTime[0]),x)&&c.startEndFlag&&(P.endDateTimeObj={days:Math.floor(s.getTime()/ee),hours:s[Ce](),minutes:s[he](),seconds:s[ge](),milliSeconds:this.includeMilliSeconds?P.endDatePrecise.getMilliseconds():0,microSeconds:this.includeMicroSeconds?P.endDatePrecise.getMicroseconds():0,nanoSeconds:this.includeNanoSeconds?P.endDatePrecise.getNanoseconds():0,amorpm:11<s.hour?"pm":"am"},("am"===P.endDateTimeObj.amorpm?(t.setAttribute("class","ampmBtns ampmBtnsPressed"),n):(n.setAttribute("class","ampmBtns ampmBtnsPressed"),t)).setAttribute("class","ampmBtns"),s=P.endDatePrecise.toDate(),K=s[fe](),p=s[E](),h=s[A](),f=s[k](),S=new Date(h,p,f),B(h,p))},this.getProjectVersion=function(){return ke},this.getWidth=function(){return o?Ve:0},this.getMinutes=function(){return(x?this.endDateTimeObj:this.dateTimeObj).minutes},this.getSeconds=function(){return(x?this.endDateTimeObj:this.dateTimeObj).seconds},this.show=function(e){ve=e.target||e.srcElement,$=ve.getBoundingClientRect(),b=Me?{height:document.documentElement.clientHeight,width:document.documentElement.clientWidth,offsetTop:0,offsetLeft:0}:(J=Ne.screen,Z=J.adaptScreenToWindowFactor,{height:J.props.Height*Z,width:J.props.Width*Z,offsetTop:J.offsetTop,offsetLeft:J.offsetLeft}),B(),c.startEndFlag&&(p<m?P.highlightBeforOrAfter(!0):P.highlightBeforOrAfter(!1))},this.closeDialog=function(){V=x?(p=S[E](),h=S[A](),f=S[k](),u[ye](f),u[N](p),u[M](h),6+parseInt(f)+K):(m=y[E](),C=y[A](),g=y[k](),d[ye](g),d[N](m),d[M](C),6+parseInt(g)+q),kt(),ve.focus()},this.handleWheel=function(e){e.ctrlKey&&(e.stopPropagation(),e.preventDefault())},this.setLocale=function(e){if(e){switch(De=e.days,Ae=e.months,We=e.ok,Ge=e.cancel,oe){case Q.Date:o=!(r=!1);break;case Q.Time:case Q.TimeSpan:o=!(r=!0);break;default:o=r=!0}T&&0<T.length&&(i=!0),this.isTimeSpan=oe===Q.TimeSpan,this.hourFormat=!this.isTimeSpan&&-1<le.f.indexOf(" ")?this.HOUR_12:this.HOUR_24}},this.setTextBib=function(e){a=e},this.enableDisableOkButton=function(e){this.buttonOk.disabled=e},this.setSelection=function(e,t){var n;for(P.selectedCategory=e,P.selectedOptionIndex=t,n=0;n<ne.length;n++)ne[n].clearSelection();this.handleShiftData(),this.setStyle()},this.setStyle=function(){""!==P.selectedOptionIndex&&("Shift"===P.selectedCategory?ne[0]:ne[1]).setStyle(P.selectedOptionIndex)},this.highlightBeforOrAfter=function(e){var t=V;if(e)for(;null!==t.previousSibling&&(+t.previousSibling.textContent<=g||p!==m);)(t=t.previousSibling).style.backgroundColor=_e;else for(;null!==t.nextSibling&&(+t.nextSibling.textContent<=f||p!==m);)(t=t.nextSibling).style.backgroundColor=_e},this.comparePrevMonth=function(e){x?(m<p||e&&+e.textContent<=g&&m<=p&&"datesID secondaryDatesID"!==e.className)&&(e.style.backgroundColor=_e):(p<m||e&&+e.textContent<=f&&p<=m&&"datesID secondaryDatesID"!==e.className)&&(e.style.backgroundColor=_e)},this.highlightPrevMonth=function(){for(var e=V;null!==e.nextSibling;)e=e.nextSibling,this.comparePrevMonth(e);for(e=V;null!==e.previousSibling;)e=e.previousSibling,this.comparePrevMonth(e)},this.compareNextMonth=function(e){x?(p<m||e&&+e.textContent<=g&&m<=p&&"datesID secondaryDatesID"!==e.className)&&(e.style.backgroundColor=_e):(m<p||e&&+e.textContent<=f&&m<=p&&"datesID secondaryDatesID"!==e.className)&&(e.style.backgroundColor=_e)},this.highlightNextMonth=function(){for(var e=V;null!==e.nextSibling;)e=e.nextSibling,this.compareNextMonth(e);for(;null!==e.previousSibling;)e=e.previousSibling,this.compareNextMonth(e)},this.updateDateAndTime=function(){var e,t=P.getValue(),n=T.length;if(0<=n){for(e=0;e<n;e++)if(T[e].Name===P.selectedCategory){P.selectedItem=T[e].Items[P.selectedOptionIndex];break}P.selectedItem&&(x?P.selectedItem.EndTime=t.hrTime:P.selectedItem.StartTime=t.hrTime)}}},(PWC=PWC||{}).Components=PWC.Components||{},PWC.Components.DTP=PWC.Components.DTP||{},PWC.Components.DTP.TimeField=function(){function L(e,t){return e=-1<e?e.toString().padStart(t,"0"):e.toString()}function o(e){var t=e.keyCode||e.which;(!a.isTimeSpan&&-1!==[173,189,109].indexOf(t)||-1!==[190,110,187,111,106,107,192,219,221,186,222,220,188,191,226,61,59,32].indexOf(t)||65<=t&&t<=90||e.shiftKey&&(-1!==[192,61,59,173].indexOf(t)||48<=t&&t<=57||65<=t&&t<=90))&&e.preventDefault()}function R(){var e,t=!1,n=Z,i=J,o=!1,l=parseInt(T.value,10);a.isTimeSpan&&(e=d.days,t=ge(e,l)),isNaN(l)||l<K||q<l?t=!0:(l===K?n=!(i=!0):i=l===q?!(n=!0):n=!1,(!1===Z&&n||Z&&!1===n&&C)&&(o=!0),(!1===J&&i||J&&!1===i&&h)&&(o=!0),J=i,Z=n,o&&w&&O()),t?(T.style.borderColor="red",a.enableDisableOkButton(!0),A=!0):(A&&(A=!1,!(T.style.borderColor="black")===E)&&!1===k&&!1===M&&!1===N&&!1===V&&!1===B&&a.enableDisableOkButton(!1),d.days=l)}function O(){var e,t=!1,n=C,i=h,o=!1,l=parseInt(w.value,10);a.isTimeSpan&&(e=d.hours,t=ge(e,l)),isNaN(l)||a.HOUR_12===a.hourFormat&&(12<l||l<1)||a.HOUR_24===a.hourFormat&&(23<l||(a.isTimeSpan?l<-23:l<0))?t=!0:a.isTimeSpan&&(Z?(i=!1,ee<l?t=!0:n=l===ee):J&&(n=!1,l<te?t=!0:i=l===te),(!1===C&&n||C&&!1===n&&g)&&(o=!0),(!1===h&&i||h&&!1===i&&f)&&(o=!0),h=i,C=n,o)&&W&&fe(),t?(w.style.borderColor="red",a.enableDisableOkButton(!0),E=!0):(E&&(E=!1,!(w.style.borderColor="black")===A)&&!1===k&&!1===M&&!1===N&&!1===V&&!1===B&&a.enableDisableOkButton(!1),d.hours=l)}function F(){var e,t=!1,n=b,i=P,o=!1,l=parseInt(D.value,10);a.isTimeSpan&&(e=d.milliSeconds,t=ge(e,l)),isNaN(l)||999<l||(a.isTimeSpan?l<-999:l<0)?t=!0:a.isTimeSpan&&(y?(i=!1,477<l?t=!0:n=477===l):S&&(n=!1,l<-477?t=!0:i=-477===l),(!1===b&&n||b&&!1===n&&v)&&(o=!0),(!1===P&&i||P&&!1===i&&x)&&(o=!0),P=i,b=n,o)&&H&&_(),t?(D.style.borderColor="red",a.enableDisableOkButton(!0),N=!0):(N&&(N=!1,!(D.style.borderColor="black")===A)&&!1===E&&!1===k&&!1===M&&!1===V&&!1===B&&a.enableDisableOkButton(!1),d.milliSeconds=l)}function z(){var e,t=!1,n=y,i=S,o=!1,l=parseInt(G.value,10);a.isTimeSpan&&(e=d.seconds,t=ge(e,l)),isNaN(l)||59<l||(a.isTimeSpan?l<-59:l<0)?t=!0:a.isTimeSpan&&(g?(i=!1,5<l?t=!0:n=5===l):f&&(n=!1,l<-5?t=!0:i=-5===l),(!1===y&&n||y&&!1===n&&b)&&(o=!0),(!1===S&&i||S&&!1===i&&P)&&(o=!0),S=i,y=n,o)&&D&&F(),t?(G.style.borderColor="red",a.enableDisableOkButton(!0),M=!0):(M&&(M=!1,!(G.style.borderColor="black")===A)&&!1===E&&!1===k&&!1===N&&!1===V&&!1===B&&a.enableDisableOkButton(!1),d.seconds=l)}function _(){var e,t=!1,n=v,i=x,o=!1,l=parseInt(H.value,10);a.isTimeSpan&&(e=d.microSeconds,t=ge(e,l)),isNaN(l)||999<l||(a.isTimeSpan?l<-999:l<0)?t=!0:a.isTimeSpan&&(b?(i=!1,ne<l?t=!0:n=l===ne):P&&(n=!1,l<ie?t=!0:i=l===ie),(!1===v&&n||v&&!1===n&&$)&&(o=!0),(!1===x&&i||x&&!1===i&&Q)&&(o=!0),x=i,v=n,o)&&I&&ye(),t?(H.style.borderColor="red",a.enableDisableOkButton(!0),V=!0):(V&&(V=!1,!(H.style.borderColor="black")===A)&&!1===E&&!1===k&&!1===M&&!1===N&&!1===B&&a.enableDisableOkButton(!1),d.microSeconds=l)}function U(e,t,n,i,o){var l,r=null,r=e?e.cloneNode():o?document.createElementNS(o,t):document.createElement(t);if(n)for(l in n)n.hasOwnProperty(l)&&r.setAttribute(l,n[l]);if(i)for(l in i)r.style[l]=i[l];return r}function Y(){var e,t,n;c=document.createElement("div"),w=document.createElement("input"),W=document.createElement("input"),n=Se(),c.id=17<=p||""===p?"timeBlockNewStyle":"timeBlock",c.onmousedown=he,c.onmouseup=re,(e=document.createElement("div")).style.display="inline-block",e.style.width="40px",(t=document.createElement("div")).style.height="16px",t.style.fontSize="14px",t.style.fontFamily="Siemens Sans",t.style.margin="8px auto 8px auto",t.style.display="table",a.isTimeSpan&&be(e,t),Pe(e,t),a.includeSeconds&&we(e,t),a.includeMilliSeconds&&We(e,t),a.includeMicroSeconds&&Ge(e,t),a.includeNanoSeconds&&De(e,t),n&&((e=document.createElement("div")).setAttribute("class","timeFieldseparator"),c.appendChild(e),u+=16,c.appendChild(n),u+=40)}function l(e,t,n,i,o){(ve()?xe:Te)(e,t,n,i,o)}function j(e){var t=document.createElement("div");t.setAttribute("class","timeFieldseparator"),(17<=p||""===p)&&(t.className+=" timeFieldseparatorForNewStyle"),t.textContent=e,c.appendChild(t),u+=16}function r(e,t){var n=document.createElement("div"),i=document.createElement("span");return e?(i.setAttribute("class","upIcon"),n.setAttribute("class","upBtns")):(i.setAttribute("class","downIcon"),n.setAttribute("class","downBtns")),n.id=t,i.id=t,n.appendChild(i),n}var a,s,d,c,u,t,m,p,X=!1,q=10675199,K=-10675199,Z=!1,J=!1,C=!1,h=!1,g=!1,f=!1,y=!1,S=!1,b=!1,P=!1,v=!1,x=!1,$=!1,Q=!1,ee=2,te=-2,ne=580,ie=-580,T=null,w=null,W=null,G=null,D=null,H=null,I=null,A=!1,E=!1,k=!1,M=!1,N=!1,V=!1,B=!1,i=null,oe=null,le=null,n=400,re=function(){t&&(clearInterval(t),t=null)},ae=function(e){var t,n=parseInt(d.hours,10);e?n+=1:n-=1,a.HOUR_12===a.hourFormat&&(12<n||n<1)||a.HOUR_24===a.hourFormat&&(23<n||(a.isTimeSpan?n<-23:n<0))||(d.hours=n,m?(a.endDateTimeObj.hours=n,t=a.getValue(),a.selectedItem.EndTime=t.hrTime):(a.dateTimeObj.hours=n,t=a.getValue(),a.selectedItem.StartTime=t.hrTime),w.value=n)},se=function(e){var t=parseInt(d.minutes,10);e?t+=1:t-=1,59<t||(a.isTimeSpan?t<-59:t<0)||(d.minutes=L(t,2),e=a.getValue(),m?a.selectedItem.EndTime=e.hrTime:a.selectedItem.StartTime=e.hrTime,W.value=d.minutes)},de=function(e){var t=parseInt(d.seconds,10);e?t+=1:t-=1,59<t||(a.isTimeSpan?t<-59:t<0)||(d.seconds=L(t,2),e=a.getValue(),m?a.selectedItem.EndTime=e.hrTime:a.selectedItem.StartTime=e.hrTime,G.value=d.seconds)},ce=function(e){var t=parseInt(d.milliSeconds,10);e?t+=1:t-=1,999<t||(a.isTimeSpan?t<-999:t<0)||(d.milliSeconds=L(t,3),e=a.getValue(),m?a.selectedItem.EndTime=e.hrTime:a.selectedItem.StartTime=e.hrTime,D.value=d.milliSeconds)},ue=function(e){var t=parseInt(d.microSeconds,10);e?t+=1:t-=1,999<t||(a.isTimeSpan?t<-999:t<0)||(d.microSeconds=t,e=a.getValue(),m?a.selectedItem.EndTime=e.hrTime:a.selectedItem.StartTime=e.hrTime,H.value=t)},me=function(e){var t=parseInt(d.nanoSeconds,10);e?t+=1:t-=1,999<t||(a.isTimeSpan?t<-999:t<0)||(d.nanoSeconds=t,e=a.getValue(),m?a.selectedItem.EndTime=e.hrTime:a.selectedItem.StartTime=e.hrTime,I.value=t)},pe=function(e){var t=parseInt(d.days,10);e?t+=1:t-=1,t<K||q<t||(d.days=t,e=a.getValue(),m?a.selectedItem.EndTime=e.hrTime:a.selectedItem.StartTime=e.hrTime,T.value=t)},Ce=function(){var e="am"===d.amorpm?"pm":"am";d.amorpm=e,le.textContent=e.toUpperCase()},he=function(e){e=(e.srcElement||e.target).id;switch(re(),e){case"hoursBlock_Up":ae(1),t=setInterval(function(){ae(1)},n);break;case"hoursBlock_Down":ae(),t=setInterval(function(){ae()},n);break;case"minutesBlock_Up":se(1),t=setInterval(function(){se(1)},n);break;case"minutesBlock_Down":se(),t=setInterval(function(){se()},n);break;case"secondsBlock_Up":de(1),t=setInterval(function(){de(1)},n);break;case"secondsBlock_Down":de(),t=setInterval(function(){de()},n);break;case"milliSecondsBlock_Up":ce(1),t=setInterval(function(){ce(1)},n);break;case"milliSecondsBlock_Down":ce(),t=setInterval(function(){ce()},n);break;case"microSecondsBlock_Up":ue(1),t=setInterval(function(){ue(1)},n);break;case"microSecondsBlock_Down":ue(),t=setInterval(function(){ue()},n);break;case"nanoSecondsBlock_Up":me(1),t=setInterval(function(){me(1)},n);break;case"nanoSecondsBlock_Down":me(),t=setInterval(function(){me()},n);break;case"amButton":i.setAttribute("class","ampmBtns ampmBtnsPressed"),oe.setAttribute("class","ampmBtns"),d.amorpm="am";break;case"pmButton":i.setAttribute("class","ampmBtns"),oe.setAttribute("class","ampmBtns ampmBtnsPressed"),d.amorpm="pm";break;case"ampmButton":Ce();break;case"daysBlock_Up":pe(1),t=setInterval(function(){pe(1)},n);break;case"daysBlock_Down":pe(),t=setInterval(function(){pe()},n)}},ge=function(e,t){if(!isNaN(e)&&isNaN(t))return!0},fe=function(){var e,t=!1,n=g,i=f,o=!1,l=parseInt(W.value,10);a.isTimeSpan&&(e=d.minutes,t=ge(e,l)),isNaN(l)||59<l||(a.isTimeSpan?l<-59:l<0)?t=!0:a.isTimeSpan&&(C?(i=!1,48<l?t=!0:n=48===l):h&&(n=!1,l<-48?t=!0:i=-48===l),(!1===g&&n||g&&!1===n&&y)&&(o=!0),(!1===f&&i||f&&!1===i&&S)&&(o=!0),f=i,g=n,o)&&G&&z(),t?(W.style.borderColor="red",a.enableDisableOkButton(!0),k=!0):(k&&(k=!1,!(W.style.borderColor="black")===A)&&!1===E&&!1===M&&!1===N&&!1===V&&!1===B&&a.enableDisableOkButton(!1),d.minutes=l)},ye=function(){var e,t=!1,n=parseInt(I.value,10);a.isTimeSpan&&(e=d.nanoSeconds,t=ge(e,n)),isNaN(n)||999<n||(a.isTimeSpan?n<-999:n<0)?t=!0:a.isTimeSpan&&(v?(Q=!1,700<n?t=!0:$=700===n):x&&($=!1,n<-800?t=!0:Q=-800===n)),t?(I.style.borderColor="red",a.enableDisableOkButton(!0),B=!0):(B&&(B=!1,!(I.style.borderColor="black")===A)&&!1===E&&!1===k&&!1===M&&!1===N&&!1===V&&a.enableDisableOkButton(!1),d.nanoSeconds=n)},Se=function(){var e;if(a.HOUR_12!==a.hourFormat)return!1;if(e=document.createElement("div"),ve())(le=t=e).id="ampmButton",t.textContent=d.amorpm.toUpperCase(),t.setAttribute("class","ampmBtns ampmBtnsForNewStyle");else{var t=e;if(t.style.display="inline-block",t.style.position="relative",t.style.top="-15px",(i=document.createElement("div")).textContent="AM",i.id="amButton",t.appendChild(i),(oe=document.createElement("div")).textContent="PM",oe.id="pmButton",t.appendChild(oe),d.amorpm==="am"){i.setAttribute("class","ampmBtns ampmBtnsPressed");oe.setAttribute("class","ampmBtns")}else if(d.amorpm==="pm"){i.setAttribute("class","ampmBtns");oe.setAttribute("class","ampmBtns ampmBtnsPressed")}}return a.HOUR_12===a.hourFormat&&12<=d.hours&&(d.hours=d.hours%12),e},be=function(e,t){var n,i;e=e.cloneNode(!1),(t=t.cloneNode(!1)).innerText=s.getText("TBID_DateTimePicker_Days"),n=r(!0,"daysBlock_Up"),(T=document.createElement("input")).id="daysBlock",T.setAttribute("type","number"),T.setAttribute("min",K),T.setAttribute("max",q),T.addEventListener("keydown",o,!1),T.addEventListener("keyup",R,!1),T.addEventListener("change",R,!1),T.setAttribute("value",d.days.toString()),T.setAttribute("class","timeBlockClass"),i=r(!1,"daysBlock_Down"),l(e,t,n,i,T),c.appendChild(e),u+=40,j(":")},Pe=function(e,t){var n,i;t.innerText=s.getText("TBID_DateTimePicker_Hours"),n=r(!0,"hoursBlock_Up"),w.id="hoursBlock",w.setAttribute("type","number"),a.hourFormat===a.HOUR_12?(w.setAttribute("min",1),d.hours=d.hours%12,0===d.hours&&(d.hours=12),w.setAttribute("max",12)):(w.setAttribute("min",a.isTimeSpan?-23:0),w.setAttribute("max",23)),w.setAttribute("value",d.hours.toString()),w.setAttribute("class","timeBlockClass"),i=r(!1,"hoursBlock_Down"),l(e,t,n,i,w),c.appendChild(e),w.addEventListener("keydown",o,!1),w.addEventListener("keyup",O,!1),w.addEventListener("change",O,!1),u+=40,j(":"),e=e.cloneNode(!1),(t=t.cloneNode(!1)).innerText=s.getText("TBID_DateTimePicker_Minute"),n=r(!0,"minutesBlock_Up"),W.id="minutesBlock",W.setAttribute("type","number"),W.setAttribute("min",a.isTimeSpan?-59:0),W.setAttribute("max",59),i=L(d.minutes,2),W.setAttribute("value",i),W.setAttribute("class","timeBlockClass"),i=r(!1,"minutesBlock_Down"),l(e,t,n,i,W),c.appendChild(e),W.addEventListener("keydown",o,!1),W.addEventListener("keyup",fe,!1),W.addEventListener("change",fe,!1),u+=40},ve=function(){return 17<=p||""===p},xe=function(e,t,n,i,o){o.className+=" timeBlockClassForNewStyle",n.className+=" upBtnsForNewStyle",i.className+=" downBtnsForNewStyle",e.appendChild(o),e.appendChild(n),e.appendChild(i),e.appendChild(t)},Te=function(e,t,n,i,o){e.appendChild(t),e.appendChild(n),e.appendChild(o),e.appendChild(i)},we=function(e,t){var n,i;j(":"),e=e.cloneNode(!1),(t=t.cloneNode(!1)).innerText=s.getText("TBID_DateTimePicker_Second"),n=r(!0,"secondsBlock_Up"),(G=document.createElement("input")).id="secondsBlock",G.setAttribute("type","number"),G.setAttribute("min",a.isTimeSpan?-59:0),G.setAttribute("max",59),i=L(d.seconds,2),G.setAttribute("value",i),G.setAttribute("class","timeBlockClass"),i=r(!1,"secondsBlock_Down"),l(e,t,n,i,G),c.appendChild(e),G.addEventListener("keydown",o,!1),G.addEventListener("keyup",z,!1),G.addEventListener("change",z,!1),u+=40},We=function(e,t){var n,i;j(","),e=e.cloneNode(!1),(t=t.cloneNode(!1)).innerText=s.getText("TBID_DateTimePicker_MilliSecond"),n=r(!0,"milliSecondsBlock_Up"),(D=document.createElement("input")).id="milliSecondsBlock",D.setAttribute("type","number"),D.setAttribute("min",a.isTimeSpan?-999:0),D.setAttribute("max",999),i=L(d.milliSeconds,3),D.setAttribute("value",i),D.setAttribute("class","timeBlockClass"),i=r(!1,"milliSecondsBlock_Down"),l(e,t,n,i,D),c.appendChild(e),D.addEventListener("keydown",o,!1),D.addEventListener("keyup",F,!1),D.addEventListener("change",F,!1),u+=40},Ge=function(e,t){var n,i;j(","),e=e.cloneNode(!1),(t=t.cloneNode(!1)).innerText=s.getText("TBID_DateTimePicker_MicroSecond"),n=r(!0,"microSecondsBlock_Up"),(H=document.createElement("input")).id="microSecondsBlock",H.setAttribute("type","number"),H.setAttribute("min",a.isTimeSpan?-999:0),H.setAttribute("max",999),H.setAttribute("value",d.microSeconds.toString()),H.setAttribute("class","timeBlockClass"),i=r(!1,"microSecondsBlock_Down"),l(e,t,n,i,H),c.appendChild(e),H.addEventListener("keydown",o,!1),H.addEventListener("keyup",_,!1),H.addEventListener("change",_,!1),u+=40},De=function(e,t){var n,i;j(","),e=e.cloneNode(!1),(t=t.cloneNode(!1)).innerText=s.getText("TBID_DateTimePicker_NanoSecond"),n=r(!0,"nanoSecondsBlock_Up"),(I=document.createElement("input")).id="nanoSecondsBlock",I.setAttribute("type","number"),I.setAttribute("min",a.isTimeSpan?-999:0),I.setAttribute("max",999),I.setAttribute("value",d.nanoSeconds.toString()),I.setAttribute("class","timeBlockClass"),i=r(!1,"nanoSecondsBlock_Down"),l(e,t,n,i,I),c.appendChild(e),I.addEventListener("keydown",o,!1),I.addEventListener("keyup",ye,!1),I.addEventListener("change",ye,!1),u+=40};this.initialize=function(e,t,n){var i,o,l;return a=e,s=t,d=(m=n)?a.endDateTimeObj:a.dateTimeObj,a.isTimeSpan&&((m?a.endDatePrecise:a.datePrecise).getTime()<0&&(0<d.seconds&&(d.seconds=d.seconds-60,d.minutes+=1),0<d.minutes&&(d.minutes=d.minutes-60,d.hours+=1),0<d.hours)&&(d.hours=d.hours-24,d.days+=1),d.days===this.maxNoOfDays&&(Z=!0,d.hours===ee)&&(C=!0,48===d.minutes)&&(g=!0,5===d.seconds)&&(y=!0,477===d.milliSeconds)&&(b=!0,d.microSeconds===ne)&&(v=!0,700===d.nanoSeconds)&&($=!0),d.days===this.minNoOfDays)&&(J=!0,d.hours===te)&&(h=!0,-48===d.minutes)&&(f=!0,-5===d.seconds)&&(S=!0,-477===d.milliSeconds)&&(P=!0,d.microSeconds===ie)&&(x=!0,-800===d.nanoSeconds)&&(Q=!0),17<=(p=a.getProjectVersion())||""===p?(u=52,e=document.createElement("div"),Y(),t=Math.max(a.getWidth(),u)-32,e.setAttribute("class","inputFieldBg"),e.style.left="16px",e.style.width=t+"px",c.appendChild(e),c.onmousedown=he,c.onmouseup=re,c):(u=32,n=U(null,"div",{id:"collapsibleTimeContainer"}),Y(),c.onmousedown=he,c.onmouseup=re,a.isTimeSpan||(t=U(n,null,{id:"collapseArea",class:"collapseButton"}),(e=U(null,"label",{id:"collapseArea",class:"collaspseAreaText"})).textContent=s.getText("TBID_DateTimePicker_Time"),(i=U(null,"svg",null,null,"http://www.w3.org/2000/svg")).setAttribute("width","10"),i.setAttribute("height","10"),(o=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttributeNS(null,"d","M 0 0 L 5 10 L 10 0 z"),o.setAttribute("id","collpasedButton"),i.appendChild(o),(l=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttributeNS(null,"d","M 0 0 L 0 10  L 10 5 z"),l.setAttribute("id","expandedButton"),l.style.display="none",i.appendChild(l),t.appendChild(i),t.appendChild(e),t.onmousedown=function(){X?(c.style.display="block",X=!1,o.style.display="block",l.style.display="none"):(c.style.display="none",X=!0,l.style.display="block",o.style.display="none")},n.appendChild(t)),n.appendChild(c),n)},this.setDay=function(){var e=+T.value;isNaN(e)?e=0:q<e?e=q:e<K&&(e=K),T.value=e,m?a.endDateTimeObj.days=e:d.days=e},this.toggleStartEndView=function(){d=m?a.endDateTimeObj:a.dateTimeObj},this.setHour=function(){var e=d.hours,e=parseInt(e);isNaN(e)?e=0:23<e?e=23:a.isTimeSpan?e<-23&&(e=-23):e<0&&(e=0),a.HOUR_12===a.hourFormat&&0===(e%=12)&&(e=12),w.value=e,d.hours=e},this.setMinute=function(){var e=d.minutes,e=parseInt(e);isNaN(e)?e=0:59<e?e=59:a.isTimeSpan?e<-59&&(e=-59):e<0&&(e=0),W.value=e,d.minutes=e},this.setSecond=function(){var e=d.seconds,e=parseInt(e);isNaN(e)?e=0:59<e?e=59:a.isTimeSpan?e<-59&&(e=-59):e<0&&(e=0),G.value=e,d.seconds=e},this.setMilliSeconds=function(){var e=d.milliSeconds,e=parseInt(e);isNaN(e)?e=0:999<e?e=999:a.isTimeSpan?e<-999&&(e=-999):e<0&&(e=0),D.value=e,d.milliSeconds=e},this.setMicroSeconds=function(){var e=d.microSeconds,e=parseInt(e);isNaN(e)?e=0:999<e?e=999:a.isTimeSpan?e<-999&&(e=-999):e<0&&(e=0),H.value=e,d.microSeconds=e},this.setNanoSeconds=function(){var e=d.nanoSeconds,e=parseInt(e);isNaN(e)?e=0:999<e?e=999:a.isTimeSpan?e<-999&&(e=-999):e<0&&(e=0),I.value=e,d.nanoSeconds=e},this.getTimeBlockWidth=function(){return u}},(PWC=PWC||{}).Components=PWC.Components||{},PWC.Components.DTP=PWC.Components.DTP||{},PWC.Components.DTP.OptionsField=function(){function d(e){(e=e.srcElement||e.target)&&"LI"===e.tagName&&(e=parseInt(e.id,10),t!==e)&&(u.updateDateAndTime(),u.setSelection(m.Name,e),C[e].style.backgroundColor="rgb(125, 205, 245)",t=e)}function c(e,t,n,i,o){var l,r=null,r=e?e.cloneNode():o?document.createElementNS(o,t):document.createElement(t);if(n)for(l in n)n.hasOwnProperty(l)&&r.setAttribute(l,n[l]);if(i)for(l in i)r.style[l]=i[l];return r}var u,m,p,C=[],h=!1,t=-1;this.initialize=function(e,t){u=e,e=c(null,"div",{id:"collapsible"+(m=t).Name+"Container"});var n,i,o,l,r,a,s=t.Name;if(C=[],(p=document.createElement("ul")).onmousedown=d,p.id=s+"Block",p.setAttribute("class","optionsList"),m.Items&&0<m.Items.length){for(r=m.Items.length,l=0;l<r;l++)(a=document.createElement("li")).id=l,a.textContent=m.Items[l].Name,p.appendChild(a),C.push(a);5<r&&(p.style.height="80px",p.style.overflowY="scroll")}return s=c(e,null,{id:"collapseArea",class:"collapseButton"}),(n=c(null,"label",{id:"collapseArea",class:"collaspseAreaText"})).textContent=t.Name,(t=c(null,"svg",null,null,"http://www.w3.org/2000/svg")).setAttribute("width","10"),t.setAttribute("height","10"),(i=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttributeNS(null,"d","M 0 0 L 5 10 L 10 0 z"),t.appendChild(i),(o=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttributeNS(null,"d","M 0 0 L 0 10  L 10 5 z"),o.style.display="none",t.appendChild(o),s.appendChild(t),s.appendChild(n),s.onmousedown=function(){h?(p.style.display="block",h=!1,i.style.display="block",o.style.display="none"):(p.style.display="none",h=!0,o.style.display="block",i.style.display="none")},e.appendChild(s),e.appendChild(p),e},this.clearSelection=function(){for(var e=0;e<C.length;e++)C[e].style.backgroundColor="",t=-1},this.setStyle=function(e){C[e].style.backgroundColor="rgb(125, 205, 245)"}};