/*! SIMATIC WINCC UA/WebUX 3.1.24 WinCC Unified PC Runtime {%version%}, Copyright (C) Siemens AG 2023. All Rights Reserved. */
var webRHCore;(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{Core:()=>Te,Dialogs:()=>H,HmiDatatypes:()=>k,HmiEnums:()=>O});const n=PWC.Lib;var o,r,i,a,s,c,l,d=e.n(n);const u=(o=d().Config.PropertyEnums,r=function(e,t){t.insertBefore(e,t.firstChild)},i=function(e){var t=d().Config.Properties,n=t.getProp(e,"Width"),o=t.getProp(e,"Height");e.svgWndBg=d().Canvas.Svg.createSvgElement("svg",{style:"position: absolute; display: block;",focusable:"false",width:n,height:o}),r(e.svgWndBg,e.domNode),e.domSvgDefs=d().Canvas.Svg.createSvgElement("defs",{appendTo:e.svgWndBg}),e.background.svgWndBgFillRect=d().Canvas.Svg.createSvgElement("rect",{width:"100%",height:"100%",fill:"none",appendTo:e.svgWndBg}),e.background.svgWndFillRect=d().Canvas.Svg.createSvgElement("rect",{width:"100%",height:"100%",fill:"none",appendTo:e.svgWndBg})},s=function(e){var t,n=d().Config.Properties;""!==(t=n.getProp(e,"BackGraphic"))&&null===e.background.svgBgImage?(a(e),e.background.svgBgImage=d().Canvas.Svg.createSvgElement("image",{preserveAspectRatio:"none"})):65536!==n.getProp(e,"BackFillPattern")&&(a(e),function(e){var t,n=d().Config.Properties,o=d().Canvas.Converters,r=d().HmiTypes.HmiObject;null!==e.background.svgBgPatternElement&&(e.background.svgBgPatternElement.parentNode.removeChild(e.background.svgBgPatternElement),e.background.svgBgPatternElement=null),null!==e.background.svgBgGradientElement&&(e.background.svgBgGradientElement.parentNode.removeChild(e.background.svgBgGradientElement),e.background.svgBgGradientElement=null),(t=n.getProp(e,"BackFillPattern",o.enumConverter.None,0))>=131072&&(t>=1048576?e.background.svgBgGradientElement=r.createSvgBgGradient(e,t):e.background.svgBgPatternElement=r.createSvgBgPattern(e,t))}(e)),""===t&&null!==e.background.svgBgImage&&(e.background.svgBgImage.parentNode.removeChild(e.background.svgBgImage),e.background.svgBgImage=null),function(e){var t,n=d().Config.Properties,r=d().Canvas.Converters;if(65536===n.getProp(e,"BackFillPattern"))e.domNode.style.pointerEvents="none",e.background.svgWndFillRect&&(e.background.svgWndFillRect.setAttribute("fill","none"),e.background.svgWndBgFillRect.setAttribute("fill","none")),e.background.svgScreenFillRect&&(e.background.svgScreenFillRect.setAttribute("fill","none"),e.background.svgScreenBgFillRect.setAttribute("fill","none")),e.container.isTopLevelScreenWindow&&w.updateLayout(e.core,"white");else{e.domNode.style.pointerEvents="visiblePainted";var i=n.getProp(e,"BackColor",r.enumConverter.Color);if(t=e.background.svgBgGradientElement?d().HmiTypes.Utils.mkUrl(e,"ID_ItemBgGradientElement"):e.background.svgBgPatternElement?d().HmiTypes.Utils.mkUrl(e,"ID_ItemBgPatternElement"):i,a(e),n.getPropRaw(e,"BackgroundFillMode")===o.HmiBackgroundFillMode.Window)e.background.svgBgPatternElement?(e.background.svgWndFillRect.setAttribute("fill",t),e.background.svgWndBgFillRect.setAttribute("fill",i)):(e.background.svgWndFillRect.setAttribute("fill","none"),e.background.svgWndBgFillRect.setAttribute("fill",t)),e.background.svgScreenFillRect&&(e.background.svgScreenFillRect.setAttribute("fill","none"),e.background.svgScreenBgFillRect.setAttribute("fill","none")),e.container.isTopLevelScreenWindow&&w.updateLayout(e.core,i);else{var s=n.getProp(e,"AlternateBackColor",r.enumConverter.Color);e.background.svgBgPatternElement?(e.background.svgScreenFillRect.setAttribute("fill",t),e.background.svgScreenBgFillRect.setAttribute("fill",i)):(e.background.svgScreenFillRect.setAttribute("fill","none"),e.background.svgScreenBgFillRect.setAttribute("fill",t)),e.background.svgWndFillRect.setAttribute("fill","none"),e.background.svgWndBgFillRect.setAttribute("fill",s),e.container.isTopLevelScreenWindow&&w.updateLayout(e.core,s)}}}(e)},l=function(e,t){var n,o=d().Config.Properties,r=d().Canvas.Converters;e.background.bgImageSize=t,e.background.imgHelper=null,e.isCleanedUp||(s(e),c(e),n=o.getProp(e,"BackGraphic",r.enumConverter.HRef),e.background.svgBgImage.setAttributeNS(d().Canvas.Svg.xlinkNS,"xlink:href",n))},{createBackground:function(){return{svgScreenFillRect:null,svgScreenBgFillRect:null,svgWndFillRect:null,svgWndBgFillRect:null,svgBgImage:null,svgBgPatternElement:null,svgBgGradientElement:null}},createBackgroundClone:function(e,t){return{svgScreenFillRect:null,svgScreenBgFillRect:null,svgWndFillRect:t.svgWndFillRect.evaluate(e,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue,svgWndBgFillRect:t.svgWndBgFillRect.evaluate(e,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue,svgBgImage:null,svgBgPatternElement:null,svgBgGradientElement:null}},createBackgroundElements:a=function(e){d().Config.Properties.getPropRaw(e,"BackgroundFillMode")===o.HmiBackgroundFillMode.Window?e.background.svgWndFillRect||i(e):e.background.svgScreenFillRect||(e.background.svgWndFillRect||i(e),function(e){e.background.svgScreenFillRect=d().Canvas.Svg.createSvgElement("rect",{width:"100%",height:"100%",fill:"none"}),r(e.background.svgScreenFillRect,e.svgScreenBg),e.background.svgScreenBgFillRect=d().Canvas.Svg.createSvgElement("rect",{width:"100%",height:"100%",fill:"none"}),r(e.background.svgScreenBgFillRect,e.svgScreenBg)}(e))},createRemoveSvgBgElementOrPicture:s,backGraphicAlignment:c=function(e){var t,n,r,i=d().Config.Properties,a="none";if(null!==e.background.svgBgImage&&e.background.bgImageSize){var s=e.background.bgImageSize,c={l:0,t:0,w:0,h:0},l={l:0,t:0,w:0,h:0},u=i.getProp(e,"BackGraphicStretchMode"),p=i.getProp(e,"BackgroundFillMode");if(p===o.HmiBackgroundFillMode.Window)l.w=e.container.control.width,l.h=e.container.control.height;else{var m=d().HmiTypes.HmiObject.getSize(e);l.w=m.w,l.h=m.h}switch(u){case o.HmiGraphicStretchMode.Tiled:p===o.HmiBackgroundFillMode.Window?(e.background.svgBgImagePattern=d().Canvas.Svg.createImagePattern(e,e.background.svgBgImagePattern,e.background.svgBgImage,e.background.svgWndFillRect),e.background.svgScreenFillRect&&(e.background.svgScreenFillRect.setAttribute("fill","none"),e.background.svgScreenBgFillRect.setAttribute("fill","none"))):e.background.svgBgImagePattern=d().Canvas.Svg.createImagePattern(e,e.background.svgBgImagePattern,e.background.svgBgImage,e.background.svgScreenFillRect),e.background.svgBgImagePattern.setAttribute("width",s.w),e.background.svgBgImagePattern.setAttribute("height",s.h),c.w=s.w,c.h=s.h;break;case o.HmiGraphicStretchMode.Fill:p===o.HmiBackgroundFillMode.Window?e.svgWndBg.insertBefore(e.background.svgBgImage,e.background.svgWndFillRect.nextSibling):e.svgScreenBg.insertBefore(e.background.svgBgImage,e.background.svgScreenFillRect.nextSibling),c=l;break;case o.HmiGraphicStretchMode.Uniform:p===o.HmiBackgroundFillMode.Window?e.svgWndBg.insertBefore(e.background.svgBgImage,e.background.svgWndFillRect.nextSibling):e.svgScreenBg.insertBefore(e.background.svgBgImage,e.background.svgScreenFillRect.nextSibling),t=(l.w-s.w)/s.w,n=(l.h-s.h)/s.h,t<=0&&n>=0||t<=0&&n<=0&&Math.abs(t)>=Math.abs(n)||t>0&&n>0&&Math.abs(t)<=Math.abs(n)?(r=l.w/s.w,c.l=l.l,c.w=l.w,c.h=s.h*r,c.t=l.t+(l.h-c.h)/2):(r=l.h/s.h,c.t=l.t,c.h=l.h,c.w=s.w*r,c.l=l.l+(l.w-c.w)/2);break;case o.HmiGraphicStretchMode.UniformToFill:p===o.HmiBackgroundFillMode.Window?e.svgWndBg.insertBefore(e.background.svgBgImage,e.background.svgWndFillRect.nextSibling):e.svgScreenBg.insertBefore(e.background.svgBgImage,e.background.svgScreenFillRect.nextSibling),t=(l.w-s.w)/s.w,n=(l.h-s.h)/s.h,t>=0&&n<=0||t>=0&&n>=0&&Math.abs(t)>=Math.abs(n)||t<0&&n<0&&Math.abs(t)<=Math.abs(n)?(r=l.w/s.w,c.l=l.l,c.w=l.w,c.h=s.h*r,c.t=l.t+(l.h-c.h)/2):(r=l.h/s.h,c.t=l.t,c.h=l.h,c.w=s.w*r,c.l=l.l+(l.w-c.w)/2);break;default:case o.HmiGraphicStretchMode.None:p===o.HmiBackgroundFillMode.Window?e.svgWndBg.insertBefore(e.background.svgBgImage,e.background.svgWndFillRect.nextSibling):e.svgScreenBg.insertBefore(e.background.svgBgImage,e.background.svgScreenFillRect.nextSibling),c.l=(l.w-s.w)/2,c.t=(l.h-s.h)/2,c.w=s.w,c.h=s.h,a="xMinYMin"}e.background.svgBgImage.setAttribute("preserveAspectRatio",a),e.background.svgBgImage.setAttribute("x",c.l),e.background.svgBgImage.setAttribute("y",c.t),e.background.svgBgImage.setAttribute("width",c.w),e.background.svgBgImage.setAttribute("height",c.h)}},getBgImageSize:function(e){var t=d().Config.Properties.getProp(e,"BackGraphic");e.background.imgHelper&&(e.background.imgHelper.cleanUp(),e.background.imgHelper=null),""!==t&&(e.background.imgHelper=new(d().Canvas.ImageHelper),e.background.imgHelper.loadImage(e,t,l))},updateSize:function(e,t,n){e.svgWndBg&&(e.svgWndBg.setAttribute("width",t),e.svgWndBg.setAttribute("height",n))}});var p={createTabOrder:function(e){return{type:e,lastSelectedItem:null,tabItems:[]}},addItem:function(e,t){var n=d().Config.Properties.getProp(t,e.type);n>0&&(e.tabItems[n]=t)},removeItem:function(e,t){var n=d().Config.Properties.getProp(t,e.type);n>0&&(e.tabItems[n]=null)},gotoFirst:function(e){var t,n,o=e.tabItems.length;for(t=1;t<o;t++)if(n=e.tabItems[t],d().HmiTypes.HmiObject.canActivate(n))return e.lastSelectedItem=n,n;return null},gotoNext:function(e){var t,n,o,r=d().Config.Properties,i=e.tabItems.length,a=!0;if(!e.lastSelectedItem)return this.gotoFirst(e);for(t=(n=r.getProp(e.lastSelectedItem,e.type))+1;;t++){if(t>=i){if(!a)return null;t=0,a=!1}if(o=e.tabItems[t],d().HmiTypes.HmiObject.canActivate(o))return e.lastSelectedItem=o,o;if(t===n)return null}},gotoPrev:function(e){var t,n,o,r=d().Config.Properties,i=e.tabItems.length;if(!e.lastSelectedItem)return this.gotoFirst(e);for(t=(n=r.getProp(e.lastSelectedItem,e.type))-1;t!==n;t--)if(t<0&&(t=i-1),o=e.tabItems[t],d().HmiTypes.HmiObject.canActivate(o))return e.lastSelectedItem=o,o;return null},gotoObject:function(e,t){var n,o,r=d().Config.Properties;if(t&&(n=r.getPropRaw(t,e.type,0,0))>0&&n<e.tabItems.length)if((o=e.tabItems[n])===t){if(d().HmiTypes.HmiObject.canActivate(o))return e.lastSelectedItem=o,!0}else d().Debug.consolLog(d().Debug.enumTraceMode.Error,"PWC.Lib.HmiTypes.TabOrder.gotoObject() invalid index: "+n);return!1}};const m=p,g=!!window.chrome;let h;var f=function(){var e,t,n=d().Config.PropertyEnums,o=u,r={lastPanX:0,lastPanY:0,lastZoomFactor:1,scrollInfo:null},i={Enabled:{func:["_enableItems"]},BackFillPattern:{func:["_BgPictGradient"]},BackColor:{func:["_BgPictGradient"]},AlternateBackColor:{func:["_BgPictGradient"]},Width:{gc:"None",func:["_resizeScreen"],svg:[{si:"svgScreenBg",sp:"width"}]},Height:{gc:"None",func:["_resizeScreen"],svg:[{si:"svgScreenBg",sp:"height"}]},OffsetLeft:{func:["_resizeScreen"]},OffsetTop:{func:["_resizeScreen"]},HorizontalAlignment:{func:["_adaptToScreenOrWindow"]},VerticalAlignment:{func:["_adaptToScreenOrWindow"]},BackGraphic:{func:["_getBgImageSize"]},BackGraphicStretchMode:{func:["_BackGraphicAlignment"]},BackgroundFillMode:{func:["_BgPictGradient","_BackGraphicAlignment"]}},a=(e=0,t=0,{createScreenID:function(n){return e++,e=n.props.ElementID||e,t=0,d().HmiTypes.Utils.idToRTOID(e)},createItemID:function(n){return t++,t=n.props.ElementID||t,d().HmiTypes.Utils.idToRTOID(e,t)}}),s={useCloning:d().Settings.useCloning,blueprint:null,expressions:null},c=function(e){var t=e.items;if(t)for(var n=t.length,o=0;o<n;o+=1){var r=t[o];r.templateInstance&&r.templateInstance.update(0,!0),r.props.Type.includes("ScreenWindow")&&r.screen&&c(r.screen)}},l=function(e,t){t.core=e,t.rtoid=t.rtoid||a.createScreenID(t),t.items=t.items||[],t.background=o.createBackground(),t.operable=!0,t.handler=d().HmiTypes.HmiObjectTypes.getHandler("Screen"),t.layersInfo=d().HmiTypes.LayersInfo(t),t.flashingCount=0,t.flashingCountCustom=0,t.offsetLeft=0,t.offsetTop=0,t.loaded=!1,t.fonts&&function(e){const t=e.fonts,n=Object.keys(t),o=n.length;if(document.fonts&&o){const r=e.gfxWebLib.connection.getImageUrl(),i=function(e){d().Debug.consolLog(d().Debug.enumTraceMode.Info,e.family+" font loaded successfully.")},a=function(){d().Debug.consolLog(d().Debug.enumTraceMode.Error,"failed to load font.")};for(let e=0;e<o;e++){const o=n[e],s=t[o];if(document.fonts.check(`12px "${o}"`))continue;const c=encodeURI(`url(${r+s})`),l=new window.FontFace(o,c);l.load().then(i,a),document.fonts.add(l)}e.fontPending=!0,document.fonts.ready.then((function(){d().Debug.consolLog(d().Debug.enumTraceMode.Info,"FontFaces loaded."),c(e),e.fontPending=!1,e.activatedCalled&&!e.isCleanedUp&&e.handler.onDocumentActivated(e)}))}}(t)},p=function(e){var t=d().Canvas.Dom.createDomElement("div",{id:"ID_SVG_Container",style:"position: absolute; pointer-events: none; left: 0px; top: 0px;",appendTo:e});return d().Canvas.Svg.createSvgElement("svg",{style:"position: absolute; pointer-events: none; overflow: visible; display: block;",focusable:"false",appendTo:t})},f=function(e,t){return"svg"===t?(e.domSvgItems||(e.domSvgItems=p(e.domHtmlItems)),e.domSvgItems):(e.domSvgItems=null,e.domHtmlItems)},v=function(e){var t,n,o=d().Config.Properties;return e.domNode=d().Canvas.Dom.createDomElement("div",{"data-rtoid":e.rtoid,"data-tif-id":e.props.Name||"",style:"pointer-events: visiblePainted; backface-visibility: hidden;"}),"FaceplateType"===e.props.Type&&e.domNode.style.removeProperty("backface-visibility"),t=o.getProp(e,"Width"),n=o.getProp(e,"Height"),e.domHtmlItems=d().Canvas.Dom.createDomElement("div",{style:"position:absolute; overflow:hidden; left:0px; top:0px; width:"+t+"px; height:"+n+"px;",appendTo:e.domNode}),e.svgScreenBg=f(e,"svg"),e},y=function(e){if(!s.blueprint){var t=v({core:e.core,container:{props:{Type:"ScreenWindow"}},rtoid:"blueprint_screen",gfxWebLib:e.gfxWebLib,handler:e.handler,background:e.background,props:{Type:"Screen"}});d().HmiTypes.HmiObject.initAllAttributes(t),s.blueprint=t.domNode,t.domNode=null,n=new XPathEvaluator,i=function(e){return{svg:"http://www.w3.org/2000/svg",html:"http://www.w3.org/1999/xhtml"}[e]||null},(r={}).svgWndBg=n.createExpression("svg:svg[1]",i),r.domSvgDefs=n.createExpression("svg:defs[1]",i),r.svgWndFillRect=n.createExpression("svg:rect[2]",i),r.svgWndBgFillRect=n.createExpression("svg:rect[1]",i),r.HtmlItems=n.createExpression("html:div[1]",i),r.SvgItems=n.createExpression("html:div[1]/svg:svg[1]",i),s.expressions=r}var n,r,i;return function(e){e.domNode=s.blueprint.cloneNode(!0),d().Canvas.Svg.augmentSvgScreenItemNode(e,{},e.domNode);var t=s.expressions;e.svgWndBg=t.svgWndBg.evaluate(e.domNode,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue,e.domSvgDefs=t.domSvgDefs.evaluate(e.svgWndBg,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue,e.domHtmlItems=t.HtmlItems.evaluate(e.domNode,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue,e.domSvgItems=t.SvgItems.evaluate(e.domHtmlItems,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue,e.svgScreenBg=e.domSvgItems}(e),e.background=o.createBackgroundClone(e.svgWndBg,s.expressions),"FaceplateType"===e.props.Type&&e.domNode.style.removeProperty("backface-visibility"),e.isCloning=!0,e.props.Enabled=d().Config.Properties.getPropRaw(e,"Enabled"),e.handler.onChanged(e,e.props),e.isCloning=!1,e.domNode},b=function(e){var t=d().Config.Properties.getProp(e.container,"CurrentZoomFactor");return Math.min(d().Settings.maxZoomFactor||8,Math.max(d().Settings.minZoomFactor||.01,t))},S=function(e,t){var r,i,a,s=d().Config.Properties,c=e.screen,l={x:0,y:0};if(t||!c)return;i={w:e.control.width,h:e.control.height},a={w:s.getPropRaw(c,"Width"),h:s.getPropRaw(c,"Height")};const u=s.getProp(e,"Adaption",0,n.HmiScreenWindowAdaption.None);if(u===n.HmiScreenWindowAdaption.ScreenToWindow){var p=i.w/a.w,m=i.h/a.h;r=Math.min(p,m)||1,o.updateSize(c,i.w,i.h)}else if(u!==n.HmiScreenWindowAdaption.WindowToScreen||e.isTopLevelScreenWindow){r=b(c),l=function(e,t){const o=d().Config.Properties,r={x:0,y:0},i=b(e),a=o.getProp(e,"HorizontalAlignment",0,n.HmiHorizontalAlignment.Left);if(a!==n.HmiHorizontalAlignment.Left){const s=i*o.getPropRaw(e,"Width");if(s<t.w)switch(a){case n.HmiHorizontalAlignment.Center:r.x=Math.max(0,Math.round((t.w-s)/2));break;case n.HmiHorizontalAlignment.Right:r.x=Math.max(0,t.w-s)}}else r.x=Math.max(0,o.getProp(e,"OffsetLeft",0,0));const s=o.getProp(e,"VerticalAlignment",0,n.HmiVerticalAlignment.Top);if(s!==n.HmiVerticalAlignment.Top){const a=i*o.getPropRaw(e,"Height");if(a<t.h)switch(s){case n.HmiVerticalAlignment.Center:r.y=Math.max(0,Math.round((t.h-a)/2));break;case n.HmiVerticalAlignment.Bottom:r.y=Math.max(0,t.h-a)}}else r.y=Math.max(0,o.getProp(e,"OffsetTop",0,0));return r}(c,i);let e=Math.max(a.w*r,i.w);const t=s.getProp(c,"HorizontalAlignment",0,n.HmiHorizontalAlignment.Left);l.x&&t===n.HmiHorizontalAlignment.Left&&(e=Math.max(l.x+a.w*r,i.w));let u=Math.max(a.h*r,i.h);const p=s.getProp(c,"VerticalAlignment",0,n.HmiVerticalAlignment.Top);l.y&&p===n.HmiVerticalAlignment.Top&&(u=Math.max(l.y+a.h*r,i.h)),o.updateSize(c,e,u)}else r=b(c),o.updateSize(c,a.w*r,a.h*r);var f;d().Canvas.Dom.setZoom(c.domHtmlItems,r),c.adaptScreenToWindowFactor&&r!==c.adaptScreenToWindowFactor&&(f=c.domHtmlItems,g&&(f.querySelectorAll("text").forEach((e=>{if("text"===e.tagName){const t=e.getAttribute("x");t&&e.setAttribute("x",t)}})),h&&clearTimeout(h),document.body.style.opacity=.99,h=setTimeout((()=>{document.body.style.opacity=1}),100))),c.adaptScreenToWindowFactor=r,c.loaded&&c.container.handler.screenResized&&c.container.handler.screenResized(c.container,l,r),function(e,t){e.offsetLeft!==t.x&&(e.domHtmlItems.style.left=t.x+"px",e.offsetLeft=t.x),e.offsetTop!==t.y&&(e.domHtmlItems.style.top=t.y+"px",e.offsetTop=t.y)}(c,l),o.backGraphicAlignment(c)},T=function(e,t){const n=e.length;if(n)for(let o=0;o<n;o++){const n=e[o],r=n.props.ContainedItems;if(r){if(r.filter((e=>e===t.props.ElementID)).length)return n}}return null},w=function(e){var t=e.container.control.domParent;t&&e.activated&&(t.contains(e.domNode)||t.appendChild(e.domNode))},I=function(e){e.domNode&&(e.domNode.parentNode&&e.domNode.parentNode.removeChild(e.domNode),e.domNode=null)},C=function(e,t,n,o){if(e.flashing){const i=e.flashing.find((e=>e.item===t&&e.part===o));if(i)for(var r in n)if(n.hasOwnProperty(r)){const e=i.props[r];e&&(e.CurrentValue=n[r])}}},D=function(e,t){if(e)for(var n=e.length,o=0;o<n;o+=1){var r=e[o];if(r.rtoid===t)return r}return d().Debug.consolLog(d().Debug.enumTraceMode.Warning,"HmiScreen.getScreenItemByRtoid() Warning: Unknown item rtoid: "+t),null},E=function(e,t){return e.rtoid===t?e:D(e.items,t)},H=function(e,t){t.gfxWebLib&&(d().HmiTypes.HmiObject.onCleanUp(t),d().HmiTypes.Utils.isScreenContainer(t)&&(e.core.SOMManager.removeScreenWindow(t),d().Settings.scrollPopups&&"PopupScreenWindow"===t.props.Type&&e.core.toplevelWindow.control.handler.removePopup(e.core.toplevelWindow,t)))},O=function(e){var t=e.items;window.setTimeout((function(){M(e,t,0,50,100)}),100)},M=function(e,t,n,o,r){var i,a,s=Date.now();if(t)for(a=t.length,i=n;i<=o&&i<a;i+=1){var c=t[i];H(e,c)}if(i>=a)t.length=0;else{var l=function(e,t){return Math.round(100*t/e)}(Date.now()-s,o-n+1);o=(n=i)+l,window.setTimeout((function(){M(e,t,n,o,r)}),r)}},W=function(e,t){var n,o,r,i;if(D(e.items,t.rtoid))d().Debug.consolLog(d().Debug.enumTraceMode.Error,"HmiScreen._addItemToScreen() item already exists: "+t.rtoid);else{if("TopLevelScreenWindow"===(r=d().HmiTypes.HmiObject.getHandlerType(t)))return e.core.toplevelWindow.rtoid=t.rtoid,t.props.WindowFlags=0,void P.onChanged(e.core.toplevelWindow,t.props);d().HmiTypes.HmiObjectTypes.isTypeSupported(r)?(n=(i=d().HmiTypes.HmiObjectTypes.getHandler(r)).DOM_TYPE||"svg",t.domParent=f(e,n),t.handler=i,t.gfxWebLib=e.gfxWebLib,t.container=e,"PopupScreenWindow"===t.props.Type&&function(e,t){e!==e.core.popupScreen&&(t.domParent=e.core.domNode,t.container=e.core.popupScreen,t.popupContainer=e)}(e,t),o=i.onInit(t),d().HmiTypes.Utils.isScreenContainer(t)&&(e.core.SOMManager.addScreenWindow(t),"PopupScreenWindow"===t.props.Type&&(o=function(e,t){var n=d().Config.Properties;return t.isPopupScreenWindow=!0,t.control.handler.desktopOverlay=P.desktopOverlay,d().Settings.zoomOnPoint&&(t.domNode.style.position="fixed"),n.getProp(t,"IsModal",0,!1)?(t.domNodeModal=d().Canvas.Dom.createDomElement("div",{style:"position:fixed; left:0px; top:0px; width:100%; height:100%; background-color:rgba( 0, 0, 0, 0.75 );"}),t.domNodeModal.appendChild(t.domNode),t.domNodeModal):t.domNode}(0,t),d().Settings.scrollPopups&&e.core.toplevelWindow.control.handler.addPopup(e.core.toplevelWindow,t))),t.domParent.appendChild(o),e.items.push(t),void 0!==t.pos&&B(e,t,t.pos,e.items.length-1),m.addItem(e.tabOrder,t),t.control&&(d().HmiTypes.Advanced.HmiWindowManager.register(t.container.winManager,t),d().HmiTypes.Advanced.HmiWindowManager.bringToFront(t.container.winManager,t))):d().Debug.consolLog(d().Debug.enumTraceMode.Error,"HmiScreen._addItemToScreen() Unsupported item: "+t.props.Type)}},A=function(e,t){var n,o=D(e.items,t.rtoid);o&&(o.control&&d().HmiTypes.Advanced.HmiWindowManager.unregister(o.container.winManager,o),H(e,o),o.domParent.contains(o.domNode)&&o.domParent.removeChild(o.domNode),m.removeItem(e.tabOrder,o),(n=e.items.indexOf(o))>-1&&e.items.splice(n,1),e.core.Interaction.Selection.getActiveItem()===o&&e.core.Interaction.Selection.initializeActiveItem())},N=function(e){for(var t=null,n=[],o=e.domHtmlItems.firstChild;null!==o;o=o.nextSibling)"ID_SVG_Container"===o.id?t?t.push(o):t=[o]:t&&(t.length>1&&n.push(t),t=null);if(n.length>0)for(const e of n){const t=e[0].firstChild;for(let n=1;n<e.length;n++){const o=e[n];o.parentNode.removeChild(o);const r=o.firstChild;for(;r.children.length>0;){const e=r.children[0];t.appendChild(e);const n=e?.TifProperties?.item;n&&(n.domParent=t)}}}},B=function(e,t,n,o){if(n!==o&&n<e.items.length){var r=e.items[n];if(0===n)r.handler.DOM_TYPE===t.handler.DOM_TYPE?(t.domParent=r.domParent,r.domParent.insertBefore(t.domNode,r.domNode)):"svg"===t.handler.DOM_TYPE?(t.domParent=p(e.domHtmlItems),t.domParent.appendChild(t.domNode),e.domHtmlItems.insertBefore(t.domParent.parentNode,r.domNode)):(t.domParent=e.domHtmlItems,t.domParent.insertBefore(t.domNode,r.domParent.parentNode));else if(n===e.items.length-1)r.handler.DOM_TYPE===t.handler.DOM_TYPE?(t.domParent=r.domParent,r.domParent.appendChild(t.domNode)):(t.domParent=f(e,t.handler.DOM_TYPE),t.domParent.appendChild(t.domNode));else if(n>o)if(r.handler.DOM_TYPE===t.handler.DOM_TYPE)"svg"===t.handler.DOM_TYPE?(t.domParent=r.domParent,r.domParent.insertBefore(t.domNode,r.domNode.nextSibling)):(t.domParent=e.domHtmlItems,t.domParent.insertBefore(t.domNode,r.domNode.nextSibling));else{var i=e.items[n+1];if(i.handler.DOM_TYPE===t.handler.DOM_TYPE)t.domParent=i.domParent,i.domParent.insertBefore(t.domNode,i.domNode);else if("svg"===t.handler.DOM_TYPE)t.domParent=p(e.domHtmlItems),t.domParent.appendChild(t.domNode),e.domHtmlItems.insertBefore(t.domParent.parentNode,r.domNode.nextSibling);else if(r.domNode===r.domParent.lastChild)t.domParent=e.domHtmlItems,t.domParent.insertBefore(t.domNode,r.domParent.parentNode.nextSibling);else{const o=p(e.domHtmlItems);e.domHtmlItems.insertBefore(o.parentNode,r.domParent.parentNode.nextSibling);for(let t=n+1;t<e.items.length;t++){let n=e.items[t];if("svg"!==n.handler.DOM_TYPE)break;n.domParent=o,o.appendChild(n.domNode)}t.domParent=e.domHtmlItems,t.domParent.insertBefore(t.domNode,o.parentNode)}}else if(r.handler.DOM_TYPE===t.handler.DOM_TYPE)t.domParent=r.domParent,r.domParent.insertBefore(t.domNode,r.domNode);else{var a=e.items[n-1];if(a.handler.DOM_TYPE===t.handler.DOM_TYPE)t.domParent=a.domParent,a.domParent.insertBefore(t.domNode,a.domNode.nextSibling);else if("svg"===t.handler.DOM_TYPE)t.domParent=p(e.domHtmlItems),t.domParent.appendChild(t.domNode),e.domHtmlItems.insertBefore(t.domParent.parentNode,r.domNode);else if(r.domNode===r.domParent.firstChild)t.domParent=e.domHtmlItems,t.domParent.insertBefore(t.domNode,r.domParent.parentNode);else{const o=p(e.domHtmlItems);e.domHtmlItems.insertBefore(o.parentNode,r.domParent.parentNode.nextSibling);for(let t=n;t<e.items.length;t++){let n=e.items[t];if("svg"!==n.handler.DOM_TYPE)break;n.domParent=o,o.appendChild(n.domNode)}t.domParent=e.domHtmlItems,t.domParent.insertBefore(t.domNode,o.parentNode)}}e.items.splice(n,0,e.items.splice(o,1)[0])}},k=function(e,t){var n=D(e.items,t.rtoid);n&&n.handler&&n.handler.onCreatePart&&n.handler.onCreatePart(n,t.part,t.props)},L=function(e,t){var n=D(e.items,t.rtoid);n&&n.handler&&n.handler.onDeletePart&&n.handler.onDeletePart(n,t.part)},x=function(e,t){var n=D(e.items,t.rtoid);n&&n.handler&&n.handler.onMovePart&&n.handler.onMovePart(n,t.part,t.pos)},F=function(e){for(var t=d().Config.Properties,n=e.items.length,o=0;o<n;o+=1){var r=e.items[o];r.handler&&t.getProp(r,"Visible")&&(r.handler.onChanged(r,{Visible:!0}),"FaceplateContainer"===r.props.Type&&r.control.handler.updateVisibility(r))}},R=function(e){if(0===e.controlsCache.length)for(var t=e.items.length,n=0;n<t;n+=1){var o=e.items[n];o.handler&&o.handler.onScreenItemsInitialized&&o.handler.onScreenItemsInitialized(o)}},_=function(e,t,n){try{e.handler.onChanged(e,t,n)}catch(t){d().Debug.traceErr(t,"Screen:_tryUpdate()",e)}},U=function(e){var t=e.dirtyList;if(t){for(var n=t.length,o=0;o<n;o+=1){var r=t[o];_(e,r.props,r.part)}e.hasFocus&&(d().HmiTypes.HmiObject.clearSelectionProps(e),d().HmiTypes.HmiObject.setSelectionProps(e)),e.dirtyList=null}},z=function(e){var t=e.control?e.control.handler:e.handler;if(t&&t.onRedraw)try{t.onRedraw(e)}catch(t){d().Debug.traceErr(t,"Screen:_redrawControl()",e)}},j=function(e){try{e.templateInstance&&e.templateInstance.update()}catch(t){d().Debug.traceErr(t,"Screen:_redrawTemplate()",e)}},Y=function(e,t){const n=t.deltaX-r.lastPanX;n&&(e.container.handler.onPan(e.container,n,!0),r.lastPanX=t.deltaX);const o=t.deltaY-r.lastPanY;o&&(e.container.handler.onPan(e.container,o,!1),r.lastPanY=t.deltaY)},V={animate:function(e){var t=0,n=Date.now(),o=function(){var r=(Date.now()-n)/e.duration;r>1&&(r=1);var i=r-t;t=r,e.step(i)&&1!==r?window.requestAnimationFrame(o):"function"==typeof e.complete&&e.complete()};window.requestAnimationFrame(o)},momentumScroll:function(e,t){return this.animate({duration:t.duration,complete:t.complete,step:function(n){var o=e.container;if(o){const e=(n=Math.min(.1,n))*t.size;if(o.handler.onPan(o,e,t.direction))return t.running}}}),t}},G=function(e){if(!e||e.hammertime)return;var t=d().Config.Properties;e.hammertime=new Hammer.Manager(e.domNode,{touchAction:"none"}),e.hammertime.add(new Hammer.Pan({direction:Hammer.DIRECTION_ALL,threshold:5})),e.hammertime.add(new Hammer.Swipe({velocity:.1,threshold:8}).recognizeWith(e.hammertime.get("pan"))),e.hammertime.add(new Hammer.Pinch({threshold:0,enable:!0})),e.hammertime.on("pinchstart",(function(o){var i=e.container;t.getProp(i,"InteractiveZooming")&&t.getProp(i,"Adaption")!==n.HmiScreenWindowAdaption.ScreenToWindow&&(e.handler.lockGesture(e,e.hammertime),r.lastZoomFactor=b(e),r.lastPanX=r.lastPanY=0)}));const o=d().HmiTypes.Utils;e.hammertime.on("pinch",o.throttle((o=>{var i=e.container;if(t.getProp(i,"InteractiveZooming")&&t.getProp(i,"Adaption")!==n.HmiScreenWindowAdaption.ScreenToWindow){var a={};e.core.Interaction.getRelEventPosInScreenAndItem({x:o.center.x,y:o.center.y},i,{},a),a.x-=i.control.left,a.y-=i.control.top,e.container.handler.onPinchZoom(i,r.lastZoomFactor*o.scale,a),Y(e,o)}}),160)),e.hammertime.on("panstart",(function(t){r.lastPanX=r.lastPanY=0,e.container.handler.isScreenMoveable(e.container,t.deltaX,t.deltaY)&&e.handler.lockGesture(e,e.hammertime)})),e.hammertime.on("pan",o.throttle((t=>{Y(e,t)}),60)),e.hammertime.on("swipe",(function(t){r.scrollInfo=V.momentumScroll(e,{running:!0,duration:1e3,direction:t.offsetDirection&Hammer.DIRECTION_HORIZONTAL,size:1e3*t.velocity})})),e.hammertime.on("hammer.input",(function(e){e.eventType===Hammer.INPUT_START&&r.scrollInfo&&(r.scrollInfo.running=!1,r.scrollInfo=null)}))};return{DISABLE_SETSELECTIONPROPS:!0,onCurrentLanguage:function(e,t){var n=e.items;if(n)for(var o=n.length,r=0;r<o;r+=1){var i=n[r],a=i.handler;if(a&&a.onCurrentLanguage)try{a.onCurrentLanguage(i,t)}catch(e){d().Debug.traceErr(e,"Exception in HmiScreen.onCurrentLanguage() item type: "+i.props.Type)}}},onDocumentChanged:function(e,t){var n=d().Canvas.Pattern;t.container.handler.onScreenChangedPre&&t.container.handler.onScreenChangedPre(t.container),l(e,t),s.useCloning?y(t):(v(t),d().HmiTypes.HmiObject.addTifLibExpandoProps(t,t.domNode),d().HmiTypes.HmiObject.initAllAttributes(t)),t.container.isTopLevelScreenWindow&&(o.createBackgroundElements(t),n.createScreenHostedPatterns(t),t.container.control.handler.desktopOverlay(t.container)),t.container.control.handler.onResized(t.container);try{!function(e){var t,n,o,r,i,s,c,l,u=0,p=[];for(e.tabOrder=m.createTabOrder("TabIndex"),e.winManager=d().HmiTypes.Advanced.HmiWindowManager.createManager(),e.controlsCache=[],n=e.items.length,t=0;t<n;t+=1)o=e.items[t],i=d().HmiTypes.HmiObject.getHandlerType(o),d().HmiTypes.HmiObjectTypes.isTypeSupported(i)?(s=d().HmiTypes.HmiObjectTypes.getHandler(i,o),o.handler=s,o.gfxWebLib=e.gfxWebLib,o.container=e,o.rtoid=o.rtoid||a.createItemID(o),"Group"===o.props.Type&&p.push(o),l=T(p,o),o.domParent=l?l.handler.addItem(l,o):f(e,s.DOM_TYPE||"svg"),(r=s.onInit(o))&&o.domParent.appendChild(r),m.addItem(e.tabOrder,o),(c=d().HmiTypes.Utils.isScreenContainer(o))&&e.core.SOMManager.addScreenWindow(o),o.control&&(d().HmiTypes.Advanced.HmiWindowManager.register(o.container.winManager,o),o.control.initialized||c||e.controlsCache.push(o.rtoid))):(d().Debug.consolLog(d().Debug.enumTraceMode.Error,"HmiScreen.LoadItems() Unsupported item: "+o.props.Type),u+=1);m.gotoFirst(e.tabOrder),d().HmiTypes.Advanced.HmiWindowManager.bringAlwaysOnTop(e.winManager),R(e),0!==u&&d().Debug.consolLog(d().Debug.enumTraceMode.Error,"HmiScreen.LoadItems() Unsupported items: "+u+" of "+e.items.length.toString())}(t)}catch(e){d().Debug.traceErr(e,"HmiScreen.LoadItems()",t)}t.loaded=!0,!d().Settings.zoomOnPoint&&t.container.isTopLevelScreenWindow||!t.container.handler.onScreenChanged||t.container.handler.onScreenChanged(t.container),"FaceplateContainer"!==t.container.props.Type&&e.Notifier.onScreenLoaded(t.rtoid),d().Settings.zoomOnPoint&&window.Hammer&&t.container.handler.isScreenMoveableInWindow(t.container)&&G(t)},onDocumentActivated:function(e){if(e.activatedCalled=!0,e.activated||e.fontPending)e.activated&&d().Debug.consolLog(d().Debug.enumTraceMode.Warning,"HmiScreen.onDocumentActivated() Screen is already activated: "+e.rtoid);else if(function(e){var t=d().Config.Properties,n=0;if(e.flashing){for(var o=e.flashing.length,r=0;r<o;r+=1){var i=e.flashing[r],a=i.item||E(e,i.rtoid);if(a){i.item=a;var s=i.props;for(var c in s)if(s.hasOwnProperty(c)){var l=s[c];if(i.part){var u=t.getPart(a,i.part);l.CurrentValue=t.getPropPart(u,u.Type,c)}else l.CurrentValue=t.getProp(a,c);l.Active&&(n=Math.max(n,l.Rate),e.flashingCount+=1)}}}e.flashingCount&&e.core.Flashing.startFlashing(n)}}(e),e.activated=!0,w(e),e.container.isTopLevelScreenWindow&&e.core){var t=e.core.domNode;t!==document.activeElement&&t.focus();var n=e.tabOrder.lastSelectedItem||e;e.core.Interaction.Selection.getActiveItem()!==n&&e.core.Interaction.Selection.initializeActiveItem(n)}},onInitializedControl:function(e,t){var n=e.controlsCache.indexOf(t.rtoid);n>-1&&(e.controlsCache.splice(n,1),R(e))},onObjectInitialized:function(e,t){t.items&&t.items.length&&function(e,t){for(var n=t.length,o=0;o<n;o+=1){var r=t[o],i=E(e,r.rtoid);if(i)try{C(e,i,r.props,r.part),void 0!==i.handler.onChanged?i.handler.onChanged(i,r.props,r.part):d().Debug.consolLog(d().Debug.enumTraceMode.Error,"HmiScreen._onScreenItemsInitialized() Error: itemHandler does not support onChanged() type: "+i.props.Type)}catch(t){d().Debug.traceErr(t,"HmiScreen._onScreenItemsInitialized() type: "+i.props.Type+" name: "+i.props.Name,e)}}}(e,t.items)},onObjectChanged:function(e,t){t.items&&t.items.length&&function(e,t){var n,o,r,i,a=t.length;function s(e,t){for(var n=e.length,o=0;o<n;o+=1){var r=e[o];if(r.part===t)return r}}for(n=0;n<a;n+=1)i=t[n],(o=E(e,i.rtoid))&&(C(e,o,i.props,i.part),o.dirtyList?(r=s(o.dirtyList,i.part))?d().jQL.extend(r.props,i.props):o.dirtyList.push(i):o.dirtyList=[i],o.dirtyFlags|=1);e.dirtyFlags|=4}(e,t.items)},onFlashingDynamicChanged:function(e,t){var n,o=d().Config.Properties,r=!1;e.flashing=e.flashing||[];for(var i=e.flashing.length,a=0;a<i;a+=1){var s=e.flashing[a];if(s.rtoid===t.rtoid&&s.part===t.part){n=s;break}}n||(t.item=E(e,t.rtoid),e.flashing[i]=t,n=t,r=!0);var c=t.props;for(var l in c)if(c.hasOwnProperty(l)){var u=!1,p=c[l],m=n.props[l];if(m?(m.Value=p.Value,m.Alternate=p.Alternate,m.Rate=p.Rate):(n.props[l]=p,m=p,u=!0),m.Active!==p.Active||r||u){m.Active=p.Active;var g=n.item;if(p.Active){if(e.activated){if(n.part){var h=o.getPart(g,n.part);m.CurrentValue=o.getPropPart(h,h.Type,l)}else m.CurrentValue=o.getProp(g,l);e.core.Flashing.startFlashing(p.Rate)}e.flashingCount+=1}else r||u||(e.activated&&g.handler.onChanged(g,Object.defineProperty({},l,{value:m.CurrentValue,configurable:!0,enumerable:!0,writable:!0}),n.part),e.flashingCount-=1)}else e.activated&&e.core.Flashing.startFlashing(p.Rate)}},onObjectAdded:function(e,t){for(var n=t.length,o=0;o<n;o+=1){var r=t[o];r.part?k(e,r):W(e,r)}N(e)},onObjectRemoved:function(e,t){for(var n=t.length,o=0;o<n;o+=1){var r=t[o];r.part?L(e,r):A(e,r)}},onObjectMoved:function(e,t){for(var n=t.length,o=0;o<n;o+=1){var r=t[o];if(r.part)x(e,r);else{var i=D(e.items,r.rtoid);if(i){var a=e.items.indexOf(i);B(e,i,r.pos,a)}}}N(e)},getItem:function(e,t){return D(e.items,t)},enumItems:function(e,t,n,o){var r;if("function"!=typeof n)return!1;"function"!=typeof o&&(o=null),r=e.items.length;for(var i=0;i<r;i+=1){var a=e.items[i];if((!o||o.call(t,a))&&n.call(t,a))break}return!0},adaptToScreenOrWindow:S,updateVisibility:F,addGestureEvents:G,declutterLayers:function(e,t){t=t||e.adaptScreenToWindowFactor,e.layersInfo.layerDecluttering(t)&&F(e)},updateStyle:function(e,t){var n=e.items;if(e.winManager&&d().HmiTypes.Advanced.HmiWindowManager.clearActive(e.winManager),d().Canvas.ImageHelper.clear(),n&&n.length)for(var o=n.length,r=0;r<o;r+=1){var i=n[r],a=i.handler;if(a&&a.onCurrentStyle)try{a.onCurrentStyle(i,t)}catch(e){d().Debug.traceErr(e,"HmiScreen.updateStyle itemType: "+i.props.Type+" itemName: "+i.props.Name)}}},appendToParentNode:w,removeFromParentNode:I,onChanged:function(e,t,n){n?(n.startsWith(":")&&(n=n.substring(1)),n.startsWith("Layers")&&d().HmiTypes.Layers.onChanged(e,t,n)):d().HmiTypes.HmiObject.onChanged(e,t)},onCleanUp:function(e){e&&(e.isCleanedUp=!0,d().HmiTypes.HmiObject.removeTifLibExpandoProps(e),d().HmiTypes.Advanced.HmiWindowManager.cleanUp(e.winManager),e.core.Interaction.Input.checkHandleInputEndForScreen(e),e.core.Interaction.Selection.checkHandleSelectionEnd(e),e.core.Interaction.removeEvents(e),e.hammertime&&e.hammertime.destroy(),O(e),I(e),e.core.Notifier.onScreenUnloaded(e.rtoid,e),e.controlsCache=e.tabOrder=e.layersInfo=e.container=e.gfxWebLib=null)},getPropertyBinding:function(){return i},onPropBindFunc:function(e,t,n){switch(e){case"_BackGraphicAlignment":o.backGraphicAlignment(t);break;case"_getBgImageSize":o.getBgImageSize(t);break;case"_BgPictGradient":o.createRemoveSvgBgElementOrPicture(t);break;case"_resizeScreen":!function(e,t){if(!t){var n=d().Config.Properties,o=n.getPropRaw(e,"Width"),r=n.getPropRaw(e,"Height");e.domHtmlItems.style.width=o+"px",e.domHtmlItems.style.height=r+"px",e.isCloning||e.container.control.handler.onResized(e.container)}}(t,n);break;case"_adaptToScreenOrWindow":S(t.container,n);break;case"_enableItems":!function(e,t){var n=d().Config.Properties,o=n.getProp(e,"Enabled"),r=n.getProp(e.container,"Enabled"),i=e.isEnabled;if(e.isEnabled=r&&o,e.gfxWebLib.interaction.addEvents(e,e.isEnabled),!t&&!e.isCloning&&i!==e.isEnabled)for(var a=e.items.length,s=0;s<a;s+=1){var c=e.items[s];c.handler.getPropertyBinding()&&!c.ignorePropertyBinding?c.handler.onChanged(c,{Enabled:n.getProp(c,"Enabled")}):c.handler.onChanged(c,{_Enabled:!0})}}(t,n);break;default:d().Debug.consolLog(d().Debug.enumTraceMode.Error,"HmiScreen.onPropBindFunc() Error: unknown function "+e)}},onFlashing:function(e,t,n){var o,r,i=d().Config.Properties;if(e.flashingCount)for(o=e.flashing.length,r=0;r<o;r+=1){var a=e.flashing[r];e.core.Flashing.setFlashingProperties(a,t)}if(e.flashingCountCustom)for(o=e.items.length,r=0;r<o;r+=1){var s=e.items[r];s.flashingProps&&i.getPropRaw(s,"Visible")&&s.handler&&void 0!==s.handler.onFlashing&&s.flashingRate>=t&&s.handler.onFlashing(s,t,n)}},onScreenItemTemplateInstanceDirty:function(e){(e.popupContainer||e.groupContainer||e.container).dirtyFlags|=4,e.dirtyFlags|=8},onRedraw:function(e){var t=0;if(1&e.dirtyFlags&&(U(e),t+=1),4&e.dirtyFlags)for(var n=e.items.length,o=0;o<n;o+=1){var r=e.items[o];r.dirtyFlags&&(1&r.dirtyFlags&&(U(r),t+=1),2&r.dirtyFlags&&(z(r),t+=1),8&r.dirtyFlags&&(j(r),t+=1),r.dirtyFlags=0)}return t},getCalculatedZoomFactor:function(e){var t={};return d().HmiTypes.HmiObject.getRelPosToTLSW(e,t),t.adaptScreenToWindowFactor},notifyGesture:function(e){e.eventStore&&e.eventStore.forEach((e=>{e()}))},lockGesture:function(e,t,n){e.handler.notifyGesture(e),window.Hammer&&window.Hammer.stopManagers&&window.Hammer.stopManagers(t),!n&&d().HmiTypes.Advanced.Interaction&&d().HmiTypes.Advanced.Interaction.stopCapture()},registerEvent:function(e,t){if(e.eventStore=e.eventStore||[],e.eventStore.push(t),1===e.eventStore.length){var n=e.container;n.isTopLevelScreenWindow||n.isPopupScreenWindow||(e.closure=()=>{e.handler.notifyGesture(e)},e.handler.registerEvent(n.container,e.closure))}},unregisterEvent:function(e,t){e.eventStore=e.eventStore||[];const n=e.eventStore.indexOf(t);if(-1!==n&&(e.eventStore.splice(n,1),e.closure&&0===e.eventStore.length)){var o=e.container;o.isTopLevelScreenWindow||o.isPopupScreenWindow||e.handler.unregisterEvent(o.container,e.closure),e.closure=null}}}}();const v=f;var y=function(){var e=d().Config.PropertyEnums,t=0,n={rtoid:"00_01",props:{Name:"TopLevelScreenWindow_1",Screen:"",StartupPosition:0,Width:803,Height:603,Left:0,Top:0,Enabled:!0,Operability:0,Visible:!0,Layer:"",Adaption:0,InteractiveZooming:!0,HorizontalScrollBarVisibility:0,HorizontalScrollBarPosition:0,VerticalScrollBarVisibility:0,VerticalScrollBarPosition:0,CurrentZoomFactor:1,WindowFlags:0,Type:"TopLevelScreenWindow",ElementID:1}},o=function(e){switch(e.props.Type){case"TopLevelScreenWindow":case"PopupScreenWindow":return e;default:var t=e.container;return t.isTopLevelScreenWindow||t.isPopupScreenWindow||(t=o(t)),t}};return{DOM_TYPE:"dom",createWindow:function(e,o,r){var i=d().jQL.extend({},n,{container:e,domParent:o,gfxWebLib:e.gfxWebLib});return y.onInit(i,r),t+=1,i.windowID=t,i},onInit:function(t,n){var o=w.getDesktopSize();t.popups=[],t.props.Adaption=n.adaptBaseScreenToWindow?e.HmiScreenWindowAdaption.ScreenToWindow:0,t.props.Width=n.width||o.w,t.props.Height=n.height||o.h,t.handler=d().HmiTypes.HmiObjectTypes.getHandler(d().HmiTypes.HmiObjectTypes.TYPE_HMI_SCREENWINDOW),t.isTopLevelScreenWindow=!0,t.control={left:0,top:0,width:t.props.Width,height:t.props.Height,handler:y,initialized:!0},t.events={Activated:{fire:!0,callbacks:[]},Deactivated:{fire:!0,callbacks:[]},Resized:{fire:!0,callbacks:[]}},d().Settings.zoomOnPoint?(document.documentElement.style.overflow="hidden",t.domNode=d().Canvas.Dom.createDomElement("div",{id:"ID_TopLevelScreenWindow",style:`position:absolute; left:0px; top:0px; width:${t.control.width}px; height:${t.control.height}px; outline:none; overflow:hidden;`,appendTo:t.domParent}),t.control.domParent=d().Canvas.Dom.createDomElement("div",{style:"pointer-events:auto; position:relative;",appendTo:t.domNode})):t.control.domParent=t.domNode=d().Canvas.Dom.createDomElement("div",{id:"ID_TopLevelScreenWindow",style:"position:absolute; left:0px; top:0px; outline:none;",appendTo:t.domParent}),d().HmiTypes.Utils.setPrefixedStyle(t.domParent,"userSelect","none"),d().HmiTypes.Utils.setPrefixedStyle(t.domParent,"touchCallout","none"),d().HmiTypes.Utils.setPrefixedStyle(t.domParent,"userDrag","none"),d().HmiTypes.Utils.setPrefixedStyle(t.domParent,"tapHighlightColor","rgba(0,0,0,0)"),d().HmiTypes.Utils.setPrefixedStyle(t.domNode,"transform","translate(0.0px, 0.0px)"),t.control.handler.desktopOverlay(t)},onChanged:function(e,t,n){if(!n){var o=!1;if(d().jQL.extend(e.props,t),void 0!==t.Enabled&&e.screen&&e.screen.handler.onChanged(e.screen,{Enabled:d().Config.Properties.getProp(e.screen,"Enabled")}),!d().Settings.zoomOnPoint&&(void 0!==t.HorizontalScrollBarPosition||void 0!==t.VerticalScrollBarPosition)){const n={},o=e.props.CurrentZoomFactor;void 0!==t.HorizontalScrollBarPosition&&(n.left=t.HorizontalScrollBarPosition*o),void 0!==t.VerticalScrollBarPosition&&(n.top=t.VerticalScrollBarPosition*o),window.scrollTo(n)}void 0===t.CurrentZoomFactor&&void 0===t.Adaption||(o=!0),void 0!==t.Left&&(e.domNode.style.left=`${t.Left}px`,o=!0),void 0!==t.Top&&(e.domNode.style.top=`${t.Top}px`,o=!0),o&&y.onResized(e)}},onResized:function(t){if(t.container.config.appType!==d().AppType.CLOUD){var n=w.getDesktopSize(),o=n.w,r=n.h;t.container.options.traceView&&(o-=t.container.options.traceView.offsetWidth,r=n.h),t.control.width=o-t.props.Left,t.control.height=r-t.props.Top,t.props.Width=t.control.width,t.props.Height=t.control.height,t.gfxWebLib.connection.sendPropertiesByName(t.rtoid,{Width:t.control.width,Height:t.control.height}),d().Settings.zoomOnPoint&&(t.domNode.style.width=t.control.width+"px",t.domNode.style.height=t.control.height+"px")}if(t.screen){v.adaptToScreenOrWindow(t),t.screen.handler.declutterLayers(t.screen);d().Config.Properties.getProp(t,"Adaption")===e.HmiScreenWindowAdaption.ScreenToWindow&&(t.props.CurrentZoomFactor=t.screen.adaptScreenToWindowFactor,t.gfxWebLib.connection.sendPropertyByName(t.rtoid,"CurrentZoomFactor",t.screen.adaptScreenToWindowFactor))}},onScroll:function(e){const t=e.props.CurrentZoomFactor,n={HorizontalScrollBarPosition:window.scrollX/t,VerticalScrollBarPosition:window.scrollY/t};e.props.HorizontalScrollBarPosition=n.HorizontalScrollBarPosition,e.props.VerticalScrollBarPosition=n.VerticalScrollBarPosition,e.gfxWebLib.connection.sendPropertiesByName(e.rtoid,n,!1,!0)},addPopup:function(e,t){t.scrollOffsetX=e.scrollX||"0",t.scrollOffsetY=e.scrollY||"0",e.popups.push(t)},removePopup:function(e,t){const n=e.popups.indexOf(t);n>-1&&e.popups.splice(n,1)},onScrollPopups:function(e,t){e.popups.forEach((n=>{n.props.Left=n.props.Left-parseFloat(n.scrollOffsetX)+parseFloat(e.scrollX),n.props.Top=n.props.Top-parseFloat(n.scrollOffsetY)+parseFloat(e.scrollY),t.onChanged(n,{Left:n.props.Left,Top:n.props.Top}),n.scrollOffsetX=e.scrollX,n.scrollOffsetY=e.scrollY}))},onCleanUp:function(e){var t=e.screen;t&&t.handler&&t.handler.onCleanUp(t)},getTopLevelScreenWindow:function(e){return o(e)},enumScreens:function(e,t,n,o){var r=e.SOMManager.getScreenWindows(),i=r.length;if("function"!=typeof n)return!1;"function"!=typeof o&&(o=null);for(var a=0;a<i;a+=1){var s=r[a].screen;if(s)if((!o||o.call(t,s))&&n.call(t,s))break}return!0},scrollIntoView:function(e,t){var n=d().Config.Properties,o=Math.max(.02,n.getPropRaw(e,"CurrentZoomFactor"));function r(e,t,n,o){return Math.max(0,Math.min(n,Math.max(t,e)))}1!==o&&(t=t.zoom(o));var i=document.scrollingElement||document.documentElement,a=r(i.scrollLeft,t.right-document.documentElement.clientWidth,t.left,document.documentElement.clientWidth),s=r(i.scrollTop,t.bottom-document.documentElement.clientHeight,t.top,document.documentElement.clientHeight);i.scrollLeft=a,i.scrollTop=s},desktopOverlay:function(e,t,n){var o=e.container;if(o._overlay&&!t)o.domNode.removeChild(o._overlay),o._overlay=null;else if(!o._overlay&&t){var r=w.getDesktopSize();n=n||"default",o._overlay=d().Canvas.Dom.createDomElement("div",{id:"ID_DesktopOverlay",style:"z-index: 65535; position:fixed; cursor:"+n+"; width:"+r.w+"px; height:"+r.h+"px; background-color:rgba( 225, 225, 225, 0 );",appendTo:o.domNode})}}}}();const P=y,b={isTopLevelScreenWindow:!0,control:{left:0,top:0,handler:P},props:{Name:"DesktopWindow",Left:0,Top:0,Type:"DesktopWindow",ElementID:0}},S={createScreen:function(e,t){const n=T.getDesktopSize();return{core:e,domNode:e.domNode,domHtmlItems:e.domNode,gfxWebLib:e.gfxWebLib,isEnabled:!0,tabOrder:m.createTabOrder("TabIndex"),winManager:d().HmiTypes.Advanced.HmiWindowManager.createManager(),container:t,offsetLeft:0,offsetTop:0,items:[],props:{Left:0,Top:0,Width:n.w,Height:n.h,Type:"Screen"}}},onResized:function(e){const t=T.getDesktopSize();e.props.Width=t.w,e.props.Height=t.h}},T={createWindow:function(e){return d().jQL.extend({},b,{container:e})},createScreen:function(e,t){return S.createScreen(e,t)},onResize:function(e){P.onResized(e.toplevelWindow),S.onResized(e.popupScreen)},updateLayout:function(e,t){void 0!==t&&e.config.appType!==d().AppType.CLOUD&&(document.body.style["background-color"]=t)},getDesktopSize:function(){return{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}}},w=T,I=PWC.Components;var C=e.n(I);function D(e){this.MonthsShort={0:e.getText("TBID_DateTimePicker_JAN_SHORT"),1:e.getText("TBID_DateTimePicker_FEB_SHORT"),2:e.getText("TBID_DateTimePicker_MAR_SHORT"),3:e.getText("TBID_DateTimePicker_APR_SHORT"),4:e.getText("TBID_DateTimePicker_MAY_SHORT"),5:e.getText("TBID_DateTimePicker_JUN_SHORT"),6:e.getText("TBID_DateTimePicker_JUL_SHORT"),7:e.getText("TBID_DateTimePicker_AUG_SHORT"),8:e.getText("TBID_DateTimePicker_SEP_SHORT"),9:e.getText("TBID_DateTimePicker_OCT_SHORT"),10:e.getText("TBID_DateTimePicker_NOV_SHORT"),11:e.getText("TBID_DateTimePicker_DEC_SHORT")},this.DayNamesShort={0:e.getText("TBID_DateTimePicker_SUN_SHORT"),1:e.getText("TBID_DateTimePicker_MON_SHORT"),2:e.getText("TBID_DateTimePicker_TUE_SHORT"),3:e.getText("TBID_DateTimePicker_WED_SHORT"),4:e.getText("TBID_DateTimePicker_THU_SHORT"),5:e.getText("TBID_DateTimePicker_FRI_SHORT"),6:e.getText("TBID_DateTimePicker_SAT_SHORT")}}var E=function(){var e=[],t=null,n=null,o=null,r=null,i=function(t){e.push(t)},a=function(t){var n=e.indexOf(t);n>-1&&e.splice(n,1)},s=d().Config.PropertyEnums,c=function(e){if(!e.closed){if(e.countdown-=1,e.countdown<=0)return"function"==typeof e.functionToCall&&e.functionToCall(),void e.close();e.content.firstChild.lastChild.textContent=e.msg.replace("%d",e.countdown),window.setTimeout((function(){c(e)}),1e3)}},l={easing:{linear:function(e){return e},quadratic:function(e){return Math.pow(e,2)},swing:function(e){return.5-Math.cos(e*Math.PI)/2},circ:function(e){return 1-Math.sin(Math.acos(e))},back:function(e,t){return Math.pow(e,2)*((t+1)*e-t)}},animate:function(e){var t=Date.now(),n=function(){var o=(Date.now()-t)/e.duration;o>1&&(o=1),e.progress=o;var r=e.delta(o);e.step(r),1===o?"function"==typeof e.complete&&e.complete():window.requestAnimationFrame(n)};window.requestAnimationFrame(n)},fadeOut:function(e,t){this.animate({duration:t.duration,delta:function(e){return e=this.progress,l.easing.swing(e)},complete:t.complete,step:function(t){e.style.opacity=1-t}})},fadeIn:function(e,t){this.animate({duration:t.duration,delta:function(e){return e=this.progress,l.easing.swing(e)},complete:t.complete,step:function(t){e.style.opacity=0+t}})}};return{closeActiveDialogs:function(){var t,n=e.slice(0),o=e.length;for(t=0;t<o;t+=1){var r=n[t];r.closeDialog?r.closeDialog():r.close()}},showMessage:function(e,t){var n,o,r,s=document.getElementById("ID_DesktopLayout");if(o={Caption:(t=d().jQL.extend({showCaption:!0,borderEnabled:!0,showModal:!0},t||{})).caption,Width:t.width||300,Height:t.height||120,BorderEnabled:t.borderEnabled,ShowCaption:t.showCaption,FrameCloseCallBack:function(){n.closed=!0,n.triggerElement.focus(),a(n),"function"==typeof t.close&&t.close()}},r=function(e){var n=d().Canvas.Dom.createDomElement("div",{}),o=d().Canvas.Dom.createDomElement("div",{style:"display:flex;align-items:center;display:-ms-flexbox;-ms-flex-align:center",appendTo:n});return t.icon&&d().Canvas.Dom.createDomElement("span",{style:"margin:10px;",class:t.icon,appendTo:o}),d().Canvas.Dom.createDomElement("p",{style:"margin:10px;font-family:Tahoma;font-size:18px;flex:1;-ms-flex:1",textNode:e,appendTo:o}),t.button&&d().Canvas.Dom.createDomElement("input",{id:"okButton",type:"button",style:"height:25px;",value:t.button.text||"OK",appendTo:n}),n},C()){(n=new(C().GenericDialog.Frame.HtmlDiv)).triggerElement=document.activeElement,n.node=d().Canvas.Dom.createDomElement("div",{id:"ID_MessageDialog",style:"z-index: 65535; position: relative;",appendTo:s||document.body}),n.createFrame(n.node,o),n.content=r(e);var c=function(e){"okButton"===(e.target||e.srcElement||e.currentTarget).id&&("function"==typeof t.button.functionToCall&&t.button.functionToCall(),n.close())};return t.showModal?n.showModal(n.content,c):n.show(n.content,c),t.closeTimeout&&window.setTimeout((function(){n.closed||n.close()}),t.closeTimeout),i(n),n}return null},showMessageForMSec:function(e,t){E.showMessage(e,{closeTimeout:t})},showMessageOnce:function(e,t){t=t||{},null===o&&(t.close=function(){o=null},o=E.showMessage(e,t))},showBarForMSec:function(e,t){var n=E.showMessage(e,{width:600,icon:"fa fa-info-circle fa-3x",showModal:!1});l.fadeOut(n.node,{duration:t||1e3,complete:function(){n.closed||n.close()}})},showReconnect:function(e,t,n){e=e.replace("</br>"," ");var o=E.showMessage(e.replace("%d",t),{width:400,showCaption:!1,icon:"fa fa-circle-o-notch fa-spin fa-3x"});o.msg=e,o.countdown=t||10,o.functionToCall=n,window.setTimeout((function(){c(o)}),1e3)},showRuntimeDialogWithIcon:function(e,n,o){t=E.showMessage(e,{width:360,icon:n,caption:o,close:function(){t=null}})},hideRuntimeDialogWithIcon:function(){t&&t.close()},showOperationMotive:function(e,t){var o,r=document.getElementById("ID_DesktopLayout"),s={Caption:e,Width:480,Height:150,WindowMovingEnabled:!0,WindowCloseEnabled:!1,FrameCloseCallBack:function(){n.triggerElement.focus(),a(n),n=null}};C()&&((n=new(C().GenericDialog.Frame.HtmlDiv)).triggerElement=document.activeElement,n.node=d().Canvas.Dom.createDomElement("div",{id:"ID_OperationMotiveDialog",appendTo:r||document.body}),n.createFrame(n.node,s),n.content=(o=document.createElement("div"),d().Canvas.Dom.createDomElement("textarea",{autofocus:"autofocus",style:"width:445px;box-sizing:border-box;overflow:auto;resize:none;outline:none;",rows:"3",appendTo:o}),d().Canvas.Dom.createDomElement("input",{id:"okButton",type:"button",style:"width:84px;height:25px;margin-top:12px;margin-right:18px;float:right;",value:"OK",appendTo:o}),o),n.showModal(n.content,(function(e){if("okButton"===(e.target||e.srcElement||e.currentTarget).id){if("function"==typeof t){var o=n.content.childNodes[0];t(o.value.replace(/(\r\n|\n|\r)/gm,""))}n.close()}})),i(n))},hideOperationMotive:function(){n&&n.close()},showHelp:function(){},showDateTimePicker:function(e,t){var n,o={},s=d().TextBib;if(r)return null;o.callBack=t.callback,o.defaultDate=t.defaultDate,o.timeZonePreference=void 0===t.timeZonePreference?1:t.timeZonePreference,o.timeFormat=s.getLocaliziedDateTimeFormat("TBID_NML_DF_IOField_Time"),o.dateFormat=s.getLocaliziedDateTimeFormat("TBID_NML_DF_IOField_Date"),o.timeMaxValue=t.type===d().Canvas.Converters.enumHmiFieldDataType.TimeSpan?2:1,o.type=t.type,o.startEndFlag=t.startEndFlag,o.endDate=t.endDate,o.optionsData=t.optionsData,o.projectVersion=t.projectVersion,o.screenProps=t.screenProps,(n=e.gfxWebLib.topLevelScreenWindow.getTopLevelScreenWindow(e)).isTopLevelScreenWindow?o.isParentDialogOrPopUp=!1:n.isPopupScreenWindow?o.isParentDialogOrPopUp=!0:o.isParentDialogOrPopUp=!1,o.topLevelScreenWindow=n;var c=new D(s),l={};if(l.days=c.DayNamesShort,l.months=c.MonthsShort,l.ok=s.getText("TBID_Submit"),l.cancel=s.getText("TBID_Cancel"),(r=new(C().DTP.Control)(o)).setLocale(l),d().Settings.showDTP=!0,d().Config.Browser.mozilla()){var u=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");u.setAttribute("width","100%"),u.setAttribute("height","100%"),e.domSvgNode.appendChild(u);var p=document.createElement("div");p.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),p.style.width=e.props.Width+"px",p.style.height=e.props.Height+"px",u.appendChild(p),r.show({target:p}),e.domSvgNode.removeChild(u)}else e.domNode.style.width=e.props.Width+"px",e.domNode.style.height=e.props.Height+"px",r.show({target:e.domNode});return r.onClose=function(e){d().Settings.showDTP=!1,a(e),r=null},i(r),r},showCCDialog:function(e,t,n,o,r){var i=d().Config.Properties,a=e.container,c=r.resizeable||r.resizable,l=e.control.handler.createDialogPage(e,{id:t,view:n,data:o,window:{Left:(i.getProp(a,"Width")-r.width)/2,Top:(i.getProp(a,"Height")-r.height)/2,Width:r.width,Height:r.height,Caption:r.caption||"",WindowFlags:s.HmiWindowFlag.ShowCaption|s.HmiWindowFlag.ShowBorder|s.HmiWindowFlag.AlwaysOnTop|(c?s.HmiWindowFlag.CanSize:0)|s.HmiWindowFlag.CanMove}});return l&&(l.container=a,l.domParent=a.domHtmlItems,l.domParent.appendChild(l.domNode),l.control&&(d().HmiTypes.Advanced.HmiWindowManager.register(a.winManager,l),d().HmiTypes.Advanced.HmiWindowManager.isAlwaysOnTop(l)&&d().HmiTypes.Advanced.HmiWindowManager.bringToFront(a.winManager,l)),l.activeItem=e.container.core.Interaction.Selection.getActiveItem(),e.container.core.Interaction.Selection.setActiveItem(l)),l},closeCCDialog:function(e){e.domParent.contains(e.domNode)&&e.domParent.removeChild(e.domNode),e.control&&d().HmiTypes.Advanced.HmiWindowManager.unregister(e.container.winManager,e),e.control.handler.onCleanUp(e),e.container.core.Interaction.Selection.getActiveItem()===e&&e.container.core.Interaction.Selection.setActiveItem(e.activeItem)}}}();const H=E;const O=Object.freeze({HmiEventID:{Unknown:0,Activated:1e3,Deactivated:1001,Clicked:1003,Tapped:1003,KeyboardPressed:1006,KeyDown:1006,KeyboardReleased:1007,KeyUp:1007,LeftMouseButtonPressed:1008,Down:1008,RightMouseButtonPressed:1009,LeftMouseButtonReleased:1010,Up:1010,RightMouseButtonReleased:1011,ContextTapped:1011,GestureDetected:1012,InputFinished:1017,InputAccepted:1017,Loaded:1018,Unloaded:1019,SwitchedOn:1021,SwitchedOff:1022,ValueModified:1023,StateChanged:1025,Initialized:2001,ToolBarCommand:2002,Paused:4711,Playing:4712,Stopped:4713,DomainLogicChange:100003,OnScreenWindowClose:100004,OnRequestProcessValueChange:100005,OnRequestResourceListEntries:100006,OnResourceEntryChanged:100007,OnSelectedIndexChanged:100008,ClickedAndDefault:100009,OnRequestTextChange:100010,OnDrag:100013,OnDrop:100014},HmiEventParamID:{Unknown:0,X:1,Y:2,Modifiers:3,Trigger:4,Success:5,CommandId:6,Userdefined:7,KeyCode:8,isAlternate:9,Gesture:10,Value:11},HmiProjectPropertyID:{Unknown:0,CurrentLanguage:1,SystemState:2,LicensedType:3,LogoutWhenInactive:4,AutomaticLogoutTimeInMinutes:5,UserName:6},PwcEventType:{Unknown:0,HmiEvent:1,HmiProperty:2,DomainLogic:3,AsyncMethodResult:4,NFRTrace:5,HmiScreenItem:6,HmiPart:7,HmiProjectProperty:8,SystemFunction:9,Channel:10},PwcEventParamID:{Unknown:0,PropertyID:1,PropertyName:2,PropertyValue:3,PropertyNotify:4,PropertyPath:5,PropertyArray:6,GUID:7},PwcEventID:{Unknown:0,Create:1,Delete:2,Move:3},PwcSystemFunctionID:{Unknown:0,GetPropertyValue:1,SetPropertyValue:2,SetUpdateInterval:3,Heartbeat:4},PwcChannelFunctionID:{Open:1,Fire:2,Request:3,Subscribe:4,Unsubscribe:5,Close:6},GfxSystemState:{GFX_SYSTEM_STATE_INVALID:0,GFX_SYSTEM_STATE_NONE:1,GFX_SYSTEM_STATE_OPEN:2,GFX_SYSTEM_STATE_ACTIVE:3},HMILicenseType:{HMI_LICENSE_TYPE_NOLICENSE:0,HMI_LICENSE_TYPE_FULLCONTROL:1,HMI_LICENSE_TYPE_VIEWONLY:2,HMI_LICENSE_TYPE_DEMOMODE:3}});var M,W,A,N,B={GfxCHROMID:(M="systemId objectId elementId subElementId instanceId attributeId",A=M.split(" "),N=A.length,function(){for(W=0;W<N;W++)this[A[W]]=arguments[W]}),toGfxCHROMID:function(e){var t=String(e).split(".");return 6===t.length?new B.GfxCHROMID(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3]),Number(t[4]),Number(t[5])):new B.GfxCHROMID(e)},toString:function(e){if(e instanceof B.GfxCHROMID){var t=e.systemId.toString();return void 0!==e.objectId&&(t+="."+e.objectId.toString()),void 0!==e.elementId&&(t+="."+e.elementId.toString()),void 0!==e.subElementId&&(t+="."+e.subElementId.toString()),void 0!==e.instanceId&&(t+="."+e.instanceId.toString()),void 0!==e.attributeId&&(t+="."+e.attributeId.toString()),t}return""}};const k=B,L="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjAxHK4kRQAACsVJREFUaEPtmHl0lNUZxm9IJhACBMgCJkTRikcRZF9CFgIhJEYSEkIkgIDsWFDbSikG8tStLYXaFingwqKyeSp6POF4GhQaqhbZQWQPENm3kJB9Zr7vfl+fO5MZInBkQkbrH+Sc50wm+Zbf+973vssV4u7PXQ/c9YDXPWCsFY2pR6ksuYZaLTrKVcLf6y/6MR5IaD+qF/WCXOsDuYZaJX6jvy+66+8Jvx/jnV59JsEjqRlynS/k1k6QX3WEvroRCD9Nf1e09erLvP0wgvtQoxg2kJvvhzyXCXl2GPT8e0H4XG2lyPD2O732PEIr+F4O+LxgyJMpMM4nUymQx5KgfRgEbYWAtlx09NpLvfkggrelfik/8Ifc3RvGxXSYRX1hfhcF40IG9P92gf1dP9jfERPtb4tW3nx3g59F8CbMNMlUjsyPYOgMg3FmAMwT3ajuMM4NgjydDu2jUNjeFi/a3hL9bW/+jDY0wTtQz8vVzDjHH6fHh8A82ctpQFF3mKe4Cle4CvvjQXgQfpp1qYhssOe88QCCt6CyFbz+xSOQxU8SuB8NIHhRD/5OQ870gXkxAbJsLOwb7gXhYV0shlJNvcHQoGcQvhvzfI7+cRDkqaHctImM+55OnSb8WcKfj4J5KQ5GKVfhRCqsK5ui5h9iVs0i8XCDXt7QmwnemHpGX8Ocv6MH5KVhhCasw+u9YZ7jJr4QDfNyLMzi/jBLkyCvjYa9oAsNaITqheLp6r8L34Zy3PH9hO/FCpurb2hD76cx9pOc4MrrFxhGF2NgXomDeTUe5rUEmGWJMKpGQCtKR82qYFT/Tcyt/uv/Ka0SPIyarq9l2tzXD0YxvX8+BvrZKGz6ZyeMyQrD0ORgpKeEYPK4CGzf0pfwyTCtDDPr07Bv7YvqRRZUvS6mVC0QQXfsxTu5keB+VALbgxz903CGThbDhN6nx61nYvBaTnvwuW75+zfC24s7Q9Y8AVPjSumjoBePRs3qNiD87Mr5Irryzz9hKBG8HTWV7QHk4QRuzuE0gHmf4WK/FI/5rzwIH5/rBjRt6ouVy7rBsKfBlCxwMotGTIRt9wAQHoSfUDFPtLkTZ9b7HoJbCB5PzdU/CYMsHQPj6uPOOC8dCL0kAW8seBi+vj7uFQgKsmDNqp4wFLzBUDOHwzCegqyagqq3WoLwORV/Ev0q/vgTFDeCR7Ap+5W2irF/nP1OGb1fOogblKoYDFmRzHDpBBU2rjAKCWmM9R/2IXSmA94h40kY2gTYvklCxQI/lP9BzCh/7SfoVgk/hIK+6UHIq6NgljOuywfDrOQeqGYVZpy/u7wrAgN93QaEhzdBXh6zkgOckjREY7thG8G9MBbVa9uD8Ch/VSTWOyTqcwPBg6lZ2tqm0I8wJVaOJDgzC8FNKw2xDXHE+bo1PdGqlcVtQPv7ApGfz1qg4HWGkC0dRjWzUUUaZPlTsO1IQPmCJih7Rcwse+lHzEhsh5NUS6xvfACyhN6vznCDq+xi6oSSGVi/vg9CQxu7DejQoRn+vYn1wE74Gl5TmQrj2hPcO2y3i4dCOzMCle/fh7KXBa79Xgyoj1M9vpbgkdRz9jWB0Av5YutoepLQteCO7GLQIDMTGzZEIyIiwG3Aox1b4KuCWNYBplAX+CWu4FlmsFMDIS9kwvr1AJTNC8A1iGepCI/BPLmQQ4iFGmxfLuZo+Zy0Kp+mN5n7taHOtKjAHdnFuUk/2xiL++8PdBvQrUsQthfEwCjhpr88mP3SIBinB0CeiIM8Gs1kMAj6d1moWBGJa7kip3SuSCydIyyesHl0DcHbUVPtyxg+J7n82jhnLDNc6oI7N2kmCjbH4SGGjSsL9e4ehD0FrNYXEyE5J8ii/pCFMawhUZDf9obc35cTXBps2wahNFeA8FNLc7y0CoT2o2KpOdpHzPvWKYzz7JvBFbwju2Tgy4I4dHykuduAfj1bYv/mPuyX4ultgh/pB3mA37/pxemtO+Quan8c9NMjUb4wBISfQ8WWvOiFukDwMI6B023L/Rj73HiS4ePI5bU5vU5adGQXxvk2hkuXzi3cBsT3bYnDn/d0hosLfA+7113d2MV2hdxO7eT3Yymwbk3kKvihZLaYToV5FCI/dBHhYzgGOgYRWcbQMZk6XcVIeVyFkp2hpLJLBcOrNAU7N0ehR5frBiREBaFwI2FVuOxV4PT4Dn5X4HW1LxrasUyUv9lOGYCS34nYBhnA4duf8DNsK/yhcRxUldM0uXndXs9g4apNi2W1aZFxfmpHNF7+dXuMTQ/D2LQQzH8hEpe3EFh5fectwF1GcKbQC9NQ/Vk/lORacHWWeJZqfMdGEL6zmmHtH4dDvzySrcAYZ5y7ixHTYhmLVwkrMLtR4zzHRsa5/Vgsinf0waFPu+LAJ51Q/J+u0JTHXeFyo+frfj8wAPZvU1G2sK0yAFd/Kx67IwM4eAcQfoJtmQXaTmYQbRI3KL3vqqLlBGe4uMFVWjzJjXgkGkf/1Q3j0kPRnO1EYEAjjEhshW8/eBj6thtC5laG7OLGPpGOqryeKMnxUwZMoALqbQQN6EzNtK1rDf1SNlsEFq4ablIV56oYFbOYMVyMMyxEddJi5c5eeO3ZdvC3XO9G/diZ5oxvg/Itj90c9zcaoVbq4EDY9qeidF4rZcBMqnO9DLAtFQE8OUincu1bunAQmcjskglDeZ2ts3GJxeicM1zk8djvpcWSL7pixojQ7w00qh5MSAvGlc851PxQ+Lj+t6cv9KJMVKztqAzIpYZSTTw2wrpEtKemW5fwqORcNivvKIYLvX5FxXltFWW4yGNMiwdZhPZfzy62r7vivZfuQ0hLP7cRLZv5YunsSFh5OueRATuYpQ4ncRXSuA98lBHPUPd6ZADBLdRAntnk2vLYtFVOYriogZ3gKlxc4Idqq+he5vcb0qICzV/0C4xPbY0xKa2R9/oDqP7SQ3jXKuyNgn5mJMoWt3OtQhyNuP3xPMGDqHE1S3yhHUhm18n4P89B5VRt78JN6vC6qqKOtOjK6TenRztXQ+lmr6tr68iRoZTUs2q1m88vHIKagnjXKmTTgOa3XQUeOIVQz1nfCWBpVwPHaMiL6pg8nUakOk6dZSHPd47wvPMQ9wE3nDygRANvEvfIAaVb/Y/3qHsPqmdQh/i8w+yVjtBZR5KhsyrrRcM4sTGMZjdSqzCJuv2hcM0boiU1SR08WfM6wL4tBvZdA2Hfl8T8nALtYCq0w+zhj2awag6DVjgc2vEsaCfVeU82P+vo1ChoSu6/8Rr1+3F+FmbBfnQ47IeHwX4wwxHvtr1PwLozma31INRs6Y/q/CiGUISrHqgVaHb7FVgofHla1p2HTs/z0Gkuz23U0Yfr9EAN4ODwrWZY1xjoGEQ4SalhRPXzqiUGW2LVVarGDGzKnK2Bsz1wAjmLlCfK4XXTqIcon9saoC4gvIXwHQifWPUXkVE1X2Tx6COb8KN5ejCG8OM4w47nDDuBY+BEwk8i/GTCO0T4yYSfQnjVFk8l+BRqMuEnX1WaRTlDYmJtoRrPz3HUGGo0pbw9nMqg4qlIqpFH8HUvogE+9L6FZzcBlfNEc8IH0futaEAw4UMJH0bvt6EBbWnAPYQPp/fDaUA4DQgnfDt6P4Lw4YR3iPBK9xCoLdWGCqNCqWAV41SQ2qxUAGXx2Ov1tu7uDXc9cNcDPwsP/A/3rZlSOKYxQgAAAABJRU5ErkJggg==";const x=function(e){return{create:function(t,n,o){var r=new(d().GfxWebLib)(t,n);o=o||document.getElementById("ID_MainDiv"),t!==d().AppMode.EDIT&&(r.tooltip.handler={show:e.Tooltip.show,hide:e.Tooltip.hide,suspend:e.Tooltip.suspend,resume:e.Tooltip.resume},r.dialogs.handler={showRuntimeDialogWithIcon:H.showRuntimeDialogWithIcon,hideRuntimeDialogWithIcon:H.hideRuntimeDialogWithIcon,showOperationMotive:H.showOperationMotive,hideOperationMotive:H.hideOperationMotive,showHelp:H.showHelp,showCCDialog:H.showCCDialog,closeCCDialog:H.closeCCDialog,showDateTimePicker:H.showDateTimePicker},r.interaction.handler={addEvents:e.Interaction.addEvents,removeEvents:e.Interaction.removeEvents,setCapture:e.Interaction.setCapture,releaseCapture:e.Interaction.releaseCapture,checkPermission:e.Interaction.checkPermission,evtX:e.Interaction.evtX,evtY:e.Interaction.evtY},r.input.handler={startInput:e.Interaction.Input.startInput,endInput:e.Interaction.Input.endInput,isInputActive:e.Interaction.Input.isInputActive,checkHandleInputEnd:e.Interaction.Input.checkHandleInputEnd},r.keyboard.handler={getKeycodes:e.Interaction.Keyboard.getKeycodes,getFlags:e.Interaction.Keyboard.getFlags},r.cursor.handler={suspendCursor:e.Interaction.Cursor.suspendCursor},r.selection.handler={getActiveItem:e.Interaction.Selection.getActiveItem,setActiveItem:e.Interaction.Selection.setActiveItem,selectNextItem:e.Interaction.Selection.selectNextItem,selectPreviousItem:e.Interaction.Selection.selectPreviousItem}),r.connection.handler={datatypesToGfxCHROMID:k.toGfxCHROMID,datatypesToString:k.toString,getEventIDs:function(){return O.HmiEventID},getEventParamIDs:function(){return O.HmiEventParamID},getAppDir:function(){return e.config.appDir},getCustomControlUrl:function(){return e.config.customControlUrl},getCustomWidgetUrl:function(){return e.config.customWidgetUrl},getImageUrl:function(){return e.config.imageUrl},getTemplateUrl:function(){return e.config.templateUrl},sendEvent:e.Notifier.sendEvent,sendToolBarCommand:e.Notifier.sendToolBarCommand,sendEventByName:e.Notifier.sendEventByName,sendPointerUpEvent:e.Notifier.sendPointerUpEvent,sendTappedEvent:e.Notifier.sendTappedEvent,sendGestureEvent:e.Notifier.sendGestureEvent,sendPropertyByName:e.Notifier.sendPropertyByName,sendPropertiesByName:e.Notifier.sendPropertiesByName,sendPartPropertyByName:e.Notifier.sendPartPropertyByName,sendPartPropertiesByName:e.Notifier.sendPartPropertiesByName,setPropertyValue:e.Notifier.setPropertyValue,sendDomainLogicEvent:e.Notifier.sendDomainLogicEvent,sendAsyncMethodResult:e.Notifier.sendAsyncMethodResult,sendScreenItemCreate:e.Notifier.sendScreenItemCreate,sendScreenItemDelete:e.Notifier.sendScreenItemDelete,sendPartCreate:e.Notifier.sendPartCreate,sendPartDelete:e.Notifier.sendPartDelete,sendPartMove:e.Notifier.sendPartMove},r.flashing.handler={getFlashingRates:e.Flashing.getFlashingRates,setRemoveItemSpecificFlashing:e.Flashing.setRemoveItemSpecificFlashing},r.topLevelScreenWindow.handler={getTopLevelScreenWindow:P.getTopLevelScreenWindow,enumScreens:function(t,n,o){return P.enumScreens(e,t,n,o)}},r.screen.handler={getItem:v.getItem,enumItems:v.enumItems,getCalculatedZoomFactor:v.getCalculatedZoomFactor},r.umcservice.handler=e.options.UmcService?{getServiceEndpoint:e.options.UmcService.getServiceEndpoint,init:e.options.UmcService.init,getKey:e.options.UmcService.getKey}:{},r.channelregistry.handler=e.options.Channels?{browse:e.options.Channels.browse,open:e.options.Channels.open}:{};var i={};return e.options.cldrDataPath&&(i.cldrDataPath=e.options.cldrDataPath),r.init(o,i),r.addHmiObjectHandler("Screen",v),function(e){var t={gfxWebLib:e};e.overlayContent.imageHelper=new(d().Canvas.ImageHelper),e.overlayContent.qualityImage=L,e.overlayContent.imageHelper.loadImage(t,L,e.cbSetImageSize)}(r),r}}};var F=Object.freeze({NONE:0,CTRL:1,SHIFT:2,ALT:4}),R=function(e){return(e.shiftKey?F.SHIFT:0)+(e.ctrlKey?F.CTRL:0)+(e.altKey?F.ALT:0)},_=function(){var e,t,n=d().Config.PropertyEnums,o=d().Settings,r=["","webkit","Moz","moz","MS","ms"],i={autoStart:!0,hold_timeout:1e3,visualize_timeout:200,hold_threshold:2,callbacks:{}},a=null,s=null,c=/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,l="ontouchstart"in window,u=l&&c,p=void 0!==function(e,t){for(var n,o,i=t[0].toUpperCase()+t.slice(1),a=0;a<r.length;){if((o=(n=r[a])?n+i:t)in e)return o;a++}}(window,"PointerEvent"),m=(t=function(e){return!!o.useMultiTouch||e.isPrimary},{down:function(e,n){if(t(n))return e.options.callbacks.down&&e.options.callbacks.down(n)&&n.stopPropagation(),!0},move:function(e,n){if(t(n))return e.options.callbacks.move&&e.options.callbacks.move(n),!0},up:function(e,n){if(t(n))return e.options.callbacks.up&&e.options.callbacks.up(n),!0},enter:function(e,n){if(t(n))return e.options.callbacks.enter&&e.options.callbacks.enter(n)&&n.stopPropagation(),!0},leave:function(e,n){if(t(n))return e.options.callbacks.leave&&e.options.callbacks.leave(n)&&n.stopPropagation(),!0}});function g(e,t,n,o){e.addEventListener&&e.addEventListener(t,n,o)}function h(e,t,n,o){e.removeEventListener&&e.removeEventListener(t,n,o)}function f(e,t){for(;e;){if(e===t)return!0;e=e.parentNode}return!1}function v(e){return e.which?e.button+16:0}function y(t,n){e=setTimeout((function(){if(!n.rtpu&&!s){var e,o=d().Config.Properties;e="Screen"!==n.item.props.Type&&o.getProp(n.item,"FocusColor")?d().Canvas.Converters.toCol(o.getProp(n.item,"FocusColor")):d().Canvas.Converters.toCol(d().Config.SystemParts.getSystemPartDefault("ScrollBarSystemPart").FocusColor),function(e,t){const n=document.getElementById("idToplevelScreenWindowBody");s=d().Canvas.Dom.createDomElement("div",{style:"position:absolute; pointer-events: none;z-index:2147483647;",id:"wrapper",appendTo:n});var o=d().Canvas.Svg.createSvgElement("svg",{style:"position: absolute; pointer-events: none; overflow: visible; display: block;",focusable:"false",appendTo:s}),r=(d().Canvas.Svg.createSvgElement("circle",{appendTo:o,r:40,stroke:t,"stroke-width":3,"fill-opacity":0}),d().Canvas.Svg.createSvgElement("circle",{appendTo:o,fill:t}));d().Canvas.Svg.createSvgElement("animate",{attributeName:"r",from:0,to:40,begin:"200ms",dur:"800ms",fill:"freeze",appendTo:r}),s.style.left=e.x+"px",s.style.top=e.y+"px"}({x:t.pageX,y:t.pageY},e)}}),n.inst.options.visualize_timeout)}function P(){clearTimeout(e),s&&function(){const e=document.getElementById("idToplevelScreenWindowBody");var t=e.children[e.children.length-1];"wrapper"===t.getAttribute("id")&&(s.removeChild(s.children[0]),e.removeChild(t),s=null)}()}var b=function(e){this.inst=e,this.rtpu=e.options.rtpuMode,this.upEvent=!1,this.inside=!0;var t=this;this.mousedown=function(e){var n=t.prepareEvent(e);m.down(t.inst,n),t.rtpu?g(document,"mouseup",t.mouseup,!0):(g(t.inst.elem,"mouseleave",t.mouseup),g(t.inst.elem,"mouseup",t.mouseup)),t.upEvent=!0,t.inside=!0},this.mousemove=function(e){var n=t.prepareEvent(e);m.move(t.inst,n)},this.mouseup=function(e){var n=t.prepareEvent(e);m.up(t.inst,n),t.rtpu?h(document,"mouseup",t.mouseup,!0):(h(t.inst.elem,"mouseleave",t.mouseup),h(t.inst.elem,"mouseup",t.mouseup)),t.upEvent=!1},this.mouseenter=function(e){var n=t.prepareEvent(e);m.enter(t.inst,n),t.inside=!0},this.mouseleave=function(e){var n=t.prepareEvent(e);m.leave(t.inst,n),t.inside=!1}};b.prototype={prepareEvent:function(e){var t=R(e),n=!1;return"mouseup"===e.type&&(n=!this.rtpu||this.inside),{x:Math.round(e.pageX),y:Math.round(e.pageY),currentTarget:this.inst.elem,target:e.target,button:e.button,which:e.which,trigger:v(e),pointerId:1,isPrimary:!0,flags:t,click:n,stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()}}},registerHandlers:function(){g(this.inst.elem,"mousedown",this.mousedown),g(this.inst.elem,"mouseenter",this.mouseenter),g(this.inst.elem,"mouseleave",this.mouseleave),this.rtpu&&g(this.inst.elem,"mousemove",this.mousemove)},unregisterHandlers:function(){h(this.inst.elem,"mousedown",this.mousedown),h(this.inst.elem,"mouseenter",this.mouseenter),h(this.inst.elem,"mouseleave",this.mouseleave),this.rtpu&&h(this.inst.elem,"mousemove",this.mousemove),this.upEvent&&(this.rtpu?h(document,"mouseup",this.mouseup,!0):(h(this.inst.elem,"mouseleave",this.mouseup),h(this.inst.elem,"mouseup",this.mouseup)),this.upEvent=!1)},setCapture:function(){g(this.inst.elem,"mousemove",this.mousemove,!0)},releaseCapture:function(){h(this.inst.elem,"mousemove",this.mousemove,!0)}};var S=function(e){this.inst=e,this.rtpu=e.options.rtpuMode,this.upEvent=!1,this.inside=!0;var t=this;this.touchstart=function(e){g(t.inst.elem,"touchmove",t.touchmove),g(t.inst.elem,"touchend",t.touchend),g(t.inst.elem,"touchcancel",t.touchend),t.upEvent=!0,t.inside=!0,t.inst.timeStamp=e.timeStamp;var n=t.getPointer(e);n&&(t.inst.pointerId=n.pointerId,m.enter(t.inst,n),m.down(t.inst,n))},this.touchmove=function(e){var n=t.getPointer(e);if(n){if(t.inst.pointerId!==n.pointerId)return;m.move(t.inst,n),t.inst.capture||(f(document.elementFromPoint(n.clientX,n.clientY),t.inst.elem)?(t.inside||m.enter(t.inst,n),t.inside=!0):(t.rtpu?m.leave(t.inst,n):t.touchend(e),t.inside=!1))}},this.touchend=function(e){var n=t.getPointer(e);n&&(t.inside&&m.leave(t.inst,n),m.up(t.inst,n)),h(t.inst.elem,"touchmove",t.touchmove),h(t.inst.elem,"touchend",t.touchend),h(t.inst.elem,"touchcancel",t.touchend),t.upEvent=!1}};S.prototype={getPointer:function(e){var t=e.changedTouches;return t.length?this.touchToPointer(e,t[0]):null},isPrimaryTouch:function(e,t){return e.touches.length<2},touchToPointer:function(e,t){var o,r=!1,i=0;"touchend"===e.type&&(f((o=t).target.ownerDocument.elementFromPoint(o.clientX,o.clientY)||t.target,this.inst.elem)&&(r=!0,e.timeStamp-this.inst.timeStamp>this.inst.options.hold_timeout&&(i=2)));return{x:Math.round(t.pageX),y:Math.round(t.pageY),clientX:t.clientX,clientY:t.clientY,currentTarget:this.inst.elem,target:t.target,pointerId:t.identifier,isPrimary:this.isPrimaryTouch(e,t),button:i,which:1,trigger:n.HmiEventTrigger.Touch,flags:0,click:r,stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()}}},registerHandlers:function(){g(this.inst.elem,"touchstart",this.touchstart)},unregisterHandlers:function(){h(this.inst.elem,"touchstart",this.touchstart),this.upEvent&&(h(this.inst.elem,"touchmove",this.touchmove),h(this.inst.elem,"touchend",this.touchend),h(this.inst.elem,"touchcancel",this.touchend),this.upEvent=!1)},setCapture:function(){this.inst.capture=!0,g(this.inst.elem,"touchmove",this.touchmove,!0)},releaseCapture:function(){this.inst.capture=!1,h(this.inst.elem,"touchmove",this.touchmove,!0)}};var T,w=function(e){this.inst=e,this.rtpu=e.options.rtpuMode,this.item=e.options.item,this.upEvent=!1,this.inside=!0,this.cancel=!1,this.closure=()=>{this.cancel=!0};var t=this;this.pointerdown=function(e){var n=t.prepareEvent(e);t.inst.pointerId=e.pointerId,t.inst.timeStamp=e.timeStamp,d().Settings.holdVisual&&d().HmiTypes.HmiObject.hasActions(t.item)&&"mouse"!==e.pointerType&&!t.item.control&&y(e,t),o.zoomOnPoint&&t.item&&t.inst.registerEvent(t.closure,e.isPrimary),m.down(t.inst,n)&&(t.rtpu?g(document,"pointerup",t.pointerup,!0):("mouse"!==e.pointerType?g(t.inst.elem,"pointermove",t.pointermove):g(t.inst.elem,"pointerleave",t.pointerup),g(t.inst.elem,"pointerup",t.pointerup)),t.upEvent=!0,t.inside=!0,t.cancel=!1)},this.pointermove=function(e){var n=t.prepareEvent(e);(Math.abs(e.movementX)>=5||Math.abs(e.movementY)>=5)&&P(),m.move(t.inst,n)&&"mouse"!==e.pointerType&&(f(document.elementFromPoint(e.clientX,e.clientY),t.inst.elem)?(t.inside||m.enter(t.inst,n),t.inside=!0):(t.rtpu?m.leave(t.inst,n):t.pointerup(e),t.inside=!1))},this.pointercapture=function(e){var n=t.prepareEvent(e);n.pointerId===t.inst.pointerId&&m.move(t.inst,n)},this.pointerup=function(e){P(),o.zoomOnPoint&&t.item&&t.inst.unregisterEvent(t.closure);var n=e.type;"pointerleave"===n&&d().Settings.showDTP&&(n="pointerup");var r=t.prepareEvent(e,n);r.pointerId===t.inst.pointerId&&m.up(t.inst,r)&&(t.rtpu?h(document,"pointerup",t.pointerup,!0):("mouse"!==e.pointerType?h(t.inst.elem,"pointermove",t.pointermove):h(t.inst.elem,"pointerleave",t.pointerup),h(t.inst.elem,"pointerup",t.pointerup)),t.upEvent=!1)},this.pointerenter=function(e){var n=t.prepareEvent(e);m.enter(t.inst,n),t.inside=!0},this.pointerleave=function(e){var n=t.prepareEvent(e);m.leave(t.inst,n),t.inside=!1}};function I(e,t){this.running=!1,this.elem=e,this.options=Object.assign({},i,t),this.input=new a(this),this.options.autoStart&&this.start()}return w.prototype={getTrigger:function(e){return e.isTrusted?"mouse"===e.pointerType?v(e):n.HmiEventTrigger.Touch:n.HmiEventTrigger.Unknown},getButton:function(e){return"mouse"===e.pointerType?e.button:0},getWhich:function(e){return"mouse"===e.pointerType?1&e.buttons?1:2&e.buttons?3:4&e.buttons?2:0:1},preventDefault:function(e){e.cancelable&&e.preventDefault()},prepareEvent:function(e,t){var n=R(e),o=this.getButton(e),r=!1;return"pointerup"===(t=t||e.type)&&(this.cancel||(r=this.inside)&&"mouse"!==e.pointerType&&e.timeStamp-this.inst.timeStamp>this.inst.options.hold_timeout&&(o=2)),{x:Math.round(e.pageX),y:Math.round(e.pageY),currentTarget:this.inst.elem,target:e.target,button:o,which:this.getWhich(e),trigger:this.getTrigger(e),pointerId:e.pointerId,isPrimary:e.isPrimary,defaultPrevented:e.defaultPrevented,flags:n,click:r,item:this.item,stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()}}},registerHandlers:function(){g(this.inst.elem,"pointerdown",this.pointerdown),g(this.inst.elem,"pointercancel",this.pointerup),g(this.inst.elem,"pointerenter",this.pointerenter),g(this.inst.elem,"pointerleave",this.pointerleave),this.rtpu&&(g(this.inst.elem,"pointermove",this.pointermove),l&&g(this.inst.elem,"touchstart",this.preventDefault))},unregisterHandlers:function(){h(this.inst.elem,"pointerdown",this.pointerdown),h(this.inst.elem,"pointercancel",this.pointerup),h(this.inst.elem,"pointerenter",this.pointerenter),h(this.inst.elem,"pointerleave",this.pointerleave),this.rtpu&&(h(this.inst.elem,"pointermove",this.pointermove),l&&h(this.inst.elem,"touchstart",this.preventDefault)),this.upEvent&&(this.rtpu?h(document,"pointerup",this.pointerup,!0):(h(this.inst.elem,"pointermove",this.pointermove),h(this.inst.elem,"pointerleave",this.pointerup),h(this.inst.elem,"pointerup",this.pointerup)),this.upEvent=!1)},setCapture:function(){g(this.inst.elem,"pointermove",this.pointercapture,!0),g(this.inst.elem,"pointerleave",this.pointerleave)},releaseCapture:function(){h(this.inst.elem,"pointermove",this.pointercapture,!0),h(this.inst.elem,"pointerleave",this.pointerleave)}},I.prototype={set:function(e){return Object.assign(this.options,e),this},start:function(){return this.running||(this.running=!0,this.input.registerHandlers()),this},stop:function(){return this.running?(this.running=!1,this.input.unregisterHandlers(),this):this},setCapture:function(){return this.input.setCapture&&this.input.setCapture(),this},releaseCapture:function(){return this.input.releaseCapture&&this.input.releaseCapture(),this},registerEvent:function(e,t){var n=this.options.item;d().HmiTypes.Utils.isScreen(n)?n.handler.registerEvent(n,e,t):n.container&&n.container.handler&&d().HmiTypes.Utils.isScreen(n.container)&&n.container.handler.registerEvent(n.container,e,t)},unregisterEvent:function(e){var t=this.options.item;d().HmiTypes.Utils.isScreen(t)?t.handler.unregisterEvent(t,e):t.container&&t.container.handler&&d().HmiTypes.Utils.isScreen(t.container)&&t.container.handler.unregisterEvent(t.container,e)}},T=b,p?T=w:u&&(T=S),a=T,{createInstance:function(e,t){return new I(e,t||{})},isMobile:c,hasParent:f,isPrimary:function(e){return a===w?e.isPrimary:a!==S||e.touches.length<2},mapMouseEventName2PointerEventName:function(e){return{click:"click",dblclick:"dblclick",mousedown:"pointerdown",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mousemove:"pointermove",mouseenter:"pointerenter",mouseleave:"pointerleave",mousecancel:"pointercancel"}[e]},mapMouseEventName2TouchEventName:function(e){return{click:"click",dblclick:"dblclick",mousedown:"touchstart",mouseup:"touchend",mouseover:"mouseover",mouseout:"mouseout",mousemove:"touchmove",mouseenter:"mouseenter",mouseleave:"mouseleave",mousecancel:"touchcancel"}[e]},mapEventName:function(e){return a===w?e=_.mapMouseEventName2PointerEventName(e):a===S&&(e=_.mapMouseEventName2TouchEventName(e)),e}}}();const U=_;const z=function(e){return function(e){var t="x",n="x",o=!1,r="x",i="x";return{curNoInput:"NoInput.CURS",setCursor:function(r,i,a,s){if(!(!(s=void 0!==s&&s)&&o||i===t&&a===n||(t=i,n=a,U.isMobile)))if(i)r.style.cursor=a;else{var c=e.config.appDir+"content/systemdata/";d().Config.Browser.msie()||d().Config.Browser.edge()?r.style.cursor="url("+c+a+"), default":r.style.cursor="url("+c+a+") 6 6, default"}},suspendCursor:function(a,s,c,l){s?(o||(r=t,i=n),e.Interaction.Cursor.setCursor(a,c,l,!0),o=s):(o=s,e.Interaction.Cursor.setCursor(a,r,i))}}}(e)};var j=function(e){var t=null,n=null,o=function(e){if(e&&e.container){if(!d().HmiTypes.Utils.isScreenContainer(e)){if(!d().HmiTypes.Utils.isScreen(e)){return(e.groupContainer||e.container).container}return e.container}return e}},r=function(t,n){t&&(d().HmiTypes.HmiObject.clearSelectionProps(t),e.Notifier.sendEvent(t.rtoid,O.HmiEventID.Deactivated),d().HmiTypes.HmiObject.onFocusOut(t,n))},i=function(t,n){t&&(d().HmiTypes.HmiObject.setSelectionProps(t),e.Notifier.sendEvent(t.rtoid,O.HmiEventID.Activated),d().HmiTypes.HmiObject.onFocus(t,n))},a=function(a,s,c){var l=a!==s;if(s){if(!s.container)return;switch(s.props.Type){case"Screen":case"FaceplateType":n=s,d().HmiTypes.HmiObject.hasActions(s)||n.tabOrder.lastSelectedItem&&(l=a!==(s=n.tabOrder.lastSelectedItem));break;default:n=s.groupContainer||s.container,m.gotoObject(n.tabOrder,s)||d().HmiTypes.HmiObject.canActivate(s)||(l=n.tabOrder.lastSelectedItem?a!==(s=n.tabOrder.lastSelectedItem):a!==(s=n))}}l&&function(t,n,a){var s=o(t),c=o(n);s!==c?(r(t,a),s&&s.handler.onFocusOut&&(s.handler.onFocusOut(s),s!==t&&e.Notifier.sendEvent(s.rtoid,O.HmiEventID.Deactivated)),c&&c.handler.onFocus&&(c.handler.onFocus(c),c!==n&&e.Notifier.sendEvent(c.rtoid,O.HmiEventID.Activated)),i(n,a)):(t!==s&&r(t,a),i(n,a))}(a,s,c),t=s},s=function(e){var t,n;return d().HmiTypes.Utils.isScreenContainer(e)&&d().Config.Properties.getProp(e,"TabIntoWindow")&&(t=e.screen)?((n=m.gotoFirst(t.tabOrder))&&d().HmiTypes.Utils.isScreenContainer(n)&&(n=s(n)),n||t):e};return{onPointerDown:function(t,n,o,r,i,a){this.setActiveItem(t),t&&e.Notifier.sendPointerDownEvent(t.rtoid,n,o,r,i,a)},onPointerUp:function(t,n,o,r,i,a,s){t&&(e.Notifier.sendPointerUpEvent(t.rtoid,n,o,r,i,s),a&&e.Notifier.sendTappedEvent(t.rtoid,n,o,r,i,s))},checkHandleSelectionEnd:function(e){if(n===e){const t=e.container;if(!t.isTopLevelScreenWindow&&!t.isPopupScreenWindow){const e=t.container;if(e&&!e.isCleanedUp)return void this.initializeActiveItem(e.tabOrder.lastSelectedItem||e)}const n=e.core.toplevelWindow.screen;this.initializeActiveItem(n.tabOrder.lastSelectedItem||n)}},initializeActiveItem:function(o){if(o)o=s(o),d().HmiTypes.Utils.isScreenContainer(o)&&""!==o.props.Screen&&d().Config.Properties.getProp(o,"TabIntoWindow")?window.setTimeout((function(){o.container&&this.initializeActiveItem(o)}),50):a(null,o);else if(n){var r=m.gotoNext(n.tabOrder);r||(n!==e.popupScreen?n.handler.enumItems(n,null,(function(e){if(d().HmiTypes.HmiObject.canActivate(e))return r=e,!0})):(n=e.toplevelWindow.screen,r=n.tabOrder.lastSelectedItem),r||(r=n)),r=s(r),a(t,r)}},setActiveItem:function(e){a(t,e)},getActiveItem:function(){return t},getActiveScreen:function(){return n},getActiveItemOrScreen:function(){return t||n},getActiveWindow:function(){return t&&d().HmiTypes.Utils.isScreenWindow(t)?t:n?n.container:null},selectNextItem:function(e){if(n){var o=m.gotoNext(n.tabOrder);o&&(o=s(o),a(t,o,e))}},selectPreviousItem:function(e){if(n){var o=m.gotoPrev(n.tabOrder);o&&(o=s(o),a(t,o,e))}},selectNextRootItem:function(){let e=!1;if(n){let o=n.container;if("ScreenWindow"===d().Config.Properties.getProp(o,"Type")){let n=o.container,r=null;m.gotoObject(n.tabOrder,o),r=m.gotoNext(n.tabOrder),r&&(r=s(r),a(t,r,!0),e=!0)}}return e},selectPreviousRootItem:function(){let e=!1;if(n){let o=n.container;if("ScreenWindow"===d().Config.Properties.getProp(o,"Type")){let n=o.container,r=null;m.gotoObject(n.tabOrder,o),r=m.gotoPrev(n.tabOrder),r&&(r=s(r),a(t,r,!0),e=!0)}}return e}}};const Y=function(e){return j(e)};var V=function(e){var t=d().Config.PropertyEnums,n=Object.freeze({TAB:9,ENTER:13,ESC:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,ARROWLEFT:37,ARROWUP:38,ARROWRIGHT:39,ARROWDOWN:40,ADD:107,SUBTRACT:109}),o=Object.freeze({NONE:0,CTRL:1,SHIFT:2,ALT:4}),r=function(e){return(e.shiftKey?o.SHIFT:0)+(e.ctrlKey?o.CTRL:0)+(e.altKey?o.ALT:0)},i=function(e,t,n){if(!e||!e.props)return null;let o=null;switch(e.props.Type){case"Button":case"ToggleSwitch":d().Config.Properties.getProp(e,"HotKey")===t&&0===d().Config.Properties.getProp(e,"Operability")&&(o={Item:e});break;case"Screen":case"FaceplateType":for(let r=0,a=e.items.length;r<a&&!o;r++)n&&e.items[r]===n||(o=i(e.items[r],t));break;case"ScreenWindow":case"FaceplateContainer":case"TopLevelScreenWindow":case"PopupScreenWindow":n!==e.screen&&d().Config.Properties.getProp(e,"Enabled")&&(o=i(e.screen,t));break;default:e.control&&d().Config.Properties.getProp(e,"Enabled")&&(o=function(e,t){const n=d().Config.Properties.getProp(e,"ToolBar",0,null);if(n&&n.Elements&&n.Enabled){var o=function(e,t,n){for(let o=0;o<e.length;o++)if(e[o][t]===n)return e[o]}(n.Elements,"HotKey",t);if(o&&0===o.Operability)return{Item:e,Part:o}}return null}(e,t))}return o},a=function(t,o){var r,i=!1;switch(t){case n.TAB:r=o.shiftKey,e.Interaction.Input.endInput(!0),r?e.Interaction.Selection.selectPreviousItem(!0):e.Interaction.Selection.selectNextItem(!0),i=!0;break;case n.ENTER:o.shiftKey&&(i=function(){let t=!1;return e.Interaction.Input.endInput(!0),t=e.Interaction.Selection.selectNextRootItem(),t}());break;case n.ESC:o.shiftKey&&(i=function(){let t=!1;return e.Interaction.Input.endInput(!0),t=e.Interaction.Selection.selectPreviousRootItem(),t}())}return i};return{getKeycodes:function(){return n},getFlags:function(){return o},calculateFlags:r,onKeyDown:function(o){var s,c=!1,l=o.repeat,u="which"in o?o.which:o.keyCode,p=r(o);if(o.ctrlKey&&83===u&&o.preventDefault(),(s=e.Interaction.Selection.getActiveItemOrScreen())&&s.handler.checkInnerNavigation&&(c=s.handler.checkInnerNavigation(s,u,l,p)),u&&!c&&(c=a(u,o))&&o.preventDefault(),s&&!c&&d().Config.Properties.getProp(s,"Enabled")&&(e.Interaction.checkPermission(s,!0)&&(c=d().HmiTypes.HmiObject.onKeyDown(s,u,l,p),l||(u!==n.ENTER&&u!==n.SPACE||e.Notifier.sendPointerDownEvent(s.rtoid,0,0,0,p,u===n.ENTER?t.HmiEventTrigger.Enter:t.HmiEventTrigger.Space),e.Notifier.sendKeyboardPressedEvent(s.rtoid,u,l,p))),c&&o.preventDefault()),!c&&!l){c=function(t,n){const o=(65280&t)>>>8;let r=n,a=i(n,t);const s=!n||n.isTopLevelScreenWindow||n.isPopupScreenWindow;if(!a&&!s)for(r=n.container;r&&!r.isTopLevelScreenWindow&&!r.isPopupScreenWindow&&(a=i(r,t,n),n=r,r=r.container,!a););if(!a){const n=e.SOMManager.getScreenWindows().filter((e=>"TopLevelScreenWindow"===e.props.Type||"PopupScreenWindow"===e.props.Type));for(let e=0,o=n.length;e<o&&!a;e++)r&&r.rtoid===n[e].rtoid||(a=i(n[e],t))}return!!a&&(a.Part?(a.Item.control.handler.onToolbarButton(a.Item,a.Part.Mapping),255&a.Part.Mapping&&a.gfxWebLib&&a.gfxWebLib.connection.sendToolBarCommand(a.Item.rtoid,a.Part.Mapping,!1)):e.Notifier.sendTappedEvent(a.Item.rtoid,0,0,0,o),!0)}((p<<8)+u,s),c&&o.preventDefault()}return c||(s=e.Interaction.Selection.getActiveWindow())&&(c=d().HmiTypes.HmiObject.onKeyDown(s,u,l,p))&&o.preventDefault(),!c},onKeyUp:function(o){var i,a=!1,s=o.repeat,c="which"in o?o.which:o.keyCode,l=r(o);return(i=e.Interaction.Selection.getActiveItemOrScreen())&&d().Config.Properties.getProp(i,"Enabled")&&(e.Interaction.checkPermission(i,!1)&&(a=d().HmiTypes.HmiObject.onKeyUp(i,c,s,l),s||(e.Notifier.sendKeyboardReleasedEvent(i.rtoid,c,s,l),c!==n.ENTER&&c!==n.SPACE||(e.Notifier.sendPointerUpEvent(i.rtoid,0,0,0,l,c===n.ENTER?t.HmiEventTrigger.Enter:t.HmiEventTrigger.Space),e.Notifier.sendTappedEvent(i.rtoid,0,0,0,l,c===n.ENTER?t.HmiEventTrigger.Enter:t.HmiEventTrigger.Space)))),a&&o.preventDefault()),!a}}};const G=function(e){return V(e)};var K=function(e){var t=function(e,t,n,o=!1){return!!(e&&d().HmiTypes.Utils.isScreenContainer(e)&&e.handler&&Boolean(t||n))&&(o&&([t,n]=[n,t]),e.handler.isScreenMoveable(e,-t,-n))};return{onMouseWheel:function(n){var o=e.Interaction.Keyboard.calculateFlags(n),r=function(n){let o=e.Interaction.Selection.getActiveWindow();const r=e.Interaction.Keyboard.calculateFlags(n),i=o.gfxWebLib.keyboard.getFlags();if(d().Settings.zoomWithMouseWheelOnly&r!==i.CTRL||!d().Settings.zoomWithMouseWheelOnly&r===i.CTRL)for(;o&&!((a=o)&&d().HmiTypes.Utils.isScreenContainer(a)&&d().Config.Properties.getProp(a,"InteractiveZooming")&&d().Config.Properties.getProp(a,"Adaption")!==d().Config.PropertyEnums.HmiScreenWindowAdaption.ScreenToWindow);)o=o.container.container;else for(;o&&!t(o,n.deltaX,n.deltaY,r&i.SHIFT);)o=o.container.container;var a;return o}(n),i=n.deltaY||n.deltaX||1,a=!1;if(r&&r.handler.onMouseWheel){if(d().Settings.zoomOnPoint){var s={};e.Interaction.getRelEventPosInScreenAndItem(n,r,{},s),s.x-=r.control.left,s.y-=r.control.top,a=r.handler.onMouseWheel(r,i,o,s)}else a=r.handler.onMouseWheel(r,i,o);a&&n.preventDefault()}return a}}};const X=function(e){return K(e)};var Q=function(e){var t=null,n=null,o=null,r=null,i="",a="",s=null,c=function(e){var a,c;null!==t&&((a=document.getElementById(i))&&(c=a.value.replace(/\r\n|[\n\r\u0085\u2028\u2029]/gm,"\r\n"),u(),o.style.display="none",n.appendChild(o.parentNode.removeChild(o)),e&&void 0!==t.handler.onInputFocusOut&&t.handler.onInputFocusOut(t,c),U.isMobile?(window.clearTimeout(r),r=window.setTimeout((function(){t||s.focus()}),300)):s.focus()),t.handler.showTextElement&&t.handler.showTextElement(t),t.handler.removeInputDataType&&t.handler.removeInputDataType(t),t=null)},l=function(){var e,r=d().Config.Properties,s=r.getPropRaw(t,"InputBehavior"),c=!1,l="text",u="",p="";s&&(c=r.getPropPart(s,"InputBehaviorPart","ClearOnActivate"),r.getPropPart(s,"InputBehaviorPart","HiddenInput")&&(l="password")),null===n&&(n=document.getElementById("ID_InputSec")),null===o&&(o=document.getElementById("ID_InputDiv")),"svg"===t.handler.DOM_TYPE?t.container.domHtmlItems.appendChild(o.parentNode.removeChild(o)):t.domNode.appendChild(o.parentNode.removeChild(o)),void 0!==t.handler.createPlaceholder&&(u=t.handler.createPlaceholder(t)),c?d().Config.Browser.msie()&&(p=u.trim(),t._clearPlaceholder=!0):void 0!==t.handler.getInputStartValue&&(p=t.handler.getInputStartValue(t)),function(e,n,r){var a,s,c=d().Config.Properties,l=d().Canvas.Converters,u=d().HmiTypes.HmiObject.getFont(t,"Font"),p=c.getProp(t,"ForeColor",l.enumConverter.Color),m=d().HmiTypes.HmiObject.getInnerBounds(t);if(a="position:absolute; outline:none; top:"+m.t.toString()+"px; left:"+m.l.toString()+"px; overflow:hidden; width:"+m.w+"px; height:"+m.h+"px; pointer-events:visiblePainted; display:inline;",o.setAttribute("style",a),"svg"===t.handler.DOM_TYPE){o.style.opacity=c.getProp(t,"Opacity"),t.handler.DOM_TYPE="html";var g=l.convertTo(l.enumConverter.TransformRotate,null,t);if(null!==g){o.style.setProperty("transform",g);var h=l.convertTo(l.enumConverter.TransformOriginPlaced,null,t);o.style.setProperty("transform-origin",h)}else o.style.removeProperty("transform");t.handler.DOM_TYPE="svg"}s=document.getElementById(i),"IOField"===t.props.Type?(s.type=e,s.placeholder=n,r=r.replace(/\r\n/gm,"\u2028")):s.style.resize="none",s.value=r,s.style.width=m.w+"px",s.style.height=m.h+"px",s.style.fontFamily=d().HmiTypes.HmiObject.safeFontFamily(u.Name),s.style.fontSize=u.Size+"px",s.style.fontWeight=u.Weight,s.style.fontStyle=u.Italic?"italic":"normal",s.style.color=p,s.style.background="transparent",d().HmiTypes.Utils.setPrefixedStyle(s,"userSelect","text")}(l,u,p),(e=document.getElementById(a))?(e.style.display="inline",e.focus&&e.focus(),e.click&&e.click(),c||document.getElementById(i).select(),m(e)):setTimeout((function(e){(e=e||document.getElementById(a)).style.display="inline",e.focus&&e.focus(),e.click&&e.click(),c||document.getElementById(i).select(),m(e)}),0)},u=function(){var e;e=document.getElementById(a),g(e),e.style.display="none"},p=function(e){return e.stopPropagation(),!1},m=function(t){t.addEventListener("keydown",e.Interaction.Input.onKeyDown,!1),t.addEventListener("keypress",e.Interaction.Input.onKeyPress,!1),t.addEventListener("keyup",p,!1);var n=U.mapEventName("mousedown");t.addEventListener(n,p,!1)},g=function(t){t.removeEventListener("keydown",e.Interaction.Input.onKeyDown,!1),t.removeEventListener("keypress",e.Interaction.Input.onKeyPress,!1),t.removeEventListener("keyup",p,!1);var n=U.mapEventName("mousedown");t.removeEventListener(n,p,!1)};return{startInput:function(e){d().Config.Properties.getProp(e,"Opacity")<=0||("IOField"===(t=e).type?(i="ID_InpInput",a="ID_InpLabelInput"):(i="ID_InpTextArea",a="ID_InpLabelTextArea"),window.clearTimeout(r),r=null,s=document.activeElement,t.handler.setInputDataType&&t.handler.setInputDataType(t),t.handler.hideTextElement&&t.handler.hideTextElement(t),l())},endInput:c,isInputActive:function(){return null!==t},onKeyDown:function(e){var n=!1;return void 0!==t.handler.onInputKeyDown&&(n=t.handler.onInputKeyDown(t,e.keyCode,e.target.value,e.shiftKey)),e.ctrlKey&&83===e.keyCode&&(n=!0),n&&e.preventDefault(),e.stopPropagation(),!n},onKeyPress:function(e){var n,o=!1;if(e.charCode)if(void 0!==t.handler.onInputKeyPress&&(o=t.handler.onInputKeyPress(t,e.charCode,e.target.value)),o){e.preventDefault();var r=d().Config.Properties.getProp(t,"InputBehavior");if(r&&r.ClearOnInvalidInput){var a="",s="";t.handler.createPlaceholder&&(a=t.handler.createPlaceholder(t)),d().Config.Browser.msie()&&(s=a.trim(),t._clearPlaceholder=!0),(n=document.getElementById(i)).value=s,n.placeholder=a,n.setSelectionRange&&n.setSelectionRange(0,0)}}else t._clearPlaceholder&&(t._clearPlaceholder=!1,(n=document.getElementById(i)).value="");return e.stopPropagation(),!o},checkHandleInputEnd:function(e){null!==t&&t===e&&c(!0)},checkHandleInputEndForScreen:function(e){var n=null!==t?t.container:null;null!==t&&n===e&&c(!0)},forceInputEnd:function(e){null!==t&&c()}}};const q=function(e){return Q(e)};var Z=function(e){var t=d().Config.PropertyEnums,n=[],o=function(t){var n=t.currentTarget.getAttribute("data-rtoid");return e.SOMManager.getItem(n)},r=function(e,t,n,o){var r=d().Config.Properties,i=d().Canvas.Converters,a={};t.isTopLevelScreenWindow?(a.x=0,a.y=0,a.adaptScreenToWindowFactor=1):d().HmiTypes.HmiObject.getRelPosToTLSW(t.container,a),n.x=(e.x-a.x)/a.adaptScreenToWindowFactor,n.y=(e.y-a.y)/a.adaptScreenToWindowFactor,void 0!==o&&(o.x=n.x-r.getProp(t,"Left",i.enumConverter.None,0),o.y=n.y-r.getProp(t,"Top",i.enumConverter.None,0))},i=function(e){return e.preventDefault(),e.stopPropagation(),!1},a=function(e,n){var o=e.props.Operability;o&&!e.gfxWebLib.getCheckAuthorization()&&(o&=~t.HmiOperability.NoAuthorization);var r,i,a=void 0===o||o===t.HmiOperability.Operable;if(!a&&n&&e.props.Operability===t.HmiOperability.NoAuthorization){switch(e.props.Operability){case t.HmiOperability.DisabledProgrammatically:i="TBID_OperationDisabledProgrammatically";break;case t.HmiOperability.NoExplicitUnlock:i="TBID_OperationNoExplicitUnlock";break;default:i="TBID_OperationNotAuthorized"}d().Debug.consolLog(d().Debug.enumTraceMode.Info," Interaction checkPermission: OperationNotAuthorized"),r=d().TextBib.getText(i),H.showMessageOnce(r,{closeTimeout:1e4})}return a},s=function(t){if(t.item&&t.item.container&&!d().HmiTypes.Utils.isScreen(t.item)){const n=t.item.groupContainer||t.item.container;n.isEnabled&&e.Interaction.Selection.setActiveItem(n)}},c=function(e,t){for(;e;){if(t.includes(e))return!0;e=e.parentNode}return!1},l=function(e,t){switch(e.item.props.Type){case"Screen":case"FaceplateType":return(e.target===e.item.domHtmlItems||c(e.target,[e.item.svgWndBg]))&&t(e),!1;case"ScreenWindow":case"FaceplateContainer":case"PopupScreenWindow":return!(!e.item.domSvgNode||!c(e.target,[e.item.domSvgNode,e.item._scrollBaseVertical?e.item._scrollBaseVertical.node:null,e.item._scrollBaseHorizontal?e.item._scrollBaseHorizontal.node:null]))&&(t(e),!0);case"Button":return t(e),!(!(n=e.item).events||!n.events.includes(O.HmiEventID.Down)&&!n.events.includes(O.HmiEventID.Up))||d().HmiTypes.HmiObject.isExplicitUnlock(n);case"AlarmControl":case"TrendControl":case"FunctionTrendControl":case"TrendCompanion":case"ObjectExplorerControl":case"ProcessControl":case"SystemDiagnosisControl":case"DetailedParameterControl":case"ProcessDiagnosisGraphOverviewControl":case"ProcessDiagnosisPlcCodeViewerControl":case"ProcessDiagnosisCriteriaAnalysisControl":return!0;case"IOField":return t(e),!0;default:return t(e),!1}var n},u={zoomOnPoint:{enabledEvents:{down:function(t){return l(t,e.Interaction.onPointerDown.bind(e.Interaction))},move:function(t){return e.Interaction.onPointerMove(t),!0},up:function(t){return l(t,e.Interaction.onPointerUp.bind(e.Interaction)),!0},enter:function(t){return e.Interaction.onMouseEnter(t),!0},leave:function(t){return e.Interaction.onMouseLeave(t),!0}},disabledEvents:{down:function(e){return s(e),!1},move:function(e){return!1},up:function(e){return!1},enter:function(t){return e.Interaction.onMouseEnter(t),!0},leave:function(t){return e.Interaction.onMouseLeave(t),!0}}},legacy:{enabledEvents:{down:function(t){return e.Interaction.onPointerDown(t),!0},move:function(t){return e.Interaction.onPointerMove(t),!0},up:function(t){return e.Interaction.onPointerUp(t),!0},enter:function(t){return e.Interaction.onMouseEnter(t),!0},leave:function(t){return e.Interaction.onMouseLeave(t),!0}},disabledEvents:{down:function(e){return s(e),!0},move:function(e){return!0},up:function(e){return!0},enter:function(t){return e.Interaction.onMouseEnter(t),!0},leave:function(t){return e.Interaction.onMouseLeave(t),!0}}}},p=null,m=function(){return p=p||U.createInstance(document,{autoStart:!1,callbacks:{move:function(t){t.preventDefault(),e.Interaction.onPointerMove(t)}}})};return{Selection:Y(e),Cursor:z(e),Input:q(e),Keyboard:G(e),Wheel:X(e),setCapture:function(e){e&&(0===n.length&&m().setCapture(),n.push(e))},releaseCapture:function(e){var t,o=n.pop();if(o)try{(t=o.handler)&&t.onReleaseCapture&&t.onReleaseCapture(o,0,0,e),0===n.length&&m().releaseCapture()}catch(e){d().Debug.traceErr(e,"PWC.Core.Interaction:releaseCapture()")}},onPointerMove:function(e){var t,i,a={},s=n.length;s>0?(i=n[s-1])&&(t=i.handler)&&t.onPointerMove&&(r(e,i,{},a),t.onPointerMove(i,a.x,a.y)):(i=o(e))&&(t=i.handler)&&t.onPointerUpdate&&t.onPointerUpdate(i,e)},onMouseEnter:function(t,n){null!==(n=n||o(t))&&void 0===n.control&&(n.handler&&n.handler.onHover&&n.handler.onHover(n,!0),e.Tooltip.show(n,t.x,t.y),d().HmiTypes.HmiObject.canActivate(n,!0)?this.Cursor.setCursor(n.domNode,!0,"pointer"):n.props.Type===d().HmiTypes.HmiObjectTypes.TYPE_HMI_IOFIELD&&d().Config.Properties.getProp(n,"Enabled")&&d().Config.Properties.getProp(n,"IOFieldType")?this.Cursor.setCursor(n.domNode,!0,"text"):this.Cursor.setCursor(n.domNode,!0,"default"))},onMouseLeave:function(t,n){null!==(n=n||o(t))&&void 0===n.control&&(n.handler&&n.handler.onHover&&n.handler.onHover(n,!1),e.Tooltip.hide(),this.Cursor.setCursor(n.domNode,!0,"default"))},onPointerDown:function(t){var n,i,s={},c={};null!==(n=o(t))&&(e.Tooltip.suspend(),e.Notifier.sendTelemetryPointerDownEvent(n.rtoid,t.x,t.y),a(n,!0)&&(r(t,n,s,c),(i=n.handler)&&i.onPointerDown&&32768===i.onPointerDown(n,c.x,c.y,t.target,t.button,t)&&(m().pointerId=t.pointerId,t.preventDefault()),this.Selection.onPointerDown(n,s.x,s.y,t.button,t.flags,t.trigger)))},onPointerUp:function(t){var n,i,s={},c={};n=o(t),this.releaseCapture(n),e.Tooltip.resume(),null!==n&&(e.Notifier.sendTelemetryPointerUpEvent(n.rtoid,t.x,t.y),t.click&&e.Notifier.sendTelemetryTappedEvent(n.rtoid,t.x,t.y),a(n,!1)&&(r(t,n,s,c),(i=n.handler)&&i.onPointerUp&&i.onPointerUp(n,c.x,c.y,t.target,t.button),this.Selection.onPointerUp(n,s.x,s.y,t.button,t.flags,t.click,t.trigger)))},addEvents:function(e,t){var n=e.useSvgNodeForEvents?e.domSvgNode:e.domNode;e.pointers=e.pointers||U.createInstance(n,{item:e});var o=u.legacy;d().Settings.zoomOnPoint&&(o=u.zoomOnPoint),(t=void 0===t||t)&&(e.operable||d().HmiTypes.HmiObject.hasActions(e)||d().HmiTypes.HmiObject.isExplicitUnlock(e))?e.pointers.set({callbacks:o.enabledEvents}):e.pointers.set({callbacks:o.disabledEvents})},removeEvents:function(e){e.pointers&&(e.pointers.stop(),e.pointers=null)},preventDefaultEvtBehavior:function(e){return!!d().Settings.disablePreventDefaultEvents||i(e)},evtX:function(e){return Math.round(void 0!==e.pageX?e.pageX:e.clientX)},evtY:function(e){return Math.round(void 0!==e.pageY?e.pageY:e.clientY)},emptyEventHandler:i,checkPermission:a,getRelEventPosInScreenAndItem:r}};const J=function(e){return Z(e)};var $=function(){function e(e){this.core=e}return e.prototype.openScreen=function(e){var t=!1;e.parent=e.parent||this.core.toplevelWindow.rtoid;var n=this.core.SOMManager.getScreenWindow(e.parent);if(null!==n){n.screen&&void 0!==n.screen.initialized&&(t=n.screen.initialized);var o=e;o.gfxWebLib=n.gfxWebLib,o.container=n,o.initialized=t;var r=n.pendingScreen;r&&(d().Debug.consolLog(d().Debug.enumTraceMode.Warning,"JSONProcessor:openScreen() Warning: pending screen cleanup"),v.onCleanUp(r)),n.pendingScreen=n.screen,n.screen=o,v.onDocumentChanged(this.core,o)}},e.prototype.activateScreen=function(e){e.parent=e.parent||this.core.toplevelWindow.rtoid;var t=this.core.SOMManager.getScreenWindow(e.parent);if(null!==t){var n=t.pendingScreen;n&&(t.pendingScreen=null,v.onCleanUp(n)),t.screen?v.onDocumentActivated(t.screen):d().Debug.consolLog(d().Debug.enumTraceMode.Warning,"JSONProcessor:activateScreen() Warning: no screen loaded")}},e.prototype.closeScreen=function(e){e.parent=e.parent||this.core.toplevelWindow.rtoid;var t=this.core.SOMManager.getScreenWindow(e.parent);t&&t.screen&&"FaceplateContainer"===t.props.Type&&(v.onCleanUp(t.screen),t.screen=null)},e.prototype.updateProperties=function(e){for(var t=e.length,n=0;n<t;n+=1){var o=e[n];if(o.parent){var r=this.core.SOMManager.findScreenFromSWID(o.parent);if(null===r||r.isCleanedUp||r.rtoid!==o.rtoid){if(d().Debug.consolLog(d().Debug.enumTraceMode.Warning,"JSONProcessor:updateProperties() Warning: Screen not found. screen.rtoid: "+o.rtoid),this.core.containerMap){const e=this.core.containerMap.get(o.parent);e&&(e.faceplateUpdates=e.faceplateUpdates||[],e.faceplateUpdates.push(o))}}else if(r.activated)v.onObjectChanged(r,o);else if(r.handler)v.onObjectInitialized(r,o);else{const e=this.core.SOMManager.getScreenWindow(r.parent);e&&e.control&&e.control.handler.onObjectInitialized(e,o)}}else if(o.items)for(var i=0;i<o.items.length;i+=1){var a=o.items[i],s=this.core.SOMManager.getScreenWindow(a.rtoid);s&&s.handler&&s.handler.onChanged(s,a.props,a.part)}}},e.prototype.updateDLData=function(e){var t=this.core.SOMManager.findScreenFromSWID(e.parent);if(t&&!t.isCleanedUp){var n=v.getItem(t,e.rtoid);if(n&&n.handler.onDLSendData)try{n.handler.onDLSendData(n,e.DL_id,e.DL_data),n.control&&n.control.initialized&&(n.dirtyFlags|=2,t.dirtyFlags|=4)}catch(e){d().Debug.traceErr(e,"JSONProcessor:onDomainLogicChanged()",t)}else n?d().Debug.consolLog(d().Debug.enumTraceMode.Warning,"JSONProcessor:onDomainLogicChanged Warning: Item has no handler for onDLSendDatanot. Item.type: "+n.props.Type):d().Debug.consolLog(d().Debug.enumTraceMode.Warning,"JSONProcessor:onDomainLogicChanged Warning: Item not found. data.rtoid: "+e.rtoid)}},e.prototype.invokeMethodAsync=function(e){var t=this.core.SOMManager.findScreenFromSWID(e.parent);if(t&&!t.isCleanedUp){var n=v.getItem(t,e.rtoid);if(n&&n.handler.invokeMethodAsync)try{n.handler.invokeMethodAsync(n,e.method)}catch(e){d().Debug.traceErr(e,"JSONProcessor:invokeMethodAsync()",t)}else n?d().Debug.consolLog(d().Debug.enumTraceMode.Warning,"JSONProcessor:invokeMethodAsync Warning: Item has no handler for invokeMethodAsync. Item.type: "+n.props.Type):d().Debug.consolLog(d().Debug.enumTraceMode.Warning,"JSONProcessor:invokeMethodAsync Warning: Item not found. data.rtoid: "+e.rtoid)}},e.prototype.projectPropertyChanged=function(e){var t;if(void 0!==e)if(void 0!==e.SystemState)d().Debug.consolLog(d().Debug.enumTraceMode.Info,"Connection:OnProjectPropertyChanged: SystemState = "+e.SystemState),e.SystemState<O.GfxSystemState.GFX_SYSTEM_STATE_ACTIVE&&(t=d().TextBib.getText("TBID_HR_0x8007139F",null,"Runtime not active."),H.showMessage(t));else if(void 0!==e.CurrentLanguage)d().Debug.consolLog(d().Debug.enumTraceMode.Info,"Connection:OnProjectPropertyChanged: CurrentLanguage = "+e.CurrentLanguage),"number"==typeof e.CurrentLanguage?this.core.SOMManager.onCurrentLanguage(e.CurrentLanguage)&&!this.core.options.isComponent&&this.core.options.UmcService.changeLanguage(d().TextBib.getCultureByLocaleId(e.CurrentLanguage)):"string"==typeof e.CurrentLanguage&&this.core.options.isComponent&&this.core.Notifier.sendProjectProperty("0",O.HmiProjectPropertyID.CurrentLanguage,d().TextBib.getLocaleIdByCulture(e.CurrentLanguage));else if(void 0!==e.Logout)d().Debug.consolLog(d().Debug.enumTraceMode.Info,"Connection:OnProjectPropertyChanged: Logout = "+e.Logout),e.Logout?this.core.options.UmcService.logout(!this.core.options.CheckAuthorization):void 0!==this.core.options.CheckAuthorization&&!0!==this.core.options.CheckAuthorization||window.location.reload();else if(void 0!==e.AdaptBaseScreenToWindow){if(d().Debug.consolLog(d().Debug.enumTraceMode.Info,"Connection:OnProjectPropertyChanged: AdaptBaseScreenToWindow  = "+e.AdaptBaseScreenToWindow),this.core.toplevelWindow.control){var n="0"!==e.AdaptBaseScreenToWindow.toString()?d().Config.PropertyEnums.HmiScreenWindowAdaption.ScreenToWindow:0;this.core.toplevelWindow.control.handler.onChanged(this.core.toplevelWindow,{Adaption:n})}}else d().Debug.consolLog(d().Debug.enumTraceMode.Info,"Connection:projectPropertyChanged: unknown property")},e.prototype.modelMessage=function(e){var t;void 0!==e&&(void 0!==e.OperationNotAuthorized?(d().Debug.consolLog(d().Debug.enumTraceMode.Info,"Connection:OnModelMessage: OperationNotAuthorized = "+e.OperationNotAuthorized),t=d().TextBib.getText("TBID_OperationNotAuthorized"),H.showMessageOnce(t,{closeTimeout:1e4})):void 0!==e.OperationWriteTagForbidden?(d().Debug.consolLog(d().Debug.enumTraceMode.Info,"Connection:OnModelMessage: OperationWriteTagForbidden = "+e.OperationWriteTagForbidden),t=d().TextBib.getText("TBID_OperationWriteTagForbidden"),H.showMessage(t,{closeTimeout:1e4})):void 0!==e.NotifyNoLicense?(d().Debug.consolLog(d().Debug.enumTraceMode.Info,"Connection:OnModelMessage: NotifyNoLicense = "+e.NotifyNoLicense),H.showMessageOnce(e.NotifyNoLicense,{width:400,icon:"fa fa-ban fa-3x"})):d().Debug.consolLog(d().Debug.enumTraceMode.Info,"Connection:OnModelMessage: unknown message"))},e}();const ee=$;var te=function(e){var t=!1,n=[],o=function(e){for(var t=n.length,o=0;o<t;o+=1){var r=n[o];if(e(r))return r}return null},r=function(e){return o((function(t){return t.rtoid===e}))},i=function(e){var t=o((function(t){if(t.screen)return t.rtoid===e}));return null!==t?t.screen:null},a=function(e){var t,n=function(e){if(null!==e){var t=e.split("_");if(t.length>0)return t[0]}return"00"}(e);return"00"!==n&&(n+="_00",null!==(t=o((function(e){if(e.screen)return e.screen.rtoid===n}))))?t.screen:null},s=[],c=null,l=function(t){if(d().Debug.consolLog(d().Debug.enumTraceMode.Perf,t),d().Debug.getTraceMode()===d().Debug.enumTraceMode.Perf){var n=d().Formatter.format(Date.now(),"{T,@HH:mm:ss:SSS}",{timeZone:"localtime"});e.Notifier.sendTraceEvent("0",n+" : "+t)}},u=function(e){d().Debug.getTraceMode()===d().Debug.enumTraceMode.Perf&&s.push(e)},p=function(){for(var t=s.shift();t;)l(t),t=s.shift();var o=function(){for(var t,o=n.length,r=0,i=0;i<o;i+=1){var a=n[i].screen;a&&a.dirtyFlags&&(d().Debug.traceSwitch(d().Debug.enumTraceMode.Perf)&&!a.lateResponseDisabled&&(t=d().Debug.traceTimerStart(),l("LateResponseStarted")),r+=v.onRedraw(a),d().Debug.traceSwitch(d().Debug.enumTraceMode.Perf)&&!a.lateResponseDisabled&&(u("FinishedDrawingLateResponse"),l("LateResponseFinished"),d().Debug.traceTimerLog("LateResponse",t)),a.dirtyFlags=0,a.lateResponseDisabled=!0)}if(r){var s=e.Interaction.Selection.getActiveItem();!s||d().HmiTypes.Utils.isScreen(s)||d().HmiTypes.HmiObject.canActivate(s)||e.Interaction.Selection.initializeActiveItem()}return r}();return c&&(c(),c=null),o},m={div:null,then:Date.now(),interval:1e3/30,redrawCalls:0,trace:!1,show:function(e){var t=1e3/e;null===this.div?this.div=d().Canvas.Dom.createDomElement("div",{id:"ID_FPS_DIV",style:"position:absolute; pointer-events:none; user-select:none; left:0px; top:0px; font-size:200%;",appendTo:document.body}):this.div.innerHTML=t.toFixed(1)}},g=function(){var e=Date.now(),t=e-m.then;t>m.interval?(m.then=e-t%m.interval,m.trace&&m.redrawCalls&&m.show(t),m.redrawCalls=p()):t<0&&(m.then=e),window.requestAnimationFrame(g)};return window.requestAnimationFrame(g),{JSONProcessor:new ee(e),reset:function(){if(t=!1,e.popupScreen.items.length){var o=e.popupScreen.items.slice(0);v.onObjectRemoved(e.popupScreen,o)}n.splice(1)},onCurrentLanguage:function(t){var o=e.gfxWebLib,r=!1;if(d().Debug.consolLog(d().Debug.enumTraceMode.TestCurr,"onCurrentLanguage. locale: "+t.toString()),o&&o.textbib.getLocale()!==t&&(o.textbib.setLocale(t),r=!0),r)for(var i=0;i<n.length;i+=1){var a=n[i].screen;a&&v.onCurrentLanguage(a,t)}return r},onScreenLoaded:function(e){var t,n=d().Config.Properties.getProp(e,"Name");d().Debug.traceSwitch(d().Debug.enumTraceMode.Perf)&&(t=d().Debug.traceTimerStart(),d().Canvas.Svg.resetSvgElementCount(),l("OpenScreenStarted: "+n)),this.JSONProcessor.openScreen(e),d().Debug.traceSwitch(d().Debug.enumTraceMode.Perf)&&(l("OpenScreenFinished: "+n),d().Debug.consolLog(d().Debug.enumTraceMode.Perf,"Number of svg elements: "+d().Canvas.Svg.getSvgElementCount().toString()),d().Debug.traceTimerLog("OpenScreen",t))},onScreenActivated:function(e){var t;d().Debug.traceSwitch(d().Debug.enumTraceMode.Perf)&&(t=d().Debug.traceTimerStart()),this.JSONProcessor.activateScreen(e),d().Debug.traceSwitch(d().Debug.enumTraceMode.Perf)&&(u("FinishedStaticDrawing"),d().Debug.traceTimerLog("ActivateScreen",t))},onScreenUnloaded:function(e){this.JSONProcessor.closeScreen(e)},onPropertiesChanged:function(e){this.JSONProcessor.updateProperties(e)},onDynamicChanged:function(e){if("FlashingDynamic"===e.type){var t=a(e.rtoid);t&&v.onFlashingDynamicChanged(t,e)}},onObjectAdded:function(t){if(t.parent){var n=r(t.parent);n&&n.screen&&t.items&&v.onObjectAdded(n.screen,t.items)}else v.onObjectAdded(e.popupScreen,t.items)},onObjectRemoved:function(t){if(t.parent){var n=r(t.parent);n&&n.screen&&t.items&&v.onObjectRemoved(n.screen,t.items)}else v.onObjectRemoved(e.popupScreen,t.items)},onObjectMoved:function(e){var t=r(e.parent);t&&t.screen&&e.items&&v.onObjectMoved(t.screen,e.items)},onDomainLogicChanged:function(e){var t,n,o=!1;if(d().Debug.traceSwitch(d().Debug.enumTraceMode.Perf)&&(o=!!(n=i(Array.isArray(e)?e[0].parent:e.parent))&&!n.domaiLogicResponseDisabled)&&(t=d().Debug.traceTimerStart(),l("DomainLogicChangedStarted")),Array.isArray(e))for(var r=0;r<e.length;)this.JSONProcessor.updateDLData(e[r]),r++;else this.JSONProcessor.updateDLData(e);d().Debug.traceSwitch(d().Debug.enumTraceMode.Perf)&&o&&(u("FinishedDrawingAsyncResponse"),l("DomainLogicChangedFinished"),d().Debug.traceTimerLog("DomainLogicChanged",t)),n&&(n.domaiLogicResponseDisabled=!0)},onInvokeMethodAsync:function(e){var t;d().Debug.traceSwitch(d().Debug.enumTraceMode.PerfLow)&&(t=d().Debug.traceTimerStart(),d().Debug.consolLog(d().Debug.enumTraceMode.PerfLow,"Dispatcher:onInvokeMethodAsync() start."));try{this.JSONProcessor.invokeMethodAsync(e)}catch(e){d().Debug.traceErr(e,"Dispatcher:onInvokeMethodAsync()")}d().Debug.traceSwitch(d().Debug.enumTraceMode.PerfLow)&&d().Debug.traceTimerLog("Dispatcher:onInvokeMethodAsync() end.",t)},onProjectPropertyChanged:function(e){this.JSONProcessor.projectPropertyChanged(e)},onModelMessage:function(e){this.JSONProcessor.modelMessage(e)},onStyleChanged:function(o){var r,i=o.name;i&&(e.Tooltip.onCleanUp(),e.gfxWebLib.setStyle(i,o.systemparts),t&&(r=function(){e.toplevelWindow.handler.onCurrentStyle(e.toplevelWindow,i);for(var t=0;t<n.length;t+=1){var o=n[t].screen;o&&v.updateStyle(o,i)}},c=r),t=!0)},addScreenWindow:function(e){n.push(e)},removeScreenWindow:function(e){var t=n.indexOf(e);t>-1&&n.splice(t,1)},findScreenFromSWID:i,getScreenWindow:r,getItem:function(e){var t=a(e);return null!==t?t.rtoid===e?t:v.getItem(t,e):r(e)},getScreenWindows:function(){return n},updateFlashing:function(e,t){for(var o=n.length,r=!0,i=0;i<o;i+=1){var a=n[i].screen;a&&(a.flashingCount||a.flashingCountCustom)&&(v.onFlashing(a,e,t),r=!1)}return r},notifyTraceState:l,registerTraceState:u}};const ne=function(e){return te(e)};var oe=function(e,t){return e+"/"+t},re=function(e){var t=[],n=[],o=[],r=function(e,t,n){var o=e[t];o&&window.setTimeout((function(){o.apply(e,n)}),0)},i=function(n,o){var i=t.length;if(i){var a=function(e,t,n){var o=e.getItem(n[0]);switch(t){case"sendToolBarCommand":return{method:"onEvent",args:[o,"ToolBarCommand",{CommandId:n[1]}]};case"sendEvent":return n[1]===O.HmiEventID.Activated?n[1]="Activated":n[1]===O.HmiEventID.Deactivated?n[1]="Deactivated":n[1]===O.HmiEventID.OnScreenWindowClose&&(n[1]="OnScreenWindowClose"),{method:"onEvent",args:[o,n[1],{Value:n[2]}]};case"sendEventByName":return{method:"onEvent",args:[o,n[1],{Value:n[2]}]};case"sendKeyboardPressedEvent":return{method:"onEvent",args:[o,"KeyDown",{KeyCode:n[1],Modifiers:n[3]}]};case"sendKeyboardReleasedEvent":return{method:"onEvent",args:[o,"KeyUp",{KeyCode:n[1],Modifiers:n[3]}]};case"sendTappedEvent":return{method:"onEvent",args:[o,n[3]>1?"ContextTapped":"Tapped",{X:n[1],Y:n[2],Modifiers:n[4],Trigger:n[5]}]};case"sendGestureEvent":return{method:"onEvent",args:[o,"GestureDetected",{Gesture:n[1]}]};case"sendPointerDownEvent":return{method:"onEvent",args:[o,"Down",{X:n[1],Y:n[2],Modifiers:n[4],Trigger:n[5]}]};case"sendPointerUpEvent":return{method:"onEvent",args:[o,"Up",{X:n[1],Y:n[2],Modifiers:n[4],Trigger:n[5]}]};case"sendPropertyByName":return{method:"onPropertiesChanged",args:[[{item:o,path:n[1],value:n[2],notify:n[3]}]]};case"sendPropertiesByName":var r=[],i=n[1];for(var a in i)i.hasOwnProperty(a)&&r.push({item:o,path:a,value:i[a],notify:n[2]});return{method:"onPropertiesChanged",args:[r]};case"sendPartPropertyByName":return{method:"onPropertiesChanged",args:[[{item:o,path:oe(n[1],n[2]),value:n[3],notify:n[4]}]]};case"sendPartPropertiesByName":var s=[],c=n[2];for(var l in c)c.hasOwnProperty(l)&&s.push({item:o,path:oe(n[1],l),value:c[l],notify:n[3]});return{method:"onPropertiesChanged",args:[s]};case"onScreenLoaded":case"onScreenActivated":return{method:t,args:[o,n[1]]};case"onScreenUnloaded":return{method:t,args:[n[1]]};case"sendAsyncMethodResult":return{method:"onInvokeMethodAsync",args:[o,n[1],n[2]]};case"sendTraceEvent":return{method:"onTraceMessage",args:[n[1]]};case"sendProjectProperty":return{method:"onProjectPropertiesChanged",args:[n[1],n[2]]};default:return null}}(e.SOMManager,n,o);if(a)for(var s=0;s<i;s++){var c=t[s];r(c,a.method,a.args)}}},a=function(e,t){var o=n.length;if(o)for(var r=0;r<o;r++){var i=n[r],a=i[e];a&&a.apply(i,t)}},s=function(e,t){var n=o.length;if(n)for(var r=0;r<n;r++){var i=o[r],a=i[e];a&&a.apply(i,t)}};return{registerEventNotify:function(e){if(-1===t.indexOf(e))return t.push(e),!0},registerRHProxyNotify:function(e){if(-1===n.indexOf(e))return n.push(e),!0},registerTelemetryNotify:function(e){if(-1===o.indexOf(e))return o.push(e),!0},sendTappedEvent:function(){a("sendTappedEvent",arguments),i("sendTappedEvent",arguments)},sendGestureEvent:function(){a("sendGestureEvent",arguments),i("sendGestureEvent",arguments)},sendPointerDownEvent:function(){a("sendPointerDownEvent",arguments),i("sendPointerDownEvent",arguments)},sendPointerUpEvent:function(){a("sendPointerUpEvent",arguments),i("sendPointerUpEvent",arguments)},sendKeyboardPressedEvent:function(){a("sendKeyboardPressedEvent",arguments),i("sendKeyboardPressedEvent",arguments)},sendKeyboardReleasedEvent:function(){a("sendKeyboardReleasedEvent",arguments),i("sendKeyboardReleasedEvent",arguments)},sendPropertyByName:function(){a("sendPropertyByName",arguments),i("sendPropertyByName",arguments)},sendPropertiesByName:function(){a("sendPropertiesByName",arguments)},sendPartPropertyByName:function(){a("sendPartPropertyByName",arguments),i("sendPartPropertyByName",arguments)},sendPartPropertiesByName:function(){a("sendPartPropertiesByName",arguments)},setPropertyValue:function(){a("setPropertyValue",arguments)},sendDomainLogicEvent:function(){a("sendDomainLogicEvent",arguments)},sendAsyncMethodResult:function(){a("sendAsyncMethodResult",arguments),i("sendAsyncMethodResult",arguments)},sendToolBarCommand:function(){a("sendToolBarCommand",arguments)},sendEvent:function(){a("sendEvent",arguments),i("sendEvent",arguments)},sendEventByName:function(){a("sendEventByName",arguments),i("sendEventByName",arguments)},sendScreenItemCreate:function(){a("sendScreenItemCreate",arguments)},sendScreenItemDelete:function(){a("sendScreenItemDelete",arguments)},sendPartCreate:function(){a("sendPartCreate",arguments)},sendPartDelete:function(){a("sendPartDelete",arguments)},sendPartMove:function(){a("sendPartMove",arguments)},sendTraceEvent:function(){a("sendTraceEvent",arguments)},sendProjectProperty:function(){a("sendProjectProperty",arguments)},onScreenLoaded:function(){a("onScreenLoaded",arguments),i("onScreenLoaded",arguments)},onScreenActivated:function(){i("onScreenActivated",arguments)},onScreenUnloaded:function(){i("onScreenUnloaded",arguments)},onEvent:function(){r("onEvent",arguments)},onPropertiesChanged:function(){r("onPropertiesChanged",arguments)},sendTelemetryTappedEvent:function(){s("sendTappedEvent",arguments)},sendTelemetryPointerDownEvent:function(){s("sendPointerDownEvent",arguments)},sendTelemetryPointerUpEvent:function(){s("sendPointerUpEvent",arguments)}}};const ie=function(e){return re(e)};var ae=function(){function e(e){this.core=e}return e.splitPath=function(e){var t=e.replace(/\//gi,":").split(":");if(t.length>1){var n=t.pop();return{part:t.join(":"),name:n}}return{name:t[0]}},e.getValue=function(e,t,n){var o=d().Config.Properties;if(!n)return o.getProp(e,t);var r=o.getPart(e,n);return r?o.getPropPart(r,r.Type,t):null},e.buildScreenItemPath=function(e){for(var t="";e&&e.container;)switch(e.props.Type){case"TopLevelScreenWindow":t="~"+t,e=null;break;case"ScreenWindow":case"PopupScreenWindow":case"FaceplateContainer":t="/"+e.props.Name+t,e=e.container;break;case"Screen":case"FaceplateType":e=e.container;break;default:t="/"+e.props.Name,e=e.container}return t},e.getRootScreenWindow=function(e){for(;e&&e.container;)switch(e.props.Type){case"TopLevelScreenWindow":case"PopupScreenWindow":return e;default:e=e.container}},e.updateFlashingProperty=function(e,t,n,o){let r=e.container;if("Screen"!==e.props.Type&&"FaceplateType"!==e.props.Type||(r=e),r.flashing){const i=r.flashing.find((t=>t.item===e&&t.part===n));if(i){const e=i.props[t];e&&(e.CurrentValue=o)}}},e.prototype.loadScreen=function(e,t){e=e||this.core.toplevelWindow,t.parent=e.rtoid,this.core.SOMManager.onScreenLoaded(t),this.core.SOMManager.onScreenActivated(t)},e.prototype.setProperty=function(t,n,o){if(t&&t.handler){var r=e.splitPath(n),i=Object.defineProperty({},r.name,{value:o,enumerable:!0,writable:!0});e.updateFlashingProperty(t,r.name,r.part,o),t.handler.onChanged(t,i,r.part)}},e.prototype.getProperty=function(t,n){if(t&&t.handler){var o=e.splitPath(n);return e.getValue(t,o.name,o.part)}return null},e.prototype.resolvePath=function(t,n){var o=e.splitPath(n);if(o.part){var r=d().Config.Properties.getPart(t,o.part);return{part:o.part,type:d().HmiTypes.ControlBar.getTypeNameFromId(r.Type),name:o.name}}return{name:o.name,type:t.props.Type}},e.prototype.getLanguageID=function(){return d().TextBib.getLocale()},e.prototype.setLanguageID=function(e){this.core.SOMManager.onCurrentLanguage(e)},e.prototype.getLanguage=function(){return d().TextBib.getCultureByLocaleId(d().TextBib.getLocale())},e.prototype.setLanguage=function(e){var t=d().TextBib.getLocaleIdByCulture(e);this.core.SOMManager.onCurrentLanguage(t)},e.prototype.getStyle=function(){return this.core.gfxWebLib.getStyle(!0)},e.prototype.setStyle=function(e,t){this.core.SOMManager.onStyleChanged({name:e,systemparts:t})},e.prototype.getWindows=function(){return this.core.SOMManager.getScreenWindows()},e.prototype.getActiveWindow=function(){return this.core.Interaction.Selection.getActiveWindow()||this.core.toplevelWindow},e.prototype.getWindowById=function(e){return this.core.SOMManager.getScreenWindow(e)},e.prototype.getRootScreenWindowByName=function(e){var t=this.core.SOMManager.getScreenWindows(),n=t.filter((t=>"TopLevelScreenWindow"===t.props.Type&&t.props.Name===e))[0];if(n)return n;var o=t.filter((t=>"PopupScreenWindow"===t.props.Type&&t.props.Name===e))[0];return o||void 0},e.prototype.getRootScreenWindow=function(t){return t?e.getRootScreenWindow(t):this.core.toplevelWindow},e.prototype.findItem=function(e,t){var n;if(t.startsWith("~")){t="."+t.substring(1);var o=this.getRootScreenWindow(e);return this.findItem(o.screen,t)}if(t.startsWith("./")){if(e)return this.findItem(e,t.substring(2))}else if("."===t){if(e)return n=e.container}else if(t.startsWith("/")){var r=t.split("/"),i=r[1];r.splice(0,2);var a=r.join("/")||".",s=this.getRootScreenWindowByName(i);if(s)return"."===a?s:this.findItem(s.screen,a)}else if(t.startsWith("..")){if(e&&(n=e.container)&&"PopupScreenWindow"!==n.props.Type&&"TopLevelScreenWindow"!==n.props.Type){var c=n.container;if(c)return this.findItem(c,"."+t.substring(2))}}else{var l,u=t.split("/"),p=u.shift(),m=u.join("/"),g=p.split("."),h=g.shift(),f=g.join(".");if(e&&(l="Screen"===h?e:e.items.filter((e=>e.props.Name===h))[0]),l){if(!m)return f?d().Config.Properties.getPart(l,f):l;if(l.props.Type.includes("ScreenWindow")&&l.screen)return this.findItem(l.screen,m)}}return null},e.prototype.findItemInRootScreenWindow=function(e,t){if(t.startsWith("/")){var n=t.split("/"),o=n[1];n.splice(0,2);var r=n.join("/")||".";if(e=this.getRootScreenWindowByName(o))return this.findItemInRootScreenWindow(e,r)}else{if("~"===t||"."===t)return e;if(e){(t.startsWith("~/")||t.startsWith("./"))&&(t=t.substring(2));var i=e.screen;if(i)return this.findItem(i,t)}}},e.prototype.contextFindItem=function(t,n){if(t){const o=e.getRootScreenWindow(t);return this.findItemInRootScreenWindow(o,n)}},e.prototype.addItem=function(e,t){if(e){var n=e.container;this.core.SOMManager.onObjectAdded({parent:n.rtoid,items:[t]})}else this.core.SOMManager.onObjectAdded({items:[t]})},e.prototype.removeItem=function(e,t){if(e){var n=e.container;this.core.SOMManager.onObjectRemoved({parent:n.rtoid,items:[t]})}else this.core.SOMManager.onObjectRemoved({items:[t]})},e.prototype.getItemPath=function(t){var n="";return t&&(t.screenItemPath?n=t.screenItemPath:(n=e.buildScreenItemPath(t),t.screenItemPath=n)),n},e}();const se=ae;var ce=function(e){var t,n=!1,o=!1,r=null,i=null,a=function(){if(i){var e=i.node;if(o)return;e.style.visibility="hidden"}},s=function(e,n,o){var r,i,a,s,c,l,u,p,m=o.node,g=0,h=0,f=document.documentElement.clientWidth+window.scrollX,v=document.documentElement.clientHeight+window.scrollY;m.style.visibility="visible",o.templateInstance&&(r=o.templateInstance.RootNode,i=(s=e+7)+(i=s+(g=o.props.Width)>=f?-g:7)>0?i:7,a=(c=n+11)+(a=c+(h=o.props.Height)>=v?-h:11)>0?a:11,(t.split(".")[0]>=17||""===t)&&(p={},l=d().Config.PropertyEnums.HmiHorizontalAlignment,u=d().Config.PropertyEnums.HmiVerticalAlignment,p.HorizontalAlignment=7!==i?l.Right:l.Left,p.VerticalAlignment=11!==a?u.Bottom:u.Top,d().HmiTypes.Advanced.Template.updateSubTemplate(o,p),p=null),r.setAttribute("x",e+i),r.setAttribute("y",n+a))};return{show:function(c,l,u,p){var m,g=d().Config.Properties,h=d().Canvas.Converters;if((!n||void 0!==p)&&(p&&(o=!0,null!==r&&clearTimeout(r),r=setTimeout((function(){o=!1,r=null,a()}),2e3)),m=p||g.getProp(c,"ToolTipText",h.enumConverter.None,""),d().Settings.showDeveloperTooltip&&(""!==m&&(m+="   "),m+=">>>item: ",m+=g.getPropRaw(c,"Name")||"",m+=" "+c.rtoid),""!==m)){i=i||function(n,o,r){var i=document.documentElement.scrollWidth,a=document.documentElement.scrollHeight,c=d().Config.PropertyEnums;t=e.gfxWebLib.getProjectVersion();var l={gfxWebLib:e.gfxWebLib,handler:{},props:d().Config.SystemParts.getSystemPartDefault("TooltipSystemPart"),cbOnTemplateLoaded:function(e){var t,n,c;n=d().Canvas.Svg.createSvgElement("svg",{width:i,height:a,appendTo:e.node}),t=d().Canvas.Svg.createSvgElement("clipPath",{id:"tooltipClipPath",appendTo:n}),d().Canvas.Svg.createSvgElement("rect",{width:i,height:a,appendTo:t}),(c=e.node.removeChild(e.templateInstance.RootNode)).setAttribute("clip-path","url(#tooltipClipPath)"),n.appendChild(c),s(o,r,e)},cbOnChanged:function(){}};return l.props.Type="TooltipSystemPart",l.props.Width=1e3,l.props.Height=100,(t.split(".")[0]>=17||""===t)&&(l.props.HorizontalAlignment=c.HmiHorizontalAlignment.Left,l.props.VerticalAlignment=c.HmiVerticalAlignment.Top),l.node=d().Canvas.Dom.createDomElement("div",{id:"ID_Tooltip",style:"left:0px;top:0px;pointer-events:none; position:absolute; visibility:hidden; userSelect:none; z-index:65535; width:"+i+"px;height:"+a+"px;",appendTo:n}),d().HmiTypes.Advanced.Template.loadSubTemplate(l),l}(e.domNode,l,u);var f=h.converterBlanks2Nbsps(m);if(t&&t.split(".")[0]<17){var v=d().Canvas.Svg.getTextBBox(i.props.Font,f);d().HmiTypes.Advanced.Template.updateSubTemplate(i,{Text:f,Width:v.width+19,Height:v.height+40}),i.templateInstance&&(i.templateInstance.RootNode.setAttribute("width",v.width+24),i.templateInstance.RootNode.setAttribute("height",v.height+44))}else d().HmiTypes.Advanced.Template.updateSubTemplate(i,{Text:f});s(l,u,i)}},hide:a,suspend:function(){n=!0,a()},resume:function(){n=!1},onCleanUp:function(){i&&(i.templateInstance&&(i.templateInstance.remove(!0),i.templateInstance=null),i=null)}}};const le=function(e){return ce(e)};var de,ue,pe,me,ge,he,fe,ve,ye,Pe=(ue=0,pe=-1,me=!1,ge=[2e3,1e3,500,250,125],he=[!1,!1,!1,!1,!1],fe=function(e,t){for(var n=0;n<e.length;n++)if(e[n].freq===t)return{value:e[n].value};return!1},ve=function(e){var t=-1,n=-1,o=null;for(o in de.prototype.groups)de.prototype.groups[o].length>0&&(n=parseInt(o.substr(1)))>t&&(t=n);t!==pe&&(-1===pe||t<0||e&&me?(me=!1,pe=t,de.prototype.timer&&(clearInterval(de.prototype.timer),de.prototype.timer=null),pe>=0?de.prototype.timer=setInterval(ye,ge[pe]):(he=[!1,!1,!1,!1,!1],ue=0)):me=!0)},ye=function(e){var t={},n=de.prototype.groups,o={},r=-1,i=0,a=null,s=null,c=null,l=null,d=null;if(e)e=e.data;else for((ue+=Math.pow(2,4-pe))>=16&&(ue=0,me&&ve(!0)),e=[],i=0;i<de.prototype.freqList.length;i++)ue%de.prototype.freqList[i]==0&&(e.push({freq:4-i,value:he[i]}),he[i]=!he[i]);for(a in n)if(n.hasOwnProperty(a)&&(s=n[a])instanceof Array&&(r=parseInt(a.substr(1)),d=fe(e,r)))for(i in s)s.hasOwnProperty(i)&&(c=s[i].who)instanceof de&&(void 0!==t[l=c._internal.ownerName]&&t[l]instanceof Array&&void 0!==o[l]||(t[l]=[],o[l]=c),t[l].push({name:s[i].group,freq:r,value:d.value}));for(l in o)o.hasOwnProperty(l)&&o[l].onCycle.fire(t[l])},de=function(e){var t,n=this,o=de.prototype.groups;"string"!=typeof e&&(e="CycleService"),this.beginRegister=function(e,t){var r=null,i=!0,a=null,s=!1;if(("boolean"!=typeof arguments[2]||!arguments[2])&&("string"!=typeof e||"number"!=typeof t||0===e.length||t<0||t>4))return!1;for(a in void 0!==o["_"+t]&&o["_"+t]instanceof Array||(o["_"+t]=[],s=!0),r=o["_"+t])if(r[a].group===e&&r[a].who===n){i=!1;break}return!!i&&(r.push({who:n,group:e}),s&&ve(),!0)},this.beginUnregister=function(e,t){var r=0;if(("boolean"!=typeof arguments[2]||!arguments[2])&&("string"!=typeof e||"number"!=typeof t||0===e.length||t<0||t>4))return!1;if(void 0!==o["_"+t]&&o["_"+t]instanceof Array)for(r=0;r<o["_"+t].length;r++)if((null===e||o["_"+t][r].group===e)&&o["_"+t][r].who===n)return o["_"+t].splice(r,1),0===o["_"+t].length&&(delete o["_"+t],ve()),!0;return!1},this.onCycle=(t=[],{subscribe:function(e){t.push(e)},unsubscribe:function(e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)},fire:function(e){var n,o=t.slice();for(n=0;n<o.length;n++)o[n].call(null,{type:"onCycle",data:e})}}),this._internal={ownerName:e}},de.prototype.groups={},de.prototype.freqList=[1,2,4,8,16],de.prototype.timer=null,{local:new de,service:de});const be=function(e){return function(e){var t=Object.freeze({None:0,itemSpecific:536870912}),n=[!1,!1,!1],o=0,r=!1,i=e.options.LocalCycle||Pe.local,a=function(t){var a;if(t=Math.min(d().Config.PropertyEnums.HmiFlashingRate.None,t),r){if(t>o){for(a=o+1;a<=t;a++)i.beginRegister("WebRH",a);o=t}}else{if(r=!0,t===d().Config.PropertyEnums.HmiFlashingRate.None)return;for(o=Math.max(d().Config.PropertyEnums.HmiFlashingRate.Slow,t),i.onCycle.subscribe((function(t){var r=0,a=t.data,s=a.length,c=d().Config.PropertyEnums.HmiFlashingRate.Fast;for(r=0;r<s;r++)n[a[r].freq]=a[r].value,c=Math.min(c,a[r].freq);if(e.SOMManager.updateFlashing(c,n)){for(r=0;r<=o;r++)i.beginUnregister("WebRH",r);o=-1}})),a=0;a<=o;a++)i.beginRegister("WebRH",a)}};return{enumFlashingRate:d().Config.PropertyEnums.HmiFlashingRate,startFlashing:a,getFlashingRates:function(){return d().Config.PropertyEnums.HmiFlashingRate},setRemoveItemSpecificFlashing:function(e,n,o){e.container&&(n?(e.flashingProps=t.itemSpecific,e.flashingRate=void 0!==o?o:1,e.container.flashingCountCustom+=1):(e.flashingProps=t.None,e.container.flashingCountCustom-=1),e.flashingProps!==t.None&&a(e.flashingRate))},setFlashingProperties:function(e,t){var o,r,i,a=e.props,s=e.item,c=0,l={};if(s){for(r in a)a.hasOwnProperty(r)&&(o=a[r]).Active&&(i=Math.min(d().Config.PropertyEnums.HmiFlashingRate.Fast,o.Rate))>=t&&(c+=1,Object.defineProperty(l,r,{value:n[i]?o.Value:o.Alternate,configurable:!0,enumerable:!0,writable:!0}));c&&s.handler.onChanged(s,l,e.part)}}}}(e)};var Se=function(){function e(t,n){this.domNode=t,this.options=n||{},this.options.appDir=this.options.appDir||"",d().jQL.extend(d().Settings,this.options.clientConfig),this.config={appDir:this.options.appDir,appType:this.options.appType||d().AppType.SCADA,appMode:this.options.designMode?d().AppMode.EDIT:d().AppMode.RUNTIME,imageUrl:this.options.imageUrl||this.options.appDir+"resources/",templateUrl:this.options.templateUrl||this.options.appDir+"templates/",customControlUrl:this.options.customControlUrl||this.options.appDir+"customwebcontrols/",customWidgetUrl:this.options.customWidgetUrl||this.options.appDir+"customwidgets/"},this.SOMAccess=new se(this),this.Notifier=ie(this),this.SOMManager=ne(this),this.Interaction=J(this),this.Flashing=be(this),this.Tooltip=le(this);var o=x(this);this.gfxWebLib=o.create(this.config.appMode,this.config.appType,t),this.gfxWebLib.setHasActiveStyle(n.hasStartStyle),this.gfxWebLib.setProjectVersion(n.ProjectVersion),this.gfxWebLib.setProjectId(n.ProjectId),this.gfxWebLib.setCheckAuthorization(n.CheckAuthorization),d().Settings.zoomOnPoint&&!e.checkProjectVersion(this.gfxWebLib.getProjectVersion(),18)&&(d().Settings.scrollPopups=!0),this.toplevelWindow=e.createTopLevelWindow(this,t,this.options),this.popupScreen=e.createPopupScreen(this),this.options.designMode||e.addCoreEvents(this),e.addDesktopEvents(this)}return e.prototype.reset=function(e){if(e=e||{},d().jQL.extend(d().Settings,e.clientConfig),this.config.imageUrl=e.imageUrl||this.config.imageUrl,this.config.templateUrl=e.templateUrl||this.config.templateUrl,this.config.customControlUrl=e.customControlUrl||this.config.customControlUrl,this.config.customWidgetUrl=e.customWidgetUrl||this.config.customWidgetUrl,void 0!==e.ProjectId&&e.ProjectId!==this.gfxWebLib.getProjectId()&&window.location.reload(),void 0!==e.ProjectVersion){const t=this.gfxWebLib.getProjectVersion();this.gfxWebLib.setProjectVersion(e.ProjectVersion),t!==this.gfxWebLib.getProjectVersion()&&window.location.reload()}void 0!==e.CheckAuthorization&&this.gfxWebLib.setCheckAuthorization(e.CheckAuthorization),this.toplevelWindow.handler.cleanUpScrollBars&&this.toplevelWindow.handler.cleanUpScrollBars(this.toplevelWindow),this.SOMManager.reset()},e.prototype.close=function(){if(this.toplevelWindow){this.toplevelWindow.handler.onCleanUp(this.toplevelWindow);var e=this.toplevelWindow.domNode;e&&e.parentNode&&e.parentNode.removeChild(e)}this.Tooltip&&this.Tooltip.onCleanUp()},e.checkProjectVersion=function(e,t){return!e||e.split(".")[0]>=t},e.createTopLevelWindow=function(e,t,n){var o=P.createWindow(e,t,n);return e.SOMManager.addScreenWindow(o),o},e.createPopupScreen=function(e){var t=w.createWindow(e);return w.createScreen(e,t)},e.addCoreEvents=function(e){e.domNode.setAttribute("tabindex","0"),e.domNode.focus(),e.domNode.onkeydown=e.Interaction.Keyboard.onKeyDown,e.domNode.onkeyup=e.Interaction.Keyboard.onKeyUp,e.domNode.addEventListener("wheel",e.Interaction.Wheel.onMouseWheel,!1),document.addEventListener("wheel",(function(e){e.ctrlKey&&e.preventDefault()}),{passive:!1}),document.oncontextmenu=e.Interaction.emptyEventHandler,document.addEventListener("MSHoldVisual",e.Interaction.emptyEventHandler,!1),d().Settings.zoomOnPoint||document.addEventListener("scroll",e.toplevelWindow.control.handler.onScroll.bind(null,e.toplevelWindow),!1)},e.addDesktopEvents=function(e){e.config.appType!==d().AppType.CLOUD?window.addEventListener("resize",(function(){w.onResize(e)})):w.onResize(e)},e}();const Te=Se;n.Services.Pointers=U,webRHCore=t})();