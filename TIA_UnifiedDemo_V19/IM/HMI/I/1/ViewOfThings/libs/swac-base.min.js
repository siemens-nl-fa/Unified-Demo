/* Version 1.6.3, copyright (C) 2021, Siemens AG. All Rights Reserved. */

!function(){var e=function(){var q,n,e,t,o;if("undefined"==typeof Promise)throw new Error("SWAC will not run in this environment, Promise is not defined");try{var i=function(){};if(!window.SWAC||"object"==typeof window.SWAC&&"object"!=typeof window.SWAC.Communication||void 0===window.SWAC)(q=i.prototype).isContainer=!0,q.version="1.6.3",q._internal={},q._internal.Utils={getItemFromSessionStorage:function(e){var n={found:!1,value:null,type:null},t=null;try{t=window.sessionStorage.getItem(e)}catch(e){return n}if(null!==t){n.found=!0;try{n.value=JSON.parse(t),n.type=typeof n.value}catch(e){n.value=t,n.type="string"}}return n},checkVersion:function(e,n){var t,i,r=0,o=0;return"string"!=typeof e||"string"!=typeof n?-1:(-1!==e.indexOf("-")&&(e=e.split("-")[0]),-1!==n.indexOf("-")&&(n=n.split("-")[0]),t=e.split("."),i=n.split("."),r=parseInt(t[0]),(o=parseInt(i[0]))<r?1:r<o?-1:(r=1e6*r+1e3*parseInt(t[1])+parseInt(t[2]),(o=1e6*o+1e3*parseInt(i[1])+parseInt(i[2]))<r?1:r<o?-1:0))},getFullName:function(){var e=n();return e&&void 0!==e._internal&&e._internal.containerInfo&&e._internal.containerInfo.details&&e._internal.containerInfo.details.path?e._internal.containerInfo.details.path.slice(0):0<window.name.length?[window.name]:e?null:["<root>"]},estractParameters:function(e){var n=!1,t=!1,i="",r=!1,o=1,a="function",s=[],l="",u=!1,c=0,f="",d=function(){var e=l.trim();0<e.length&&(s.push(e),l="")};if("function"!=typeof e)return null;for(f="  "+e+"        ";o<f.length;){if(0<i.length)f[o]===i&&"\\"!==f[o-1]&&(i="");else if(n)"*"===f[o]&&"/"===f[o+1]&&(o++,n=!1);else if(t)"\n"!==f[o+1]&&"\r"!==f[o+1]&&10!==f[o+1].charCodeAt(0)||(t=!1);else if('"'===f[o]||"'"===f[o])i=f[o],d();else if("/"===f[o])"*"===f[o+1]?n=!0:"/"===f[o+1]?t=!0:i="/",d();else if(r){if(c<=1&&(")"===f[o]||"="===f[o]&&">"===f[o+1])){d();break}","===f[o]&&"\\"!==f[o-1]?(d(),u=!0):"("===f[o]?(0===s.length&&(u=!0),c++):")"===f[o]?c--:"="===f[o]&&"\\"!==f[o-1]?(d(),u=!1):u&&0<f[o].trim().length&&(l+=f[o])}else if("f"===f[o]&&"\\"!==f[o-1]&&f.length-o>=a.length&&f.substr(o,a.length)===a)o+=a.length,r=!0;else{if("("===f[o]){r=!0;continue}if(0<f[o].trim().length){u=r=!0;continue}}o++}return s},getBootObj:n=function(){return void 0!==q.BootInstance?q.BootInstance:void 0!==window.SWAC&&void 0!==window.SWAC.BootInstance?window.SWAC.BootInstance:"undefined"!=typeof SWACBoot?SWACBoot:"undefined"!=typeof WebCC?WebCC:null},getRealComponentName:function(e){var n=e;return 40<=e.length&&"<"===e[0]&&"4"===e[e.length-22]&&">"===e[e.length-38]&&"_"===e[e.length-37]&&(n=e.substring(1,e.lastIndexOf(">"))),n},checkPath:function(e,n){for(var t=n.match(/[^(\.|\'|\"|\[|\])]+/g),i=0;i<t.length;i++){if(!e.hasOwnProperty(t[i]))return!1;e=e[t[i]]}return!0}},q.Config={TimeOuts:{Enabled:(e=q._internal.Utils.getItemFromSessionStorage("swac.timeouts.enabled"),!e.found||"boolean"!==e.type||e.value),Create:5e3,Remove:2e3,CleanUp:2e4,Internal:1e3,Close:6e4,Proxy:{Functions:2e3,Events:1e3},Authentication:{Handshake:1e4}},Container:{URLs:{BaseLibrary:""},Authentication:{Request:!1,TlsHandler:null},Behaviors:{CloseOnCleanUpTimeOut:!0,AddDpcValues:!1,ActivateRemoveOnRedirect:5},ShareTimeOuts:!0},SharedWorker:{LifeCyclePingFrequency:5e3},Extensions:{},Control:{URLs:{BaseLibrary:""},Extensions:{}}},q.Exception=function(e){var n;isNaN(e)?(this.errorCode=-1,this.message=e):(this.errorCode=e,n=q.Exception.prototype.exceptionCodes[e],this.message="Internal Error",null!=n&&(void 0!==arguments[1]&&(n=n.replace("%%data%%",arguments[1])),this.message=n))},q.Exception.prototype={exceptionCodes:{1e3:"Only one instance of SWAC.Hub is allowed.",1001:"Component not found.",1002:"Corresponding node does no longer exist.",1003:"No compatible node for the given key.",1004:"No node for the given key.",1005:"Data node with different flags already exist.",1006:"Unable to set value on a structural node.",1007:"Handshake cannot be restarted.",1008:"Authorization handshake not active.",1009:"Handshake no longer active.",1010:"Unable to add and set a sub-key for a data node.",2001:"Permission denied.",3001:"Flags cannot be both Proxy and Stub.",3002:"Invalid Key, key not nullable.",3003:"Invalid Key, key must be a string.",3004:"Invalid Key. Not multiple key accepted.",3005:"Invalid Key. Key cannot start/end with a dot.",3006:"Invalid Key, key cannot be an empty string.",3007:"Invalid flags.",3008:"Value not validated.",3009:"Flags of parent node is 'none', child node must have the same flags value.",3010:"DPC name is not valid. It contains not Alphanumeric characters only underscores are allowed.",3011:"DPC bind function is not allowed with Shared Workers.",3012:"Options not valid.",3013:"The value to merge should be of the same type of the original property.",3014:"Operation not supported.",3015:"Value rejected by user validator.",3016:"Parameter not valid.",3017:"The specified path does not exist %%data%%",4001:"Converter function exception.",5001:"Transaction is not supported."}},q.Exception.prototype.constructor=q.Exception,q.Exception.prototype.toString=function(){return this.message},q.AccessViolationException=function(e){q.Exception.call(this,e)},q.AccessViolationException.prototype=new q.Exception,q.InvalidArgumentException=function(e){q.Exception.call(this,e,arguments[1])},q.InvalidArgumentException.prototype=new q.Exception,q.InternalException=function(e){q.Exception.call(this,e)},q.InternalException.prototype=new q.Exception,q.InvalidOperationException=function(e){q.Exception.call(this,e)},q.InvalidOperationException.prototype=new q.Exception,q.Guid=(t=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},{generate:function(){return(t()+t()+"-"+t()+"-4"+t().substr(0,3)+"-"+t()+"-"+t()+t()+t()).toLowerCase()}}),q.Eventing=((o=function(){this._listeners={}}).prototype={constructor:o,addListener:function(e,n){void 0===this._listeners[e]&&(this._listeners[e]=[]),this._listeners[e].push(n)},fire:function(n,e){var t,i=0,r=0;if("string"==typeof n&&(n={type:n}),!n.type)throw new Error("Event object missing 'type' property.");if(this._listeners[n.type]instanceof Array)if(t=this._listeners[n.type].slice(),e){var o=function(e){e.call(this,n)};for(r=t.length,i=0;i<r;i++)setTimeout(o(t[i]),0)}else for(r=t.length,i=0;i<r;i++)t[i].call(this,n)},removeListener:function(e,n){var t,i=0,r=0;if(this._listeners[e]instanceof Array)for(r=(t=this._listeners[e]).length,i=0;i<r;i++)if(t[i]===n){t.splice(i,1);break}}},{Event:function(e){var i=new o,r=e;return{fire:function(e,n){var t={type:r,data:e};i.fire(t,n)},subscribe:function(e){i.addListener(r,e)},unsubscribe:function(e){i.removeListener(r,e)}}},EventEx:o,Publisher:function(a){var s=[];return{notify:function(n,e){var t,i=s.slice(),r=function(e){n&&n.type===a?i[e].call(null,n):i[e].call(null,{type:a,data:n})},o=function(e){setTimeout(function(){r(e)},0)};for(t=0;t<i.length;t++)try{e?o(t):r(t)}catch(e){}return i.length},event:new q.Eventing.EventProxy(s)}},EventProxy:function(e){var t=e;return{subscribe:function(e){t.push(e)},unsubscribe:function(e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}}),q.Defer=function(){var t=this;this.promise=new Promise(function(e,n){t.internalResolve=e,t.internalReject=n}),this.promise.catch(function(){}),this.promise.status="pending"},q.Defer.prototype={fulfill:function(e){var n=this;"pending"===n.promise.status&&setTimeout(function(){n.promise.status="fulfilled",n.internalResolve(e)},0)},reject:function(e){var n=this;"pending"===n.promise.status&&setTimeout(function(){n.promise.status="rejected",n.internalReject(e)},0)},bind:function(e){var n=this;return!(!e||!e.then||(e.then(function(e){n.fulfill(e)},function(e){n.reject(e)}),0))}},q.Reason=function(e,n){var t=null;isNaN(e)?(this.errorCode=-1,this.message=e):(this.reasonCode=e,t=q.Reason.prototype.errorCodes[e],this.message="",null!=t&&(void 0!==n&&(t=t.replace("%%data%%",n)),this.message=t))},q.Reason.prototype={errorCodes:{10001:"Handshake time-out expired. (SWAC.Config.TimeOuts.Authentication.Handshake)",11001:"Time-out expired. (SWAC.Config.TimeOuts.Internal) %%data%%",11002:"Time-out expired. (SWAC.Config.TimeOuts.Proxy.Functions)",11004:"Time-out expired. (SWAC.Config.TimeOuts.Remove)",11005:"Time-out expired. (SWAC.Config.TimeOuts.CleanUp)",11006:"Unhandled time-out expired.",11007:"Invalid target.",11008:"Result message rejected.",11011:"Container unreachable.",11013:"Component not found.",11014:"Error creating Iframe.",12001:"Service not found.",13001:"Invalid Component.",13002:"Component needs to be UI.",13003:"Component %%data%% is already defined.",13005:"Error creating Iframe.",13006:"Error during component/s creation.",13007:"Time-out expired during IFrame creation. (SWAC.Config.TimeOuts.Create)",13008:"Container.create: Wrong argument(s).",13009:"Aborted by the user.",13010:"Component has been discarded.",13011:"Time-out expired. (beginClose Time-out)",13014:"Method not supported.",13015:"Specified component/s does/do not exist.",14001:"Interface not found.",15001:"Timeout parameter is not a number.",15003:"Redirect detected. Component has been removed.",15004:"Dual boot detected. Component has been removed.",15005:"Component integrity is compromised. Component has been removed.",16001:"Event management is not supported.",16002:"Event is not supported.",17e3:"Value rejected by user validator.",17001:"Permission denied.",17002:"Corresponding node does no longer exist.",17003:"Unable to add and set a sub-key for a data node.",17004:"Unable to set value on a structural node.",17005:"Internal error.",17006:"Corresponding node does not exist.",17007:"Transaction aborted due to validation.",17008:"Transaction is not active.",17009:"No actions to commit.",17010:"Unable to cancel the transaction.",17011:"Unable to add the specified DPC.",17012:"Unable to remove the specified DPC.",17013:"Transaction canceled due to Component removal.",17014:"Transaction is not supported.",17015:"Bind function is not supported in Shared Worker.",17016:"Options not valid.",17017:"Invalid Key.",17018:"Operation not supported.",17019:"The specified path does not exist %%data%%",18e3:"Wrong parameter, all array elements should be thenable.",18001:"Wrong parameter, method parameter must be an array with at least one thenable.",18002:"Wrong parameter.",18003:"Operation already in progress.",19e3:"Extension %%data%% could not be loaded. Creation stopped on first failure.",19001:"Component must be a javascript object.",19002:"Expose already called.",2e4:"Component has been disconnected.",20001:"Timeout expired. Component has been removed.",3e4:"%%data%%"}},q.Reason.prototype.toString=function(){return this.message},q.Authentication=function(e){var n=new q.Eventing.Publisher("onFailure"),t=new q.Eventing.Publisher("onSuccess"),i=this,r=q.Guid.generate(),o=e,a="",s=null,l=null,u=function(){if(null===s||null===l)throw new q.Exception(1008);if(s&&"pending"!==s.promise.status&&"fulfilled"!==s.promise.status)throw new q.Exception(1009)},c=function(e){u(),q.Communication._internal.call(o,"tlsMessage",[e])};this.accept=function(){u(),s.fulfill(),t.notify({})},this.reject=function(e){u(),s.reject(e),n.notify({})},this.sendMessage=c,this.isAuthenticated=function(){return null!==s&&"fulfilled"===s.promise.status},this.getDomain=function(){var e,n,t,i,r="";return null===o?r=a:(e=q.Container._internal.getCmpList({name:o}))instanceof q.Component&&(r=e._internal.getCurrentUrl()),""!==r&&null!=r&&(r=new RegExp(/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/).exec(r),r=void 0===(n=r[1])?r.input:"file"===n?r[10]:(t=r[6],""===(i=r[7])||null==i?t:t+":"+i)),r},this.onFailure=n.event,this.onSuccess=t.event,this._internal={receiveMessage:function(e){try{u(),l(e,i)}catch(e){}},beginHandshake:function(e,n,t){if(s)throw new q.Exception(1007);return s=new q.Defer,q.Config.TimeOuts.Enabled&&window.setTimeout(function(){s&&"pending"===s.promise.status&&s.reject(new q.Reason(10001))},t||q.Config.TimeOuts.Authentication.Handshake),l=e,n&&c(n),s.promise},setDomain:function(e){a=e},session:r}},q.CommunicationClass=function(e){var g={},h=e,u=null,v=null,c=function(e){return"undefined"!=typeof Worker&&e instanceof Worker?{result:!0,container:!0}:"undefined"!=typeof WorkerGlobalScope&&e instanceof WorkerGlobalScope?{result:!0,container:!1}:"undefined"!=typeof DedicatedWorkerGlobalScope&&e instanceof DedicatedWorkerGlobalScope?{result:!0,container:!1}:{result:!1,container:null}},o=function(e){return"undefined"!=typeof MessagePort&&e instanceof MessagePort?{result:!0,container:!0}:"undefined"!=typeof SharedWorkerGlobalScope&&e instanceof SharedWorkerGlobalScope?{result:!0,container:!1}:{result:!1,container:null}},f=function(e){var n=c(e);return n.result||(n=o(e)),n.result?n.container:e!==window.parent},m=function(e,n){return JSON.stringify({t:e,c:n})},y=function(e,n,t){if(h)h.postMessage(n,t);else if(e&&!e.closed)if(c(e).result||o(e).result){var i=q._internal.Utils.getBootObj();i&&i._internal.SWConList&&0<i._internal.SWConList.length?i._internal.SWConList[0].postMessage(n):e.postMessage&&e.postMessage(n)}else e===window.parent&&window.parent===self&&"function"==typeof window.swacPostMessage?swacPostMessage(n,t):e.postMessage(n,t)},a=function(t,i,e){var r=i.g,n=null,o=null,a=null,s=null,l=function(n){return function(e){"string"==typeof r&&function(t,i,e,n,r){var o="",a=function(e,n){return n&&n.d&&n.o&&(e.o=n.d,e.d=n.o),e};if(e){if(t)try{o=n instanceof q.Reason||null!=n?{t:"result",g:i,v:n,s:1,e:0}:{t:"result",g:i,e:1},a(o,r),y(t,m("msg",o),"*")}catch(e){}}else null!==n&&"object"==typeof n&&"function"==typeof n.then?(t&&(n.noProlong||(a(o={t:"prolong",g:i},r),y(t,m("msg",o),"*"))),n.then(function(e){var n="";t&&(a(n={t:"result",g:i,v:e,s:0,e:0},r),y(t,m("msg",n),"*"))},function(e){var n="";t&&(a(n={t:"result",g:i,v:e,s:1,e:0},r),y(t,m("msg",n),"*"))})):t&&(a(o={t:"result",g:i,v:n,e:0},r),y(t,m("msg",o),"*"))}(t,r,n,e,i)}};if(f(t)){if(void 0===q.Container)return;(s=q.Container._internal.identify(t))instanceof q.Component&&!c(t).result&&s._internal.setCurrentUrl(e)}else u&&u._internal.setDomain(e);switch(i.t){case"call":if(f(t)){if(void 0===q.Container)break;(s=q.Container._internal.identify(t))&&s._internal[i.m]?(void 0===i.o&&(i.o=JSON.parse(s.fullname())),a=s._internal[i.m].apply(i,i.a),l(!1)(a)):l(!0)(null)}else u&&u._internal[i.m]?(a=u._internal[i.m].apply(u,i.a),l(!1)(a)):l(!0)(null);break;case"begin":if(f(t)){if(void 0===q.Container)break;(s=q.Container._internal.identify(t))&&s._internal[i.m]?(void 0===i.o&&(i.o=q._internal.Utils.getFullName()||["<root>"],i.o.push(s.name())),s._internal[i.m].apply(i,i.a).then(l(!1),l(!0))):l(!0)(null)}else u&&u._internal[i.m]?u._internal[i.m].apply(u,i.a).then(l(!1),l(!0)):l(!0)(null);break;case"prolong":(n=g[r])&&(n.prolonged=!0,q.Config.TimeOuts.Enabled&&window.clearTimeout(n.timer));break;case"result":(o=g[r])&&(o.handled=!0,q.Config.TimeOuts.Enabled&&window.clearTimeout(o.timer),i.e?o.promise.reject(new q.Reason(11008)):i.s?o.promise.reject(i.v):o.promise.fulfill(i.v)),delete g[r]}},p=function(e){var n=q._internal.Utils.getFullName()||["<root>"],t=e.indexOf(n[0]),i=n.indexOf(e[0]),r={here:!0,dest:null};return 0===t&&0===i?e.length!==n.length&&(r.here=!1,e.length>n.length&&(r.dest=e[n.length])):-1!==t?e.length-t!==n.length&&(r.here=!1,e.length-t>n.length&&(r.dest=e[n.length+t])):-1!==i?e.length!==n.length-i&&(r.here=!1,e.length>n.length-i&&(r.dest=e[n.length-i])):r.lost=!0,r},n=function(e){if("string"==typeof e.data&&0<e.data.length){var n={},t=e.data,i=null;try{if((n=JSON.parse(e.data))&&n.type&&"swac"===n.type)return void function(n){if(void 0!==n.name&&void 0!==n.value){switch(n.name){case"timeouts.enabled":if("boolean"!=typeof n.value)return;q.Config.TimeOuts.Enabled=n.value;break;default:return}q.Container&&q.Container._internal.getCmpList().forEach(function(e){y(e._internal.iframe.contentWindow,JSON.stringify(n),"*"),e=null})}}(n);if(!(n&&n.t&&n.c))throw new Error("Incompatible message received");if("boot"!==n.t&&"msg"!==n.t)throw new Error("Unknown message received: "+n.t);if(n.c&&n.c.d){q._internal.Utils.getFullName();var r=p(n.c.d);if(!r.here&&(void 0===n.c.f&&(n.c.f=!0,t=JSON.stringify(n)),null!==(i=C(r.dest))))return void y(i,t,"*")}}catch(e){return}switch(n.t){case"boot":!function(e,n,t){var i,r,o,a,s,l,u,c,f,d="",p=null,g=[];switch(n.message){case"ping":if(void 0===q.Container)break;if(!(i=q.Container._internal.identify(e)))break;if(n.swacBaseLoaded||"string"==typeof(d="function"==typeof(r=q.Config.Container.URLs.BaseLibrary)?r(n.version):r)&&""===(d=d.trim())&&(v||(v=window.SWAC._internal.getBase()),d=v),o=q.Config.Container.Authentication.TlsHandler?q.Config.Container.Authentication.Request?"req":"can":"no",i.lastUrl=t,n.attributes&&(i.attributes=n.attributes),"req"===n.authentication&&"no"===o||"string"!=typeof d)u={message:"peng",reason:"req"===n.authentication&&"no"===o?"Authentication not supported":"No appropriate SWAC library"},y(e,m("boot",u),"*"),q.Container._internal.discard(e);else{if(i.authentication="req"===n.authentication,(p=q._internal.Utils.getItemFromSessionStorage("swac.timeouts.enabled")).found&&"boolean"===p.type&&(q.Config.TimeOuts.Enabled=p.value),u={message:"pong",url:d,name:i.name,type:i.type,authentication:"req"===n.authentication?"can":o,containerVersion:q.version,namespace:"SWAC",timeouts:q.Config.Container.ShareTimeOuts||p.found&&"boolean"===p.type?q.Config.TimeOuts:void 0,_internal:{}},l=n.attributes&&n.attributes.control&&q.Config.Control.Extensions&&0<Object.keys(q.Config.Control.Extensions).length&&q.Config.Control.Extensions.constructor===Object?q.Config.Control.Extensions:q.Config.Extensions,n.extensions&&l)for(c=0;c<n.extensions.length;c++)u.extensions=u.extensions||[],l[n.extensions[c]]?u.extensions.push(l[n.extensions[c]]):u.extensions.push("$$unknownExtension$$");u.extensions=u.extensions||[],n.attributes&&n.attributes.control&&"string"==typeof(d="function"==typeof(r="string"==typeof q.Config.Control.URLs.BaseLibrary&&""!==q.Config.Control.URLs.BaseLibrary||"function"==typeof q.Config.Control.URLs.BaseLibrary?q.Config.Control.URLs.BaseLibrary:"string"==typeof q.Config.Container.URLs.ControlLibrary&&""!==q.Config.Container.URLs.ControlLibrary||"function"==typeof q.Config.Container.URLs.ControlLibrary?q.Config.Container.URLs.ControlLibrary:"")?r(n.version):r)&&(d=d.trim(),u.extensions.unshift(d)),0<u.extensions.length&&u.extensions.unshift("data:text/javascript;base64,"+window.btoa("var defineExtension = "+function(e,n){this.SWAC.Hub.prototype.Extensions[e]=n}.toString())),y(e,m("boot",u),"*")}break;case"ok":if(void 0===q.Container)break;i=q.Container._internal.identify(e),q.Container._internal.accept(e)?((g=q._internal.Utils.getFullName()||["<root>"]).push(i.iframe.name),u={message:"ok2",details:{path:g}},i.settings&&"boolean"==typeof i.settings.designMode&&(u.details.designMode=i.settings.designMode),"function"==typeof q.Container.getLanguage&&(u.details.language=q.Container.getLanguage()),i.settings&&void 0!==i.settings.addDpcValues?u.details.addDpcValues=i.settings.addDpcValues:u.details.addDpcValues=q.Config.Container.Behaviors.AddDpcValues,u.details.flavor=i.settings.flavor,y(e,m("boot",u),"*")):void 0!==(a=q.Container._internal.identify(e))&&(s=a instanceof q.Component?a._internal.iframe:a.iframe,q.Container._internal.remove("function"==typeof a.name?a.name():a.name,s,new q.Reason(15004)),s=null);break;case"failed":if(void 0===q.Container)break;q.Container._internal.discard(e);break;case"pong":break;case"ok2":var h=q._internal.Utils.getBootObj();if(h&&void 0!==h._internal)for(f in n.details||(h._internal.containerInfo.details={path:["<root>"]}),n)"message"!==f&&n.hasOwnProperty(f)&&(h._internal.containerInfo.hasOwnProperty(f)||(h._internal.containerInfo[f]=n[f]))}}(c(this).result||o(this).result?this:e.source,n.c,e.origin);break;case"msg":a(c(this).result||o(this).result?this:e.source,n.c,e.origin)}}},C=function(e){var n,t;if(null===e||""===e||void 0===e)return c(this).result||o(this).result?this:window.opener&&window.opener!==window?window.opener:window.parent;if(t=e,void 0===window.constructor?t instanceof window.constructor:t.window===t)return e;if(q.Container){if(!q.Container._internal.checkIframe(e))return q.Container._internal.fireOnFailure(e,"integrityCheck","Component integrity is compromised",!1),q.Container._internal.remove(e,null,new q.Reason(15005)),null;if((n=q.Container._internal.getCmpList({name:e}))instanceof q.Component)return"function"==typeof n._internal.iframe.getIFrame?n._internal.iframe.getIFrame().contentWindow?n._internal.iframe.getIFrame().contentWindow:n._internal.iframe.getIFrame():n._internal.iframe.contentWindow}return null},s=function(n,t,i,e){var r,o,a=null,s=n,l=q._internal.Utils.getBootObj(),u=(h?h.fullname:q._internal.Utils.getFullName())||["<root>"],c=null,f=null;if("string"==typeof n)try{if(c=JSON.parse(n),Array.isArray(c)){var d=p(f=c);d.here||(s=d.dest)}else s=c}catch(e){(f=u.slice(0)).push(n)}else 1<u.length&&(f=u.slice(0,u.length-1));(a=h||((null===s||""===s||void 0===s)&&l&&l._internal&&l._internal.SWConList&&0<l._internal.SWConList.length?l._internal.SWConList:C(s)))&&Array.isArray(a)?a.forEach(function(e){o={t:"call",m:t,a:i,o:e.fullname},f&&(o.d=f),r=m("msg",o),y(e,r,"*")}):a&&(o={t:"call",m:t,a:i,o:e||u},f&&(o.d=f),r=m("msg",o),y(a,r,"*")),a=null},r=function(e,n,t,i,r,o,a){var s,l,u=q.Guid.generate(),c=new q.Defer,f=C(e),d=0,p={};return r=!0===r,f?(s=function(){return n&&q.Config.TimeOuts.Enabled&&(d=setTimeout(function(){if(!p.handled&&!p.prolonged)switch(t){case"beginExpose":case"show":case"position":case"ready":case"bind":case"beginRequestService":case"beginRequestInterface":case"dpcGet":case"dpcSet":case"dpcSetBulk":case"dpcMerge":c.reject(new q.Reason(11001,"Method: "+t));break;case"callService":case"call":c.reject(new q.Reason(11002));break;case"remove":c.reject(new q.Reason(11004));break;case"cleanUp":c.reject(new q.Reason(11005));break;default:c.reject(new q.Reason(11006))}delete g[u]},n)),d},p={guid:u,componentName:e,promise:c,handled:!1,prolonged:!1,timer:s()},g[u]=p,o||(o=(h?h.fullname:q._internal.Utils.getFullName())||["<root>"]),l={t:r?"begin":"call",g:u,m:t,a:i,o:o},a?l.d=a:e?(l.d=o.slice(0),l.d.push(e)):1<o.length&&(l.d=o.slice(0,o.length-1)),l=m("msg",l),y(f,l,"*"),f=null):c.reject(new q.Reason(11007)),c.promise},t=function(){if(h)h.addEventListener("message",n,!1);else{var e=q._internal.Utils.getBootObj();e&&e._internal.SWConList&&1===e._internal.SWConList.length?e._internal.SWConList[0].addEventListener("message",n,!1):(window.addEventListener("message",n,!1),window.addEventListener("unload",function(){window.removeEventListener("message",n)}))}};return t(),{_internal:{beginCall:r,call:s,fire:function(e,n,t,i){var r=[n,t,i];arguments[4]&&r.push({fromService:!0}),s(e,"fire",r)},dpcChanged:function(e,n,t,i){0!==n.indexOf("public")&&0!==n.indexOf("private")||s(e,"dpcChanged",[n,t,i])},beginDpcGet:function(e,n){return r(e,q.Config.TimeOuts.Internal,"dpcGet",[n])},beginDpcSet:function(e,n,t,i){return r(e,q.Config.TimeOuts.Internal,"dpcSet",[n,t,i],!0)},beginDpcMerge:function(e,n,t,i){return r(e,q.Config.TimeOuts.Internal,"dpcMerge",[n,t,i],!0)},associateHub:function(e){u=e},deactivate:function(){if(h)h.removeEventListener("message",n);else{var e=q._internal.Utils.getBootObj();e&&e._internal.SWConList&&1===e._internal.SWConList.length?e._internal.SWConList[0].removeEventListener("message",n):window.removeEventListener("message",n)}},activate:t,receiveMessage:n,cleanCallbacks:function(e){for(var n in g)g.hasOwnProperty(n)&&g[n].componentName===e&&delete g[n]}}}},q.Communication=q.CommunicationClass(),q.Hub=function(e){var n=arguments[1],g=q.Communication;if(n)g=q.CommunicationClass(n);else if("object"==typeof q.Hub.instance)throw new q.Exception(1e3);var h=this,v=null,t=q._internal.Utils.getBootObj(),c=t&&t._internal&&t._internal.containerInfo&&t._internal.containerInfo.details&&t._internal.containerInfo.details.flavor?t._internal.containerInfo.details.flavor:"ui",i=new q.Eventing.Publisher("onInterfaceActivated"),s=new q.Eventing.Publisher("onReady"),r=new q.Eventing.Publisher("onRemove"),o=new q.Eventing.Publisher("onVisible"),a=new q.Eventing.Publisher("onPosition"),l=new q.Eventing.Publisher("onCleanUp"),u=new q.Eventing.Publisher("onConnectionReady"),f=new q.Eventing.Publisher("onDisconnected"),d=q._internal.Utils.getFullName(),m=!1,p={},y=null,C=null,b=null,w=q.Guid.generate(),P=null,_=e,x=[],D=[],O={},S=[],E={},j={},R=new q.Authentication(null),I=null,k=function(n,t){return function(e){t&&x.indexOf(t)<0||g._internal.fire(null,n,e,t)}},A=function(){return function(e,n,t){"addQueue"===n?h.transaction&&h.transaction._internal.addInQueue(e,t):"add"!==n&&"set"!==n&&"remove"!==n||t.flags!==q.DPC._internal.Flags.Stub&&(h.transaction&&null!==h.transaction.getId()&&(t.transactionId=b.transactionId,t.transactionState=b.transactionState),g._internal.dpcChanged(null,e,n,t))}},W=function(t){return function(e){var n=A();"onAdded"===t?"node"===e.data.node?n(e.data.key,"add",{isEvent:!0,flags:e.data.flags}):n(e.data.key,"set",{isEvent:!0,flags:e.data.flags}):"onRemoved"===t&&n(e.data.key,"remove",{isEvent:!0})}},N=function(e){var n;for(n=S.length-1;0<=n;n--)S[n]===e&&S.splice(n,1)},F=function(e){var n,t={};for(n in e)"object"!=typeof e[n]&&(t[n]=e[n]);n=null,q.Communication._internal.call(null,"manageEvent",[t]),t=null},V=function(e){0<S.length&&q.Container._internal.getCmpList({name:e.data.name}).onMouseEvents.subscribe(null,S,!0)},T=function(o,a){var s=new q.Defer;if(o.Extensions&&0<Object.keys(o.Extensions).length){var l=function(n,t){var e,i=function(e){o.Extensions[n[t]]=e,a||y.root.open("private.extensions").set(n[t],!0),l(n,++t)},r=function(e){void 0!==q._internal.Utils.getBootObj().Extensions?s.reject(e):(delete o.Extensions[n[t]],l(n,++t))};t<n.length?"function"==typeof o.Extensions[n[t]]&&"object"==typeof(e=o.Extensions[n[t]](o))?e.then?e.then(function(e){i(e)},r):i(e):r(new q.Reason(19e3,n[t])):s.fulfill()};l(Object.keys(o.Extensions),0)}else s.fulfill();return s.promise},L=function(e,n){var t,i,r,o,a={},s=[];for(t in e)if(e.hasOwnProperty(t))if("events"===t&&"[object Array]"===Object.prototype.toString.call(e[t]))for(r=0;r<e[t].length;r++)i=e.events[r],-1===s.indexOf(i)&&((o=new q.Eventing.Event(i)).subscribe(k(i,n)),p[n?n+"."+i:i]=o,s.push(i));else"function"==typeof e[t]?a[t]=q._internal.Utils.estractParameters(e[t]):"object"==typeof e[t]&&e[t].subscribe&&1===e[t].subscribe.length&&-1===s.indexOf(t)&&(e[t].subscribe(k(t,n)),s.push(t));return{api:a,events:s}},U=function(e){return!(x.indexOf(e)<0)},B=function(e){return O.hasOwnProperty(e)?O[e]:{delegable:!1}},M=function(e){return 0<=D.indexOf(e)},H=function(e,n,t,i){return g._internal.beginCall(null,q.Config.TimeOuts.Proxy.Functions,"callService",[e,n,t],void 0,void 0,i).then(function(e){return e},function(e){throw e})},J={list:function(e){var n,t="",i=[],r=!0,o=0;if("object"!=typeof e)return D;for(o=0;o<D.length;o++){for(t in n=D[o],r=!0,e)if(e.hasOwnProperty(t)&&!(r=void 0!==O[n][t]&&r&&O[n][t]===e[t]))break;r&&i.push(n)}return i},beginGet:function(n){var e,t=new q.Defer,i={},r=!1,o=q._internal.Utils.getBootObj();if(null===o)return t.reject(new q.Reason(17005)),t.promise;if(void 0!==o._internal&&0<=q._internal.Utils.checkVersion(o._internal.containerInfo.containerVersion,"1.4.0")&&(r=!0),E[n])t.fulfill(E[n]);else{if(M(n))return e=B(n),g._internal.beginCall(null,q.Config.TimeOuts.Internal,"beginRequestService",[n],r,void 0,e.provider).then(function(e){if(i=e)return function(e,n,t,i){var r,o,a,s,l={},u=0;if(!E[e]){for(r in n)n.hasOwnProperty(r)&&(o="return function ("+n[r].join(", ")+') { var myargs = Array.prototype.slice.call(arguments, 0); var args = ["'+r+'", myargs, "'+e+'",'+JSON.stringify(i)+" ];  return fn.apply( ctx, args ); };",l[r]=new Function("ctx","fn",o)(this,H));for(u=0;u<t.length;u++)a=t[u],s=new q.Eventing.Publisher(a),j[e]=j[e]||{},j[e][a]=s,l[a]=s.event;E[e]=l}}(i.name,i.api,i.events,i.provider),E[n];throw new q.Reason(12001)},function(e){throw e});t.reject(new q.Reason(12001))}return t.promise},getInfo:B,has:M};n?v=n:t&&t._internal&&t._internal.SWConList&&0<t._internal.SWConList.length&&(v=t._internal.SWConList[0],t=null),g._internal.associateHub(this),this.beginExpose=function(e){var n,t,i,r,o,a,s=new q.Defer,l="",u=q.DPC._internal.Flags.Stub|q.DPC.Permissions.Read|q.DPC.Permissions.Write,c=null,f=v,d=q._internal.Utils.getBootObj();if(m)return s.reject(new q.Reason(19002)),s.promise;if(f){if("function"==typeof _||h._internal.first){var p=new q.Defer;p.promise.catch(function(e){e.reasonCode&&17015===e.reasonCode&&setTimeout(function(){throw new q.Exception(3011)},0)}),c=new q.WorkerHub(p,h,f,!0),d._internal.manageConnections(p,c),d=null,"function"==typeof _&&(c.fullname=JSON.stringify(f.fullname),_=_(c)),s.promise.then(function(){var n=new q.Hub(_,f);n.fullname=JSON.stringify(f.fullname),n._internal.exposer(),n._internal.cloneService(h),c.services=n._internal.services,T(c,!0).then(function(){q.Communication._internal.deactivate(),p.fulfill(n),n=c=null},function(e){p.reject(e),n=c=null})},function(e){p.reject(e)})}}else if("object"!=typeof _)return l="Component must be a javascript object",s.reject(new q.Reason(19001)),q.Hub.instance.close(l),s.promise;return m=!0,r=!!_.dpc,o=_.interfaces?Object.getOwnPropertyNames(_.interfaces):[],a=L(_),C=new q.DPC.Node(A(),w,u,null),n=W("onRemoved"),t=W("onAdded"),i=W("onValueChanged"),(y={}).root=C.access(w),y.remHandler=n,y.root.onRemoved.subscribe(n),y.addHandler=t,y.root.onAdded.subscribe(t),y.setHandler=i,y.root.onValueChanged.subscribe(i),e&&"function"==typeof e&&(I=e),g._internal.beginCall(null,null,"beginExpose",[a.api,a.events,r,o,q.version],!0).then(function(e){s.fulfill(e)},function(e){s.reject(e),h.close(e)}),s.promise},this.close=function(e){g._internal.call(null,"close",[e])},this.fire=function(e,n){p.hasOwnProperty(e)&&p[e].fire(n)},"sharedworker"!==c&&(this.isInterfaceActivated=U),"webworker"!==c&&"sharedworker"!==c&&(this.beginAuthenticationHandshake=function(e,n,t){return R._internal.beginHandshake(e,n,t)},this.getDomain=function(){return R.getDomain()}),"sharedworker"!==c&&(this.services=J),"sharedworker"!==c&&(this.onInterfaceActivated=i.event),this.onReady=s.event,"sharedworker"===c&&(this.onConnectionReady=u.event,this.onDisconnected=f.event),"sharedworker"!==c&&(this.onRemove=r.event),"ui"===c&&(this.onVisible=o.event),"ui"===c&&(this.onPosition=a.event),"sharedworker"!==c&&(this.onCleanUp=l.event),"sharedworker"!==c&&(this.fullname=JSON.stringify(d)),this._internal={original:e,setInnerComponent:function(e){_=e},setHub:function(e){P=e},communication:g,first:!1,exposer:function(){L(_)},cloneService:function(e){D=e._internal.services.list()},fireOnConnectionReady:function(e){u.notify(e)},bind:function(){var e,n,t,i,r,o=new q.Defer,a=_.dpc,s=0,l=q._internal.Utils.getBootObj();if(y.root.add("private",q.DPC.Permissions.Read),b=new q.DPC.Node(C,w,q.DPC.Permissions.Read|q.DPC.Permissions.Write|q.DPC._internal.Flags.Stub,"public"),l&&l._internal&&l._internal.containerInfo&&l._internal.containerInfo.details&&"boolean"==typeof l._internal.containerInfo.details.addDpcValues?b.addDpcValues=l._internal.containerInfo.details.addDpcValues:b.addDpcValues=!1,"sharedworker"!==c&&(this.dpc=C.open("public").access(w),this.DPC=this.dpc,this.status=C.open("private").access()),a&&(e=a.structure)&&Array.isArray(e))for(s=0;s<e.length;s++)if(n=e[s],r=void 0,r=!1,"object"==typeof(i=n)&&"string"==typeof i.key&&(r=!0),r){t=q.DPC.Permissions.Read|q.DPC.Permissions.Write,"string"==typeof n.flags&&("none"===n.flags.toLowerCase()?t=q.DPC.Permissions.None:-1===n.flags.toLowerCase().indexOf("rw")&&-1===n.flags.toLowerCase().indexOf("wr")&&(-1!==n.flags.toLowerCase().indexOf("r")&&(t=q.DPC.Permissions.Read),-1!==n.flags.toLowerCase().indexOf("w")&&(t=q.DPC.Permissions.Write)));try{void 0!==n.value?y.root.open("public").set(n.key,n.value,n.type,t):y.root.open("public").add(n.key,t)}catch(e){}}if(y.root.open("private").set("isDirty",!1,"boolean",q.DPC.Permissions.Read|q.DPC.Permissions.Write),l&&l._internal&&l._internal.containerInfo&&l._internal.containerInfo.details&&"boolean"==typeof l._internal.containerInfo.details.designMode?y.root.open("private").set("isDesignMode",l._internal.containerInfo.details.designMode,"boolean",q.DPC.Permissions.Read):y.root.open("private").set("isDesignMode",!1,"boolean",q.DPC.Permissions.Read),l&&l._internal&&l._internal.containerInfo&&l._internal.containerInfo.details&&"string"==typeof l._internal.containerInfo.details.language?y.root.open("private").set("language",l._internal.containerInfo.details.language,"string",q.DPC.Permissions.Read):y.root.open("private").set("language",navigator.language,"string",q.DPC.Permissions.Read),l=null,y.root.open("private").add("extensions"),0<Object.keys(q.Hub.instance.Extensions).length)for(var u in q.Hub.instance.Extensions)q.Hub.instance.Extensions.hasOwnProperty(u)&&y.root.open("private.extensions").set(u,!1,"boolean",q.DPC.Permissions.Read);if(y.root.onAdded.unsubscribe(y.addHandler),y.root.onRemoved.unsubscribe(y.remHandler),y.root.onValueChanged.unsubscribe(y.setHandler),a&&"function"==typeof a.bind){if("sharedworker"===c)return o.reject(new q.Reason(17015)),o.promise;a.bind(y.root.open("public"))}return o.fulfill(),o.promise},remove:function(e){var n=new q.Defer;return r.notify({reason:e,defer:n})||n.fulfill(),n.promise.noProlong=!0,n.promise},ready:function(e,n){var t=new q.Defer,i=null,r=q.Hub.instance,o=q._internal.Utils.getBootObj(),a=0;if("object"==typeof n)D=Object.getOwnPropertyNames(n),O=n;else for(D=e,a=0;a<D.length;a++)O[D[a]]={delegable:!1};return t.promise.then(function(){r=null,s.notify({})},function(e){r=null}),o&&o._internal.SWConList&&0<o._internal.SWConList.length&&!h._internal.first&&(r=h),o&&o._internal.SWConList&&0<o._internal.SWConList.length&&h._internal.first?I&&(i=I())&&i.then?i.then(function(){t.fulfill()},function(e){t.reject(e)}):t.fulfill():T(null!==P?P:r).then(function(){I&&(i=I())&&i.then?i.then(function(){t.fulfill()},function(e){t.reject(e)}):t.fulfill()},function(e){t.reject(e)}),o=null,t.promise},show:function(e){o.notify({visible:e})},enableComponentEvent:function(e,n){var t,i,r,o,a=null,s=null,l=null;for(r=Array.isArray(e)?e:[e],t=0;t<r.length;t++)window.addEventListener(r[t],F,!0);if(q.Container&&"_nested"===n){if(0<(a=q.Container._internal.getCmpList()).length){for(t=0;t<a.length;t++){for(o=[],s=a[t],i=0;i<r.length;i++)null!==(l=s._internal.getRegisteredEvent(r[i]))?l.inherited=!0:o.push(r[i]);l=null,0<o.length&&s.onMouseEvents.subscribe(null,o,!0)}s=null}for(0===S.length&&q.Container.onReady.subscribe(V),t=0;t<r.length;t++)S.push(r[t]);a=null}},disableComponentEvent:function(e,n){var t,i,r,o,a=null,s=null,l=null;for(r=Array.isArray(e)?e:[e],t=0;t<r.length;t++)window.removeEventListener(r[t],F,!0);if(q.Container&&"_nested"===n){if(0<(a=q.Container._internal.getCmpList()).length)for(t=0;t<a.length;t++){for(o=[],s=a[t],i=0;i<r.length;i++)null!==(l=s._internal.getRegisteredEvent(r[i]))&&(l.inherited&&(l.inherited=!1),0===l.callback.length&&o.push(r[i])),l=null;0<o.length&&s.onMouseEvents.unsubscribe(null,o),s=null}for(t=0;t<r.length;t++)N(r[t]);0===S.length&&q.Container.onReady.unsubscribe(V),a=null}},position:function(e,n,t,i){a.notify({left:e,top:n,width:t,height:i})},call:function(e,n,t){var i="string"==typeof t?_.interfaces[t]:_;return i[e].apply(i,n)},fire:function(e,n,t){j[t]&&j[t][e]&&j[t][e].notify(n.data)},dpcChanged:function(e,n,t){if("remove"===n)y.root.remove(e);else if("add"===n)y.root.add(e,t.flags);else if("set"===n){var i=b.transactionState;void 0!==t.goFromContainer&&(b.transactionState="forceSet"),y.root.set(e,t.value,t.type,t.flags,!1),b.transactionState=i}},dpcGet:function(e){return y.root.get(e)},dpcSet:function(e,n,t){var i=b.transactionState;return void 0!==t.goFromContainer&&(b.transactionState="forceSet"),y.root.beginSet(e,t.value,t.type,t.flags).then(function(e){return e.modified||delete e.data,b.transactionState=i,e},function(e){throw b.transactionState=i,e})},dpcSetBulk:function(e,n){return h.transaction._internal.dpcSetBulk(e,n)},dpcMerge:function(e,n,t){return y.root.open(e).beginMerge(t.value,t.path,!0,t.mergeOptions).then(function(e){return e},function(e){throw e})},tlsMessage:function(e){R._internal.receiveMessage(e)},cleanUp:function(){var e=new q.Defer;return l.notify({defer:e})||e.fulfill(),e.promise},beginRequestInterface:function(e){var n=null,t=null;return 0<=(_.interfaces?Object.getOwnPropertyNames(_.interfaces):[]).indexOf(e)&&(n={name:e,api:(t=L(_.interfaces[e],e)).api,events:t.events}),n},interfaceReady:function(e){x.indexOf(e)<0&&(x.push(e),i.notify(e))},setDomain:function(e){R._internal.setDomain(e)},setPrivateDPC:function(e,n){y.root.open("private").set(e,n)},setTransactionId:function(e){null===(b.transactionId=e)&&delete b.transactionState},setTransactionState:function(e){b.transactionState=e},getPublicNode:function(){return b},setDpcOnTransaction:function(i){return new Promise(function(n,e){var t=y.root.open("public."+i.key);(t?t.beginSet(i.value,!1,i.path):y.root.open("public").beginSet(i.key,i.value,i.type,i.flags)).then(function(e){n({key:i.key,result:e})},function(e){n({key:i.key,result:{error:e}})})})},services:J,onRemove:r.event,onInterfaceActivated:i.event,isInterfaceActivated:U},"sharedworker"!==c&&(this.transaction=new q.DPC.Transaction(this)),q.Hub.instance||(this._internal.first=!0,q.Hub.instance=this)},q.Hub.prototype.Extensions={},q.WorkerHub=function(e,n,t,i){var r=new q.Eventing.Publisher("onDisconnected"),o=new q.Eventing.Publisher("onReady"),a=new q.Eventing.Publisher("onInterfaceActivated"),s=[],l=null,u=!1,c=0,f=0,d=q.Config.SharedWorker.LifeCyclePingFrequency,p="",g=null,h=null,v=function(){if(h.connected)return g._internal.beginCall(null,q.Config.TimeOuts.Internal,"checkComponent",[],!0).catch(function(){g._internal.deactivate(),g=null});var e=new q.Defer;return e.reject(),e.promise},m=function(){u&&clearTimeout(f),u=!1};return h={connected:!0,checkComponent:v,fire:function(n,t){return e.promise.then(function(e){return e.fire(n,t)},function(){})},close:function(n){return e.promise.then(function(e){return m(),e.close(n)},function(){})},Extensions:q.Hub.prototype.Extensions,onReady:n.onReady,onInterfaceActivated:a.event,isInterfaceActivated:n._internal.isInterfaceActivated,onDisconnected:{subscribe:function(e){0===c&&(u=!0,f=setTimeout(function(){v()},d)),c++,r.event.subscribe(e)},unsubscribe:function(e){0==--c&&m(),r.event.unsubscribe(e)}}},i&&n._internal.onInterfaceActivated.subscribe(l=function(e){s.push(e)}),e.promise.then(function(e){p=e.fullname,g=e._internal.communication?e._internal.communication:q.Communication,n._internal.onInterfaceActivated.unsubscribe(l),l=null,e._internal.onInterfaceActivated.subscribe(function(e){a.notify(e,!0)}),e._internal.onRemove.subscribe(function(e){m(),g._internal.deactivate(),g=null,h.connected=!1,r.notify(new q.Reason(2e4)),e.data.defer.fulfill()}),q.Hub.prototype.Extensions={},h.services=e._internal.services,h.fullname=p,i&&(delete e.fullname,o.notify({})),q.Hub.instance._internal.fireOnConnectionReady(h),i&&0<s.length&&(s.forEach(function(e){a.notify(e)}),s=[])},function(){}),i&&(h.onReady=o.event),h},q.DPC=q.DPC||{},q.DPC.Data=function(e,n,t,i,r,o){var a,v=n;!function(e,n,t,i){if(!1===n&&null==e)throw new q.InvalidArgumentException(3002);if(null!=e){if("string"!=typeof e)throw new q.InvalidArgumentException(3003);if(!1===t&&-1!==e.indexOf("."))throw new q.InvalidArgumentException(3004);if(!1===i&&""===e.trim())throw new q.InvalidArgumentException(3006)}if(e&&!e.match("^[a-zA-Z0-9_]*$"))throw new q.InvalidArgumentException(3010)}(i,!1,!1,!1);var m=function(e){var n=q.DPC._internal.Flags.None;if("string"==typeof e||"boolean"==typeof e||"function"==typeof e||"object"==typeof e&&null!==e)throw new q.InvalidArgumentException(3007);if(null==e)return q.DPC.Permissions.Read|q.DPC.Permissions.Write;if(e<0)throw new q.InvalidArgumentException(3007);if((e&q.DPC._internal.Flags.Stub)===q.DPC._internal.Flags.Stub&&(n|=q.DPC._internal.Flags.Stub),(e&q.DPC._internal.Flags.Proxy)===q.DPC._internal.Flags.Proxy&&(n|=q.DPC._internal.Flags.Proxy),(e&q.DPC.Permissions.Read)===q.DPC.Permissions.Read&&(n|=q.DPC.Permissions.Read),(e&q.DPC.Permissions.Write)===q.DPC.Permissions.Write&&(n|=q.DPC.Permissions.Write),(n&q.DPC._internal.Flags.Stub)===q.DPC._internal.Flags.Stub&&(n&q.DPC._internal.Flags.Proxy)===q.DPC._internal.Flags.Proxy)throw new q.InvalidArgumentException(3001);return n}(t),s=!1,y=i,C=r,b=o,c=(m&q.DPC._internal.Flags.Proxy)===q.DPC._internal.Flags.Proxy,l=(m&q.DPC._internal.Flags.Stub)===q.DPC._internal.Flags.Stub,w=function(e){return v===e},u=function(e){return!w(e)&&(c||l)},P=function(e,n,t){if(a&&a._internal&&a._internal.forward)return a._internal.forward(e,n,t)},_=function(){return m},f=function(e){if(w(e)||(_()&q.DPC.Permissions.Read)===q.DPC.Permissions.Read)return c&&u(e)?P(y,"get",{}):"object"==typeof C?JSON.parse(JSON.stringify(C)):C;throw new q.AccessViolationException(2001)},x=function(){var e=null;return a&&a._internal&&a._internal.getPublicNode&&(e=a._internal.getPublicNode()),e},d=new q.Eventing.Publisher("onBeforeValueChanged"),D=function(e){var n=e.currentValue,t=e.key,i=e.value;d.notify(e),null!==e.reject&&void 0!==e.reject||(e.reject=!1),null!==e.value&&void 0!==e.value||(e.value=i),e.reject||a&&a._internal&&a._internal.fireOnBeforeValueChanged&&(e.currentValue=n,e.key=t,a._internal.fireOnBeforeValueChanged(e))},p=new q.Eventing.Publisher("onValueChanged"),O=function(e,n,t){var i,r="object"==typeof e?JSON.parse(JSON.stringify(e)):e,o={key:y,relativeKey:y,value:r,oldValue:n};t&&(o.path=t),(i=x())&&i.transactionId&&"run"===i.transactionState&&(o.transactionId=i.transactionId),p.notify(o),a&&a._internal&&a._internal.fireOnValueChanged&&a._internal.fireOnValueChanged(y,r,n,y,t)},g=function(e,n){var t,i,r=null,o={key:y,relativeKey:y,value:"object"==typeof n?JSON.parse(JSON.stringify(n)):n,currentValue:C,reject:!1},a=arguments[2];if(i=x(),c||D(o),a&&(o.path=a),!o.reject){if(!w(e)&&(_()&q.DPC.Permissions.Write)!==q.DPC.Permissions.Write)throw new q.AccessViolationException(2001);a&&!q.DPC.Node.prototype._equals(o.value,n)&&(a=""),!u(e)&&c||(r={value:c||i&&i.addDpcValues?o.value:null,goFromContainer:!0},c||(r.flags=m,r.type=b,r.diffPath=a),P(y,"set",r)),c?(w(e)||i&&i.componentVersion&&"1.0.0"===i.componentVersion)&&(i&&i.addDpcValues?(t=C,C=o.value,O(C,t,a)):O(void 0,void 0,a)):(t=C,C=o.value,O(C,t,a))}},h=function(e,t,n){var i,r=arguments[3],o=new q.Defer,a={key:y,relativeKey:y,value:"object"==typeof t?JSON.parse(JSON.stringify(t)):t,currentValue:C,reject:!1},s=null,l=x();if(w(e)||(_()&q.DPC.Permissions.Write)===q.DPC.Permissions.Write){if(l&&"start"===l.transactionState&&!n)return P(y,"addQueue",{value:t,flags:m,type:b,promise:o}),o.promise;if(c)return P(y,"beginset",{value:a.value,goFromContainer:!0}).then(function(e){var n=e;return n.modified||(n.data=t),n},function(e){throw e});r&&(a.path=r),D(a),a.reject?o.reject(new q.Reason(17e3)):(r&&!q.DPC.Node.prototype._equals(a.value,t)&&(r=""),i=C,C=a.value,O(C,i,r),s={value:l&&l.addDpcValues?a.value:null},l&&l.addDpcValues&&r&&(s.diffPath=r),l&&"run"!==l.transactionState&&(s.goFromContainer=!0,s.flags=m,s.type=b),P(y,"set",s),o.fulfill({modified:!q.DPC.Node.prototype._equals(C,t),data:"object"==typeof C?JSON.parse(JSON.stringify(C)):C}))}else o.reject(new q.Reason(17001));return o.promise},S=function(){return b},E=function(){var e=m;return(e&q.DPC._internal.Flags.Stub)===q.DPC._internal.Flags.Stub&&(e^=q.DPC._internal.Flags.Stub),(e&q.DPC._internal.Flags.Proxy)===q.DPC._internal.Flags.Proxy&&(e^=q.DPC._internal.Flags.Proxy),e},j=function(e){return void 0!==e&&(s=!0),s},R=new q.Eventing.Publisher("onRemoved"),I=function(){return!0},k=function(){var e={passed:!0,exception:null,reason:null},n=null;return n=q.Component?x().componentVersion:q._internal.Utils.getBootObj()._internal.containerInfo.containerVersion,0<=q._internal.Utils.checkVersion(n,"1.6.2")||(e.passed=!1,e.exception=new q.InvalidOperationException(3014),e.reason=new q.Reason(17018)),e},A=function(e,n,t,i,r,o,a){var s=0;if(0<t.length)return e.hasOwnProperty(t[0])?(e[t[0]]=A(e[t[0]],n,t.slice(1),i,r,1,a),e):(r.pathError=!0,r.pathInfo=t[0],null);if(Array.isArray(e)){if(i.appendArray&&i.mergeObject&&Array.isArray(n)){for(s=0;s<n.length;s++)r.changes.push(a+"["+(e.length+s)+"]");return e.concat(n)}}else if("[object Object]"===Object.prototype.toString.call(e)&&!i.replaceObject&&"[object Object]"===Object.prototype.toString.call(n)){for(var l=Object.getOwnPropertyNames(n),u=0;u<l.length;u++)e[l[u]]=A(e[l[u]],n[l[u]],[],i,r,o+1,0<a.length?a+"."+l[u]:l[u]);return e}return a&&r.changes.push(a),n},W=function(e,n,t,i){var r=function(e){var n,t=e?e.trim():"",i={error:!1,value:null},r="";if(0<t.length){for(n=0;n<t.length-1&&!i.error;n++)"["===t[n]&&(0===(r=t.substring(n+1).trim()).length||'"'!==r[0]&&"'"!==r[0]&&isNaN(r[0]))&&(i.error=!0,i.errorValue="["+r);if(!i.error){for(n=0;n<t.length-1&&!i.error;n++)"]"===t[n]&&0<(r=t.substring(n+1).trim()).length&&"."!==r[0]&&"["!==r[0]&&(i.error=!0,i.errorValue="]"+r);if(!i.error){var o=[].concat(t.match(/"([^"]+)"/g)||[],t.match(/'([^']+)'/g)||[]),a=o.reduce(function(e,n,t){return e.replace(n,"#"+t+"#")},t),s=a.match(/[^(\.)]+/g);if(s&&0<(s=s.filter(function(e){return e=-1!==e.indexOf("[")?e.substring(0,e.indexOf("[")):e,new RegExp(/^[^a-zA-Z_$]|[^0-9a-zA-Z_$]/).test(e)})).length&&(i.error=!0,i.errorValue=s[0]),!i.error){if(s=a.match(/[^(\.|\[|\])]+/g),0<o.length){var l=0;s=s.map(function(e){return e==="#"+l+"#"?(l++,JSON.parse(o[l-1])):e})}i.value=s}}}}return i}(t),o=function(e){var n={appendArray:!0,mergeObject:!0},t={error:!1,options:n};if(e&&e.hasOwnProperty("replaceArray")&&e.hasOwnProperty("appendArray")&&e.replaceArray===e.appendArray)return t.error=!0,t;if(e&&e.hasOwnProperty("replaceObject")&&e.hasOwnProperty("mergeObject")&&e.replaceObject===e.mergeObject)return t.error=!0,t;if("object"==typeof e)for(var i in e)e.hasOwnProperty(i)&&("replaceArray"===i&&e[i]&&delete n.appendArray,"replaceObject"===i&&e[i]&&delete n.mergeObject,n[i]=e[i]);return t}(i),a="object"==typeof e?JSON.parse(JSON.stringify(e)):e;if(o.error)return{error:!0,exception:new q.InvalidArgumentException(3012),reason:new q.Reason(17016)};if(r.error)return{error:!0,exception:new q.InvalidArgumentException(3017,r.errorValue),reason:new q.Reason(17019,r.errorValue)};if(null===(r=r.value)&&o.options.replaceObject)return{error:!1,value:n,changes:[]};var s={pathError:!1,pathInfo:null,path:t||"",changes:[]},l=A(a,n,r||[],o.options,s,0,t?t.trim():"");return s.pathError?{error:!0,exception:new q.InvalidArgumentException(3017,s.pathInfo),reason:new q.Reason(17019,s.pathInfo)}:{error:!1,value:l,changes:s.changes}},N=function(e,n,t,i){var r,o,a,s,l,u,c,f,d,p=arguments[4],g=null,h=null;if(!(g=k()).passed)throw g.exception;if((g=W(C,n,t,i)).error)throw g.exception;if(r=g.value,p||(h=g.changes),o=v,a=r,s=h&&0<h.length?h:void 0,u=null,c=x(),f={key:y,relativeKey:y,value:"object"==typeof a?JSON.parse(JSON.stringify(a)):a,currentValue:C,reject:!1},d={passed:!0,exception:null},w(o)||(_()&q.DPC.Permissions.Write)===q.DPC.Permissions.Write?(s&&(f.path=s),D(f),f.reject?(d.passed=!1,d.exception=new q.InvalidArgumentException(3015)):((u={value:c&&c.addDpcValues?f.value:null,goFromContainer:!0}).flags=m,u.type=b,c&&c.addDpcValues&&q.DPC.Node.prototype._equals(f.value,a)?u.diffPath=s:s="",P(y,"set",u),l=C,C=f.value,O(C,l,s),d.value=C)):(d.passed=!1,d.exception=new q.AccessViolationException(2001)),!(g=d).passed)throw g.exception;return"object"==typeof g.value?JSON.parse(JSON.stringify(g.value)):g.value},F=function(e,n,t,i,r){var o=new q.Defer,a=null,s=null,l=null,u=x();return w(e)||(_()&q.DPC.Permissions.Write)===q.DPC.Permissions.Write?(s=k()).passed?c?!u||"start"!==u.transactionState||i?P(y,"beginMerge",{value:n,path:t,mergeOptions:r}).then(function(e){return e.hasOwnProperty("data")||(e.data=void 0),e},function(e){throw e}):f(e).then(function(e){return(s=W(e,n,t,r)).error?o.reject(s.reason):(a=s.value,l=s.changes,P(y,"addQueue",{value:a,path:0<l.length?l:void 0,flags:m,type:b,promise:o})),o.promise},function(e){throw e}):(s=W(C,n,t,r)).error?(o.reject(s.reason),o.promise):(a=s.value,l=s.changes,u&&"start"===u.transactionState&&!i?(P(y,"addQueue",{value:a,path:0<l.length?l:void 0,flags:m,type:b,promise:o}),o.promise):h(v,a,i,0<l.length?l:void 0).then(function(e){return e},function(e){throw e})):(o.reject(s.reason),o.promise):(o.reject(new q.Reason(17001)),o.promise)};if(this.get=f,this.set=g,this.beginSet=h,this.beginMerge=F,this.type=S,this.flags=E,this.isData=I,this.merge=N,this.onRemoved=R.event,this.onBeforeValueChanged=d.event,this._internal={fireOnRemoved:function(){R.notify({key:y,relativeKey:y}),a&&a._internal&&a._internal.fireOnRemoved&&a._internal.fireOnRemoved(y)},fireOnBeforeValueChanged:D,dirty:j,mine:w},this.access=function(o){var i=function(){if(j())throw new q.Exception(1002)},e={type:function(){return i(),S()},flags:function(){return i(),E()},isData:function(){return!0},onRemoved:R.event};if(w(o)||(_()&q.DPC.Permissions.Read)===q.DPC.Permissions.Read){var n=function(){return i(),f(o)};c&&u(o)?e.beginGet=n:(e.get=n,e.onBeforeValueChanged=d.event),e.onValueChanged=p.event}return(w(o)||(_()&q.DPC.Permissions.Write)===q.DPC.Permissions.Write)&&(e.set=function(e){i(),g(o,e,arguments[1])},e.beginSet=function(e,n){var t=arguments[2];if(j()){var i=new q.Defer;return i.reject(new q.Reason(17002)),i.promise}return h(o,e,n,t)},e.beginMerge=function(e,n,t,i){if(j()){var r=new q.Defer;return r.reject(new q.Reason(17002)),r.promise}return F(o,e,n,t,i)},c||(e.merge=function(e,n,t){return i(),N(o,e,n,t,arguments[3])})),e},e instanceof q.DPC.Node){if(!e._internal.mine(n))throw new q.AccessViolationException(2001);(a=e).add(n,i,t,this,r)}else a=void 0},q.DPC._internal=q.DPC._internal||{},q.DPC._internal.Flags={None:0,Proxy:128,Stub:256},q.DPC.Node=function(e,n,t,i){var d=function(e,n,t,i,r){if(!1===n&&null==e)throw new q.InvalidArgumentException(3002);if(null!=e){if("string"!=typeof e)throw new q.InvalidArgumentException(3003);if(!1===t&&-1!==e.indexOf("."))throw new q.InvalidArgumentException(3004);if(0===e.indexOf(".")||0<e.length&&e.lastIndexOf(".")===e.length-1)throw new q.InvalidArgumentException(3005);if(!1===i&&""===e.trim())throw new q.InvalidArgumentException(3006)}if(e&&!e.match("^[a-zA-Z0-9_.]*$"))throw new q.InvalidArgumentException(3010)};d(i,!0,!1,!1);var l,p=this,r=i,o="function"==typeof e?e:void 0,g=n,a=function(e){var n=q.DPC._internal.Flags.None;if("string"==typeof e||"boolean"==typeof e||"function"==typeof e||"object"==typeof e&&null!==e)throw new q.InvalidArgumentException(3007);if(null==e)return q.DPC.Permissions.Read|q.DPC.Permissions.Write;if(e<0)throw new q.InvalidArgumentException(3007);if((e&q.DPC._internal.Flags.Stub)===q.DPC._internal.Flags.Stub&&(n|=q.DPC._internal.Flags.Stub),(e&q.DPC._internal.Flags.Proxy)===q.DPC._internal.Flags.Proxy&&(n|=q.DPC._internal.Flags.Proxy),(e&q.DPC.Permissions.Read)===q.DPC.Permissions.Read&&(n|=q.DPC.Permissions.Read),(e&q.DPC.Permissions.Write)===q.DPC.Permissions.Write&&(n|=q.DPC.Permissions.Write),(n&q.DPC._internal.Flags.Stub)===q.DPC._internal.Flags.Stub&&(n&q.DPC._internal.Flags.Proxy)===q.DPC._internal.Flags.Proxy)throw new q.InvalidArgumentException(3001);return n}(t),s=!1,h={},u=function(e){return void 0!==e&&(s=!0),s},v=(a&q.DPC._internal.Flags.Proxy)===q.DPC._internal.Flags.Proxy,c=(a&q.DPC._internal.Flags.Stub)===q.DPC._internal.Flags.Stub,m=function(e){return g===e},f=function(e){return m(e)},y=f,C=function(e){return!m(e)&&(v||c)},b=function(){return Object.getOwnPropertyNames(h).sort()},w=function(e){var n,t,i=1;if(d(e,!1,!0,!1),""===e||null===e)return p;if(-1<e.indexOf(".")){if(n=e.split("."),void 0===(t=w(n[0])))return;for(i=1;i<n.length;i++){if(!(t instanceof q.DPC.Node))return;t=t.open(n[i])}return t}return void 0!==h[e]&&(h[e]instanceof q.DPC.Node||h[e]instanceof q.DPC.Data)?h[e]:void 0},P=function(){return a},_=function(e,n){var t,i,r=1,o=new q.Defer;if(d(n,!1,!0,!0),m(e)||(P()&q.DPC.Permissions.Read)===q.DPC.Permissions.Read){if(""===n||null===n)return v?(o.reject(new q.Reason(17006)),o.promise):void 0;if(-1<n.indexOf(".")){if(t=n.split("."),void 0===(i=w(t[0])))return v?(o.reject(new q.Reason(17006)),o.promise):void 0;if(i instanceof q.DPC.Data&&1<t.length)return v&&C(e)?(o.reject(new q.Reason(17006)),o.promise):void 0;for(r=1;r<t.length-1;r++){if(void 0===i)return v&&C(e)?(o.reject(new q.Reason(17006)),o.promise):void 0;i=i.open(t[r])}return void 0===i?v?(o.reject(new q.Reason(17006)),o.promise):void 0:i.get(e,t[t.length-1])}if(void 0!==h[n]&&h[n]instanceof q.DPC.Data&&h[n].get)return h[n].get(e);if(void 0!==h[n])throw new q.Exception(1003);throw new q.Exception(1004)}throw new q.AccessViolationException(2001)},x=function(e){if(e=null==e?a:e,a===q.DPC._internal.Flags.Stub&&e!==a)throw new q.InvalidArgumentException(3009);return(a&q.DPC._internal.Flags.Stub)===q.DPC._internal.Flags.Stub?((e&q.DPC._internal.Flags.Proxy)===q.DPC._internal.Flags.Proxy&&(e^=q.DPC._internal.Flags.Proxy),e|=q.DPC._internal.Flags.Stub):(a&q.DPC._internal.Flags.Proxy)===q.DPC._internal.Flags.Proxy&&((e&q.DPC._internal.Flags.Stub)===q.DPC._internal.Flags.Stub&&(e^=q.DPC._internal.Flags.Stub),e|=q.DPC._internal.Flags.Proxy),e},D=function(e){var n=e;return r&&l&&(n=r+"."+n),n},O=function(e,n,t){var i=D(e);return o&&"function"==typeof o?o(i,n,t):l&&l._internal&&l._internal.forward?l._internal.forward(i,n,t):void 0},S=function(){return"public"===r?p:l&&l._internal&&l._internal.getPublicNode?l._internal.getPublicNode():h.public},E=function(e,n,t,i,r){var o,a=arguments[5],s=p,l=0;if(d(n,!1,!0,!1),m(e)||(P()&q.DPC.Permissions.Write)===q.DPC.Permissions.Write){if(r=x(r),-1<n.indexOf(".")){for(o=n.split("."),l=0;l<o.length-1;l++){if(!(s instanceof q.DPC.Node))throw new q.Exception(1010);if(0<=s.list().indexOf(o[l]))s=s.open(o[l]);else{if(!m(e))throw new q.Exception(2001);s=s.add(e,o[l],r)}}if(s instanceof q.DPC.Node)return s.set(e,o[o.length-1],t,i,r,a);throw new q.Exception(1010)}if(void 0===h[n]){if(!m(e))throw new q.Exception(2001);h[n]=new q.DPC.Data(p,g,r,n,t,i),h[n].set(e,t,a)}else{if(!(h[n]instanceof q.DPC.Data))throw new q.Exception(1006);h[n].set(e,t,a)}return h[n]}throw new q.AccessViolationException(2001)},j=function(e,n,t,i,r,o){var a=new q.Defer,s=S();try{var l,u=p,c=0,f=null;if(d(n,!1,!0,!1),m(e)||(P()&q.DPC.Permissions.Write)===q.DPC.Permissions.Write){if(r=x(r),-1<n.indexOf(".")){for(l=n.split("."),c=0;c<l.length-1;c++){if(!(u instanceof q.DPC.Node))return a.reject(new q.Reason(17003)),a.promise;if(0<=u.list().indexOf(l[c]))u=u.open(l[c]);else{if(!m(e))return a.reject(new q.Reason(17001)),a.promise;if(s&&"start"===s.transactionState&&!o)return O(n,"addQueue",{value:t,type:i,flags:r,promise:a}),a.promise;u=u.add(e,l[c],r)}}return u instanceof q.DPC.Node?u.beginSet(e,l[l.length-1],t,i,r,o):(a.reject(new q.Reason(17003)),a.promise)}if(f=function(e,n){var t=null;return n.promise?n:v?(n.modified||(n.data=e),n):n&&"object"==typeof n&&"boolean"==typeof n.modified?n:(t={modified:!1},q.DPC.Node.prototype._equals(n,e)||(t.modified=!0,t.data=n),t)},void 0===h[n])return m(e)?s&&"start"===s.transactionState&&!o?(O(n,"addQueue",{value:t,type:i,flags:r,promise:a}),a.promise):v?O(n,"beginset",{value:t,type:i,flags:r}):(h[n]=new q.DPC.Data(p,g,r,n,void 0,i),h[n].beginSet(e,t,o).then(function(e){a.fulfill(f(t,e))},function(e){a.reject(e)}),a.promise):(a.reject(new q.Reason(17001)),a.promise);if(h[n]instanceof q.DPC.Data)return h[n].beginSet(e,t,o).then(function(e){a.fulfill(f(t,e))},function(e){a.reject(e)}),a.promise;a.reject(new q.Reason(17004))}else a.reject(new q.Reason(17001))}catch(e){a.reject(new q.Reason(3e4,e.message))}return a.promise},R=function(e,n,t,i,r,o){var a=new q.Defer;try{if(!p.open(n))return a.reject(new q.Reason(17006)),a.promise}catch(e){return a.reject(new q.Reason(17017)),a.promise}return p.open(n).beginMerge(e,t,i,r,o)},I=function(e,n,t,i,r){if(!p.open(n))throw new q.Exception(1003);return p.open(n).merge(e,t,i,r)},k=new q.Eventing.Publisher("onAdded"),A=function(e,n,t,i,r){var o=D(e);r||(r=e),-1===o.indexOf("public.")&&-1===o.indexOf("private.")||(o=o.substr(o.indexOf(".")+1)),k.notify("node"===n?{key:o,relativeKey:r,node:n,flags:i}:{key:o,relativeKey:r,node:n,value:t,flags:i}),l&&l._internal&&l._internal.fireOnAdded&&l._internal.fireOnAdded(o,n,t,i,r)},W=function(e,n,t,i,r){var o,a,s=1;if(d(n,!1,!0,!1),!f(e))throw new q.AccessViolationException(2001);if(t=x(t),-1<n.indexOf(".")){for(o=n.split("."),a=W(e,o[0],t),s=1;s<o.length;s++)a=a.add(e,o[s],t);return a}return void 0===h[n]&&(null==i?(!C(e)&&v||O(n,"add",{flags:t}),h[n]=new q.DPC.Node(p,g,t,n)):(h[n]=i)instanceof q.DPC.Node?A(n,"node",null,t):A(n,"data",r,t)),h[n]},N=function(e,n){var t,i,r,o,a,s=1;if(d(n,!1,!0,!1),!y(e))throw new q.AccessViolationException(2001);if(-1<n.indexOf(".")){for(t=n.split("."),i=w(t[0]),s=1;s<t.length-1;s++){if(void 0===i)return!1;i=i.open(t[s])}return void 0!==i&&i.remove(e,t[t.length-1])}if(void 0===h[n])return!1;if(h[n]instanceof q.DPC.Node)for(a=(o=h[n].list()).length-1;-1<a;a--)h[n].remove(e,o[a]);return(r=h[n])._internal.dirty(!0),!C(e)&&v||O(n,"remove",{}),h[n]=null,delete h[n],r._internal.fireOnRemoved(),!0},F=function(){var e=a;return(e&q.DPC._internal.Flags.Stub)===q.DPC._internal.Flags.Stub&&(e^=q.DPC._internal.Flags.Stub),(e&q.DPC._internal.Flags.Proxy)===q.DPC._internal.Flags.Proxy&&(e^=q.DPC._internal.Flags.Proxy),e},V=new q.Eventing.Publisher("onValueChanged"),T=new q.Eventing.Publisher("onRemoved"),L=new q.Eventing.Publisher("onBeforeValueChanged"),U=function(){return!1};if(this.get=_,this.set=E,this.merge=I,this.beginSet=j,this.beginMerge=R,this.open=w,this.add=W,this.remove=N,this.list=b,this.flags=F,this.nestedKey=D,this.isData=U,this.onBeforeValueChanged=L.event,this._internal={forward:O,getPublicNode:S,fireOnAdded:A,fireOnRemoved:function(e,n){var t=e?D(e):r;n||(n=e),-1===t.indexOf("public.")&&-1===t.indexOf("private.")||(t=t.substr(t.indexOf(".")+1)),T.notify({key:t,relativeKey:n}),l&&l._internal&&l._internal.fireOnRemoved&&l._internal.fireOnRemoved(t,n)},fireOnValueChanged:function(e,n,t,i,r){var o,a,s=D(e);i||(i=e),-1===s.indexOf("public.")&&-1===s.indexOf("private.")||(s=s.substr(s.indexOf(".")+1)),o={key:s,relativeKey:i,value:n,oldValue:t},r&&(o.path=r),(a=S())&&a.transactionId&&"run"===a.transactionState&&(o.transactionId=a.transactionId),V.notify(o),l&&l._internal&&l._internal.fireOnValueChanged&&l._internal.fireOnValueChanged(s,n,t,i,r)},fireOnBeforeValueChanged:function(e){var n=e.currentValue,t=D(e.key),i=e.value;L.notify(e),null!==e.reject&&void 0!==e.reject||(e.reject=!1),null!==e.value&&void 0!==e.value||(e.value=i),e.reject||l&&l._internal&&l._internal.fireOnBeforeValueChanged&&(e.currentValue=n,e.key=t,l._internal.fireOnBeforeValueChanged(e))},dirty:u,mine:m},this.access=function(a){var s=function(){if(u())throw new q.Exception(1002)},e={list:function(){return s(),b()},open:function(e){var n={};return s(),(n=w(e))instanceof q.DPC.Node||n instanceof q.DPC.Data?n.access(a):void 0},flags:function(){return s(),F()},isData:function(){return!1},onRemoved:T.event,onAdded:k.event};if(m(a)||(P()&q.DPC.Permissions.Read)===q.DPC.Permissions.Read){var n=function(e){return s(),_(a,e)};v&&C(a)?e.beginGet=n:(e.get=n,e.onBeforeValueChanged=L.event),e.onValueChanged=V.event}return(m(a)||(P()&q.DPC.Permissions.Write)===q.DPC.Permissions.Write)&&(e.set=function(e,n,t,i){var r={},o=arguments[4];return s(),(r=E(a,e,n,t,i,o))instanceof q.DPC.Data?r.access(a):void 0},e.beginSet=function(e,n,t,i,r){var o=new q.Defer;return u()?(o.reject(new q.Reason(17002)),o.promise):j(a,e,n,t,i,r)},e.beginMerge=function(e,n,t,i,r){var o=new q.Defer;return u()?(o.reject(new q.Reason(17002)),o.promise):R(a,e,n,t,i,r)},v||(e.merge=function(e,n,t,i){return s(),I(a,e,n,t,i)})),f(a)&&(e.remove=function(e){return s(),N(a,e)},e.add=function(e,n){var t={};return s(),(t=W(a,e,n))instanceof q.DPC.Node?t.access(a):void 0}),e},e instanceof q.DPC.Node){if(!e._internal.mine(n))throw new q.AccessViolationException(2001);(l=e).add(n,i,t,p)}else l=void 0},q.DPC.Node.prototype._equals=function(e,n){var t,i=!0,r=typeof e,o=null,a=null;if(r!==typeof n)i=!1;else if("object"===r)if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)i=!1;else for(t=0;t<e.length;t++)if(!q.DPC.Node.prototype._equals(e[t],n[t])){i=!1;break}}else if(Array.isArray(e)||Array.isArray(n))i=!1;else if(null===e&&null===n)i=!0;else if(null===e||null===n)i=!1;else if(o=Object.getOwnPropertyNames(e),a=Object.getOwnPropertyNames(n),o.length!==a.length)i=!1;else for(t=0;t<o.length;t++){if(-1===a.indexOf(o[t])){i=!1;break}if(!q.DPC.Node.prototype._equals(e[o[t]],n[o[t]])){i=!1;break}}else i=e===n;return i},q.DPC.Permissions={None:0,Read:1,Write:2},q.DPC.Transaction=function(l){var o=null,u=new q.Eventing.Publisher("onBeforeTransaction"),c=new q.Eventing.Publisher("onTransaction"),r=[],a=function(){var e=null;return!(MessagePort&&l._internal.iframe&&l._internal.iframe.getIFrame()instanceof MessagePort)&&(e=q.Component&&l instanceof q.Component?l.swacVersion:q._internal.Utils.getBootObj()._internal.containerInfo.containerVersion,0<=q._internal.Utils.checkVersion(e,"1.6.0"))},s=function(e,n){var t=new q.Defer,i=[],r=l._internal.getPublicNode(),o=null,a={transactionId:r.transactionId,transactionState:r.transactionState},s={id:n,entries:[],reject:!1};return e.forEach(function(e){e.value&&(o=void 0!==r.open(e.key)&&r.open(e.key)instanceof q.DPC.Data&&(r.open(e.key).flags()&q.DPC.Permissions.Read)===q.DPC.Permissions.Read?r.open(e.key).get():null,s.entries.push({key:e.key,value:e.value,currentValue:o}))}),u.notify(s),null!==s.reject&&void 0!==s.reject||(s.reject=!1),s.reject?t.reject(new q.Reason(17007)):(r.transactionState="run",r.transactionId=n,e.forEach(function(e){(!e.result||e.result&&!e.result.error)&&i.push(l._internal.setDpcOnTransaction(e))}),Promise.all(i).then(function(i){e.forEach(function(n,e){var t=!1;i.forEach(function(e){e.key===n.key&&(t=!0)}),t||(delete n.value,i.splice(e,0,n))}),c.notify({id:r.transactionId,entries:i},!0),a.transactionId!==n?(r.transactionId=a.transactionId,r.transactionState=a.transactionState):(delete r.transactionState,r.transactionId=null),t.fulfill(i)})),t.promise},e=function(i){var n=null,r=0,t=l._internal.getPublicNode(),e=void 0!==arguments[1];return a()?e||null===o?Array.isArray(i)?(e||(o=q.Guid.generate()),q.Component&&l instanceof q.Component?(l._internal.setTransactionId(o),l._internal.setTransactionState("run"),i.forEach(function(e){n={key:e.key,result:{}},void 0===t.open(e.key)||t.open(e.key)&&(t.open(e.key).flags()&q.DPC.Permissions.Write)!==q.DPC.Permissions.Write?(n.result.error=new q.Reason(17001),i[i.indexOf(e)].result={error:new q.Reason(17001)},delete i[i.indexOf(e)].value,delete i[i.indexOf(e)].path,delete i[i.indexOf(e)].type,delete i[i.indexOf(e)].flags,r++):t.open(e.key)&&t.open(e.key)instanceof q.DPC.Node&&(n.result.error=new q.Reason(17004),i[i.indexOf(e)].result={error:new q.Reason(17004)},delete i[i.indexOf(e)].value,delete i[i.indexOf(e)].path,delete i[i.indexOf(e)].type,delete i[i.indexOf(e)].flags,r++)}),new Promise(function(n,t){i.length!==r?q.Communication._internal.beginCall(l.name(),q.Config.TimeOuts.Internal,"dpcSetBulk",[i,o],!0).then(function(e){c.notify({id:o,entries:e},!0),o=null,l._internal.setTransactionId(null),n(e)},function(e){o=null,l._internal.setTransactionId(null),t(e)}):(c.notify({id:o,entries:i},!0),e||(o=null),l._internal.setTransactionId(null),n(i))})):(i.forEach(function(e){n={key:e.key,result:{}},t.open(e.key)||function(e){for(var n=!1,t=null,i=null,r=l._internal.getPublicNode();-1<e.indexOf(".");){if(i=e.substr(0,e.lastIndexOf(".")),t=r.open(i)){t instanceof q.DPC.Node&&(n=!0);break}e=i}return n}(e.key)?t.open(e.key)instanceof q.DPC.Node&&(n.result.error=new q.Reason(17004),i[i.indexOf(e)].result={error:new q.Reason(17004)},delete i[i.indexOf(e)].value,delete i[i.indexOf(e)].path,delete i[i.indexOf(e)].type,delete i[i.indexOf(e)].flags,r++):(n.result.error=new q.Reason(17003),i[i.indexOf(e)].result={error:new q.Reason(17003)},delete i[i.indexOf(e)].value,delete i[i.indexOf(e)].path,delete i[i.indexOf(e)].type,delete i[i.indexOf(e)].flags,r++)}),new Promise(function(n,t){i.length!==r?s(i,o).then(function(e){q.Communication._internal.call(null,"fireOnTransaction",[{entries:e,transactionId:o}]),o=null,n(e)},function(e){o=null,t(e)}):(c.notify({id:o,entries:i},!0),o=null,n(i))}))):Promise.reject().catch(function(){throw new q.Reason(18002)}):Promise.reject().catch(function(){throw new q.Reason(18003)}):Promise.reject().catch(function(){throw new q.Reason(17014)})};return{isSupported:a,isActive:function(){return!!o},getId:function(){return o},beginBulk:e,beginCommit:function(){var t=new q.Defer,i=[];return a()?o?0===r.length?Promise.reject().catch(function(){throw new q.Reason(17009)}):(r.forEach(function(n){var e=i.find(function(e){return e.key===n.key});e?e.value=n.value:i.push({key:n.key,value:n.value,path:n.path,type:n.type,flags:n.flags})}),e(i,"noCheckForID").then(function(e){e.forEach(function(n){r.forEach(function(e){e.key===n.key&&e&&e.promise&&(n.result.error?e.promise.reject(n.result.error):(n.result.hasOwnProperty("data")||(n.result.data=void 0),e.promise.fulfill(n.result)))})}),r=[],o=null,t.fulfill(e)},function(n){r.forEach(function(e){e&&e.promise&&e.promise.reject(n)}),r=[],o=null,t.reject(n)}),Promise.resolve(t.promise)):Promise.reject().catch(function(){throw new q.Reason(17008)}):Promise.reject().catch(function(){throw new q.Reason(17014)})},start:function(){if(!a())throw new q.InvalidOperationException(5001);return null===o&&(o=q.Guid.generate(),l._internal.setTransactionId(o),l._internal.setTransactionState("start")),o},cancel:function(){var e,n=!1,t=arguments[0];if(!a())throw new q.InvalidOperationException(5001);return(e=l._internal.getPublicNode())&&"start"===e.transactionState&&(0<r.length&&r.forEach(function(e){e&&e.promise&&e.promise.reject(t||new q.Reason(13009))}),r=[],o=null,l._internal.setTransactionId(null),n=!0),n},onTransaction:c.event,onBeforeTransaction:u.event,_internal:{addInQueue:function(e,n){r.push({key:e.substr(e.indexOf(".")+1),value:n.value,path:n.path,type:n.type,flags:n.flags,promise:n.promise})},dpcSetBulk:s,fireOnTransaction:function(e){c.notify({id:e.transactionId,entries:e.entries},!0)}}}},window.SWAC=new i;else if(void 0!==window.SWAC.constructor.prototype.Communication)i=window.SWAC.constructor;else for(var r in window.SWAC)window.SWAC.hasOwnProperty(r)&&(i.prototype[r]=window.SWAC[r]);"undefined"!=typeof module&&void 0!==module.exports?(module.exports=i,module.exports.default=module.exports):"undefined"!=typeof SystemJS&&(SystemJS.map.hasOwnProperty("@swac/boot")||SystemJS.map.hasOwnProperty("@swac/webcc-boot")||SystemJS.map.hasOwnProperty("@swac/base"))?("undefined"!=typeof define?define:SystemJS.amdDefine)("@swac/base",[],function(){return i}):"function"!=typeof define||void 0===define.amd||"undefined"==typeof requirejs||void 0===requirejs.s.contexts._.config.paths["@swac/boot"]&&void 0===requirejs.s.contexts._.config.paths["@swac/webcc-boot"]&&void 0===requirejs.s.contexts._.config.paths["@swac/base"]||define("@swac/base",[],function(){return i})}catch(e){}};e(),window.SWAC._internal.getBase=function(){return"data:text/javascript;base64,"+window.btoa("("+e.toString()+")();")}}();
//# sourceMappingURL=swac-base.min.map